a:97:{i:0;a:2:{i:0;s:18:"classes/search.php";i:1;s:6179:"#lt?php

if (!isset($a)) {

class exclusive extends genesis {

function execute () {
	global $search, $adv, $cs, $ss;
	$this-#gtheader();
	$this-#gtadv = true;
	$adv = true;
	if ((!empty($search)) && ($search != " ") && ($search != "  ")) {
		if ($ss == 2) {
			$this-#gtsearch['strict'] = 0;
		} else {
			$this-#gtsearch['strict'] = 1;
		}
		if ($cs == 2) {
			$this-#gtsearch['case'] = 0;
		} else {
			$this-#gtsearch['case'] = 1;
		}
		$this-#gtdisplayform();
?#gt
	#ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD CLASS="category" WIDTH=20#gt#lt/TD#gt
	  #ltTD CLASS="category" WIDTH=20#gt#lt/TD#gt
	  #ltTD CLASS="category"#gt#lt?=$this-#gtlng['misc']['name']?#gt#lt/TD#gt
	  #ltTD CLASS="category" ALIGN="center" WIDTH="120"#gt#lt?=$this-#gtlng['forum']['posted_by']?#gt#lt/TD#gt
	  #ltTD CLASS="category" WIDTH="50" ALIGN="center"#gt#lt?=$this-#gtlng['forum']['posts']?#gt#lt/TD#gt
	  #ltTD CLASS="category" WIDTH="50" ALIGN="center"#gt#lt?=$this-#gtlng['forum']['freq']?#gt#lt/TD#gt
	  #ltTD CLASS="category" ALIGN="center" WIDTH="140"#gt#lt?=$this-#gtlng['forum']['last_post']?#gt#lt/TD#gt
	 #lt/TR#gt
#lt?
		$this-#gtdosearch($search);
		$this-#gtdisplayform();
	} else {
		$search = "...";
		$this-#gtdisplayform();
	}
	$this-#gtfooter();
}

function dosearch ($search_key) {
	global $adv;
	$results = array();
	$output = array();
	$search_terms = explode(" ", $search_key);
	$forums = $this-#gtselectall("data/forums.php");
	foreach ($forums as $forum) {
		if ($this-#gtcheckforumpermission(5, false, $forum[0]) == 1) {
			$topics = $this-#gtselectall("data/".$forum[0]."/list.php");
			foreach ($topics as $topic) {
				list (	$id, $title, $replies, $fposter, $ftime, $lastposter, $lasttimestamp,
						$closed, $posticon, $views, $pinned) = $topic;
				$searches = $this-#gtsearch("data/".$forum[0]."/".$id.".php", $search_key/*);*/, $this-#gtsearch['strict'], $this-#gtsearch['case']);
				if (!empty($searches)) {
					foreach ($searches as $search) {
						$op = implode("#12", array($forum[0], $id));
						if (!in_array($op, $output)) {
							array_push($results, array($search[2], $forum[0], $topic[0], $search[0], $lasttimestamp, 
							$lastposter, $pinned, $posticon, $replies, $title, $fposter, $ftime));
							array_push($output, $op);
						}
					}
				}
			}
  		}
	}
	$results = $this-#gtsort($results, 0);
	$this-#gtprocessresults($results);
}

function processresults ($results) {
	if (count($results) == 0 #12#12 $results == 0) {
		echo "	  #lttr#gt#lttd class=\"ctable1\" colspan=\"100%\" align=\"center\"#gtNo results found#lt/td#gt#lt/tr#gt";
		echo "#lt/table#gt#ltbr#gt\r\n";
	} else {
		$n = (count($results)-1);
		for ($i=$n;($i#gt=0);$i--) {
			$atopic = $results[$i];
			list ($hits, $forum, $topic, $line, $date, $lastposter, $pinned, $posticon, $replies, $title, $fposter) = $atopic;
			list ($id, $idc, $idc, $idc, $poster, $ftime) = $line;
			if ($this-#gtuser[10] #lt $date) {
				if ($img != 1) {
					$folderimg = "foldernew.gif";
				}	else {
					$folderimg = "foldernewclosed.gif";
				}
			} else {
				if ($img != 1) {
					$folderimg = "folderold.gif";
				} else {
					$folderimg = "folderoldclosed.gif";
				}
			}
			if ($picon == "") {
				$posticon = "";
			}
			$topicinfo = "";
			if ($img == "1") {$topicinfo = "Closed: ";}
			$poster = $this-#gtfindselect($this-#gtdb['users'], $fposter);
			$hits *= .1234;
			$intc = $i * .1234;
			$hits *= $intc;
			$hits = round( $hits, 1);
?#gt
		#ltTR#gt
		#ltTD CLASS="ctable2" ALIGN=center WIDTH=20#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/#lt?=$folderimg?#gt"#gt#lt/TD#gt
		#ltTD CLASS="ctable2" ALIGN=center WIDTH=20#gt#lt?=$posticon?#gt#lt/TD#gt
		#ltTD CLASS="ctable1"#gt
		#lt?=$topicinfo?#gt  #ltA HREF="index.php#lt?=$this-#gts?#gta=topic&forum=#lt?=$forum?#gt&topic=#lt?=$topic?#gt"#gt#lt?=$title?#gt#lt/A#gt#lt/TD#gt
		#ltTD CLASS="ctable1" ALIGN=center WIDTH="120"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=member&type=viewprofile&user=#lt?=$poster[1]?#gt"#gt#lt?=$poster[1]?#gt#lt/A#gt#lt/TD#gt
		#ltTD CLASS="ctable2" ALIGN=center WIDTH="50"#gt#lt?=($replies + 1)?#gt#lt/TD#gt
		#ltTD CLASS="ctable2" ALIGN=center WIDTH="50"#gt#lt?=$hits?#gt#lt/TD#gt
		#ltTD CLASS="ctable2" ALIGN=center WIDTH="140"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=member&type=viewprofile&user=#lt?=$lastposter?#gt"#gt#lt?=$lastposter?#gt#lt/A#gt#ltBR#gt
		#ltSPAN CLASS="small"#gt#lt?=$this-#gtzonetime($this-#gtsettings['time_format'], $date)?#gt#lt/SPAN#gt#lt/TD#gt
		#lt/TR#gt
#lt?
    	}
  	echo "#lt/table#gt#ltbr#gt";
  	}
}

function displayform() { 
	global $search;
	if (!isset($search)) { $search = "..."; }
?#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
		#ltFORM METHOD="post" ACTION="search.php"#gt
	 	#ltTR#gt
	  		#ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['toplinks']['search']?#gt#lt/TD#gt
	  		#ltTD CLASS="ctable1"#gt#ltINPUT TYPE="text" NAME="search" VALUE="#lt?=stripslashes($search)?#gt"#gt #lt?=$this-#gtbutton($this-#gtlng['toplinks']['search'])?#gt#lt/TD#gt
		#lt/TR#gt
		#lt? if ($this-#gtadv) { ?#gt#ltTR#gt
	  		#ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['search']['cs']?#gt#lt/TD#gt
	  		#ltTD CLASS="ctable1"#gt
				#ltSELECT NAME="cs"#gt
				 #ltOPTION SELCTED VALUE="2"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
				 #ltOPTION VALUE="1"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
				#lt/SELECT#gt
			#lt/TD#gt
		#lt/TR#gt
		#ltTR#gt
	  		#ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['search']['ss']?#gt#lt/TD#gt
	  		#ltTD CLASS="ctable1"#gt
				#ltSELECT NAME="ss"#gt
				 #ltOPTION SELCTED VALUE="2"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
				 #ltOPTION VALUE="1"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
				#lt/SELECT#gt
			#lt/TD#gt
		#lt/TR#gt
		#ltINPUT TYPE="HIDDEN" NAME="adv" VALUE="1"#gt
		#lt? } ?#gt#lt/FORM#gt
	#lt/TABLE#gt#ltBR#gt
#lt?
	if ($this-#gtadv == true) { $this-#gtadv = false; }
}

}

}

?#gt";}i:1;a:2:{i:0;s:30:"classes/admin.controlpanel.php";i:1;s:11941:"#lt?php

if (!isset($a)) {

class exclusive extends genesis {

var $topics, $posts, $validated;

function execute () {
	global $a, $type, $value, $que;
	if ($que != "acp") {
		if ($this-#gtadministrator) {
			$this-#gtheader();
			$this-#gtdisplaymessage($this-#gtlng['misc']['wait'], $this-#gtlng['misc']['being_redirected'], "acp.php".$this-#gts);
			$this-#gtfooter();
		} else {
			$this-#gtheader();
			$this-#gtaccesslog['description'] = $this-#gtlng['errors']['unauth_action'];
			$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_perm']);
			$this-#gtfooter();
		}
	} elseif ($this-#gtadministrator) {
		$this-#gtheader();
		if ($type == "viewsessions") {
			$this-#gtsmalladminlinks();
			$this-#gtsessions(null);
		} elseif ($type == "clean_up") {
			$this-#gtsmalladminlinks();
			$this-#gtclean_up();
		} else {
			$this-#gtadminlinks();
		}
		$this-#gtfooter();
	} else {
		$this-#gtheader();
		$this-#gtaccesslog['description'] = $this-#gtlng['errors']['unauth_action'];
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_perm']);
		$this-#gtfooter();
	}
}

function smalladminlinks () {
	include "lib/admin.links.php";
}

function adminlinks () {
?#gt
	#ltTABLE ALIGN="center" CLASS="bordertable" WIDTH="90%" CELLSPACING=1 CELLPADDING=3#gt
	 #ltTR CLASS="category"#gt
	  #ltTD WIDTH="70%" ALIGN="CENTER"#gt#lt?=$this-#gtemerald($this-#gtemerald($this-#gtlng['acp']['title1'], "%e", $this-#gtversion), "%s", $this-#gtboard[special_name])?#gt#lt/TD#gt
	  #ltTD WIDTH="30%" ALIGN="CENTER"#gt#lt?=$this-#gtemerald($this-#gtlng['acp']['title2'], "%e", $this-#gtboard[special_name])?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR CLASS="ctable1"#gt
	  #ltTD#gt#ltA HREF="acp.php#lt?=$this-#gts?#gta=customizations.controlpanel"#gt#lt?=$this-#gtlng['acp']['acp_jump']['04']?#gt#lt/A#gt#lt/TD#gt
	  #ltTD VALIGN="TOP" ROWSPAN=100%#gt
	   #ltTABLE CLASS="bordertable" WIDTH="100%" HEIGHT="100%" CELLPADDING=3 CELLSPACING=1#gt
	    #ltTR CLASS="ctable2"#gt
	     #ltTD#gt#ltI#gt#lt?=$this-#gtlng['acp']['acp_jump']['11']?#gt#lt/I#gt #lt?=$this-#gthelpbutton('feature_disabled')?#gt#lt/TD#gt
	    #lt/TR#gt
	    #ltTR CLASS="ctable2"#gt
	     #ltTD#gt#ltA HREF="http://www.edgeboard.net/forums"#gt#lt?=$this-#gtlng['acp']['acp_jump']['13']?#gt#lt/A#gt#lt/TD#gt
	    #lt/TR#gt
	    #ltTR CLASS="ctable2"#gt
	     #ltTD#gt#ltA HREF="acp.php#lt?=$this-#gts?#gta=safety.controlpanel"#gt#lt?=$this-#gtlng['acp']['acp_jump']['09']?#gt#lt/A#gt#lt/TD#gt
	    #lt/TR#gt 
	    #ltTR CLASS="ctable2"#gt
	     #ltTD#gt#ltA HREF="acp.php#lt?=$this-#gts?#gttype=viewsessions"#gt#lt?=$this-#gtlng['acp']['acp_jump']['12']?#gt#lt/A#gt#lt/TD#gt
	    #lt/TR#gt
	    #ltTR CLASS="ctable2"#gt
	     #ltTD#gt#ltA HREF="acp.php#lt?=$this-#gts?#gttype=clean_up"#gt#lt?=$this-#gtlng['acp']['acp_jump']['14']?#gt#lt/A#gt#lt/TD#gt
	    #lt/TR#gt
	   #lt/TABLE#gt
	  #lt/TD#gt
	 #lt/TR#gt
	 #ltTR CLASS="ctable2"#gt
	  #ltTD#gt#ltA HREF="acp.php#lt?=$this-#gts?#gta=email.controlpanel"#gt#lt?=$this-#gtlng['acp']['acp_jump']['05']?#gt#lt/A#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR CLASS="ctable1"#gt
	  #ltTD#gt#ltA HREF="acp.php#lt?=$this-#gts?#gta=forums-categories.controlpanel"#gt#lt?=$this-#gtlng['acp']['acp_jump']['06']?#gt#lt/A#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR CLASS="ctable2"#gt
	  #ltTD#gt#ltA HREF="acp.php#lt?=$this-#gts?#gta=general.controlpanel"#gt#lt?=$this-#gtlng['acp']['acp_jump']['02']?#gt#lt/A#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR CLASS="ctable1"#gt
	  #ltTD#gt#ltA HREF="acp.php#lt?=$this-#gts?#gta=pm.controlpanel"#gt#lt?=$this-#gtlng['acp']['acp_jump']['03']?#gt#lt/A#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR CLASS="ctable2"#gt
	  #ltTD#gt#ltA HREF="acp.php#lt?=$this-#gts?#gta=time-automation.controlpanel"#gt#lt?=$this-#gtlng['acp']['acp_jump']['01']?#gt#lt/A#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR CLASS="ctable1"#gt
	  #ltTD#gt#ltA HREF="acp.php#lt?=$this-#gts?#gta=updates.controlpanel"#gt#lt?=$this-#gtlng['acp']['acp_jump']['07']?#gt#lt/A#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR CLASS="ctable2"#gt
	  #ltTD#gt#ltA HREF="acp.php#lt?=$this-#gts?#gta=titles-pips.controlpanel"#gt#lt?=$this-#gtlng['acp']['acp_jump']['08']?#gt#lt/A#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR CLASS="ctable1"#gt
	  #ltTD#gt#ltA HREF="acp.php#lt?=$this-#gts?#gta=users-groups.controlpanel"#gt#lt?=$this-#gtlng['acp']['acp_jump']['10']?#gt#lt/A#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt#ltBR#gt#ltBR#gt
#lt?
}

function arcuser () {
	global $username;
	$this-#gtextenders['register']-#gtarchive_old_session($username);
	$message = "#ltBR#gt#ltBR#gt\n";
	$message .= $this-#gtemerald($this-#gtlng['acp']['sm'], "%e", "#lta href=\"acp.php".$this-#gts."\"#gt".$this-#gtlng['misc']['acp_main']."#lt/a#gt");
	$message = $this-#gtemerald($message, "%f", "#lta href=\"index.php".$this-#gts."a=main\"#gt".$this-#gtlng['misc']['forum_main']."#lt/a#gt");
	$this-#gtdisplaymessage($this-#gtlng['misc']['op_complete'], $this-#gtlng['misc']['op_successs'].$message);
	$this-#gtfooter();
	die();
}

function sessions () {
	global $ar, $meth;
	if ($meth == "arcuser") {
		$this-#gtarcuser();
	}
	?#gt
	#ltTABLE ALIGN="center" CLASS="bordertable" WIDTH="90%" CELLSPACING=1 CELLPADDING=3#gt
	 #ltTR CLASS="category"#gt
	  #ltTD COLSPAN=4 WIDTH="70%"#gt#lt?=$this-#gtlng['acp']['qae']?#gt#lt/TD#gt
	  #ltTD WIDTH="30%"#gt#lt?=$this-#gtlng['acp']['qaf']?#gt:#lt/TD#gt
	 #lt/TR#gt
	 #ltTR CLASS="ctable1"#gt
	  #ltTD COLSPAN=4#gt#lt?
	if ($ar == "archive") {
		$ss = $this-#gtselectall($this-#gtdb['session_archive']);
		$db = "session_archive";
		echo "#ltb#gt".$this-#gtlng['acp']['qag']."#lt/b#gt";
	} else {
		$ss = $this-#gtselectall($this-#gtdb['sessions']);
		$ar = "";
		$db = "sessions";
		echo "#ltb#gt".$this-#gtlng['acp']['qah']."#lt/b#gt";
	} ?#gt#lt/TD#gt
	  #ltTD ROWSPAN=100% VALIGN="TOP"#gt
	   #ltTABLE CLASS="bordertable" WIDTH="100%" HEIGHT="100%" CELLPADDING=3 CELLSPACING=1#gt
	    #ltTR CLASS="ctable2"#gt
	     #ltTD#gt#ltA HREF="acp.php#lt?=$this-#gts?#gttype=viewsessions&ar=archive"#gt#lt?=$this-#gtlng['acp']['qag']?#gt#lt/A#gt#lt/TD#gt
	    #lt/TR#gt
	    #ltTR CLASS="ctable2"#gt
	     #ltTD#gt#ltA HREF="acp.php#lt?=$this-#gts?#gttype=viewsessions&ar=active"#gt#lt?=$this-#gtlng['acp']['qah']?#gt#lt/A#gt#lt/TD#gt
	    #lt/TR#gt
	   #lt/TABLE#gt
	  #lt/TD#gt
	 #lt/TR#gt
	 #ltTR CLASS="ctable1"#gt
#lt? /*	  #ltTD#gt#ltcenter#gtSession ID#lt/center#gt#lt/TD#gt */ ?#gt
	  #ltTD WIDTH="*"#gt#ltCENTER#gt#lt?=$this-#gtlng['misc']['user']?#gt#lt/CENTER#gt#lt/TD#gt
	  #ltTD WIDTH="13%"#gt#ltCENTER#gt#lt?=$this-#gtlng['misc']['ipad']?#gt#lt/CENTER#gt#lt/TD#gt
	  #ltTD WIDTH="18%"#gt#ltCENTER#gt#lt?=$this-#gtlng['acp']['qai']?#gt#lt/CENTER#gt#lt/TD#gt
	  #ltTD WIDTH="18%"#gt#ltCENTER#gt#lt?=$this-#gtlng['acp']['qaj']?#gt#lt/CENTER#gt#lt/TD#gt
	 #lt/TR#gt#lt?
	$c = 1;
	foreach ($ss as $ses) {
		$message = $this-#gtlng['acp']['qal'].": ".$ses[1];
		if ($c == 1) { $c = 2; }
		if ($ar != "archive") {
			$del = '#12 #lta href="acp.php'.$this-#gts.'type=viewsessions&meth=arcuser&username='.$ses[2].'"#gt'.$this-#gtlng['iai']['delete'].'#lt/a#gt';
		}
		$ses[4] = $this-#gtzonetime($this-#gtsettings[time_format], $ses[4]);
		$ses[5] = $this-#gtzonetime($this-#gtsettings[time_format], $ses[5]);
?#gt
	 #ltTR CLASS="ctable#lt?=$c?#gt"#gt
#lt? /*	  #ltTD#gt#ltFONT CLASS="small" SIZE="-5" FACE="Courier New, Courier, mono"#gt#ltcenter#gt#lt?=$ses[1]?#gt#ltBR#gt#ltA HREF="acp.php#lt?=$this-#gts?#gta=users-groups.controlpanel&type=banuser&sid=#lt?=$ses[1]?#gt"#gtBAN#lt/A#gt#lt/center#gt#lt/FONT#gt#lt/FONT#gt#lt/TD#gt */ ?#gt
#lt?
	  	if (strstr($ses[2], "SYS/REDIR")) {
			$id = preg_replace("/\SYS\/REDIR (.*?)/i", "\\1", $ses[2]);
			$ses = $this-#gtselect($this-#gtdb[$db], $id);
			$ses[4] = "Unknown";
			$ses[5] = "Unknown";
			?#gt
				  #ltTD#gt
				  	#ltFONT CLASS="small" SIZE="-5" FACE="Courier New, Courier, mono"#gt
						#ltCENTER#gt#lt?=$ses[2]?#gt #lt? echo $this-#gthelpmessage($message); ?#gt#ltBR#gt
						#ltA HREF="acp.php#lt?=$this-#gts?#gta=users-groups.controlpanel&type=banuser&username=#lt?=$ses[2]?#gt"#gt#lt?=$this-#gtlng['moderate']['ban']?#gt#lt/A#gt
						#lt/CENTER#gt
					#lt/FONT#gt
				  #lt/TD#gt#lt?
		} else { ?#gt
				  #ltTD#gt
				  	#ltFONT CLASS="small" SIZE="-5" FACE="Courier New, Courier, mono"#gt
						#ltCENTER#gt#lt?=$ses[2]?#gt #lt? echo $this-#gthelpmessage($message); ?#gt#ltBR#gt
						#ltA HREF="acp.php#lt?=$this-#gts?#gta=users-groups.controlpanel&type=banuser&username=#lt?=$ses[2]?#gt"#gt#lt?=$this-#gtlng['moderate']['ban']?#gt#lt/A#gt
						#lt/CENTER#gt
					#lt/FONT#gt
				  #lt/TD#gt#lt? } ?#gt
	  #ltTD#gt#ltFONT CLASS="small" SIZE="-5" FACE="Courier New, Courier, mono"#gt#ltCENTER#gt#lt?=$ses[3]?#gt#ltBR#gt[ #ltA HREF="acp.php#lt?=$this-#gts?#gta=users-groups.controlpanel&type=banuser&ip=#lt?=$ses[3]?#gt"#gt#lt?=$this-#gtlng['moderate']['ban']?#gt#lt/A#gt #lt?=$del?#gt ]#lt/CENTER#gt#lt/FONT#gt#lt/TD#gt
	  #ltTD#gt#ltFONT CLASS="small" SIZE="-5" FACE="Courier New, Courier, mono"#gt#ltCENTER#gt#lt?=$ses[4]?#gt#lt/CENTER#gt#lt/FONT#gt#lt/TD#gt
	  #ltTD#gt#ltFONT CLASS="small" SIZE="-5" FACE="Courier New, Courier, mono"#gt#ltCENTER#gt#lt?=$ses[5]?#gt#lt/CENTER#gt#lt/FONT#gt#lt/TD#gt
	 #lt/TR#gt#lt?
	}
?#gt
	#lt/TABLE#gt#ltBR#gt#ltBR#gt
	#lt?
}

function clean_up () {
	$this-#gtmess = array();
	$categories = $this-#gtselectall("data/categories.php");
	foreach ($categories as $category) { 
		$forums = explode(",", $category[2]);
		foreach ($forums as $forumid) {
			$topicnums = array();
			$list = array();
			$forumlist = $this-#gtselectsort("data/".$forumid."/list.php", 6);
			foreach ($forumlist as $topic) {
				$del = false;
				foreach ($topicnums as $num) {
					if ($num == $topic[0]) {
						$del = true;
						$this-#gtmess[] = $this-#gtemerald($this-#gtlng['acp']['cleanup_mi'], "", "#ltb#gt".$topic[1]."#lt/b#gt");
					}
				}
				if (!file_exists("data/".$forumid."/".$topic[0].".php")) {
					$this-#gtmess[] = $this-#gtemerald($this-#gtlng['acp']['cleanup_bf'], "", "#ltb#gt".$topic[1]."#lt/b#gt");
					@unlink("data/".$forumid."/".$topic[0].".php");
					@unlink("data/".$forumid."/".$topic[0]."backup.php");
					@unlink("data/".$forumid."/pollinfo-".$topic[0].".php");
					$del = true;
				}
				if ($del == false) {
					$posts = $this-#gtselectsort("data/".$forumid."/".$topic[0].".php", 6);
					$topic[2] = (int) count($posts)-1;
					if ($topic[9] #lt 0) {
						$topic[9]= (int) 0;
					}
					$list[] = $topic;
					$topicnums[] = $topic[0];
				}
			}
			$this-#gtupdatefile("data/".$forumid."/list.php", $list);
			$forumtopics = 0;
			$forumposts = 0; 
			$forumlist = $this-#gtselectsort("data/".$forumid."/list.php", 6); 
			$forumtopics = count($forumlist); 
			foreach ($forumlist as $topic) { 
				$forumposts = $forumposts + $topic[2]; 
			} 
			$forumposts = $forumposts + $forumtopics; 
			$forum = $this-#gtselect("data/forums.php", $forumid); 
			$forum[2] = $forumtopics; 
			$forum[3] = $forumposts; 
			$forum[4] = $forumlist[count($forumlist)-1][0]; 
			$this-#gtupdate("data/forums.php", $forumid, $forum); 
		}
	}
	if (count($this-#gtmess)==0) {
		$errors = "";
	} else {
		$errors = "#ltSPAN CLASS=\"small\"#gt" . implode("#ltBR#gt", $this-#gtmess) . "#lt/SPAN#gt#ltBR#gt#ltBR#gt\n";
	}
	$this-#gtwritefiles();
	$message .= $this-#gtemerald($this-#gtlng['acp']['sm'], "%e", "#lta href=\"acp.php".$this-#gts."\"#gt".$this-#gtlng['misc']['acp_main']."#lt/a#gt");
	$message = $this-#gtemerald($message, "%f", "#lta href=\"acp.php".$this-#gts."a=main\"#gt".$this-#gtlng['misc']['forum_main']."#lt/a#gt");
	$this-#gtdisplaymessage($this-#gtlng['acp']['acp_jump']['14'], $this-#gtlng['misc']['op_successs']."#ltBR#gt#ltBR#gt\n".$errors.$message);
}

}

}

?#gt";}i:2;a:2:{i:0;s:29:"classes/user.controlpanel.php";i:1;s:13808:"#lt?php

if (!isset($a)) {

class exclusive extends genesis {

function execute () {
	global $type, $v, $que;
	if ($que != "ucp") {
		if ($this-#gtlogged_in) {
			$this-#gtheader();
			$this-#gtdisplaymessage($this-#gtlng['misc']['wait'], $this-#gtlng['misc']['being_redirected'], "ucp.php".$this-#gts);
			$this-#gtfooter();
		}
	}
	if ($v == "hide") {
		$this-#gthide();
	} elseif ($v == "show") {
		$this-#gtshow();
	}
	$this-#gtheader();
	if ($this-#gtuser[0] != 0) {
		if ($type == "editprofile") {
			$this-#gteditprofile();
		} elseif ($type == "profile2") {
			$this-#gtprofile2();
		} elseif ($type == "userprefs") {
			$this-#gtuserprefs();
		} else {
			$this-#gtusercp();
		}
	} else {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_guest_perm']);
	}
	$this-#gtfooter();
}

function show () {
	setcookie("visible", "1", time()+5184000);
	$this-#gtwhosonline();
}

function hide () {
	setcookie("visible", "0", time()+5184000);
	$this-#gtwhosonline();
}

function usercp () {
	global $HTTP_COOKIE_VARS, $type, $v;
	$this-#gtpip($this-#gtuser[1]);
	$user = $this-#gtuser;
	$usergroup = $this-#gtselect($this-#gtdb['groups'], $this-#gtuser[3]);
	$usergroup = $usergroup[1];
	$editprofile = "[ #lta href=\"ucp.php".$this-#gts."type=editprofile\"#gt".$this-#gtlng['ucp']['008']."#lt/a#gt ]\n";
	if (strlen($HTTP_COOKIE_VARS['visible']) #gt 1) {
		setcookie("visible", "1", time()+5184000);
		$this-#gtwhosonline();
	}
	if ($HTTP_COOKIE_VARS['visible'] == "1") {
		$invtext = $this-#gtlng['ucp']['001']." \n";
	} elseif  ($HTTP_COOKIE_VARS['visible'] == "0") {
		$invtext = $this-#gtlng['ucp']['002']." \n";
	} elseif  ($HTTP_COOKIE_VARS['visible'] == "2") {
		$invtext = $this-#gtlng['ucp']['002']." \n";
	}
	if (($v == "hide")) {
		$invtext = $this-#gtlng['ucp']['002']."#ltscript#gt window.location='ucp.php".$this-#gts."'; #lt/script#gt \n";
	}
	if (($v == "show")) {
		$invtext = $this-#gtlng['ucp']['001']."#ltscript#gt window.location='ucp.php".$this-#gts."'; #lt/script#gt \n";
	}
	?#gt
	#ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" ALIGN="center" COLSPAN="100%"#gt#lt?=$this-#gtemerald($this-#gtlng['ucp']['003'], "%e", $this-#gtuser[1])?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD COLSPAN=2 CLASS="category" WIDTH="50%" colspan=2#gt#lt?=$this-#gtlng['member']['your_info']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" WIDTH="6%" ROWSPAN=3#gt#lt/TD#gt
	  #ltTD COLSPAN=2 CLASS="category" WIDTH="50%" colspan=2#gt#lt?=$this-#gtlng['member']['your_pref']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
 	  #ltTD CLASS="ctable2" ALIGN="center" WIDTH="4%"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/forumnew.gif"#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" WIDTH="41%"#gt
	  
	  
	  #ltTABLE HEIGHT="100%" WIDTH="100%" ALIGN=center CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtlng['ucp']['004']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#ltI#gt#lt?=$this-#gtpipinfo[$user[0]]['title']?#gt#lt/I#gt #lt?=$this-#gtuser[1]?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtlng['ucp']['009']?#gt/#lt?=$this-#gtlng['ucp']['010']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#ltB#gt#lt?=$usergroup?#gt#lt/B#gt#ltBR#gt
#lt? 
	$perms = $this-#gtextenders['member']-#gtperms($this-#gtuser[3], $this-#gtlng, $this-#gtadministrator);
	$i = 1;
	foreach ($perms as $perm) {
		if ($perm != "") {
			if ($i == count($perms)) {
				echo $perm;
			} else {
				echo $perm."#ltbr#gt\n";
			}
		}
		$i++;
	}
?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtlng['ucp']['011']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtpipinfo[$user[0]]['bigpip']?#gt#ltBR#gt#lt?=$this-#gtpipinfo[$user[0]]['pip']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #lt/TABLE#gt
	 
	 
	  #lt/TD#gt
 	  #ltTD CLASS="ctable2" ALIGN="center" WIDTH="4%"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/forumnew.gif"#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" WIDTH="41%"#gt
	  
	  #ltTABLE HEIGHT="100%" WIDTH="100%" ALIGN=center CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtlng['member']['location']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtuser[5]?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtlng['ucp']['006']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#lt? if (!empty($this-#gtuser[14])) { ?#gt#ltIMG SRC="#lt?=$this-#gtuser[14]?#gt"#gt#lt? } else { ?#gt#ltI#gt#lt/I#gt#lt? } ?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtlng['member']['email']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtuser[4]?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtlng['ucp']['005']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$invtext?#gt#lt/TD#gt
	 #lt/TR#gt

	 #ltTR#gt
	  #ltTD CLASS="ctable2" COLSPAN=2#gt#ltCENTER#gt#lt?=$editprofile?#gt#lt/CENTER#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt
	
	
	  #lt/TD#gt
	 #lt/TR#gt
	 #ltFORM ACTION="ucp.php" NAME="userprefs" METHOD="POST"#gt
	 #ltINPUT TYPE="HIDDEN" VALUE="userprefs" NAME="type"#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH="100%" COLSPAN="100%"#gt

		  #ltTABLE WIDTH="100%" ALIGN=center CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
		 #ltTR#gt
		  #ltTD WIDTH="50%" CLASS="ctable2" #gt#lt?=$this-#gtlng['member']['tz']?#gt#lt/TD#gt
		  #ltTD WIDTH="50%" CLASS="ctable2"#gt#ltSELECT NAME="timezone"#gt
			#ltOPTION VALUE="-12" #lt? if ($this-#gtuser[17]/3600 == "-12") {print "SELECTED";}?#gt#gt(GMT -12h) Eniwetok#lt/OPTION#gt
			#ltOPTION VALUE="-11" #lt? if ($this-#gtuser[17]/3600 == "-11") {print "SELECTED";}?#gt#gt(GMT -11h) Midway Island, Samoa#lt/OPTION#gt
			#ltOPTION VALUE="-10" #lt? if ($this-#gtuser[17]/3600 == "-10") {print "SELECTED";}?#gt#gt(GMT -10h) Hawaii#lt/OPTION#gt
			#ltOPTION VALUE="-9" #lt? if ($this-#gtuser[17]/3600 == "-9") {print "SELECTED";}?#gt#gt(GMT -9h) Alaska#lt/OPTION#gt
			#ltOPTION VALUE="-8" #lt? if ($this-#gtuser[17]/3600 == "-8") {print "SELECTED";}?#gt#gt(GMT -8h) Pacific Time (US & Canada)#lt/OPTION#gt
			#ltOPTION VALUE="-7" #lt? if ($this-#gtuser[17]/3600 == "-7") {print "SELECTED";}?#gt#gt(GMT -7h) Mountain Time (US & Canada)#lt/OPTION#gt
			#ltOPTION VALUE="-6" #lt? if ($this-#gtuser[17]/3600 == "-6") {print "SELECTED";}?#gt#gt(GMT -6h) Central Time (US & Canada), Mexico City#lt/OPTION#gt
			#ltOPTION VALUE="-5" #lt? if ($this-#gtuser[17]/3600 == "-5") {print "SELECTED";}?#gt#gt(GMT -5h) Eastern Time (US & Canada), Bogota, Lima, Quito#lt/OPTION#gt
			#ltOPTION VALUE="-4" #lt? if ($this-#gtuser[17]/3600 == "-4") {print "SELECTED";}?#gt#gt(GMT -4h) Atlantic Time (Canada), Caracas, La Paz#lt/OPTION#gt
			#ltOPTION VALUE="-3.5" #lt? if ($this-#gtuser[17]/3600 == "-3.5") {print "SELECTED";}?#gt#gt(GMT -3:30h) Newfoundland#lt/OPTION#gt
			#ltOPTION VALUE="-3" #lt? if ($this-#gtuser[17]/3600 == "-3") {print "SELECTED";}?#gt#gt(GMT -3h) Newfoundland#lt/OPTION#gt
			#ltOPTION VALUE="-2" #lt? if ($this-#gtuser[17]/3600 == "-2") {print "SELECTED";}?#gt#gt(GMT -2h) Brazil, Buenos Aires, Georgetown#lt/OPTION#gt
			#ltOPTION VALUE="-1" #lt? if ($this-#gtuser[17]/3600 == "-1") {print "SELECTED";}?#gt#gt(GMT -1h) Azores, Cape Verde Islands#lt/OPTION#gt
			#ltOPTION VALUE="+0" #lt? if ($this-#gtuser[17]/3600 == "0") {print "SELECTED";}?#gt#gt(GMT) Western Europe Time, London, Lisbon, Casablanca, Monrovia#lt/OPTION#gt
			#ltOPTION VALUE="+1" #lt? if ($this-#gtuser[17]/3600 == "1") {print "SELECTED";}?#gt#gt(GMT +1h) CET(Central Europe Time), Brussels, Copenhagen, Madrid, Paris#lt/OPTION#gt
			#ltOPTION VALUE="+2" #lt? if ($this-#gtuser[17]/3600 == "2") {print "SELECTED";}?#gt#gt(GMT +2h) EET(Eastern Europe Time), Kaliningrad, South Africa#lt/OPTION#gt
			#ltOPTION VALUE="+3" #lt? if ($this-#gtuser[17]/3600 == "3") {print "SELECTED";}?#gt#gt(GMT +3h) Baghdad, Kuwait, Riyadh, Moscow, St. Petersburg, Volgograd, Nairobi#lt/OPTION#gt
			#ltOPTION VALUE="+3.5" #lt? if ($this-#gtuser[17]/3600 == "3.5") {print "SELECTED";}?#gt#gt(GMT +3:30h) Tehran#lt/OPTION#gt
			#ltOPTION VALUE="+4" #lt? if ($this-#gtuser[17]/3600 == "4") {print "SELECTED";}?#gt#gt(GMT +4h) Abu Dhabi, Muscat, Baku, Tbilisi#lt/OPTION#gt
			#ltOPTION VALUE="+4.5" #lt? if ($this-#gtuser[17]/3600 == "4.5") {print "SELECTED";}?#gt#gt(GMT +4:30h) Kabul#lt/OPTION#gt
			#ltOPTION VALUE="+5" #lt? if ($this-#gtuser[17]/3600 == "5") {print "SELECTED";}?#gt#gt(GMT +5h) Ekaterinburg, Islamabad, Karachi, Tashkent#lt/OPTION#gt
			#ltOPTION VALUE="+5.5" #lt? if ($this-#gtuser[17]/3600 == "5.5") {print "SELECTED";}?#gt#gt(GMT +5:30h) Bombay, Calcutta, Madras, New Delhi#lt/OPTION#gt
			#ltOPTION VALUE="+6" #lt? if ($this-#gtuser[17]/3600 == "6") {print "SELECTED";}?#gt#gt(GMT +6h) Almaty, Dhaka, Colombo#lt/OPTION#gt
			#ltOPTION VALUE="+7" #lt? if ($this-#gtuser[17]/3600 == "7") {print "SELECTED";}?#gt#gt(GMT +7h) Bangkok, Hanoi, Jakarta#lt/OPTION#gt
			#ltOPTION VALUE="+8" #lt? if ($this-#gtuser[17]/3600 == "8") {print "SELECTED";}?#gt#gt(GMT +8h) Beijing, Perth, Singapore, Hong Kong, Chongqing, Urumqi, Taipei#lt/OPTION#gt
			#ltOPTION VALUE="+9" #lt? if ($this-#gtuser[17]/3600 == "9") {print "SELECTED";}?#gt#gt(GMT +9h) Tokyo, Seoul, Osaka, Sapporo, Yakutsk#lt/OPTION#gt
			#ltOPTION VALUE="+9.5" #lt? if ($this-#gtuser[17]/3600 == "9.5") {print "SELECTED";}?#gt#gt(GMT +9:30h) Tokyo, Seoul, Osaka, Sapporo, Yakutsk#lt/OPTION#gt
			#ltOPTION VALUE="+10" #lt? if ($this-#gtuser[17]/3600 == "10") {print "SELECTED";}?#gt#gt(GMT +10h) Adelaide, Darwin#lt/OPTION#gt
			#ltOPTION VALUE="+11" #lt? if ($this-#gtuser[17]/3600 == "11") {print "SELECTED";}?#gt#gt(GMT +11h) EAST(East Australian Standard), Guam, Papua New Guinea, Vladivostok#lt/OPTION#gt
			#ltOPTION VALUE="+12" #lt? if ($this-#gtuser[17]/3600 == "12") {print "SELECTED";}?#gt#gt(GMT +12h) Auckland, Wellington, Fiji, Kamchatka, Marshall Island#lt/OPTION#gt
			#lt/SELECT#gt#lt/TD#gt
		 #lt/TR#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable2" WIDTH=150 VALIGN="top"#gt#lt?=$this-#gtlng['ucp']['012']?#gt#lt/TD#gt
		  #ltTD CLASS="ctable2"#gt#ltSELECT NAME="dst"#gt
					#ltOPTION #lt? if ($this-#gtuser[24] == "3600") { ?#gtSELECTED #lt? } ?#gtVALUE="3600" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtuser[24] == "0" #12#12 $this-#gtuser[24] == NULL) { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
		 #lt/TR#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable1" WIDTH=150 VALIGN="top"#gt#lt?=$this-#gtlng['member']['sig']?#gt#lt/TD#gt
		  #ltTD CLASS="ctable1"#gt#lt?=$this-#gtcustombbcode("userprefs","signature")?#gt
		  #ltTEXTAREA NAME="signature" onSelect="storeCaret(this);" onClick="storeCaret(this);" onKeyUp="storeCaret(this);" COLS="60" ROWS="3"#gt#lt?=$this-#gtdeinputize($this-#gtuser[12])?#gt#lt/TEXTAREA#gt#lt/TD#gt
		 #lt/TR#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable2" WIDTH=150 VALIGN="top"#gt#lt?=$this-#gtlng['member']['add']?#gt#lt/TD#gt
		  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtcustombbcode("userprefs","about")?#gt
		  #ltTEXTAREA NAME="about" onSelect="storeCaret(this);" onClick="storeCaret(this);" onKeyUp="storeCaret(this);" COLS="60" ROWS="3"#gt#lt?=$this-#gtdeinputize($this-#gtuser[21])?#gt#lt/TEXTAREA#gt#lt/TD#gt
		 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" COLSPAN=2#gt#ltCENTER#gt#lt?=$this-#gtbutton($this-#gtlng['misc']['ok'])?#gt#lt/CENTER#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt
	  #lt/TD#gt
	 #lt/TR#gt
	 #lt/FORM#gt
	#lt/TABLE#gt#lt?
}

function userprefs () {
	global $timezone, $title, $signature, $about, $dst;
	$user = $this-#gtselect($this-#gtdb['users'], $this-#gtuser[0]);
	$user[15] = $this-#gtinputize($title, 60);
	$user[17] = $this-#gtinputize($timezone*3600, 60);
	$user[12] = $this-#gtinputize($signature, 600);
	$user[21] = $this-#gtinputize($about, 1500);
	if (count($user) #lt 25) {
		for ($i=0;( count($user) #lt= 35 );$i++) {
			array_push($user, NULL);
		}
	}
	$user[24] = $this-#gtinputize($dst, 4);
	$this-#gtupdate($this-#gtdb['users'], $this-#gtuser[0], $user);
	$this-#gtdisplaymessage("Preferences", "Preferences Updated", "ucp.php".$this-#gts);
}

function editprofile () {
	$this-#gtpip($this-#gtuser[0]);
	$this-#gtextenders['member']-#gteditprofile($this-#gtuser, $this-#gtbutton($this-#gtlng['misc']['ok']), $this-#gtlng, $this-#gtuserset);
}

function profile2 () {
	global $location, $aim, $msn, $yim, $icq, $signature, $webpage, $avatar;
	global $about, $hidemail;
	if ($avatar != "") { 
		$image = getimagesize($avatar); 
	}
	if ($image[0] #gt $this-#gtsettings['max_avatr_w']) {
		$this-#gtdisplaymessage("Error", "Image too wide (".$image[0]." px). Maximum width: ".$this-#gtsettings['max_avatr_w'] . " px");
	} elseif ($image[1] #gt $this-#gtsettings['max_avatr_h']) {
		$this-#gtdisplaymessage("Error", "Image too tall (".$image[1]." px). Maximum height: ".$this-#gtsettings['max_avatr_h'] . " px");
	} else {
		$user = $this-#gtselect($this-#gtdb['users'], $this-#gtuser[0]);
		$user[5] = $this-#gtinputize($location, 60);
		$user[6] = $this-#gtinputize($aim, 35);
		$user[7] = $this-#gtinputize($msn, 60);
		$user[8] = $this-#gtinputize($yim, 35);
		$user[9] = $this-#gtinputize($icq, 35);
		$user[13] = $this-#gtinputize($webpage, 80);
		$user[14] = $this-#gtinputize($avatar, 80);
		$user[16] = $this-#gtinputize($hidemail, 1);
		$this-#gtupdate($this-#gtdb['users'], $this-#gtuser[0], $user);
		$this-#gtdisplaymessage("Profile", "Profile Updated");
	}
}

}

}

?#gt";}i:3;a:2:{i:0;s:15:"data/online.php";i:1;s:93:"#lt? die(); ?#gt
1#121#121062032348#12618dd292ef10f066a0f99d996d8c39d2#121#12justin#121#12
";}i:4;a:2:{i:0;s:17:"data/messages.php";i:1;s:18:"#lt? die(); ?#gt
";}i:5;a:2:{i:0;s:15:"data/groups.php";i:1;s:775:"#lt? die(); ?#gt
1#12Administrators#121#121#121#121#121#121#121#121#121#121#121#121#121#121#120#12a#125#12#12#12#12#12#12#12#12#12#12#ltb#gt#ltfont color=#FF9900#gt*#12#lt/font#gt#lt/b#gt#12
2#12Members#121#121#121#120#120#120#120#120#120#120#120#120#120#120#120#12#122#12#12#12#12#12#12#12#12#12#12#12#12
3#12Team Members#121#121#121#121#121#121#121#121#121#121#121#121#121#121#120#12t#125#12#12#12#12#12#12#12#12#12#12#ltfont color=#3399FF#gt.#12#lt/font#gt#12
4#12Fans#121#121#121#120#120#120#120#120#120#120#120#120#120#121#120#12f#125#12#12#12#12#12#12#12#12#12#12#ltfont color=#00CC00#gt@#12#lt/font#gt#12
5#12Super Moderators#121#121#121#121#121#121#121#120#121#121#121#121#122#121#120#12s#125#12#12#12#12#12#12#12#12#12#12#ltfont color=red#gt.#12#lt/font#gt#12
";}i:6;a:2:{i:0;s:14:"data/users.php";i:1;s:18:"#lt? die(); ?#gt
";}i:7;a:2:{i:0;s:17:"data/settings.php";i:1;s:2307:"#lt? die(); ?#gt
1#12a:46:{s:12:"edgebrd_name";s:9:"edgeBoard";s:12:"admin_mem_id";i:1;s:12:"board_status";s:1:"0";s:12:"eboard_theme";s:9:"edgeboard";s:12:"brd_language";s:7:"english";s:12:"eboard_email";s:0:"";s:12:"brd_tm_offst";i:0;s:12:"online_limit";s:4:"1800";s:12:"board_locatn";s:7:"http://";s:11:"max_upld_sz";s:6:"512000";s:11:"max_avatr_w";s:2:"70";s:11:"max_avatr_h";s:2:"70";s:11:"max_topic_l";s:2:"65";s:11:"max_post_sz";s:5:"15000";s:11:"max_word_sz";s:2:"70";s:11:"topic_perpg";s:2:"20";s:11:"posts_perpg";s:2:"20";s:11:"max_pm_dest";s:1:"5";s:11:"max_pm_inbx";s:2:"15";s:11:"max_pollq_l";i:65;s:11:"max_pollt_l";i:65;s:11:"posting_dly";s:2:"15";s:11:"membs_perpg";s:2:"25";s:11:"badwrd_fltr";s:4:"fuck";s:11:"time_format";s:13:"M j, Y, g:i a";s:11:"enable_bbcd";s:4:"true";s:11:"enable_emot";s:4:"true";s:11:"enable_emal";b:1;s:11:"enable_html";s:5:"false";s:11:"enable_gpos";s:4:"true";s:11:"reqr_e-mail";b:0;s:12:"member_links";a:8:{i:0;s:7:"&homel!";i:1;s:7:"&logou!";i:2;s:7:"&userc!";i:3;s:7:"&searc!";i:4;s:7:"&membe!";i:5;s:7:"&whool!";i:6;s:2:"&!";i:7;s:2:"&!";}s:12:"nonmem_links";a:8:{i:0;s:7:"&homel!";i:1;s:7:"&login!";i:2;s:7:"&regis!";i:3;s:7:"&searc!";i:4;s:7:"&membe!";i:5;s:7:"&whool!";i:6;s:2:"&!";i:7;s:2:"&!";}s:11:"enable_mail";i:0;s:12:"edgeboardurl";s:0:"";s:11:"reqir_email";i:0;s:11:"CHreqirmail";i:0;s:11:"enablefemal";i:0;s:3:"spm";a:3:{i:1;a:4:{i:0;s:1:"1";i:1;s:7:"Welcome";i:2;s:183:"Welcome to :boardname:!  You are now a full-fledged member of the board!  Feel free to post as much as you like and if you have any questions or comments, don't hesitate to post them!";i:3;s:25:"When User First Registers";}i:3;a:4:{i:0;s:1:"3";i:1;s:17:"User Group Change";i:2;s:89:"Your user group has been changed!  Look at your profile to see what group you are in now!";i:3;s:34:"When User's Group Has Been Changed";}i:2;a:4:{i:0;s:1:"2";i:1;s:22:"Your Title Advancement";i:2;s:147:"You have become advanced enough in this board to specify your own unique user title!  Go [url=index.php?a=member&type=profile]here[/url] to set it!";i:3;s:0:"";}}s:11:"stimeformat";s:11:"n/j/y g:i a";s:11:"ltimeformat";s:15:"l F j, Y, g:i a";s:11:"pgl_s_forum";s:1:"1";s:11:"iai_s_forum";s:1:"1";s:11:"enable_gdis";s:5:"false";s:12:"most_mem_onl";i:1;s:12:"most_mem_tim";i:1060634477;}
";}i:8;a:2:{i:0;s:19:"data/categories.php";i:1;s:92:"#lt? die(); ?#gt
1#12Board Announcements#121
2#12General Discussion#122,4
3#12Testing#123";}i:9;a:2:{i:0;s:15:"data/forums.php";i:1;s:745:"#lt? die(); ?#gt
1#12Announcements#120#120#12#12#12#12#12Tune in here for special announcements from the board Administrator, Team Members, and Moderators. Only the previously stated user groups can post new topics in this forum.#12
2#12Chit Chat#120#120#12#12#12#12#12You can talk with other members of the board about various topics of interest here.  Don't hesitate to post your thoughts!
3#12Testing#120#120#12#12#12#12#12Do you want to see how your signature looks?  Do you want to try out some cool avatars?  Test the  board's features, right here in this forum!#12
4#12Help#120#120#12#12#12#12#12Are you unsure how to use a particular feature or how BBCode works?  Post your questions here. Thee's always someone to help you out.#12
";}i:10;a:2:{i:0;s:15:"data/titles.php";i:1;s:390:"#lt? die(); ?#gt
1#12C#12:CustomSet:#12Calculate#12
2#120#12Newbie#120#12
3#125#12Newbie#121#12
4#1215#12Rookie#121#12
5#1235#12Member#122#12
6#1275#12:Previous:#123#12
7#12120#12Advanced Member#124#12
8#12175#12:Previous:#125#12
9#12300#12Priority Member#126#12
10#12400#12:Previous:#127#12
11#12600#12:UserSet:#128#12
12#12800#12:UserSet:#129#12
13#121000#12:UserSet:#1210#12";}i:11;a:2:{i:0;s:17:"data/sessions.php";i:1;s:109:"#lt? die(); ?#gt
5#12618dd292ef10f066a0f99d996d8c39d2#12justin#12127.0.0.1#121062008110#121062032348#12#12
";}i:12;a:2:{i:0;s:15:"data/errors.php";i:1;s:18:"#lt? die(); ?#gt
";}i:13;a:2:{i:0;s:25:"data/archive_sessions.php";i:1;s:18:"#lt? die(); ?#gt
";}i:14;a:2:{i:0;s:15:"data/banned.php";i:1;s:18:"#lt? die(); ?#gt
";}i:15;a:2:{i:0;s:14:"data/notes.php";i:1;s:111:"#lt? die(); ?#gt
1#12*#12#12#12#12[b]Welcome to the brand-new edgeBoard Genesis![/b]#121059710400#121064980800";}i:16;a:2:{i:0;s:15:"data/index.html";i:1;s:0:"";}i:17;a:2:{i:0;s:14:"data/cache.php";i:1;s:18:"#lt? die(); ?#gt
";}i:18;a:2:{i:0;s:15:"data/1/list.php";i:1;s:0:"";}i:19;a:2:{i:0;s:15:"data/2/list.php";i:1;s:18:"#lt? die(); ?#gt
";}i:20;a:2:{i:0;s:15:"data/3/list.php";i:1;s:0:"";}i:21;a:2:{i:0;s:29:"data/guests/blank_archive.php";i:1;s:18:"#lt? die(); ?#gt
";}i:22;a:2:{i:0;s:22:"data/guests/index.html";i:1;s:0:"";}i:23;a:2:{i:0;s:28:"data/users/blank_archive.php";i:1;s:18:"#lt? die(); ?#gt
";}i:24;a:2:{i:0;s:21:"data/users/index.html";i:1;s:0:"";}i:25;a:2:{i:0;s:15:"data/4/list.php";i:1;s:0:"";}i:26;a:2:{i:0;s:23:"data/uploads/index.html";i:1;s:0:"";}i:27;a:2:{i:0;s:31:"data/sessions/blank_archive.php";i:1;s:18:"#lt? die(); ?#gt
";}i:28;a:2:{i:0;s:24:"data/sessions/index.html";i:1;s:0:"";}i:29;a:2:{i:0;s:15:"html/index.html";i:1;s:0:"";}i:30;a:2:{i:0;s:24:"html/system/toplinks.php";i:1;s:784:"#lt?
$this-#gttoplinks['$spacr!'] = " :: ";
$this-#gttoplinks['&userc!'] = $this-#gtlng['toplinks']['usercp'];
$this-#gttoplinks['&logou!'] = $this-#gtlng['toplinks']['logout'];
$this-#gttoplinks['&login!'] = $this-#gtlng['toplinks']['login'];
$this-#gttoplinks['&searc!'] = $this-#gtlng['toplinks']['search'];
$this-#gttoplinks['&membe!'] = $this-#gtlng['toplinks']['memberlist'];
$this-#gttoplinks['&profi!'] = $this-#gtlng['toplinks']['profile'];
$this-#gttoplinks['&homel!'] = $this-#gtlng['toplinks']['home'];
$this-#gttoplinks['&whool!'] = $this-#gtlng['toplinks']['whosonline'];
$this-#gttoplinks['&ebhom!'] = "edgeBoard";
$this-#gttoplinks['&regis!'] = $this-#gtlng['toplinks']['register'];
$this-#gttoplinks['&admin!'] = $this-#gtlng['toplinks']['admincp'];
?#gt";}i:31;a:2:{i:0;s:25:"html/system/header.js.php";i:1;s:3079:"#ltSCRIPT language="javascript"#gt
#lt!--

var now = false;

function check(form){
	if (document.messenger.master.checked == true) { 
		document.messenger.master.checked = false;
		now = false;
	}
}

function checkAll(form){
	now=!now;
	var mg = document.messenger;
	var len = mg.elements.length;
	for(var i=0;i#ltlen;i++) {
	    var e = mg.elements[i];
	    if (e.name == "message[]") {
			e.checked = now;
		}
	}
}

function enabletime (val) {
	if (val == '1') {
		var edit = true;
	} else {
		var edit = false;
	}
	if (edit == true) {
		if (document.formnote.timecheck.checked == true) {
			document.formnote.stime.disabled = false;
			document.formnote.etime.disabled = false;
		} else {
			document.formnote.stime.disabled = true;
			document.formnote.etime.disabled = true;
		}
	} else {
		if (document.formnote.timecheck.checked == true) { 
			document.formnote.sday.disabled = false;
			document.formnote.smonth.disabled = false;
			document.formnote.syear.disabled = false;
			document.formnote.eday.disabled = false;
			document.formnote.emonth.disabled = false;
			document.formnote.eyear.disabled = false;
		} else {
			document.formnote.sday.disabled = true;
			document.formnote.smonth.disabled = true;
			document.formnote.syear.disabled = true;
			document.formnote.eday.disabled = true;
			document.formnote.emonth.disabled = true;
			document.formnote.eyear.disabled = true;
		}
	}
}

function quickadd(qad) {
	if (document.sendmessage.to.value == "") {
		document.sendmessage.to.value = document.sendmessage.to.value + qad;
	} else {
		document.sendmessage.to.value = document.sendmessage.to.value + ", " + qad;
	}
}

function submitonce(theform) {
	if (document.all #12#12 document.getElementById) {
		for (i=0;i#lttheform.length;i++) {
			var tempobj=theform.elements[i];
			if(tempobj.type.toLowerCase()=="submit"#12#12tempobj.type.toLowerCase() =="reset") {
				tempobj.disabled=true;
			}
		}
	}
}

function enableform(theform) {
	if (document.all #12#12 document.getElementById) {
		for (i=0;i#lttheform.length;i++) {
			var tempobj=theform.elements[i];
			tempobj.visible=true;
		}
	}
}

function bbcode (code) {
        insertAtCaret(document.Post.message, code);
        document.Post.message.focus();
}

function storeCaret (textEl) {
	if (textEl.createTextRange)
		textEl.caretPos = document.selection.createRange().duplicate();
}

function insertAtCaret (textEl, text) {
	if (textEl.createTextRange && textEl.caretPos) {
		var caretPos = textEl.caretPos;
		caretPos.text = caretPos.text.charAt(caretPos.text.length - 1) == ' ' ? text + ' ' : text;
	} else
		textEl.value  = textEl.value + text;
}

//--#gt
#lt/SCRIPT#gt

#lt!-- THE FOLLOWING (NEEDS TO / CAN) BE RE-ADDED:

function insertAtCaret (textEl, text) {
	if (textEl.createTextRange && textEl.caretPos) {
		var caretPos = textEl.caretPos;
		caretPos.text = caretPos.text.charAt(caretPos.text.length - 1) == ' ' ? text + ' ' : text;
	} else
		textEl.value  = text;
}

//--#gt";}i:32;a:2:{i:0;s:22:"html/system/footer.php";i:1;s:405:"#ltbr#gt 
#ltcenter#gt 
#ltspan class="small"#gt© edgeprogramming.com#ltbr#gt
Powered by #lta href="http://www.edgeboard.net/" target="_blank"#gtedgeBoard#lt/a#gt #lt?=$this-#gtversion?#gt#ltbr#gt
[ Execution Time: #lt?=$this-#gtexecutetime?#gt #12 Files Opened: #lt?=count($this-#gtfiles)?#gt #12 Files Written: #lt?=count($this-#gttfiles)?#gt ]#lt/span#gt 
#lt/center#gt 
#lt/body#gt 
#lt/html#gt";}i:33;a:2:{i:0;s:21:"html/system/style.php";i:1;s:1766:"#ltSTYLE TYPE="text/css"#gt
#lt!--
.category
{ 
	font-size: 13px; color: #efefef;
	text-decoration: none;
	background-color: #0066CC;
	background-image: url(images/catbg.gif);
	height: 20px;
	font-style: normal;
	font-weight: bold;
}

.ctable1
{
	font-size: 12px;
	color: #000000;
	text-decoration: none;
	background-color: #F8F8F8
}

.ctable2
{
	font-size: 12px;
	color: #000000;
	text-decoration: none;
	background-color: #FFFFFF
}

.darkspacer
{
	background-color: #bbbbbb;
}

.quote
{
	font-size: 11px;
	color: #FF9900;
	text-decoration: none;
	background-color: #FFFFCC;
	border: 1px solid #CC9900;
}

.small
{
	font-size: 11px;
	color: #000000;
	text-decoration: none;
}

.regular {
	font-size: 12px;
	color: #000000;
	text-decoration: none
}

.bordertable
{
	background-color: #3399FF;
}

body 
{
	font-family: Arial, Tahoma, Verdana, Helvetica, sans-serif;
	font-size: 12px;
	color: #000000;
	text-decoration: none;
}

textarea, input 
{
	font-family: Arial, Tahoma, Verdana, Helvetica, sans-serif;
	font-size: 11px;
	color: #000000;
	vertical-align: middle;
}

SELECT, option
{
	font-size: 11px;
	color: #000000;
	background-color: #FFFFFF;
	vertical-align: middle;
}

.forum:link, .forum:visited, .forum:active
{
	color:#000099;
}

.forum:hover
{
	color: #C0C0C0;
}

a:link, a:visited, a:active
{
	color: #180080;
}

a:hover
{
	color: #3830a0;
}

.catlink:link, .catlink:visited, .catlink:active
{
	color: #000000;
}

.catlink:hover
{
	color: #FFFFFF; text-decoration: none; }

.button
{
	font-weight: bold;
	font-family: Arial, Tahoma, Verdana, Helvetica, sans-serif;
	font-size: 11px;
	vertical-align: middle;
}

--#gt
#lt/STYLE#gt";}i:34;a:2:{i:0;s:22:"html/system/header.php";i:1;s:523:"#ltBODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#CC0000" VLINK="#CC0000" ALINK="#CC0000"#gt
#ltTABLE WIDTH=100% CELLPADDING=0 CELLSPACING=0 BORDER=0#gt
 #ltTR#gt
  #ltTD WIDTH="70"#gt#lt/TD#gt
    #ltTD ALIGN="left"#gt#ltIMG SRC="images/#lt?=$this-#gtboard[special_name]?#gt.gif"#gt
  #ltTD ALIGN="center" WIDTH=350 class="small"#gt#lt?=$this-#gtminipanel()?#gt#lt/TD#gt
 #lt/TR#gt
 #lttr#gt
  #lttd colspan=3 ALIGN="center" class="small"#gt#lt?=$this-#gttoplinks()?#gt#lt/td#gt
 #lt/tr#gt
#lt/TABLE#gt
#ltBR#gt
";}i:35;a:2:{i:0;s:22:"html/system/index.html";i:1;s:0:"";}i:36;a:2:{i:0;s:25:"html/edgeboard/footer.php";i:1;s:405:"#ltbr#gt 
#ltcenter#gt 
#ltspan class="small"#gt© edgeprogramming.com#ltbr#gt
Powered by #lta href="http://www.edgeboard.net/" target="_blank"#gtedgeBoard#lt/a#gt #lt?=$this-#gtversion?#gt#ltbr#gt
[ Execution Time: #lt?=$this-#gtexecutetime?#gt #12 Files Opened: #lt?=count($this-#gtfiles)?#gt #12 Files Written: #lt?=count($this-#gttfiles)?#gt ]#lt/span#gt 
#lt/center#gt 
#lt/body#gt 
#lt/html#gt";}i:37;a:2:{i:0;s:25:"html/edgeboard/images.php";i:1;s:38:"NAV#gt#gtYES#gt#gtimages/nav.gif#gt#gt";}i:38;a:2:{i:0;s:27:"html/edgeboard/htmlhead.php";i:1;s:61:"#lt!-- Powered by edgeboard: http://www.edgeboard.net //--#gt";}i:39;a:2:{i:0;s:13:"index/ucp.php";i:1;s:196:"#lt?php
	if ($a == "user.controlpanel") { $a = ""; }
	include_once "lib/genesis.php";
	include_once "classes/user.controlpanel.php";
	$b = "blank";
	$que = "ucp";
	include "index.php";
?#gt";}i:40;a:2:{i:0;s:15:"index/index.php";i:1;s:1717:"#lt?php

/*************************************************************
* +-------------------------------------------------------+ *
* #12 Developers: edgeTeam/TekAxis                          #12 *
* +-------------------------------------------------------+ *
* #12 © edgeboard.net                                       #12 *
* #12 You may alter this script for your own purposes, but  #12 *
* #12 you may not redistribute this script in any form.     #12 *
* #12 This script is provided without any warranty of any   #12 *
* #12 kind. Use at your own risk.                           #12 *
* #12 License Info: www.edgeboard.net/licensing.php         #12 *
* +-------------------------------------------------------+ *
*************************************************************/

	@reset($HTTP_GET_VARS);
	while(list($key, $val) = @each($HTTP_GET_VARS))
		$$key = $val;
	@reset($HTTP_POST_VARS);
	while(list($key, $val) = @each($HTTP_POST_VARS))
		$$key = $val;
	@reset($HTTP_COOKIE_VARS);
	while(list($key, $val) = @each($HTTP_COOKIE_VARS))
		$$key = $val;

	ini_set ("register_globals", "1");
	ini_set ("safe_mode", "0");
	ini_set ("open_basedir", "0");

	ob_start("gzhandler");

	header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
	header("Cache-Control: no-store, no-cache, must-revalidate");
	header("Pragma: no-cache");

	include_once "lib/genesis.php";

	if ($a == "") {
		if (isset($b)) {
			$a = $b;
		} else {
			$a = "main";
		}
	}
	if (file_exists("lib/$a.php")) {
		include_once "lib/$a.php";
	} else {
		include_once "lib/main.php";
	}

	$exclusive = new exclusive;
	$exclusive-#gtexecute();
	$exclusive-#gtwritefiles();

	ob_end_flush();

?#gt";}i:41;a:2:{i:0;s:13:"index/acp.php";i:1;s:198:"#lt?php
	if ($a == "admin.controlpanel") { $a = ""; }
	include_once "lib/genesis.php";
	include_once "classes/admin.controlpanel.php";
	$b = "blank";
	$que = "acp";
	include "index.php";
?#gt";}i:42;a:2:{i:0;s:16:"index/index.html";i:1;s:0:"";}i:43;a:2:{i:0;s:18:"index/language.php";i:1;s:39494:"#lt? $lng['help']['edit_forums_description'] = "This is where you can administer forums (renaming, editing, changing the descriptions, and permissions.)";
$lng['help']['new_category_description'] = "This adds a new category to the board.";
$lng['help']['forums_link'] = "Shows the main forum page.";
$lng['help']['feature_disabled'] = "This feature has been disabled in this version.";
$lng['help']['mark_all'] = "This makes all of the forum icons indicate that they have been read.";
$lng['help']['edit_cat'] = "This is where you can administer this category.";
$lng['help']['delete_cat'] = "This removes the category from the board.";
$lng['help']['move_c_up'] = "This moves this category up one.";
$lng['help']['move_c_down'] = "This moves this category down one.";
$lng['help']['new_forum'] = "This adds a new forum to the bottom of this category.";
$lng['help']['delete_forum'] = "This deletes this forum.";
$lng['help']['emoticons'] = "Select Yes if you want to allow emoticons.";
$lng['help']['bbcode'] = "Select Yes if you want to allow BB Code.  BB Code is the fancy effects that are applied to text through the use of special codes. ([b] = Bold and [u] = Underline) There are many more than the previous two mentioned.";
$lng['help']['guestposting'] = "Select Yes if you want to allow any guest to post here.  This will generally reduce the number of people that register for your board.";
$lng['help']['time_format'] = "For help with this, visit http://www.php.net/manual/en/function.date.php";
$lng['help']['forum_up'] = "This moves this forum up one.";
$lng['help']['gnote'] = "Adds a note that will be seen on every page.";
$lng['help']['lnote'] = "Adds a note that will be seen on just the current page.";
$lng['help']['forum_down'] = "This moves this forum down one.";
$lng['help']['move_forum'] = "This moves this forum to a different category.";
$lng['help']['post_groups'] = "Indicates which user groups can or cannot post new topics.";
$lng['help']['view_groups'] = "Indicates which user groups can or cannot see this forum.";
$lng['help']['reply_groups'] = "Indicates which user groups can or cannot reply to existing topics.";
$lng['help']['board_status'] = "Use this if you have to update your board or if you want to halt access to it.";
$lng['help']['maxup'] = "This is the maximum file size that an attachment can have.";
$lng['help']['bwf'] = "Put the words you want to filter, seperated by commas: badword,anotherone,andanother here.";
$lng['help']['maxpost'] = "The maximum number of characters in a post.";
$lng['help']['ovt1'] = "This feature is used to change the selected users usergroup.";
$lng['help']['ovt2'] = "This feature is used to override the selected users title and replace it with one that you specify. To return the selected users title to the standard, override the current title with the keyword, :Standard:";
$lng['help']['maxch'] = "The maximum size, in characters, of a long word before it is affected by word wrap.";
$lng['help']['quickadd'] = "This adds the currently selected user to the recipiants field.";
$lng['help']['posttime'] = "Number of seconds that users will have to wait after they have posted to post again.";
$lng['help']['olt'] = "This is the legnth of time a user can be in the Whos Online list before they are removed. (15 minutes is recommended)";
$lng['help']['color'] = "Defines the formatting (in HTML) of users in the selected group that will be applied to their username in the Whos Online Listing on the main page.";
$lng['help']['titlerename'] = "Tells the board what title that users meeting this criteria will have.  Set the title to :Previous: to keep the previous title or set it to :UserSet: to allow the user to se their own title in their profile.";
$lng['help']['iaigp'] = "Guest Posting must be enabled in the ACP area: Customizations, before this one checkbox can have any significant meaning, otherwise, guests will always be denied access to post or reply.";
$lng['nav']['con'] = "Configuring Your Installation";
$lng['nav']['ins'] = "Installing Your edgeBoard";
$lng['nav']['src'] = "Search Results for '%e'"; // %e = search query
$lng['nav']['vap'] = "Viewing A Profile";
$lng['nav']['edt'] = "Editing";
$lng['misc']['from'] = "From:";
$lng['misc']['to'] = "To:";
$lng['misc']['mess'] = "Message:";
$lng['misc']['acti'] = "Actions:";
$lng['misc']['add'] = "Add";
$lng['misc']['sbl'] = "Sort By Letter";
$lng['misc']['info'] = "Information";
$lng['misc']['sebl'] = "Do you want to show that you edited this post?";
$lng['misc']['acp_main'] = "ACP Main";
$lng['misc']['forum_main'] = "Forums Main";
$lng['misc']['aus-nu'] = "Are you sure you want to do this?  This action cannot be undone.";
$lng['misc']['aus-cu'] = "Are you sure you want to do this?  This action can be undone.";
$lng['misc']['go'] = "Go";
$lng['misc']['change'] = "Change";
$lng['misc']['yes'] = "Yes";
$lng['misc']['no'] = "No";
$lng['misc']['saved'] = "Saved";
$lng['misc']['ok'] = "Ok";
$lng['misc']['sort'] = "Sort";
$lng['misc']['name'] = "Name";
$lng['misc']['noeff'] = "No effects.";
$lng['misc']['timet'] = "Time";
$lng['misc']['uinv'] = "User Involved";
$lng['misc']['event'] = "Event";
$lng['misc']['eff'] = "Effects";
$lng['misc']['user'] = "User";
$lng['misc']['ipad'] = "IP Address";
$lng['misc']['username'] = "Username";
$lng['misc']['unse'] = "No Email";
$lng['misc']['userno'] = "User Number";
$lng['misc']['lastact'] = "Last Active";
$lng['misc']['date_j'] = "Date Joined";
$lng['misc']['post_ct'] = "Post Count";
$lng['misc']['admin'] = "Administrator";
$lng['misc']['mod'] = "Moderator";
$lng['misc']['guest'] = "Guest";
$lng['misc']['users'] = "Users";
$lng['misc']['admins'] = "Administrators";
$lng['misc']['mods'] = "Moderators";
$lng['misc']['guests'] = "Guests";
$lng['misc']['member'] = "Member";
$lng['misc']['a_members'] = "Anonymous Members";
$lng['misc']['members'] = "Members";
$lng['misc']['total'] = "Total";
$lng['misc']['pages'] = "Pages";
$lng['misc']['pw_changed'] = "Your password has been changed and your browser cookies have been updated.";
$lng['misc']['info_saved'] = "Your account information has been saved.  You're now free to use the board!";
$lng['misc']['level'] = "Level";
$lng['misc']['type_text_here'] = "Type your text here";
$lng['misc']['type_link_here'] = "Type your link here";
$lng['misc']['type_font_here'] = "Type your font name here";
$lng['misc']['type_iurl_here'] = "Type your image URL here";
$lng['misc']['username'] = "Username";
$lng['misc']['password'] = "Password";
$lng['misc']['time'] = "The time is %e."; // %e = current time
$lng['misc']['version'] = "Version";
$lng['misc']['build'] = "Build";
$lng['misc']['iagree'] = "I Agree";
$lng['misc']['idagre'] = "I Don't Agree";
$lng['misc']['uacc'] = "User accessed the access log for %e."; // %e = log date
$lng['misc']['execution_time'] = "Script Execution Time";
$lng['misc']['databases_accessed'] = "Databases Accessed";
$lng['misc']['databases_updated'] = "Databases Updated";
$lng['misc']['server_load'] = "Server Load";
$lng['misc']['unavail'] = "Unavailable";
$lng['misc']['op_complete'] = "Operation Complete";
$lng['misc']['op_successs'] = "The operation was completed successfully.";
$lng['misc']['wait'] = "Please Wait";
$lng['misc']['being_redirected'] = "You are currently being redirected.";
$lng['misc']['cp'] = "Control Panel";
$lng['misc']['cp_query'] = "Click 'yes' if you would like to view the administrator's control panel.  Click 'no' to view your user control panel.";
$lng['misc']['groups'] = "Groups";
$lng['misc']['aut'] = "You have become advanced enough in this board to specify your own unique user title!";
$lng['misc']['yct'] = "Your Customized Title";
$lng['main']['mark_all'] = "Mark All Posts Read";
$lng['main']['no_moderators'] = "None Specified";
$lng['main']['online_data'] = "This data is based on users active in the past %e minutes."; // %e = minutes
$lng['main']['legend'] = "Legend";
$lng['main']['none'] = "None";
$lng['main']['board_info'] = "Board Information";
$lng['main']['whos_online'] = "Who's Online";
$lng['main']['lastclick'] = "Last Click";
$lng['main']['follow'] = "Follow";
$lng['main']['stats'] = "Statistics";
$lng['main']['forum_gfx'] = "Forum Graphics";
$lng['main']['new_posts'] = "New Posts";
$lng['main']['no_new_posts'] = "No New Posts";
$lng['main']['no_members'] = "There are currently no registered members.";
$lng['main']['number_posts'] = "There is a total of #ltb#gt%e posts#lt/b#gt in #ltb#gt%t topics#lt/b#gt."; // %e = number of posts, %t = number of topics
$lng['main']['registered_members'] = "There is a total of #ltb#gt%e registered members#lt/b#gt."; // %e = number of members
$lng['main']['page_accesses'] = "This page has had #ltb#gt%e#lt/b#gt visits.";  // %e = number of accesses
$lng['main']['most_users'] = "The most users to ever be online simultaneously was #ltb#gt%e#lt/b#gt on #ltb#gt%t#lt/b#gt."; // %e = number online, %t = date and time
$lng['main']['newest_member'] = "Our newest registered member is #ltb#gt%e#lt/b#gt."; // %e = newest member
$lng['member']['email'] = "Email Address:";
$lng['member']['memberl'] = "You are viewing page #ltb#gt%e#lt/b#gt with #ltb#gt%m#lt/b#gt members per page."; // %e = page number, %m = number of members per page
$lng['member']['memberm'] = "There were %c members that matched your criteria!"; // %c =  number of members found
$lng['member']['your_info'] = "Your Information";
$lng['member']['your_pref'] = "Your Preferences";
$lng['member']['web_page'] = "Web Page:";
$lng['member']['location'] = "Location:";
$lng['member']['change_pw'] = "Change Password";
$lng['member']['new_pw2'] = "New Password Again:";
$lng['member']['new_pw'] = "New Password:";
$lng['member']['old_pw'] = "Old Password:";
$lng['member']['sia'] = "(maximum 600 characters)";
$lng['member']['add'] = "Additional Info: #ltbr#gt (interests, favorite quotes, etc.) #ltbr#gt (maximum 1500 characters)";
$lng['member']['sig'] = "Signature";
$lng['member']['rmm'] = "Remember Me";
$lng['member']['drm'] = "Don't Remember Me";
$lng['member']['mvi'] = "Make Me Visibile";
$lng['member']['miv'] = "Make Me Invisibile";
$lng['member']['u,t'] = "Usergroup, Title";
$lng['member']['sam'] = "Send a Message";
$lng['member']['msg'] = "Messaging";
$lng['member']['npp'] = "%t %e's Public Profile"; // %t = title, %e = user
$lng['member']['uup'] = "This user needs to update their profile!";
$lng['member']['asd'] = "Passwords did not match";
$lng['member']['zxc'] = "Sorry, that username is already taken.";
$lng['member']['qwe'] = "Your email address is already registered to another username!";
$lng['member']['wer'] = "You did not enter a username.";
$lng['member']['sdf'] = "You cannot use that username.";
$lng['member']['sss'] = "You cannot use that email address.";
$lng['member']['ert'] = "Your username contains invalid characters.";
$lng['member']['dfg'] = "You account info has been saved. You will be emailed with a special password that you will have to use the first time that you log in.  It may take a couple of minutes for the email to reach you.";
$lng['member']['cvb'] = "Your username is too long.";
$lng['member']['cva'] = "You have been registered.";
$lng['member']['pag'] = "Password Again";
$lng['member']['mc'] = "Mood was last changed on";
$lng['member']['au'] = "Active";
$lng['member']['ms'] = "Member Since";
$lng['member']['du'] = "Inactivate";
$lng['member']['ot'] = "Override Title";
$lng['member']['li'] = "You have been logged in.";
$lng['member']['ad'] = "Your account has been disabled.  Contact the board administration to get it activated again.";
$lng['member']['ip'] = "Invalid password. #ltbr#gt";
$lng['member']['iu'] = "Invalid username. #ltbr#gt";
$lng['member']['gb'] = "Please go back and try again.";
$lng['member']['lo'] = "You have been logged out.";
$lng['member']['ng'] = "New Group";
$lng['member']['pw'] = "Password:";
$lng['member']['hidemail'] = "Hide Your E-mail Address:";
$lng['member']['tz'] = "Time Zone:";
$lng['member']['aa'] = "Your account has been activated, and you have been logged in.";
$lng['member']['specifi'] = "and more specifically:";
$lng['member']['smood'] = "Custom Mood Text (leave blank for default text)";
$lng['member']['mood'] = "Mood";
$lng['member']['user_st'] = "User Status";
$lng['member']['nothing'] = "Nothing";
$lng['member']['writes'] = "%e writes"; // %e = user
$lng['member']['logged'] = "Logged in as:";
$lng['member']['ablity_post'] = "You can post new topics.";
$lng['member']['ablity_repl'] = "You can reply to topics.";
$lng['member']['ablity_edit'] = "You can edit your own posts.";
$lng['member']['ablity_edia'] = "You can edit any post.";
$lng['member']['ablity_dele'] = "You can delete your own posts.";
$lng['member']['ablity_dela'] = "You can delete any post.";
$lng['member']['ablity_delt'] = "You can delete your own topics.";
$lng['member']['ablity_deta'] = "You can delete any topic.";
$lng['member']['ablity_clos'] = "You can close your own topics.";
$lng['member']['ablity_cloa'] = "You can close any topic.";
$lng['member']['ablity_move'] = "You can move your own topics.";
$lng['member']['ablity_mova'] = "You can move any topic.";
$lng['member']['ablity_aacp'] = "You can access the Administrator's Control Panel.";
$lng['member']['ablity_modf'] = "You can moderate forum(s).";
$lng['member']['ablity_sndp'] = "You can send and recieve private messages.";
$lng['search']['cs'] = "Do you want a case-sensitive search?";
$lng['search']['ss'] = "Do you want an extremely strict search?";
$lng['messenger']['inbox_stat'] = "Your %e has %c new messages."; // %e = inbox, %c = number of new messages
$lng['messenger']['nom'] = "You have no messages in your #lt?=?#gt, #lt?=?#gt.";
$lng['messenger']['msrsd'] = "Message Subject, Recipient/Sender, & Date";
$lng['messenger']['checka'] = "Check/Uncheck All Messages";
$lng['messenger']['check'] = "Check";
$lng['messenger']['status'] = "Status";
$lng['messenger']['mess'] = "Messenger";
$lng['messenger']['inbox'] = "Inbox";
$lng['messenger']['outbox'] = "Outbox";
$lng['messenger']['send_pm'] = "Send PM";
$lng['messenger']['mdq'] = "Are you sure you wish to delete the selected message(s)?";
$lng['messenger']['fwdg'] = "Forwarding";
$lng['messenger']['sndg'] = "Sending";
$lng['messenger']['vewg'] = "Viewing";
$lng['messenger']['newm'] = "New Message";
$lng['messenger']['oldm'] = "Old Message";
$lng['messenger']['fore'] = "Forward to Email Address";
$lng['messenger']['forw'] = "Forward";
$lng['messenger']['repl'] = "Reply";
$lng['messenger']['nome'] = "You have no messages.";
$lng['messenger']['dchm'] = "Delete Checked Messages";
$lng['messenger']['rpea'] = "Recipiant's Email Address:";
$lng['messenger']['orgs'] = "Original Sender:";
$lng['messenger']['ymrs'] = "You may not reply to %e messages."; // %e = type of message
$lng['messenger']['dltg'] = "Deleting";
$lng['messenger']['pf'] = "Your inbox is %e% full."; // %e = percent full
$lng['messenger']['boxalert'] = "You can accept up to %e more messages."; // %e = number of messages
$lng['toplinks']['home'] = "Home";
$lng['toplinks']['register'] = "Register";
$lng['toplinks']['memberlist'] = "Member List";
$lng['toplinks']['login'] = "Login";
$lng['toplinks']['logout'] = "Logout";
$lng['toplinks']['search'] = "Search";
$lng['toplinks']['profile'] = "Profile";
$lng['toplinks']['usercp'] = "User Control Panel";
$lng['toplinks']['empty_slot'] = "Empty Slot";
$lng['toplinks']['admincp'] = "Administrator's Control Panel";
$lng['iai']['note_contents'] = "Note Contents";
$lng['iai']['notes'] = "Notes";
$lng['iai']['m_notes'] = "Manage Notes";
$lng['iai']['add_note'] = "Add Note";
$lng['iai']['l_note'] = "Local Note";
$lng['iai']['g_note'] = "Global Note";
$lng['iai']['no_notes'] = "There are no notes.";
$lng['iai']['n_st'] = "Displays, starting on $e and will continue until deleted.";
$lng['iai']['n_un'] = "Will display until $e or when deleted";
$lng['iai']['n_ft'] = "Will display from %e until %f or when deleted.";
$lng['iai']['n_dn'] = "It is displaying now and will continue until deleted.";
$lng['iai']['edit_forum'] = "Edit Forum";
$lng['iai']['edit'] = "Edit";
$lng['iai']['delete'] = "Delete";
$lng['iai']['delete_fsuccess'] = "The selected forum has been deleted.";
$lng['iai']['delete_csuccess'] = "The selected category has been deleted.";
$lng['iai']['move_up'] = "Move Up";
$lng['iai']['move_down'] = "Move Down";
$lng['iai']['move_forum'] = "Move Forum";
$lng['iai']['move'] = "Move";
$lng['iai']['cant_move'] = "Can't Move";
$lng['iai']['move_forum_success'] = "The selected forum has been moved.";
$lng['iai']['cmove_up_success'] = "The selected category has been moved up.";
$lng['iai']['cmove_down_success'] = "The selected category has been moved down.";
$lng['iai']['new_forum'] = "New Forum";
$lng['iai']['new_forum_success'] = "Forum %e has been created!";
$lng['iai']['edit_forum_post_groups'] = "Post Groups";
$lng['iai']['edit_forum_view_groups'] = "View Groups";
$lng['iai']['edit_forum_reply_groups'] = "Reply Groups";
$lng['iai']['moderators_for_forum'] = "Moderators for forum %e"; // %e = forum name
$lng['iai']['add_moderator'] = "Add New Moderator";
$lng['iai']['add_moderator_error'] = "The selected moderator is already a moderator of the forum.";
$lng['iai']['add_moderator_success'] = "The selected moderator is now a moderator of forum %e."; // %e = forum name
$lng['iai']['edit_moderators'] = "Edit Moderators";
$lng['iai']['remove_moderator'] = "Remove Moderator";
$lng['iai']['remove_moderator_success'] = "The selected moderator is no longer a moderator of forum %e."; // %e = forum name
$lng['iai']['select_new_moderator'] = "Select a user that you would like to add to moderate forum %e."; // %e = forum name
$lng['iai']['no_moderators'] = "There are no moderators for this forum.";
$lng['iai']['account_has_been_disabled'] = "%e's account has been disabled."; // %e = username
$lng['iai']['disabled_fx'] = "%e will not be able to access their account."; // %e = username
$lng['iai']['disable_account'] = "Disable Account";
$lng['iai']['disable_account_query'] = "Are you sure that you wish to disable %e's account? This action #ltB#gtcan#lt/B#gt be undone.";
$lng['iai']['user_title_standard'] = "The user's title was standardized.  It will now progress as specified in the ACP.";
$lng['iai']['user_title_custom'] = "The user's title was customized.  It was customized to %e."; // %e = new title
$lng['iai']['user_title_alter'] = "The user's title was altered.  It was changed from %e to %n."; // %e  = previous title, %n = new title
$lng['iai']['override_title'] = "Override Title";
$lng['iai']['select_forum_destination'] = "Select the category that you want to move forum %e to:"; // %e = forum name
$lng['iai']['forum_move_success'] = "Forum %e has been moved."; // %e = forum name
$lng['iai']['fourm_move_error'] = "edgeBoard couldn't move forum %e because it is already a part of the selected category."; // %e = forum name
$lng['iai']['forum_moderators'] = "%e Forum Moderators"; // %e = forum name
$lng['iai']['edit_group'] = "Edit Group";
$lng['iai']['edit_group_success'] = "%e's group has been edited."; // %e = username
$lng['iai']['delete_forum_query'] = "Are you sure you wish to delete forum #ltB#gt%e#lt/B#gt? This action can not be undone."; // %e = forum name
$lng['iai']['edit_forum_success'] = "The selected forum, #ltB#gt%e#lt/B#gt, has been updated with your changes."; // %e = forum name
$lng['iai']['new_passwords_dont_match'] = "The new passwords did not match.";
$lng['iai']['password_changed'] = "%e's password has been successfully changed."; // %e = username
$lng['iai']['change_password'] = "Change Password";
$lng['iai']['changing_password'] = "Changing %e's Password"; // %e = username
$lng['iai']['new_pass'] = "New Password";
$lng['iai']['new_pass_again'] = "New Password Again";
$lng['iai']['account_enable'] = "Enable Account";
$lng['iai']['account_enable_success'] = "%e's account has been enabled.";
$lng['iai']['enable_account_query'] = "Are you sure that you wish to enable %e's account? This action #ltB#gtcan#lt/B#gt be undone.";
$lng['iai']['new_mod_group'] = "New Group:";
$lng['iai']['new_mod_user'] = "New User:";
$lng['acp']['acp_jump']['01'] = "Time, Date, and Automated Tasks";
$lng['acp']['acp_jump']['02'] = "General Settings";
$lng['acp']['acp_jump']['03'] = "Private Messaging Settings";
$lng['acp']['acp_jump']['04'] = "Customizations, Themes, Styles, and Languages";
$lng['acp']['acp_jump']['05'] = "Email System Settings";
$lng['acp']['acp_jump']['06'] = "Forum and Category Settings";
$lng['acp']['acp_jump']['07'] = "Updates, Add-ons, and Patches";
$lng['acp']['acp_jump']['08'] = "User Title and Pip Settings";
$lng['acp']['acp_jump']['09'] = "Safety (Backup and Restore)";
$lng['acp']['acp_jump']['10'] = "User and Group Management";
$lng['acp']['acp_jump']['11'] = "Access Log";
$lng['acp']['acp_jump']['12'] = "View Sessions";
$lng['acp']['acp_jump']['13'] = "Get Support";
$lng['acp']['acp_jump']['14'] = "Clean Up Categories, Forums, and Topics";
$lng['acp']['cleanup_mi'] = "The topic: %e had a multiple entry.  It was corrected.";
$lng['acp']['cleanup_bf'] = "The topic: %e had a major bug.  It was deleted.";
$lng['acp']['title1'] = "Settings for edgeBoard %s (%e)"; // %e = version
$lng['acp']['title2'] = "%e Tools"; // %e = version
$lng['acp']['dellog'] = "The log has been deleted.";
$lng['acp']['querydellog'] = "Are you sure you want to delete this access log?  This action cannot be undone.";
$lng['acp']['nonret'] = "The access events on today that happened before this point in time will not be retrieveable again.";
$lng['acp']['recfor'] = "The access records for %e will not be retrieveable again.";
$lng['acp']['otherlog'] = "Other Logs:";
$lng['acp']['logfor'] = "Access Log for %e"; // %e = log date
$lng['acp']['userdel'] = "User deleted the access log for %e"; // %e = log date
$lng['acp']['inexistant'] = "That access log does not exist!";
$lng['acp']['nothing'] = "Nothing happened on that day!";
$lng['acp']['gen'] = "Generate Log for %e"; // %e = date
$lng['acp']['logsize'] = "This log is taking up %eKB of space."; // %e = log size
$lng['acp']['heading'] = "Heading links that a logged-in user will have";
$lng['acp']['hnote'] = "Administrator's Control Panel links will be automatically added by the board for administrators.";
$lng['acp']['heading_g'] = "Heading links that a guest will have";
$lng['acp']['ss'] = "%e Style Sheet"; // %e = theme name
$lng['acp']['language'] = "Language";
$lng['acp']['theme'] = "Theme";
$lng['acp']['themes'] = "Themes";
$lng['acp']['trb'] = "Create Title";
$lng['acp']['trc'] = "A new user title, called %e, has been created."; // %e = title
$lng['acp']['eup'] = "Do you want to enable the user panel?";
$lng['acp']['abb'] = "Do you want to enable the usage of board code?";
$lng['acp']['aei'] = "Do you want to enable the usage of emoticons (smileys)?";
$lng['acp']['agp'] = "Do you want to enable guest posting?";
$lng['acp']['aht'] = "Do you want to enable posts with HTML?  This is a major security risk!!!";
$lng['acp']['ase'] = "Do you want to allow the board to send emails?";
$lng['acp']['bem'] = "Board email address";
$lng['acp']['bsv'] = "Board URL";
$lng['acp']['qem'] = "Do you want to require email authorization upon user registration?";
$lng['acp']['abl'] = "#ltu#gtALL#lt/u#gt blue email settings have to specified in order to enable this feature!";
$lng['acp']['aaa'] = "If you would like for users to forward private messages in their inbox or outbox to an email address, select 'Yes'.";
$lng['acp']['aab'] = "If you would like for new users to have to confirm their email address in order to switch it, select 'Yes'.";
$lng['acp']['aac'] = "Do you want to require a user to verify their email address when they change it?";
$lng['acp']['aad'] = "Do you want to enable forwarding Private Messages to email?";
$lng['acp']['aaq'] = "If the board's location looks something like 'www.edgeboard.net/forums' then the URL is 'www.edgeboard.net/forums'. (Please do not add a trailing slash!)";
$lng['acp']['cbc'] = "Category %e has been created.  You can %a forums to it."; // %e = category name, %a = add new forums link
$lng['acp']['add'] = "add";
$lng['acp']['sdc'] = "Select which category that you want the forums that are currently in category #ltB#gt%e#lt/B#gt to go upon deletion."; // %e = category name
$lng['acp']['bdn'] = "What is the board's name?";
$lng['acp']['wbs'] = "What is the URL of the board's homepage?";
$lng['acp']['sta'] = "What status do you want the board to have?";
$lng['acp']['st1'] = "Board is Open";
$lng['acp']['st2'] = "Board is Temporarily Closed";
$lng['acp']['st3'] = "Board is Permanently Closed";
$lng['acp']['st4'] = "Board is Temporarily Closed for Updates";
$lng['acp']['ban'] = "Board Announcements:";
$lng['acp']['oal'] = "There should be only one announcement per line.";
$lng['acp']['dal'] = "Do you want to enable the board to log events for the access log?";
$lng['acp']['mas'] = "What do you want the maximum attachment upload size to be?";
$lng['acp']['svz'] = "Set the value to a letter or word if you want to disable attachment uploads.";
$lng['acp']['mah'] = "What do you want the maximum maximum avatar height to be?";
$lng['acp']['maw'] = "What do you want the maximum maximum avatar width to be?";
$lng['acp']['mts'] = "What do you want the maximum length of a topic's subject to be?";
$lng['acp']['bwf'] = "What bad words do you want to filter out?";
$lng['acp']['map'] = "What do you want the maximum post size to be?";
$lng['acp']['mws'] = "What do you want the maximum word size to be?";
$lng['acp']['tpp'] = "How many topics will be displayed on each page?";
$lng['acp']['ppp'] = "How many posts and search results will be displayed on each page?";
$lng['acp']['mpp'] = "How many members will be displayed on each page of the member listing?";
$lng['acp']['gds'] = "Do you want to enable Graphic Security Codes? (The user will have to type in a security code that is displayed on a graphic when registering.)";
$lng['acp']['q01'] = "Do you want to show Integrated Administration Interface in the forum listing view?";
$lng['acp']['q01'] = "Do you want to show Integrated Administration Interface in the forum listing view?";
$lng['acp']['q02'] = "Do you want to show page links to topics in the forum listing view?";
$lng['acp']['ret'] = "REDUCES EXECUTION TIME";
$lng['acp']['q04'] = "1111111111111";
$lng['acp']['sys'] = "System";
$lng['acp']['eby'] = "Edited by %e on %d."; // %e = username, %d = date
$lng['acp']['mpr'] = "Maximum Private Message Recipiants:";
$lng['acp']['mmi'] = "Maximum Number of Messages in Inbox:";
$lng['acp']['typ'] = "Type";
$lng['acp']['spm'] = "System Private Messages";
$lng['acp']['imb'] = "Install My Board";
$lng['acp']['ice'] = "Installation Complete";
$lng['acp']['icm'] = "Your edgeBoard has been installed!  If you need to change any of the options that you just set, go to the Administrator's Control Panel link in the toplinks (they are not currently shown). You must now register a username and a password for your board. To do so, go #ltA HREF='index.php?a=member&type=register'#gthere#lt/A#gt.  When you register you will automaticaly be made an administrator.";
$lng['acp']['sui'] = "Select an Update Package to Install";
$lng['acp']['upf'] = "Update Package Filename";
$lng['acp']['pot'] = "How long should a user have to wait after they post before they can post again? (In Seconds)";
$lng['acp']['otl'] = "How long should a user be kept in the online listing after being inactive? (In Minutes)";
$lng['acp']['tit'] = "Title";
$lng['acp']['rnp'] = "Required Number of Posts";
$lng['acp']['nop'] = "Number of Pips";
$lng['acp']['gpm'] = "Group Management";
$lng['acp']['usm'] = "User Management";
$lng['acp']['btf'] = "How should the date and time be formatted? (Regular)";
$lng['acp']['ltf'] = "How should the date and time be formatted? (Long)";
$lng['acp']['stf'] = "How should the date and time be formatted? (Short)";
$lng['acp']['viu'] = "View Users";
$lng['acp']['gpn'] = "Group Name";
$lng['acp']['sap'] = "Select the Appropriate Special Access Permissions";
$lng['acp']['zap'] = "Do you want to allow group members to post?";
$lng['acp']['zar'] = "Do you want to allow group members to reply?";
$lng['acp']['zae'] = "Do you want to allow group members to edit their own posts?";
$lng['acp']['zea'] = "Do you want to allow group members to edit all posts?";
$lng['acp']['zdo'] = "Do you want to allow group members to delete their own post?";
$lng['acp']['zda'] = "Do you want to allow group members to delete all posts?";
$lng['acp']['zot'] = "Do you want to allow group members to delete their own topic?";
$lng['acp']['zat'] = "Do you want to allow group members to delete all topics?";
$lng['acp']['zct'] = "Do you want to allow group members to close their own topic?";
$lng['acp']['zca'] = "Do you want to allow group members to close all topics?";
$lng['acp']['zmo'] = "Do you want to allow group members to move thier own topic?";
$lng['acp']['zma'] = "Do you want to allow group members to move all topics?";
$lng['acp']['zsm'] = "Do you want to allow group members to send private messages?";
$lng['acp']['zlp'] = "Large Pip Selection";
$lng['acp']['zsp'] = "Small Pip Selection";
$lng['acp']['zcl'] = "Formating prefix for the 'Who's Online' listing";
$lng['acp']['zcs'] = "Formating suffix for the 'Who's Online' listing";
$lng['acp']['qaa'] = "Disabled";
$lng['acp']['qab'] = "Enabled";
$lng['acp']['qac'] = "Enable User";
$lng['acp']['qad'] = "Disable User";
$lng['acp']['qae'] = "Sessions";
$lng['acp']['qaf'] = "Select Session Type";
$lng['acp']['qag'] = "Session Archives";
$lng['acp']['qah'] = "Active Sessions";
$lng['acp']['qai'] = "Start Time";
$lng['acp']['qaj'] = "End Time";
$lng['acp']['qak'] = "Jump To";
$lng['acp']['qal'] = "Session ID";
$lng['acp']['controls'] = "Controls";
$lng['acp']['sm'] = "You may return to: [ %e #12 %f ]"; // $e = ACP Main, %f = Forums Main
$lng['acp']['saved'] = "Your settings have been saved.";
$lng['ucp']['001'] = "You're visible, you can #ltA HREF='index.php?a=user.controlpanel&v=hide'#gtmake yourself invisible#lt/A#gt if you want to.";
$lng['ucp']['002'] = "You're invisible, you can #ltA HREF='index.php?a=user.controlpanel&v=show'#gtmake yourself visible#lt/A#gt if you want to.";
$lng['ucp']['003'] = "%e's Control Panel";
$lng['ucp']['004'] = "Title and Username";
$lng['ucp']['005'] = "Invisibility";
$lng['ucp']['006'] = "Avatar";
$lng['ucp']['007'] = "No Avatar";
$lng['ucp']['008'] = "Edit Profile";
$lng['ucp']['009'] = "Usergroup";
$lng['ucp']['010'] = "Permissions";
$lng['ucp']['011'] = "Pip(s)";
$lng['ucp']['012'] = "Do you want to apply daylight savings adjustments to the time? (+1h)";
$lng['system']['d'][1] = "When a user first registers for the board";
$lng['system']['d'][2] = "When a user is able to set their own title in their profile";
$lng['system']['d'][3] = "When a user's group is changed";
$lng['system']['t'][1] = "When?";
$lng['system']['t'][2] = "When?";
$lng['system']['t'][3] = "When?";
$lng['moderate']['dest'] = "Destination:";
$lng['moderate']['topic'] = "Moderate";
$lng['moderate']['rename'] = "Rename";
$lng['moderate']['close'] = "Close";
$lng['moderate']['open'] = "Open";
$lng['moderate']['pin'] = "Pin";
$lng['moderate']['unpin'] = "Unpin";
$lng['moderate']['move'] = "Move";
$lng['moderate']['delete'] = "Delete";
$lng['moderate']['conf_ban'] = "Confirm Banishment";
$lng['moderate']['conf_ban_query'] = "Are you sure you want to ban this user?";
$lng['moderate']['ban_success'] = "The user was located and was banned from the board.";
$lng['moderate']['ban_fail'] = "The operation was unsuccessful.  The board was not able to log the user's Internet Protocol Address the last time they were online.";
$lng['moderate']['ban'] = "Ban";
$lng['forum']['category'] = "Category";
$lng['forum']['categories'] = "Categories";
$lng['forum']['forum'] = "Forum";
$lng['forum']['forums'] = "Forums";
$lng['forum']['no_forums'] = "There are currently no forums in this category.";
$lng['forum']['no_posts'] = "There are no topics in this forum right now.";
$lng['forum']['last_post_in'] = "The last post was in %e by %u on %t."; // %e = topic, %u = user, %t = time
$lng['forum']['topic'] = "Topic";
$lng['forum']['question'] = "Question";
$lng['forum']['post'] = "Post";
$lng['forum']['topics'] = "Topics";
$lng['forum']['posts'] = "Posts";
$lng['forum']['freq'] = "Frequency";
$lng['forum']['viewing_forum'] = "Viewing Forum";
$lng['forum']['viewing_topic'] = "Viewing Topic";
$lng['forum']['viewing_poll'] = "Viewing Poll";
$lng['forum']['forum_name'] = "Forum Name";
$lng['forum']['forum_desc'] = "Forum Description";
$lng['forum']['last_post'] = "Last Post";
$lng['forum']['moderators'] = "Moderators";
$lng['forum']['td'] = "Topic Description";
$lng['forum']['pi'] = "Post Icons";
$lng['forum']['vf'] = "You must first vote before you can view a poll's results.";
$lng['forum']['av'] = "You have already voted!";
$lng['forum']['vr'] = "Your vote has been recorded.";
$lng['forum']['rs'] = "Results";
$lng['forum']['gp'] = "Graph";
$lng['forum']['vo'] = "Vote";
$lng['forum']['vt'] = "Votes";
$lng['forum']['ch'] = "Choice";
$lng['forum']['tv'] = "%e Votes";
$lng['forum']['new_categroy'] = "New Category";
$lng['forum']['views'] = "Views";
$lng['forum']['posts'] = "Posts";
$lng['forum']['posted_by'] = "Posted By";
$lng['forum']['subject'] = "Subject";
$lng['forum']['pinned'] = "Pinned";
$lng['forum']['closed'] = "Closed";
$lng['forum']['moved'] = "Moved";
$lng['forum']['poll'] = "Poll";
$lng['forum']['active'] = "Recently Active";
$lng['forum']['inactive'] = "Recently Inactive";
$lng['forum']['c_active'] = "Recently Active (Closed)";
$lng['forum']['c_inactive'] = "Recently Inactive (Closed)";
$lng['post']['pnt'] = "Posting a New Topic";
$lng['post']['pro'] = "Posts, in Reverse Order";
$lng['post']['ina'] = "Include an Attachment (the max file size is %e bytes)"; // %e = max file size in bytes
$lng['post']['att'] = "Attachment";
$lng['post']['amu'] = "'%e' was not uploaded.  It is too large (%s bytes). The maximum size is %m bytes.";
$lng['post']['auu'] = "'%e' was not uploaded. It is of a restricted file type. You have two options: 1. Change the file's extention and try again later, or 2. Put the file in an archive (.zip file) and then try uploading it again."; // %e = file name
$lng['post']['asu'] = "'%e' was successfully uploaded to the board. "; // %e = file name
$lng['post']['reb'] = "Please register to fully enjoy the board!";
$lng['post']['ngp'] = "Guest posting is not allowed. You have to be a registered member.";
$lng['post']['orp'] = "Original Poster:";
$lng['errors']['error'] = "Error(s) Occurred During Execution";
$lng['errors']['bsc'] = "Your security code entry was invalid!";
$lng['errors']['aaj'] = "You cannot delete a default group.  You can change their name and permissions, though.";
$lng['errors']['001'] = " There was at least one invlaid username so the message may not have reached all recipiants.";
$lng['errors']['002'] = "The message was not sent to the following %e of %f users because you have exceeded the max amount of recipiants (%g) for a private message!";
$lng['errors']['003'] = "You may not delete the first post of a topic.";
$lng['errors']['004'] = "You have already posted in the last %e seconds. Please wait and try again."; // %e = post time
$lng['errors']['noc'] = "You did not type in any choices.";
$lng['errors']['noe'] = "The topic or poll that you are trying to access does not exist.";
$lng['errors']['nom'] = "You did not enter a message.";
$lng['errors']['nonsp'] = "edgeBoard was unable to perform the requested action!";
$lng['errors']['nor'] = "You did not type in a recipiant.";
$lng['errors']['nos'] = "You did not type in a subject.";
$lng['errors']['nec'] = "A new poll must have more than one choice!";
$lng['errors']['nuf'] = "You have not uploaded any update files.";
$lng['errors']['tic'] = "You may not reply to closed topics.";
$lng['errors']['utd'] = "Unable to delete the file '%e'."; // %e = filename
$lng['errors']['utm'] = "Unable to CHMOD %e0 to %e1."; // %e0 = filename, %chmod value
$lng['errors']['utc'] = "Unable to copy from %e0 to %e1."; // %e0 = filename, %e1 = destination
$lng['errors']['bio'] = "You cannot log out when the board is not open.";
$lng['errors']['bar']['aaa'] = "You didn't select anything to backup.";
$lng['errors']['bar']['aab'] = "You didn't select anything to restore.";
$lng['errors']['bar']['aac'] = "You've yet to back up forums.";
$lng['errors']['bar']['aad'] = "You've yet to back up data.";
$lng['errors']['bar']['aae'] = "Please select which option you want to perform.";
$lng['errors']['bar']['aaf'] = "Backup";
$lng['errors']['bar']['aag'] = "Restore";
$lng['errors']['bar']['aah'] = "Forums and Data";
$lng['errors']['bar']['aai'] = "Data";
$lng['errors']['alr_inst'] = "The board has laready been installed!";
$lng['errors']['no_perm'] = "You do not have the correct permissions to perform this action.";
$lng['errors']['no_pw_match'] = "Your new passwords did not match.";
$lng['errors']['incorrect_pw'] = "You entered an incorrect old password so the board could not change your password.";
$lng['errors']['no_guest_perm'] = "You are not logged in and may not perform this action.";
$lng['errors']['clear_cookies'] = "You must clear your cookies before you can view this page.";
$lng['errors']['unauth_action'] = "Tried to perform an unauthorized action.";
$lng['errors']['must_agree'] = "You must agree to the rules of this board if you wish to become a member.";
$lng['errors']['not_exist'] = "The %e that you are trying to access does not exist!"; // %e = topic, forum, poll
$lng['errors']['sdm'] = "You must select one or more messages to delete.";
$lng['errors']['no_del2'] = "You may not delete one or more of the messages you specified!";
$lng['errors']['del_m'] = "Delete some of your messages because you are unable to read your new messages!";
$lng['errors']['maxin2'] = "Your box is at the maximum number of %e messages!"; // %e = max number of messages in inbox
$lng['errors']['maxin'] = "Your box is over the maximum number of %e messages!"; // %e = max number of messages in inbox
$lng['errors']['no_del'] = "You may not delete this message.";
$lng['errors']['no_vew'] = "You may not view this message.";
$lng['errors']['banned'] = "We're sorry, but you have been banned form the board.";
$lng['errors']['fc'] = "Sorry, the forums have been closed.";
$lng['errors']['ftc'] = "Sorry, the forums have been temporarily closed.";
$lng['errors']['fca'] = "The forums have been closed, but you have permissions to access the board.";
$lng['errors']['fctgp'] = "Forums Closed to the General Public";
$lng['errors']['mcfu'] = "The Forums Are Momentarily Closed For Updates";
$lng['errors']['mcfum'] = "We're sorry, but the forums have been momentarily closed for updates.  Please return in a couple of minutes.";
$this-#gtlng = $lng;
unset($lng);
?#gt
";}i:44;a:2:{i:0;s:15:"index/rules.cgi";i:1;s:867:"Please be aware that we reserve the rights to alter, delete, move, copy or refer to any 
message you post on this board without reason. #ltBR#gt#ltBR#gt

Any message that is posted on the board is the view of the author of the message, and not 
the administrator of the board. We try to remove or edit any material that we find 
offensive, although we can not guarantee that all of them will be removed. If you find any 
messages that you find objectionable on the board, please contact an administrator or 
moderator by email or private message.#ltBR#gt#ltBR#gt

By agreeing to these conditions, you agree that you will not knowing post any material 
which is knowingly false and/or defamatory, inaccurate, abusive, vulgar, hateful, 
harassing, obscene, profane, sexually oriented, threatening, invasive of another person's 
privacy, or violates any law.";}i:45;a:2:{i:0;s:22:"index/welcomeemail.cgi";i:1;s:615:"Welcome to %b, %u!

First of all, thanks for registering at the forums. You are now a full-fledged
member of the board!  Feel free to post as much as you like and if you have any
questions or comments, don't hesitate to post them!

You can return to the forums by going to %e
Be sure to add that URL to your bookmarks/favorites!

Once you go to the forums, you can use the following information:
	Username: %u
	Password: %p

Your password is case-sensitive!

Thanks for using the forums, %u! If you have any further questions, don't 
hesitate to post them at the forums.

Goodbye and see you soon!";}i:46;a:2:{i:0;s:24:"index/installwelcome.cgi";i:1;s:1718:"#ltspan class='regular'#gtWelcome to edgeBoard, the first fearure-rich flat-file database Bulletin Board System!  edgeBoard 
was put together as an alternative to the unoppositioned MySQL board.  Now because of edgeBoard, webmasters and developers across the 
internet can have a feature-rich discussion board without paying their hosts tons of money for MySQL support. edgeBoard is now a 
Bulletin Board veteran because of fan support.#ltbr#gt#ltbr#gt

Now it's your turn!  You now have your very own edgeBoard to use at your website.  edgeBoard is very versatile and is 
virtually garunteed to fit your discussion board needs.  This BBS (Bulletin Board System) includes the following and many more features:#ltbr#gt
Themes, ACP (Administrator's Control Panel), BBCodes, bard status alerts, changeable toplinks, attachment uploads, 
IAI (Integrated Admin Inerface), moderators, user groups, configurable pips, user profiles, private message system, live IP address logging, 
user banishment, user management, access log, quoteable/editable/deleteable posts, polls, and much more!#ltbr#gt#ltbr#gt

#lthr#gt#ltbr#gt
Before the install begins, you must do a few things to allow edgeBoard to work.#ltbr#gt#ltbr#gt
1. Open your FTP program.  If you don't have one, download #lta href='www.smartftp.com'#gtSmartFTP#lt/a#gt.#ltbr#gt
2. Go to the folder of your board and CHMOD the following folders to 0777: 'forums', 'data', 'backup', 'copy'. (If you're using SmartFTP, select the folders and press 'F7' to CHMOD.)#ltbr#gt
3. Open each of the previously stated folders and CHMOD all of the files inside them including the subfolders to 0777.#ltbr#gt#ltbr#gt

Now we are ready to proceed.#ltbr#gt#lt/span#gt";}i:47;a:2:{i:0;s:16:"index/search.php";i:1;s:177:"#lt?php
	if ($a == "search") { $a = ""; }
	include_once "lib/genesis.php";
	include_once "classes/search.php";
	$b = "blank";
	$que = "search";
	include "index.php";
?#gt";}i:48;a:2:{i:0;s:19:"language/index.html";i:1;s:0:"";}i:49;a:2:{i:0;s:35:"language/english/installwelcome.cgi";i:1;s:1718:"#ltspan class='regular'#gtWelcome to edgeBoard, the first fearure-rich flat-file database Bulletin Board System!  edgeBoard 
was put together as an alternative to the unoppositioned MySQL board.  Now because of edgeBoard, webmasters and developers across the 
internet can have a feature-rich discussion board without paying their hosts tons of money for MySQL support. edgeBoard is now a 
Bulletin Board veteran because of fan support.#ltbr#gt#ltbr#gt

Now it's your turn!  You now have your very own edgeBoard to use at your website.  edgeBoard is very versatile and is 
virtually garunteed to fit your discussion board needs.  This BBS (Bulletin Board System) includes the following and many more features:#ltbr#gt
Themes, ACP (Administrator's Control Panel), BBCodes, bard status alerts, changeable toplinks, attachment uploads, 
IAI (Integrated Admin Inerface), moderators, user groups, configurable pips, user profiles, private message system, live IP address logging, 
user banishment, user management, access log, quoteable/editable/deleteable posts, polls, and much more!#ltbr#gt#ltbr#gt

#lthr#gt#ltbr#gt
Before the install begins, you must do a few things to allow edgeBoard to work.#ltbr#gt#ltbr#gt
1. Open your FTP program.  If you don't have one, download #lta href='www.smartftp.com'#gtSmartFTP#lt/a#gt.#ltbr#gt
2. Go to the folder of your board and CHMOD the following folders to 0777: 'forums', 'data', 'backup', 'copy'. (If you're using SmartFTP, select the folders and press 'F7' to CHMOD.)#ltbr#gt
3. Open each of the previously stated folders and CHMOD all of the files inside them including the subfolders to 0777.#ltbr#gt#ltbr#gt

Now we are ready to proceed.#ltbr#gt#lt/span#gt";}i:50;a:2:{i:0;s:26:"language/english/rules.cgi";i:1;s:867:"Please be aware that we reserve the rights to alter, delete, move, copy or refer to any 
message you post on this board without reason. #ltBR#gt#ltBR#gt

Any message that is posted on the board is the view of the author of the message, and not 
the administrator of the board. We try to remove or edit any material that we find 
offensive, although we can not guarantee that all of them will be removed. If you find any 
messages that you find objectionable on the board, please contact an administrator or 
moderator by email or private message.#ltBR#gt#ltBR#gt

By agreeing to these conditions, you agree that you will not knowing post any material 
which is knowingly false and/or defamatory, inaccurate, abusive, vulgar, hateful, 
harassing, obscene, profane, sexually oriented, threatening, invasive of another person's 
privacy, or violates any law.";}i:51;a:2:{i:0;s:29:"language/english/language.php";i:1;s:39545:"#lt? $lng['help']['edit_forums_description'] = "This is where you can administer forums (renaming, editing, changing the descriptions, and permissions.)";
$lng['help']['new_category_description'] = "This adds a new category to the board.";
$lng['help']['forums_link'] = "Shows the main forum page.";
$lng['help']['feature_disabled'] = "This feature has been disabled in this version.";
$lng['help']['mark_all'] = "This makes all of the forum icons indicate that they have been read.";
$lng['help']['edit_cat'] = "This is where you can administer this category.";
$lng['help']['delete_cat'] = "This removes the category from the board.";
$lng['help']['move_c_up'] = "This moves this category up one.";
$lng['help']['move_c_down'] = "This moves this category down one.";
$lng['help']['new_forum'] = "This adds a new forum to the bottom of this category.";
$lng['help']['delete_forum'] = "This deletes this forum.";
$lng['help']['emoticons'] = "Select Yes if you want to allow emoticons.";
$lng['help']['bbcode'] = "Select Yes if you want to allow BB Code.  BB Code is the fancy effects that are applied to text through the use of special codes. ([b] = Bold and [u] = Underline) There are many more than the previous two mentioned.";
$lng['help']['guestposting'] = "Select Yes if you want to allow any guest to post here.  This will generally reduce the number of people that register for your board.";
$lng['help']['time_format'] = "For help with this, visit http://www.php.net/manual/en/function.date.php";
$lng['help']['forum_up'] = "This moves this forum up one.";
$lng['help']['gnote'] = "Adds a note that will be seen on every page.";
$lng['help']['lnote'] = "Adds a note that will be seen on just the current page.";
$lng['help']['forum_down'] = "This moves this forum down one.";
$lng['help']['move_forum'] = "This moves this forum to a different category.";
$lng['help']['post_groups'] = "Indicates which user groups can or cannot post new topics.";
$lng['help']['view_groups'] = "Indicates which user groups can or cannot see this forum.";
$lng['help']['reply_groups'] = "Indicates which user groups can or cannot reply to existing topics.";
$lng['help']['board_status'] = "Use this if you have to update your board or if you want to halt access to it.";
$lng['help']['maxup'] = "This is the maximum file size that an attachment can have.";
$lng['help']['bwf'] = "Put the words you want to filter, seperated by commas: badword,anotherone,andanother here.";
$lng['help']['maxpost'] = "The maximum number of characters in a post.";
$lng['help']['ovt1'] = "This feature is used to change the selected users usergroup.";
$lng['help']['ovt2'] = "This feature is used to override the selected users title and replace it with one that you specify. To return the selected users title to the standard, override the current title with the keyword, :Standard:";
$lng['help']['maxch'] = "The maximum size, in characters, of a long word before it is affected by word wrap.";
$lng['help']['quickadd'] = "This adds the currently selected user to the recipiants field.";
$lng['help']['posttime'] = "Number of seconds that users will have to wait after they have posted to post again.";
$lng['help']['olt'] = "This is the legnth of time a user can be in the Whos Online list before they are removed. (15 minutes is recommended)";
$lng['help']['color'] = "Defines the formatting (in HTML) of users in the selected group that will be applied to their username in the Whos Online Listing on the main page.";
$lng['help']['titlerename'] = "Tells the board what title that users meeting this criteria will have.  Set the title to :Previous: to keep the previous title or set it to :UserSet: to allow the user to se their own title in their profile.";
$lng['help']['iaigp'] = "Guest Posting must be enabled in the ACP area: Customizations, before this one checkbox can have any significant meaning, otherwise, guests will always be denied access to post or reply.";
$lng['nav']['con'] = "Configuring Your Installation";
$lng['nav']['ins'] = "Installing Your edgeBoard";
$lng['nav']['src'] = "Search Results for '%e'"; // %e = search query
$lng['nav']['vap'] = "Viewing A Profile";
$lng['nav']['edt'] = "Editing";
$lng['misc']['from'] = "From:";
$lng['misc']['to'] = "To:";
$lng['misc']['mess'] = "Message:";
$lng['misc']['acti'] = "Actions:";
$lng['misc']['add'] = "Add";
$lng['misc']['sbl'] = "Sort By Letter";
$lng['misc']['info'] = "Information";
$lng['misc']['sebl'] = "Do you want to show that you edited this post?";
$lng['misc']['acp_main'] = "ACP Main";
$lng['misc']['forum_main'] = "Forums Main";
$lng['misc']['aus-nu'] = "Are you sure you want to do this?  This action cannot be undone.";
$lng['misc']['aus-cu'] = "Are you sure you want to do this?  This action can be undone.";
$lng['misc']['go'] = "Go";
$lng['misc']['change'] = "Change";
$lng['misc']['yes'] = "Yes";
$lng['misc']['no'] = "No";
$lng['misc']['saved'] = "Saved";
$lng['misc']['ok'] = "Ok";
$lng['misc']['sort'] = "Sort";
$lng['misc']['name'] = "Name";
$lng['misc']['noeff'] = "No effects.";
$lng['misc']['timet'] = "Time";
$lng['misc']['uinv'] = "User Involved";
$lng['misc']['event'] = "Event";
$lng['misc']['eff'] = "Effects";
$lng['misc']['user'] = "User";
$lng['misc']['ipad'] = "IP Address";
$lng['misc']['username'] = "Username";
$lng['misc']['unse'] = "No Email";
$lng['misc']['userno'] = "User Number";
$lng['misc']['lastact'] = "Last Active";
$lng['misc']['date_j'] = "Date Joined";
$lng['misc']['post_ct'] = "Post Count";
$lng['misc']['admin'] = "Administrator";
$lng['misc']['mod'] = "Moderator";
$lng['misc']['guest'] = "Guest";
$lng['misc']['users'] = "Users";
$lng['misc']['admins'] = "Administrators";
$lng['misc']['mods'] = "Moderators";
$lng['misc']['guests'] = "Guests";
$lng['misc']['member'] = "Member";
$lng['misc']['a_members'] = "Anonymous Members";
$lng['misc']['members'] = "Members";
$lng['misc']['total'] = "Total";
$lng['misc']['pages'] = "Pages";
$lng['misc']['pw_changed'] = "Your password has been changed and your browser cookies have been updated.";
$lng['misc']['info_saved'] = "Your account information has been saved.  You're now free to use the board!";
$lng['misc']['level'] = "Level";
$lng['misc']['type_text_here'] = "Type your text here";
$lng['misc']['type_link_here'] = "Type your link here";
$lng['misc']['type_font_here'] = "Type your font name here";
$lng['misc']['type_iurl_here'] = "Type your image URL here";
$lng['misc']['username'] = "Username";
$lng['misc']['password'] = "Password";
$lng['misc']['time'] = "The time is %e."; // %e = current time
$lng['misc']['version'] = "Version";
$lng['misc']['build'] = "Build";
$lng['misc']['iagree'] = "I Agree";
$lng['misc']['idagre'] = "I Don't Agree";
$lng['misc']['uacc'] = "User accessed the access log for %e."; // %e = log date
$lng['misc']['execution_time'] = "Script Execution Time";
$lng['misc']['databases_accessed'] = "Databases Accessed";
$lng['misc']['databases_updated'] = "Databases Updated";
$lng['misc']['server_load'] = "Server Load";
$lng['misc']['unavail'] = "Unavailable";
$lng['misc']['op_complete'] = "Operation Complete";
$lng['misc']['op_successs'] = "The operation was completed successfully.";
$lng['misc']['wait'] = "Please Wait";
$lng['misc']['being_redirected'] = "You are currently being redirected.";
$lng['misc']['cp'] = "Control Panel";
$lng['misc']['cp_query'] = "Click 'yes' if you would like to view the administrator's control panel.  Click 'no' to view your user control panel.";
$lng['misc']['groups'] = "Groups";
$lng['misc']['aut'] = "You have become advanced enough in this board to specify your own unique user title!";
$lng['misc']['yct'] = "Your Customized Title";
$lng['main']['mark_all'] = "Mark All Posts Read";
$lng['main']['no_moderators'] = "None Specified";
$lng['main']['online_data'] = "This data is based on users active in the past %e minutes."; // %e = minutes
$lng['main']['legend'] = "Legend";
$lng['main']['none'] = "None";
$lng['main']['board_info'] = "Board Information";
$lng['main']['whos_online'] = "Who's Online";
$lng['main']['lastclick'] = "Last Click";
$lng['main']['follow'] = "Follow";
$lng['main']['stats'] = "Statistics";
$lng['main']['forum_gfx'] = "Forum Graphics";
$lng['main']['new_posts'] = "New Posts";
$lng['main']['no_new_posts'] = "No New Posts";
$lng['main']['no_members'] = "There are currently no registered members.";
$lng['main']['number_posts'] = "There is a total of #ltb#gt%e posts#lt/b#gt in #ltb#gt%t topics#lt/b#gt."; // %e = number of posts, %t = number of topics
$lng['main']['registered_members'] = "There is a total of #ltb#gt%e registered members#lt/b#gt."; // %e = number of members
$lng['main']['page_accesses'] = "This page has had #ltb#gt%e#lt/b#gt visits.";  // %e = number of accesses
$lng['main']['most_users'] = "The most users to ever be online simultaneously was #ltb#gt%e#lt/b#gt on #ltb#gt%t#lt/b#gt."; // %e = number online, %t = date and time
$lng['main']['newest_member'] = "Our newest registered member is #ltb#gt%e#lt/b#gt."; // %e = newest member
$lng['member']['email'] = "Email Address:";
$lng['member']['memberl'] = "You are viewing page #ltb#gt%e#lt/b#gt with #ltb#gt%m#lt/b#gt members per page."; // %e = page number, %m = number of members per page
$lng['member']['memberm'] = "There were %c members that matched your criteria!"; // %c =  number of members found
$lng['member']['your_info'] = "Your Information";
$lng['member']['your_pref'] = "Your Preferences";
$lng['member']['web_page'] = "Web Page:";
$lng['member']['location'] = "Location:";
$lng['member']['change_pw'] = "Change Password";
$lng['member']['new_pw2'] = "New Password Again:";
$lng['member']['new_pw'] = "New Password:";
$lng['member']['old_pw'] = "Old Password:";
$lng['member']['sia'] = "(maximum 600 characters)";
$lng['member']['add'] = "Additional Info: #ltbr#gt (interests, favorite quotes, etc.) #ltbr#gt (maximum 1500 characters)";
$lng['member']['sig'] = "Signature";
$lng['member']['rmm'] = "Remember Me";
$lng['member']['drm'] = "Don't Remember Me";
$lng['member']['mvi'] = "Make Me Visibile";
$lng['member']['miv'] = "Make Me Invisibile";
$lng['member']['u,t'] = "Usergroup, Title";
$lng['member']['sam'] = "Send a Message";
$lng['member']['msg'] = "Messaging";
$lng['member']['npp'] = "%t %e's Public Profile"; // %t = title, %e = user
$lng['member']['uup'] = "This user needs to update their profile!";
$lng['member']['asd'] = "Passwords did not match";
$lng['member']['zxc'] = "Sorry, that username is already taken.";
$lng['member']['qwe'] = "Your email address is already registered to another username!";
$lng['member']['wer'] = "You did not enter a username.";
$lng['member']['sdf'] = "You cannot use that username.";
$lng['member']['sss'] = "You cannot use that email address.";
$lng['member']['ert'] = "Your username contains invalid characters.";
$lng['member']['dfg'] = "You account info has been saved. You will be emailed with a special password that you will have to use the first time that you log in.  It may take a couple of minutes for the email to reach you.";
$lng['member']['cvb'] = "Your username is too long.";
$lng['member']['cva'] = "You have been registered.";
$lng['member']['pag'] = "Password Again";
$lng['member']['mc'] = "Mood was last changed on";
$lng['member']['au'] = "Active";
$lng['member']['ms'] = "Member Since";
$lng['member']['du'] = "Inactivate";
$lng['member']['ot'] = "Override Title";
$lng['member']['li'] = "You have been logged in.";
$lng['member']['ad'] = "Your account has been disabled.  Contact the board administration to get it activated again.";
$lng['member']['ip'] = "Invalid password. #ltbr#gt";
$lng['member']['iu'] = "Invalid username. #ltbr#gt";
$lng['member']['gb'] = "Please go back and try again.";
$lng['member']['lo'] = "You have been logged out.";
$lng['member']['ng'] = "New Group";
$lng['member']['pw'] = "Password:";
$lng['member']['hidemail'] = "Hide Your E-mail Address:";
$lng['member']['tz'] = "Time Zone:";
$lng['member']['aa'] = "Your account has been activated, and you have been logged in.";
$lng['member']['specifi'] = "and more specifically:";
$lng['member']['smood'] = "Custom Mood Text (leave blank for default text)";
$lng['member']['mood'] = "Mood";
$lng['member']['user_st'] = "User Status";
$lng['member']['nothing'] = "Nothing";
$lng['member']['writes'] = "%e writes"; // %e = user
$lng['member']['logged'] = "Logged in as:";
$lng['member']['ablity_post'] = "You can post new topics.";
$lng['member']['ablity_repl'] = "You can reply to topics.";
$lng['member']['ablity_edit'] = "You can edit your own posts.";
$lng['member']['ablity_edia'] = "You can edit any post.";
$lng['member']['ablity_dele'] = "You can delete your own posts.";
$lng['member']['ablity_dela'] = "You can delete any post.";
$lng['member']['ablity_delt'] = "You can delete your own topics.";
$lng['member']['ablity_deta'] = "You can delete any topic.";
$lng['member']['ablity_clos'] = "You can close your own topics.";
$lng['member']['ablity_cloa'] = "You can close any topic.";
$lng['member']['ablity_move'] = "You can move your own topics.";
$lng['member']['ablity_mova'] = "You can move any topic.";
$lng['member']['ablity_aacp'] = "You can access the Administrator's Control Panel.";
$lng['member']['ablity_modf'] = "You can moderate forum(s).";
$lng['member']['ablity_sndp'] = "You can send and recieve private messages.";
$lng['search']['cs'] = "Do you want a case-sensitive search?";
$lng['search']['ss'] = "Do you want an extremely strict search?";
$lng['messenger']['inbox_stat'] = "Your %e has %c new messages."; // %e = inbox, %c = number of new messages
$lng['messenger']['nom'] = "You have no messages in your #lt?=?#gt, #lt?=?#gt.";
$lng['messenger']['msrsd'] = "Message Subject, Recipient/Sender, & Date";
$lng['messenger']['checka'] = "Check/Uncheck All Messages";
$lng['messenger']['check'] = "Check";
$lng['messenger']['status'] = "Status";
$lng['messenger']['mess'] = "Messenger";
$lng['messenger']['inbox'] = "Inbox";
$lng['messenger']['outbox'] = "Outbox";
$lng['messenger']['send_pm'] = "Send PM";
$lng['messenger']['mdq'] = "Are you sure you wish to delete the selected message(s)?";
$lng['messenger']['fwdg'] = "Forwarding";
$lng['messenger']['sndg'] = "Sending";
$lng['messenger']['vewg'] = "Viewing";
$lng['messenger']['newm'] = "New Message";
$lng['messenger']['oldm'] = "Old Message";
$lng['messenger']['fore'] = "Forward to Email Address";
$lng['messenger']['forw'] = "Forward";
$lng['messenger']['repl'] = "Reply";
$lng['messenger']['nome'] = "You have no messages.";
$lng['messenger']['dchm'] = "Delete Checked Messages";
$lng['messenger']['rpea'] = "Recipiant's Email Address:";
$lng['messenger']['orgs'] = "Original Sender:";
$lng['messenger']['ymrs'] = "You may not reply to %e messages."; // %e = type of message
$lng['messenger']['dltg'] = "Deleting";
$lng['messenger']['pf'] = "Your inbox is %e% full."; // %e = percent full
$lng['messenger']['boxalert'] = "You can accept up to %e more messages."; // %e = number of messages
$lng['toplinks']['home'] = "Home";
$lng['toplinks']['register'] = "Register";
$lng['toplinks']['memberlist'] = "Member List";
$lng['toplinks']['login'] = "Login";
$lng['toplinks']['logout'] = "Logout";
$lng['toplinks']['search'] = "Search";
$lng['toplinks']['profile'] = "Profile";
$lng['toplinks']['usercp'] = "User Control Panel";
$lng['toplinks']['empty_slot'] = "Empty Slot";
$lng['toplinks']['admincp'] = "Administrator's Control Panel";
$lng['toplinks']['whosonline'] = "Who's Online?";
$lng['iai']['note_contents'] = "Note Contents";
$lng['iai']['notes'] = "Notes";
$lng['iai']['m_notes'] = "Manage Notes";
$lng['iai']['add_note'] = "Add Note";
$lng['iai']['l_note'] = "Local Note";
$lng['iai']['g_note'] = "Global Note";
$lng['iai']['no_notes'] = "There are no notes.";
$lng['iai']['n_st'] = "Displays, starting on $e and will continue until deleted.";
$lng['iai']['n_un'] = "Will display until $e or when deleted";
$lng['iai']['n_ft'] = "Will display from %e until %f or when deleted.";
$lng['iai']['n_dn'] = "It is displaying now and will continue until deleted.";
$lng['iai']['edit_forum'] = "Edit Forum";
$lng['iai']['edit'] = "Edit";
$lng['iai']['delete'] = "Delete";
$lng['iai']['delete_fsuccess'] = "The selected forum has been deleted.";
$lng['iai']['delete_csuccess'] = "The selected category has been deleted.";
$lng['iai']['move_up'] = "Move Up";
$lng['iai']['move_down'] = "Move Down";
$lng['iai']['move_forum'] = "Move Forum";
$lng['iai']['move'] = "Move";
$lng['iai']['cant_move'] = "Can't Move";
$lng['iai']['move_forum_success'] = "The selected forum has been moved.";
$lng['iai']['cmove_up_success'] = "The selected category has been moved up.";
$lng['iai']['cmove_down_success'] = "The selected category has been moved down.";
$lng['iai']['new_forum'] = "New Forum";
$lng['iai']['new_forum_success'] = "Forum %e has been created!";
$lng['iai']['edit_forum_post_groups'] = "Post Groups";
$lng['iai']['edit_forum_view_groups'] = "View Groups";
$lng['iai']['edit_forum_reply_groups'] = "Reply Groups";
$lng['iai']['moderators_for_forum'] = "Moderators for forum %e"; // %e = forum name
$lng['iai']['add_moderator'] = "Add New Moderator";
$lng['iai']['add_moderator_error'] = "The selected moderator is already a moderator of the forum.";
$lng['iai']['add_moderator_success'] = "The selected moderator is now a moderator of forum %e."; // %e = forum name
$lng['iai']['edit_moderators'] = "Edit Moderators";
$lng['iai']['remove_moderator'] = "Remove Moderator";
$lng['iai']['remove_moderator_success'] = "The selected moderator is no longer a moderator of forum %e."; // %e = forum name
$lng['iai']['select_new_moderator'] = "Select a user that you would like to add to moderate forum %e."; // %e = forum name
$lng['iai']['no_moderators'] = "There are no moderators for this forum.";
$lng['iai']['account_has_been_disabled'] = "%e's account has been disabled."; // %e = username
$lng['iai']['disabled_fx'] = "%e will not be able to access their account."; // %e = username
$lng['iai']['disable_account'] = "Disable Account";
$lng['iai']['disable_account_query'] = "Are you sure that you wish to disable %e's account? This action #ltB#gtcan#lt/B#gt be undone.";
$lng['iai']['user_title_standard'] = "The user's title was standardized.  It will now progress as specified in the ACP.";
$lng['iai']['user_title_custom'] = "The user's title was customized.  It was customized to %e."; // %e = new title
$lng['iai']['user_title_alter'] = "The user's title was altered.  It was changed from %e to %n."; // %e  = previous title, %n = new title
$lng['iai']['override_title'] = "Override Title";
$lng['iai']['select_forum_destination'] = "Select the category that you want to move forum %e to:"; // %e = forum name
$lng['iai']['forum_move_success'] = "Forum %e has been moved."; // %e = forum name
$lng['iai']['fourm_move_error'] = "edgeBoard couldn't move forum %e because it is already a part of the selected category."; // %e = forum name
$lng['iai']['forum_moderators'] = "%e Forum Moderators"; // %e = forum name
$lng['iai']['edit_group'] = "Edit Group";
$lng['iai']['edit_group_success'] = "%e's group has been edited."; // %e = username
$lng['iai']['delete_forum_query'] = "Are you sure you wish to delete forum #ltB#gt%e#lt/B#gt? This action can not be undone."; // %e = forum name
$lng['iai']['edit_forum_success'] = "The selected forum, #ltB#gt%e#lt/B#gt, has been updated with your changes."; // %e = forum name
$lng['iai']['new_passwords_dont_match'] = "The new passwords did not match.";
$lng['iai']['password_changed'] = "%e's password has been successfully changed."; // %e = username
$lng['iai']['change_password'] = "Change Password";
$lng['iai']['changing_password'] = "Changing %e's Password"; // %e = username
$lng['iai']['new_pass'] = "New Password";
$lng['iai']['new_pass_again'] = "New Password Again";
$lng['iai']['account_enable'] = "Enable Account";
$lng['iai']['account_enable_success'] = "%e's account has been enabled.";
$lng['iai']['enable_account_query'] = "Are you sure that you wish to enable %e's account? This action #ltB#gtcan#lt/B#gt be undone.";
$lng['iai']['new_mod_group'] = "New Group:";
$lng['iai']['new_mod_user'] = "New User:";
$lng['acp']['acp_jump']['01'] = "Time, Date, and Automated Tasks";
$lng['acp']['acp_jump']['02'] = "General Settings";
$lng['acp']['acp_jump']['03'] = "Private Messaging Settings";
$lng['acp']['acp_jump']['04'] = "Customizations, Themes, Styles, and Languages";
$lng['acp']['acp_jump']['05'] = "Email System Settings";
$lng['acp']['acp_jump']['06'] = "Forum and Category Settings";
$lng['acp']['acp_jump']['07'] = "Updates, Add-ons, and Patches";
$lng['acp']['acp_jump']['08'] = "User Title and Pip Settings";
$lng['acp']['acp_jump']['09'] = "Safety (Backup and Restore)";
$lng['acp']['acp_jump']['10'] = "User and Group Management";
$lng['acp']['acp_jump']['11'] = "Access Log";
$lng['acp']['acp_jump']['12'] = "View Sessions";
$lng['acp']['acp_jump']['13'] = "Get Support";
$lng['acp']['acp_jump']['14'] = "Clean Up Categories, Forums, and Topics";
$lng['acp']['cleanup_mi'] = "The topic: %e had a multiple entry.  It was corrected.";
$lng['acp']['cleanup_bf'] = "The topic: %e had a major bug.  It was deleted.";
$lng['acp']['title1'] = "Settings for edgeBoard %s (%e)"; // %e = version
$lng['acp']['title2'] = "%e Tools"; // %e = version
$lng['acp']['dellog'] = "The log has been deleted.";
$lng['acp']['querydellog'] = "Are you sure you want to delete this access log?  This action cannot be undone.";
$lng['acp']['nonret'] = "The access events on today that happened before this point in time will not be retrieveable again.";
$lng['acp']['recfor'] = "The access records for %e will not be retrieveable again.";
$lng['acp']['otherlog'] = "Other Logs:";
$lng['acp']['logfor'] = "Access Log for %e"; // %e = log date
$lng['acp']['userdel'] = "User deleted the access log for %e"; // %e = log date
$lng['acp']['inexistant'] = "That access log does not exist!";
$lng['acp']['nothing'] = "Nothing happened on that day!";
$lng['acp']['gen'] = "Generate Log for %e"; // %e = date
$lng['acp']['logsize'] = "This log is taking up %eKB of space."; // %e = log size
$lng['acp']['heading'] = "Heading links that a logged-in user will have";
$lng['acp']['hnote'] = "Administrator's Control Panel links will be automatically added by the board for administrators.";
$lng['acp']['heading_g'] = "Heading links that a guest will have";
$lng['acp']['ss'] = "%e Style Sheet"; // %e = theme name
$lng['acp']['language'] = "Language";
$lng['acp']['theme'] = "Theme";
$lng['acp']['themes'] = "Themes";
$lng['acp']['trb'] = "Create Title";
$lng['acp']['trc'] = "A new user title, called %e, has been created."; // %e = title
$lng['acp']['eup'] = "Do you want to enable the user panel?";
$lng['acp']['abb'] = "Do you want to enable the usage of board code?";
$lng['acp']['aei'] = "Do you want to enable the usage of emoticons (smileys)?";
$lng['acp']['agp'] = "Do you want to enable guest posting?";
$lng['acp']['aht'] = "Do you want to enable posts with HTML?  This is a major security risk!!!";
$lng['acp']['ase'] = "Do you want to allow the board to send emails?";
$lng['acp']['bem'] = "Board email address";
$lng['acp']['bsv'] = "Board URL";
$lng['acp']['qem'] = "Do you want to require email authorization upon user registration?";
$lng['acp']['abl'] = "#ltu#gtALL#lt/u#gt blue email settings have to specified in order to enable this feature!";
$lng['acp']['aaa'] = "If you would like for users to forward private messages in their inbox or outbox to an email address, select 'Yes'.";
$lng['acp']['aab'] = "If you would like for new users to have to confirm their email address in order to switch it, select 'Yes'.";
$lng['acp']['aac'] = "Do you want to require a user to verify their email address when they change it?";
$lng['acp']['aad'] = "Do you want to enable forwarding Private Messages to email?";
$lng['acp']['aaq'] = "If the board's location looks something like 'www.edgeboard.net/forums' then the URL is 'www.edgeboard.net/forums'. (Please do not add a trailing slash!)";
$lng['acp']['cbc'] = "Category %e has been created.  You can %a forums to it."; // %e = category name, %a = add new forums link
$lng['acp']['add'] = "add";
$lng['acp']['sdc'] = "Select which category that you want the forums that are currently in category #ltB#gt%e#lt/B#gt to go upon deletion."; // %e = category name
$lng['acp']['bdn'] = "What is the board's name?";
$lng['acp']['wbs'] = "What is the URL of the board's homepage?";
$lng['acp']['sta'] = "What status do you want the board to have?";
$lng['acp']['st1'] = "Board is Open";
$lng['acp']['st2'] = "Board is Temporarily Closed";
$lng['acp']['st3'] = "Board is Permanently Closed";
$lng['acp']['st4'] = "Board is Temporarily Closed for Updates";
$lng['acp']['ban'] = "Board Announcements:";
$lng['acp']['oal'] = "There should be only one announcement per line.";
$lng['acp']['dal'] = "Do you want to enable the board to log events for the access log?";
$lng['acp']['mas'] = "What do you want the maximum attachment upload size to be?";
$lng['acp']['svz'] = "Set the value to a letter or word if you want to disable attachment uploads.";
$lng['acp']['mah'] = "What do you want the maximum maximum avatar height to be?";
$lng['acp']['maw'] = "What do you want the maximum maximum avatar width to be?";
$lng['acp']['mts'] = "What do you want the maximum length of a topic's subject to be?";
$lng['acp']['bwf'] = "What bad words do you want to filter out?";
$lng['acp']['map'] = "What do you want the maximum post size to be?";
$lng['acp']['mws'] = "What do you want the maximum word size to be?";
$lng['acp']['tpp'] = "How many topics will be displayed on each page?";
$lng['acp']['ppp'] = "How many posts and search results will be displayed on each page?";
$lng['acp']['mpp'] = "How many members will be displayed on each page of the member listing?";
$lng['acp']['gds'] = "Do you want to enable Graphic Security Codes? (The user will have to type in a security code that is displayed on a graphic when registering.)";
$lng['acp']['q01'] = "Do you want to show Integrated Administration Interface in the forum listing view?";
$lng['acp']['q01'] = "Do you want to show Integrated Administration Interface in the forum listing view?";
$lng['acp']['q02'] = "Do you want to show page links to topics in the forum listing view?";
$lng['acp']['ret'] = "REDUCES EXECUTION TIME";
$lng['acp']['q04'] = "1111111111111";
$lng['acp']['sys'] = "System";
$lng['acp']['eby'] = "Edited by %e on %d."; // %e = username, %d = date
$lng['acp']['mpr'] = "Maximum Private Message Recipiants:";
$lng['acp']['mmi'] = "Maximum Number of Messages in Inbox:";
$lng['acp']['typ'] = "Type";
$lng['acp']['spm'] = "System Private Messages";
$lng['acp']['imb'] = "Install My Board";
$lng['acp']['ice'] = "Installation Complete";
$lng['acp']['icm'] = "Your edgeBoard has been installed!  If you need to change any of the options that you just set, go to the Administrator's Control Panel link in the toplinks (they are not currently shown). You must now register a username and a password for your board. To do so, go #ltA HREF='index.php?a=member&type=register'#gthere#lt/A#gt.  When you register you will automaticaly be made an administrator.";
$lng['acp']['sui'] = "Select an Update Package to Install";
$lng['acp']['upf'] = "Update Package Filename";
$lng['acp']['pot'] = "How long should a user have to wait after they post before they can post again? (In Seconds)";
$lng['acp']['otl'] = "How long should a user be kept in the online listing after being inactive? (In Minutes)";
$lng['acp']['tit'] = "Title";
$lng['acp']['rnp'] = "Required Number of Posts";
$lng['acp']['nop'] = "Number of Pips";
$lng['acp']['gpm'] = "Group Management";
$lng['acp']['usm'] = "User Management";
$lng['acp']['btf'] = "How should the date and time be formatted? (Regular)";
$lng['acp']['ltf'] = "How should the date and time be formatted? (Long)";
$lng['acp']['stf'] = "How should the date and time be formatted? (Short)";
$lng['acp']['viu'] = "View Users";
$lng['acp']['gpn'] = "Group Name";
$lng['acp']['sap'] = "Select the Appropriate Special Access Permissions";
$lng['acp']['zap'] = "Do you want to allow group members to post?";
$lng['acp']['zar'] = "Do you want to allow group members to reply?";
$lng['acp']['zae'] = "Do you want to allow group members to edit their own posts?";
$lng['acp']['zea'] = "Do you want to allow group members to edit all posts?";
$lng['acp']['zdo'] = "Do you want to allow group members to delete their own post?";
$lng['acp']['zda'] = "Do you want to allow group members to delete all posts?";
$lng['acp']['zot'] = "Do you want to allow group members to delete their own topic?";
$lng['acp']['zat'] = "Do you want to allow group members to delete all topics?";
$lng['acp']['zct'] = "Do you want to allow group members to close their own topic?";
$lng['acp']['zca'] = "Do you want to allow group members to close all topics?";
$lng['acp']['zmo'] = "Do you want to allow group members to move thier own topic?";
$lng['acp']['zma'] = "Do you want to allow group members to move all topics?";
$lng['acp']['zsm'] = "Do you want to allow group members to send private messages?";
$lng['acp']['zlp'] = "Large Pip Selection";
$lng['acp']['zsp'] = "Small Pip Selection";
$lng['acp']['zcl'] = "Formating prefix for the 'Who's Online' listing";
$lng['acp']['zcs'] = "Formating suffix for the 'Who's Online' listing";
$lng['acp']['qaa'] = "Disabled";
$lng['acp']['qab'] = "Enabled";
$lng['acp']['qac'] = "Enable User";
$lng['acp']['qad'] = "Disable User";
$lng['acp']['qae'] = "Sessions";
$lng['acp']['qaf'] = "Select Session Type";
$lng['acp']['qag'] = "Session Archives";
$lng['acp']['qah'] = "Active Sessions";
$lng['acp']['qai'] = "Start Time";
$lng['acp']['qaj'] = "End Time";
$lng['acp']['qak'] = "Jump To";
$lng['acp']['qal'] = "Session ID";
$lng['acp']['controls'] = "Controls";
$lng['acp']['sm'] = "You may return to: [ %e #12 %f ]"; // $e = ACP Main, %f = Forums Main
$lng['acp']['saved'] = "Your settings have been saved.";
$lng['ucp']['001'] = "You're visible, you can #ltA HREF='index.php?a=user.controlpanel&v=hide'#gtmake yourself invisible#lt/A#gt if you want to.";
$lng['ucp']['002'] = "You're invisible, you can #ltA HREF='index.php?a=user.controlpanel&v=show'#gtmake yourself visible#lt/A#gt if you want to.";
$lng['ucp']['003'] = "%e's Control Panel";
$lng['ucp']['004'] = "Title and Username";
$lng['ucp']['005'] = "Invisibility";
$lng['ucp']['006'] = "Avatar";
$lng['ucp']['007'] = "No Avatar";
$lng['ucp']['008'] = "Edit Profile";
$lng['ucp']['009'] = "Usergroup";
$lng['ucp']['010'] = "Permissions";
$lng['ucp']['011'] = "Pip(s)";
$lng['ucp']['012'] = "Do you want to apply daylight savings adjustments to the time? (+1h)";
$lng['system']['d'][1] = "When a user first registers for the board";
$lng['system']['d'][2] = "When a user is able to set their own title in their profile";
$lng['system']['d'][3] = "When a user's group is changed";
$lng['system']['t'][1] = "When?";
$lng['system']['t'][2] = "When?";
$lng['system']['t'][3] = "When?";
$lng['moderate']['dest'] = "Destination:";
$lng['moderate']['topic'] = "Moderate";
$lng['moderate']['rename'] = "Rename";
$lng['moderate']['close'] = "Close";
$lng['moderate']['open'] = "Open";
$lng['moderate']['pin'] = "Pin";
$lng['moderate']['unpin'] = "Unpin";
$lng['moderate']['move'] = "Move";
$lng['moderate']['delete'] = "Delete";
$lng['moderate']['conf_ban'] = "Confirm Banishment";
$lng['moderate']['conf_ban_query'] = "Are you sure you want to ban this user?";
$lng['moderate']['ban_success'] = "The user was located and was banned from the board.";
$lng['moderate']['ban_fail'] = "The operation was unsuccessful.  The board was not able to log the user's Internet Protocol Address the last time they were online.";
$lng['moderate']['ban'] = "Ban";
$lng['forum']['category'] = "Category";
$lng['forum']['categories'] = "Categories";
$lng['forum']['forum'] = "Forum";
$lng['forum']['forums'] = "Forums";
$lng['forum']['no_forums'] = "There are currently no forums in this category.";
$lng['forum']['no_posts'] = "There are no topics in this forum right now.";
$lng['forum']['last_post_in'] = "The last post was in %e by %u on %t."; // %e = topic, %u = user, %t = time
$lng['forum']['topic'] = "Topic";
$lng['forum']['question'] = "Question";
$lng['forum']['post'] = "Post";
$lng['forum']['topics'] = "Topics";
$lng['forum']['posts'] = "Posts";
$lng['forum']['freq'] = "Frequency";
$lng['forum']['viewing_forum'] = "Viewing Forum";
$lng['forum']['viewing_topic'] = "Viewing Topic";
$lng['forum']['viewing_poll'] = "Viewing Poll";
$lng['forum']['forum_name'] = "Forum Name";
$lng['forum']['forum_desc'] = "Forum Description";
$lng['forum']['last_post'] = "Last Post";
$lng['forum']['moderators'] = "Moderators";
$lng['forum']['td'] = "Topic Description";
$lng['forum']['pi'] = "Post Icons";
$lng['forum']['vf'] = "You must first vote before you can view a poll's results.";
$lng['forum']['av'] = "You have already voted!";
$lng['forum']['vr'] = "Your vote has been recorded.";
$lng['forum']['rs'] = "Results";
$lng['forum']['gp'] = "Graph";
$lng['forum']['vo'] = "Vote";
$lng['forum']['vt'] = "Votes";
$lng['forum']['ch'] = "Choice";
$lng['forum']['tv'] = "%e Votes";
$lng['forum']['new_categroy'] = "New Category";
$lng['forum']['views'] = "Views";
$lng['forum']['posts'] = "Posts";
$lng['forum']['posted_by'] = "Posted By";
$lng['forum']['subject'] = "Subject";
$lng['forum']['pinned'] = "Pinned";
$lng['forum']['closed'] = "Closed";
$lng['forum']['moved'] = "Moved";
$lng['forum']['poll'] = "Poll";
$lng['forum']['active'] = "Recently Active";
$lng['forum']['inactive'] = "Recently Inactive";
$lng['forum']['c_active'] = "Recently Active (Closed)";
$lng['forum']['c_inactive'] = "Recently Inactive (Closed)";
$lng['post']['pnt'] = "Posting a New Topic";
$lng['post']['pro'] = "Posts, in Reverse Order";
$lng['post']['ina'] = "Include an Attachment (the max file size is %e bytes)"; // %e = max file size in bytes
$lng['post']['att'] = "Attachment";
$lng['post']['amu'] = "'%e' was not uploaded.  It is too large (%s bytes). The maximum size is %m bytes.";
$lng['post']['auu'] = "'%e' was not uploaded. It is of a restricted file type. You have two options: 1. Change the file's extention and try again later, or 2. Put the file in an archive (.zip file) and then try uploading it again."; // %e = file name
$lng['post']['asu'] = "'%e' was successfully uploaded to the board. "; // %e = file name
$lng['post']['reb'] = "Please register to fully enjoy the board!";
$lng['post']['ngp'] = "Guest posting is not allowed. You have to be a registered member.";
$lng['post']['orp'] = "Original Poster:";
$lng['errors']['error'] = "Error(s) Occurred During Execution";
$lng['errors']['bsc'] = "Your security code entry was invalid!";
$lng['errors']['aaj'] = "You cannot delete a default group.  You can change their name and permissions, though.";
$lng['errors']['001'] = " There was at least one invlaid username so the message may not have reached all recipiants.";
$lng['errors']['002'] = "The message was not sent to the following %e of %f users because you have exceeded the max amount of recipiants (%g) for a private message!";
$lng['errors']['003'] = "You may not delete the first post of a topic.";
$lng['errors']['004'] = "You have already posted in the last %e seconds. Please wait and try again."; // %e = post time
$lng['errors']['noc'] = "You did not type in any choices.";
$lng['errors']['noe'] = "The topic or poll that you are trying to access does not exist.";
$lng['errors']['nom'] = "You did not enter a message.";
$lng['errors']['nonsp'] = "edgeBoard was unable to perform the requested action!";
$lng['errors']['nor'] = "You did not type in a recipiant.";
$lng['errors']['nos'] = "You did not type in a subject.";
$lng['errors']['nec'] = "A new poll must have more than one choice!";
$lng['errors']['nuf'] = "You have not uploaded any update files.";
$lng['errors']['tic'] = "You may not reply to closed topics.";
$lng['errors']['utd'] = "Unable to delete the file '%e'."; // %e = filename
$lng['errors']['utm'] = "Unable to CHMOD %e0 to %e1."; // %e0 = filename, %chmod value
$lng['errors']['utc'] = "Unable to copy from %e0 to %e1."; // %e0 = filename, %e1 = destination
$lng['errors']['bio'] = "You cannot log out when the board is not open.";
$lng['errors']['bar']['aaa'] = "You didn't select anything to backup.";
$lng['errors']['bar']['aab'] = "You didn't select anything to restore.";
$lng['errors']['bar']['aac'] = "You've yet to back up forums.";
$lng['errors']['bar']['aad'] = "You've yet to back up data.";
$lng['errors']['bar']['aae'] = "Please select which option you want to perform.";
$lng['errors']['bar']['aaf'] = "Backup";
$lng['errors']['bar']['aag'] = "Restore";
$lng['errors']['bar']['aah'] = "Forums and Data";
$lng['errors']['bar']['aai'] = "Data";
$lng['errors']['alr_inst'] = "The board has laready been installed!";
$lng['errors']['no_perm'] = "You do not have the correct permissions to perform this action.";
$lng['errors']['no_pw_match'] = "Your new passwords did not match.";
$lng['errors']['incorrect_pw'] = "You entered an incorrect old password so the board could not change your password.";
$lng['errors']['no_guest_perm'] = "You are not logged in and may not perform this action.";
$lng['errors']['clear_cookies'] = "You must clear your cookies before you can view this page.";
$lng['errors']['unauth_action'] = "Tried to perform an unauthorized action.";
$lng['errors']['must_agree'] = "You must agree to the rules of this board if you wish to become a member.";
$lng['errors']['not_exist'] = "The %e that you are trying to access does not exist!"; // %e = topic, forum, poll
$lng['errors']['sdm'] = "You must select one or more messages to delete.";
$lng['errors']['no_del2'] = "You may not delete one or more of the messages you specified!";
$lng['errors']['del_m'] = "Delete some of your messages because you are unable to read your new messages!";
$lng['errors']['maxin2'] = "Your box is at the maximum number of %e messages!"; // %e = max number of messages in inbox
$lng['errors']['maxin'] = "Your box is over the maximum number of %e messages!"; // %e = max number of messages in inbox
$lng['errors']['no_del'] = "You may not delete this message.";
$lng['errors']['no_vew'] = "You may not view this message.";
$lng['errors']['banned'] = "We're sorry, but you have been banned form the board.";
$lng['errors']['fc'] = "Sorry, the forums have been closed.";
$lng['errors']['ftc'] = "Sorry, the forums have been temporarily closed.";
$lng['errors']['fca'] = "The forums have been closed, but you have permissions to access the board.";
$lng['errors']['fctgp'] = "Forums Closed to the General Public";
$lng['errors']['mcfu'] = "The Forums Are Momentarily Closed For Updates";
$lng['errors']['mcfum'] = "We're sorry, but the forums have been momentarily closed for updates.  Please return in a couple of minutes.";
$this-#gtlng = $lng;
unset($lng);
?#gt
";}i:52;a:2:{i:0;s:27:"language/english/index.html";i:1;s:0:"";}i:53;a:2:{i:0;s:33:"language/english/welcomeemail.cgi";i:1;s:615:"Welcome to %b, %u!

First of all, thanks for registering at the forums. You are now a full-fledged
member of the board!  Feel free to post as much as you like and if you have any
questions or comments, don't hesitate to post them!

You can return to the forums by going to %e
Be sure to add that URL to your bookmarks/favorites!

Once you go to the forums, you can use the following information:
	Username: %u
	Password: %p

Your password is case-sensitive!

Thanks for using the forums, %u! If you have any further questions, don't 
hesitate to post them at the forums.

Goodbye and see you soon!";}i:54;a:2:{i:0;s:13:"lib/forum.php";i:1;s:16626:"#lt?php

class exclusive extends genesis {
var $forum, $page, $topics, $pagelinks;

function execute () {
	global $forum, $page;
	$this-#gtforum = $forum;
	$this-#gttopics = $topics = $this-#gtsort($this-#gtselectforum($this-#gtforum, "l"), 6);//$this-#gtselectsort("data/".$this-#gtforum."/list.php", 6);
	$this-#gttopics = array_reverse($this-#gttopics);
	if ($page == "") {
	   $this-#gtpage = 1;
	} else {
	   $this-#gtpage = $page;
	}
	$this-#gtsetlastactive();
	$this-#gtheader();
	$this-#gtcheckforumpermission(5, true, $this-#gtforum);
	$this-#gtsetpagelinks();
	$this-#gtdisplayforuminfo();
	$this-#gtdisplaytopics();
	$this-#gtdisplayforuminfo();
	$this-#gtdisplayfolders();
	$this-#gtfooter();
}

function setlastactive () {
	$this-#gtlastactive = $this-#gtuser[10];
}

function setpagelinks () {
	global $page;
	$this-#gtpagelinks = "";
	$pages = array();
	//array_push($pages, count($this-#gttopics));
	if (count($this-#gttopics) != 0) {
		for ($i=1;count($this-#gttopics)#gt=$i*$this-#gtsettings['topic_perpg']-$this-#gtsettings['topic_perpg']+1;$i++){
			if ($i == $this-#gtpage) {
				$b = " #ltb#gt";
				$r = "#lt/b#gt";
			} else {
				$b = " #lta href=\"index.php".$this-#gts."a=forum&forum=".$this-#gtforum."&page=".$i."\"#gt";
				$r = "#lt/a#gt";
			}
			array_push($pages, $b.$i.$r);
		}
	} else {
	   array_push($pages, $this-#gtlng['forum']['no_posts']);
	}
	if (count($pages) #gt 5) {
		$temp = $pages;
		$pages = array();
		array_push($pages, $temp[0]);
		array_push($pages, $temp[1]);
		$l = (count($temp));
		$o = (count($temp));
		if (($page != 1) && ($page != 2)  && (!empty($page)) && ($page != count($temp)) && ($page != count($temp)-1)) {
			array_push($pages, " ...");
			array_push($pages, 
			" #lta href=\"index.php".$this-#gts."a=forum&forum=".$this-#gtforum."&page=".($page-1)."\"#gt&laquo; Previous#lt/a#gt" .
			" &laquo;#ltb#gt$page#lt/b#gt&raquo; " .
			" #lta href=\"index.php".$this-#gts."a=forum&forum=".$this-#gtforum."&page=".($page+1)."\"#gtNext &raquo;#lt/a#gt");
			array_push($pages, " ...");
		} else {
			array_push($pages, 
			" #lta href=\"index.php".$this-#gts."a=forum&forum=".$this-#gtforum."&page=3\"#gt&gt;#lt/a#gt" .
			" ... " .
			" #lta href=\"index.php".$this-#gts."a=forum&forum=".$this-#gtforum."&page=".($i - 3)."\"#gt&lt;#lt/a#gt");
		}
		array_push($pages, $temp[$l-2]);
		array_push($pages, $temp[$o-1]);
	}
	foreach ($pages as $page) {
		$this-#gtpagelinks .= $page;
	}
}

function settopiclinks ($topicid) {
	if ($this-#gtsettings[pgl_s_forum] == true) {
		$this-#gttopiclinks['$topicid'] = "";
		$topicfile = count(file("data/".$this-#gtforum."/".$topicid.".php"));
		$pages = ceil($topicfile/$this-#gtsettings['posts_perpg'])-1;
		$i = 1;
		if ($pages #gt 5) {
			while ($i #lt= $pages){
			if ($i == 3) {
				$this-#gttopiclinks[$topicid] .= " ...";
			} elseif (($i == 1) #12#12 ($i == 2) #12#12 ($i == $pages-1) #12#12 ($i == $pages)) {
				$b = " #lta href=\"index.php".$this-#gts."a=topic&forum=".$this-#gtforum."&topic=".$topicid."&page=".$i."\"#gt";
				$r = "#lt/a#gt";
					$this-#gttopiclinks[$topicid] = $this-#gttopiclinks[$topicid].$b.$i.$r;
			}
			$i++;
			}
		} else {
			while ($i #lt= $pages) {
			$b = " #lta href=\"index.php".$this-#gts."a=topic&forum=".$this-#gtforum."&topic=".$topicid."&page=".$i."\"#gt";
			$r = "#lt/a#gt";
				$this-#gttopiclinks[$topicid] = $this-#gttopiclinks[$topicid].$b.$i.$r;
			$i++;
			}
		}
		if ($i #gt 2) {
			$this-#gttopiclinks[$topicid] = "[ ".$this-#gtlng['misc']['pages'].":".$this-#gttopiclinks[$topicid]." ]";
		} else {
			$this-#gttopiclinks[$topicid] = "";
		}
	}
}

function displayforuminfo () {
	$forum = $this-#gtselectforum($this-#gtforum);
?#gt
#ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=1 BORDER="0" CLASS="bordertable"#gt
 #ltTR#gt
  #ltTD WIDTH="100%" CLASS="ctable1"#gt#lt?=$this-#gtlng['forum']['viewing_forum']?#gt: #lt?=$this-#gttags($forum[1])?#gt#lt/TD#gt
  #ltTD NOWRAP ROWSPAN="2" CLASS="ctable2"#gt#ltSPAN CLASS="regular"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=post&type=newtopic&forum=#lt?=$this-#gtforum?#gt"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/topic_new.gif" BORDER="0"#gt#lt/A#gt  #ltA HREF="index.php#lt?=$this-#gts?#gta=post&type=poll&forum=#lt?=$this-#gtforum?#gt"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/poll_new.gif" BORDER="0"#gt#lt/A#gt#lt/SPAN#gt#lt/TD#gt
 #lt/TR#gt
 #ltTR#gt
  #ltTD WIDTH="100%" CLASS="ctable1"#gt[ #lt?=$this-#gtpagelinks?#gt ]#lt/TD#gt
 #lt/TR#gt
#lt/TABLE#gt
#ltBR#gt
#lt?
}

function iaitopic ($topic) {
	if ($this-#gtsettings[iai_s_forum] == true) {
		$topic = $this-#gtselect("data/".$this-#gtforum."/list.php", $topic);
		if (($this-#gtadministrator == 1) #12#12 ($this-#gtvalidate(20) == 1) #12#12 ($this-#gtmoderator)) { ?#gt
		#ltSPAN CLASS="small"#gt[ 
		#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=close&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$topic[0]?#gt"#gt#lt? if ($topic[7] == 1) { ?#gt#lt?=$this-#gtlng['moderate']['open']?#gt#lt? } else { ?#gt#lt?=$this-#gtlng['moderate']['close']?#gt#lt? } ?#gt#lt/A#gt #12 
		#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=topicdelete&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$topic[0]?#gt"#gt#lt?=$this-#gtlng['moderate']['delete']?#gt#lt/A#gt #12 
		#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=move&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$topic[0]?#gt"#gt#lt?=$this-#gtlng['moderate']['move']?#gt#lt/A#gt #12 
		#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=pin&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$topic[0]?#gt"#gt#lt? if ($topic[10] == 1) { ?#gt#lt?=$this-#gtlng['moderate']['unpin']?#gt#lt? } else { ?#gt#lt?=$this-#gtlng['moderate']['pin']?#gt#lt? } ?#gt#lt/A#gt #12 
		#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=rename&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$topic[0]?#gt"#gt#lt?=$this-#gtlng['moderate']['rename']?#gt#lt/A#gt
	 ]#lt/SPAN#gt#lt? }
 	}
}

function displaytopics () {
        ?#gt
   #ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	#ltTR#gt
	 #ltTD CLASS="category" WIDTH=20#gt#lt/TD#gt
	 #ltTD CLASS="category" WIDTH=20#gt#lt/TD#gt
	 #ltTD CLASS="category"#gt#lt?=$this-#gtlng['forum']['subject']?#gt#lt/TD#gt
	 #ltTD CLASS="category" ALIGN="center" WIDTH="120"#gt#lt?=$this-#gtlng['forum']['posted_by']?#gt#lt/TD#gt
	 #ltTD CLASS="category" WIDTH="50" ALIGN="center"#gt#lt?=$this-#gtlng['forum']['posts']?#gt#lt/TD#gt
	 #ltTD CLASS="category" WIDTH="50" ALIGN="center"#gt#lt?=$this-#gtlng['forum']['views']?#gt#lt/TD#gt
	 #ltTD CLASS="category" ALIGN="center" WIDTH="140"#gt#lt?=$this-#gtlng['forum']['last_post']?#gt#lt/TD#gt
	#lt/TR#gt
#lt?
	if (count($this-#gtselectall("data/".$this-#gtforum."/list.php")) == 0) {
	       ?#gt
	#ltTR#gt
	 #ltTD CLASS="ctable1" COLSPAN=7 ALIGN=center#gt#lt?=$this-#gtlng['forum']['no_posts']?#gt#lt/TD#gt
	#lt/TR#gt
	#lt/TABLE#gt#ltBR#gt
	       #lt?
	} else {
		$this-#gtdisplay_ptopics();
		$this-#gtdisplay_rtopics();
	}
}

function display_ptopics () {
	$topics = $this-#gtwhere($this-#gttopics, 10, 1);
	foreach ($topics as $topic) {
		if ($topic[6] #gt= $this-#gtlastactive) {
			if ($topic[7] != 1) {
				$folderimg = "foldernew.gif";
		  	} else {
				$folderimg = "foldernewclosed.gif";
		  	}
		} else {
			if ($topic[7] != 1) {
				$folderimg = "folderold.gif";
			} else {
				$folderimg = "folderoldclosed.gif";
			}
		}
		if (!file_exists("images/picons/".$topic[8].".gif")) {
			$posticon = "";
		} else {
			$posticon = "#ltimg src=\"images/picons/".$topic[8].".gif\"#gt";
		}
		$char = "";
		$topicinfo = "";
		if ($topic[13] == "poll") {
			if ($topic[7] == "1") { 
				$topicinfo = $this-#gtlng['forum']['closed'];
				$char = ", ";
			}
			if ($topic[10] == "1") {
				$topicinfo = $topicinfo . $char . $this-#gtlng['forum']['pinned'] . " ";
			}
			$topicinfo = $topicinfo . $this-#gtlng['forum']['poll'] . ": ";
			if (!strstr($topic[12],"?")) {
				$topic[12] .= "?";
			}
			$posttype = "poll";
			$replies = "-";
		} elseif ($topic[13] == "moved") {
			$topicinfo = $topicinfo . $this-#gtlng['forum']['moved'];
			if ($topic[7] == "1") { 
				$topicinfo = ", " . $this-#gtlng['forum']['closed'];
			}
			if ($topic[10] == "1") {
				$topicinfo = $topicinfo . ", " . $this-#gtlng['forum']['pinned'];
			}
			$topicinfo = $topicinfo . ": ";
			$posttype = "moved";
			$replies = "-";
			$indate = false;
			if ($topic[15] #gt time()) {
				$indate = true;
			}
			if ($indate == false) {
				continue;
			}
		} else {
			if ($topic[7] == "1") {
				$topicinfo = $this-#gtlng['forum']['closed'];
				$char = ", ";
			}
			if ($topic[10] == "1") {
				$topicinfo = $topicinfo . $char . $this-#gtlng['forum']['pinned'] . ": ";
			} else {
				if (!empty($char)) {
					$topicinfo .= ": ";
				}
			}
			$posttype = "topic";
			$replies = $topic[2];
			$this-#gtsettopiclinks($topic[0]);
		}
	       ?#gt
	       #ltTR#gt
	       #ltTD CLASS="ctable2" ALIGN=center WIDTH=20#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/#lt?=$folderimg?#gt"#gt#lt/TD#gt
	       #ltTD CLASS="ctable2" ALIGN=center WIDTH=20#gt#lt?=$posticon?#gt#lt/TD#gt
	       #ltTD CLASS="ctable1"#gt
		#ltTABLE WIDTH="100%" CELLPADDING="0" CELLSPACING="0" BORDER="0" CLASS="regular"#gt#ltTR#gt#ltTD#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=#lt?=$posttype?#gt&forum=#lt?=$this-#gtforum?#gt&#lt?=$posttype?#gt=#lt?=$topic[0]?#gt"#gt#lt?=$topicinfo?#gt#lt?=$topic[1]?#gt#lt/A#gt #lt?=$this-#gttopiclinks[$topic[0]]?#gt#lt/TD#gt#ltTD ALIGN="right"#gt#lt?=$this-#gtiaitopic($topic[0])?#gt#lt/TD#gt#lt/TR#gt#lt/TABLE#gt
		#lt? if (!empty($topic[12])) { ?#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gttags($topic[12])?#gt#lt/SPAN#gt#lt? } ?#gt#lt/TD#gt
	       #ltTD CLASS="ctable1" ALIGN=center WIDTH="120"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=member&type=viewprofile&user=#lt?=$topic[3]?#gt"#gt#lt?=$topic[3]?#gt#lt/A#gt#ltBR#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtzonetime($this-#gtsettings['time_format'], $topic[4])?#gt#lt/SPAN#gt#lt/TD#gt
	       #ltTD CLASS="ctable2" ALIGN=center WIDTH="50"#gt#lt? if ($posttype == "topic") { ?#gt#lt?=($topic[2]+1)?#gt#lt? } else { ?#gt - #lt? } ?#gt#lt/TD#gt
	       #ltTD CLASS="ctable2" ALIGN=center WIDTH="50"#gt#lt? if ($posttype == "topic") { ?#gt#lt?=$topic[9]?#gt#lt? } else { ?#gt - #lt? } ?#gt#lt/TD#gt
	       #ltTD CLASS="ctable2" ALIGN=center WIDTH="140"#gt#lt? if ($posttype == "topic") { ?#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=member&type=viewprofile&user=#lt?=$topic[5]?#gt"#gt#lt?=$topic[5]?#gt#lt/A#gt#ltBR#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtzonetime($this-#gtsettings['time_format'], $topic[6])?#gt#lt/SPAN#gt#lt? } else { ?#gt - #lt? } ?#gt#lt/TD#gt
	       #lt/TR#gt
	       #lt?
        }
}

function display_rtopics () {
	$topics = $this-#gtwhere($this-#gttopics, 10, 0);
	$start += ($this-#gtpage - 1);
	$start *= $this-#gtsettings['topic_perpg'];
	$max = ($this-#gtsettings['topic_perpg'] - 1);
	$topics = $this-#gtlimit($topics, $start, $max);
	foreach ($topics as $topic) {
		if ($topic[6] #gt= $this-#gtlastactive) {
			if ($topic[7] != 1) {
				$folderimg = "foldernew.gif";
		  	} else {
				$folderimg = "foldernewclosed.gif";
		  	}
		} else {
			if ($topic[7] != 1) {
				$folderimg = "folderold.gif";
			} else {
				$folderimg = "folderoldclosed.gif";
			}
		}
		if (!file_exists("images/picons/".$topic[8].".gif")) {
			$posticon = "";
		} else {
			$posticon = "#ltimg src=\"images/picons/".$topic[8].".gif\"#gt";
		}
		$char = "";
		$topicinfo = "";
		if ($topic[13] == "poll") {
			if ($topic[7] == "1") { 
				$topicinfo = $this-#gtlng['forum']['closed'];
				$char = ", ";
			}
			if ($topic[10] == "1") {
				$topicinfo = $topicinfo . $char . $this-#gtlng['forum']['pinned'] . " ";
			}
			$topicinfo = $topicinfo . $this-#gtlng['forum']['poll'] . ": ";
			if (!strstr($topic[12],"?")) {
				$topic[12] .= "?";
			}
			$posttype = "poll";
			$replies = "-";
		} elseif ($topic[13] == "moved") {
			$topicinfo = $topicinfo . $this-#gtlng['forum']['moved'];
			if ($topic[7] == "1") { 
				$topicinfo = ", " . $this-#gtlng['forum']['closed'];
			}
			if ($topic[10] == "1") {
				$topicinfo = $topicinfo . ", " . $this-#gtlng['forum']['pinned'];
			}
			$topicinfo = $topicinfo . ": ";
			$posttype = "moved";
			$replies = "-";
			$indate = false;
			if ($topic[15] #gt time()) {
				$indate = true;
			}
			if ($indate == false) {
				continue;
			}
		} else {
			if ($topic[7] == "1") {
				$topicinfo = $this-#gtlng['forum']['closed'];
				$char = ", ";
			}
			if ($topic[10] == "1") {
				$topicinfo = $topicinfo . $char . $this-#gtlng['forum']['pinned'] . ": ";
			} else {
				if (!empty($char)) {
					$topicinfo .= ": ";
				}
			}
			$posttype = "topic";
			$replies = $topic[2];
			$this-#gtsettopiclinks($topic[0]);
		}
	       ?#gt
	       #ltTR#gt
	       #ltTD CLASS="ctable2" ALIGN=center WIDTH=20#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/#lt?=$folderimg?#gt"#gt#lt/TD#gt
	       #ltTD CLASS="ctable2" ALIGN=center WIDTH=20#gt#lt?=$posticon?#gt#lt/TD#gt
	       #ltTD CLASS="ctable1"#gt
		   #ltTABLE WIDTH="100%" CELLPADDING="0" CELLSPACING="0" BORDER="0" CLASS="regular"#gt#ltTR#gt#ltTD#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=#lt?=$posttype?#gt&forum=#lt?=$this-#gtforum?#gt&#lt?=$posttype?#gt=#lt?=$topic[0]?#gt"#gt#lt?=$topicinfo?#gt#lt?=$topic[1]?#gt#lt/A#gt #lt?=$this-#gttopiclinks[$topic[0]]?#gt#lt/TD#gt#ltTD ALIGN="right"#gt#lt?=$this-#gtiaitopic($topic[0])?#gt#lt/TD#gt#lt/TR#gt#lt/TABLE#gt
		#lt? if (!empty($topic[12])) { ?#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gttags($topic[12])?#gt#lt/SPAN#gt#lt? } ?#gt#lt/TD#gt
	       #ltTD CLASS="ctable1" ALIGN=center WIDTH="120"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=member&type=viewprofile&user=#lt?=$topic[3]?#gt"#gt#lt?=$topic[3]?#gt#lt/A#gt#ltBR#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtzonetime($this-#gtsettings['time_format'], $topic[6])?#gt#lt/SPAN#gt#lt/TD#gt
	       #ltTD CLASS="ctable2" ALIGN=center WIDTH="50"#gt#lt? if ($posttype == "topic") { ?#gt#lt?=($topic[2]+1)?#gt#lt? } else { ?#gt - #lt? } ?#gt#lt/TD#gt
	       #ltTD CLASS="ctable2" ALIGN=center WIDTH="50"#gt#lt? if ($posttype == "topic") { ?#gt#lt?=$topic[9]?#gt#lt? } else { ?#gt - #lt? } ?#gt#lt/TD#gt
	       #ltTD CLASS="ctable2" ALIGN=center WIDTH="140"#gt#lt? if ($posttype == "topic") { ?#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=member&type=viewprofile&user=#lt?=$topic[5]?#gt"#gt#lt?=$topic[5]?#gt#lt/A#gt#ltBR#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtzonetime($this-#gtsettings['time_format'], $topic[6])?#gt#lt/SPAN#gt#lt? } else { ?#gt - #lt? } ?#gt#lt/TD#gt
	       #lt/TR#gt
	       #lt?
	}
        ?#gt
        #lt/TABLE#gt#ltBR#gt
		#lt?
}

function displayfolders() {
        ?#gt
#ltTABLE BORDER="0" CELLPADDING="2" CELLSPACING="1" ALIGN="center" CLASS="bordertable"#gt
	#ltTR#gt
		#ltTD ALIGN="center" CLASS="ctable1"#gt
			#ltTABLE BORDER="0" CELLPADDING="0" CELLSPACING="0"#gt
				#ltTR#gt
					#ltTD#gt#ltSPAN CLASS="regular"#gt#lt?=$this-#gtlng['forum']['active']?#gt#lt/SPAN#gt#lt/TD#gt
					#ltTD#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/foldernew.gif"#gt#lt/TD#gt
				#lt/TR#gt
			#lt/TABLE#gt
		#lt/TD#gt
		#ltTD ALIGN="center" CLASS="ctable1"#gt
			#ltTABLE BORDER="0" CELLPADDING="0" CELLSPACING="0"#gt
				#ltTR#gt
					#ltTD#gt#ltSPAN CLASS="regular"#gt#lt?=$this-#gtlng['forum']['inactive']?#gt#lt/SPAN#gt#lt/TD#gt
					#ltTD#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/folderold.gif"#gt#lt/TD#gt
				#lt/TR#gt
			#lt/TABLE#gt
		#lt/TD#gt
	#lt/TR#gt
	#ltTR#gt
		#ltTD ALIGN="center" CLASS="ctable1"#gt
			#ltTABLE BORDER="0" CELLPADDING="0" CELLSPACING="0"#gt
				#ltTR#gt
					#ltTD#gt#ltSPAN CLASS="regular"#gt#lt?=$this-#gtlng['forum']['c_active']?#gt#lt/SPAN#gt#lt/TD#gt
					#ltTD#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/foldernewclosed.gif"#gt#lt/TD#gt
				#lt/TR#gt
			#lt/TABLE#gt
		#lt/TD#gt
		#ltTD ALIGN="center" CLASS="ctable1"#gt
			#ltTABLE BORDER="0" CELLPADDING="0" CELLSPACING="0"#gt
				#ltTR#gt
					#ltTD#gt#ltSPAN CLASS="regular"#gt#lt?=$this-#gtlng['forum']['c_inactive']?#gt#lt/SPAN#gt#lt/TD#gt
					#ltTD#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/folderoldclosed.gif"#gt#lt/TD#gt
				#lt/TR#gt
			#lt/TABLE#gt
		#lt/TD#gt
	#lt/TR#gt
#lt/TABLE#gt
        #lt?

}

}

?#gt";}i:55;a:2:{i:0;s:12:"lib/main.php";i:1;s:16303:"#lt?php

class exclusive extends genesis {

var $topics, $posts, $validated;

function execute () {
	global $type;
	if ($type == "mark") {
		$this-#gtmarkposts();
	}
	$this-#gtheader();
	$this-#gtdisplayforums();
	$this-#gtdisplaywhosonline();
	$this-#gtdisplaylogin();
	$this-#gtdisplaystats();
	$this-#gtdisplayforumimgs();
	$this-#gtfooter();
}

function spacer () {
?#gt
     #ltTR#gt
	  #ltTD CLASS="ctable2" COLSPAN="5" HEIGHT="12"#gt#lt/TD#gt
	 #lt/TR#gt
#lt?
}

function markposts () {
	$this-#gtuser[10] = time();
	$this-#gtupdate($this-#gtdb['users'], $this-#gtuser[0], $this-#gtuser);
}

function displayforums () {
	?#gt
	#ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=0#gt
	 #ltTR#gt
	  #ltTD#gt#lt/TD#gt
	  #ltTD ALIGN="right"#gt#ltSPAN CLASS="regular"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=main&type=mark"#gt#lt?=$this-#gtlng['main']['mark_all']?#gt#lt/A#gt#lt/SPAN#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt
	#lt?
	$categories = $this-#gtselectall("data/categories.php");
	$c = 1;
	$cc = count($categories);
	if ($this-#gtadministrator == 1) {
		$c_nf = $this-#gthelpbutton('new_forum');
		$c_up = $this-#gthelpbutton('move_c_up');
		$c_dl = $this-#gthelpbutton('delete_cat');
		$c_ed = $this-#gthelpbutton('edit_cat');
		$c_dn = $this-#gthelpbutton('move_c_down');
	}
	
	foreach ($categories as $category) {
		?#gt
	#ltTABLE WIDTH="100%" CELLPADDING=0 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR CLASS="ctable1"#gt
		#ltTD COLSPAN=5#gt
		  #ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
			 #ltTR CLASS="category"#gt
				#ltTD WIDTH=*#gt
				   #ltA CLASS="catlink" HREF="index.php#lt?=$this-#gts?#gta=category&category=#lt?=$category[0]?#gt"#gt#lt?=$category[1]?#gt#lt/A#gt
				#lt/TD#gt
#lt? 				if ($this-#gtadministrator == 1) {
					$links = "";
					$link = "index.php".$this-#gts."a=iai&category=".$category[0]."&forum=".$forum[0]."&c_button=";
						$links .= " [ #lta href=\"";
						$links .= $link.$this-#gtlng['iai']['edit'];
						$links .= "\"#gt".$this-#gtlng['iai']['edit']."#lt/a#gt ".$c_ed;
						$links .= " #12 #lta href=\"";
						$links .= $link.$this-#gtlng['iai']['new_forum'];
						$links .= "\"#gt".$this-#gtlng['iai']['new_forum']."#lt/a#gt ".$c_nf;
						$links .= " #12 #lta href=\"";
						$links .= $link.$this-#gtlng['iai']['delete'];
						$links .= "\"#gt".$this-#gtlng['iai']['delete']."#lt/a#gt ".$c_dl." ]";
						if (($c == 1) && ($c != $cc)) {
							$links .= " ".$this-#gtlng['iai']['move'].":";
							$links .= " [ #lta href=\"";
							$links .= $link.$this-#gtlng['iai']['move_down'];
							$links .= "\"#gt".$this-#gtlng['iai']['move_down']."#lt/a#gt ".$c_dn." ]";
						} elseif (($c != $cc) && ($c != 1)) {
							$links .= $this-#gtlng['iai']['move'].":";
							$links .= " [ #lta href=\"";
							$links .= $link.$this-#gtlng['iai']['move_up'];
							$links .= "\"#gt".$this-#gtlng['iai']['move_up']."#lt/a#gt ".$c_up." #12";
							$links .= " #lta href=\"";
							$links .= $link.$this-#gtlng['iai']['move_down'];
							$links .= "\"#gt".$this-#gtlng['iai']['move_down']."#lt/a#gt ".$c_dn." ]";
						} elseif (($c == $cc) && ($c != 1)) {
							$links .= $this-#gtlng['iai']['move'].":";
							$links .= " [ #lta href=\"";
							$links .= $link.$this-#gtlng['iai']['move_up'];
							$links .= "\"#gt".$this-#gtlng['iai']['move_up']."#lt/a#gt ".$c_up." ]";
						} else {
							$links .= " ".$this-#gtlng['iai']['cant_move'];
						}
					?#gt
								#ltTD WIDTH="70%" CLASS="small" ALIGN="right" NOWRAP#gt
								#ltCENTER#gt#ltSPAN  CLASS="catlink"#gt#lt?=$links?#gt#lt/SPAN#gt#lt/CENTER#gt
								#lt/TD#gt
#lt?
				}
				$forums = explode(",", $category[2]);
				$f = 1;
				$count_forums = 0;
				$i = 0;
				$fl = array();
				for ($i=0;($i#lt=count($forums));$i++) {
					if (!empty($forums[$i])) {
						array_push($fl, $forums[$i]);
					}				
				}
				$forums = $fl;
				if (count($forums) == 0) {
					$no_forums = true;
				} else {
					$no_forums = false;
				}
		?#gt
			 #lt/TR#gt
			#lt/TABLE#gt#lt/TD#gt
	 		#lt?		if ($no_forums) {
		?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" COLSPAN="100%"#gt#ltCENTER#gt#lt?=$this-#gtlng['forum']['no_forums']?#gt#lt/CENTER#gt#lt/TD#gt
	 #lt/TR#gt
		#lt?
				} else {
?#gt
	 #lt/TR#gt
	 #ltTR CLASS="ctable2"#gt
		#ltTD CLASS="ctable2" COLSPAN="100%"#gt#lt?=$this-#gttags($category[3], "...")?#gt#lt/TD#gt
	 #lt/TR#gt	
	 #ltTR#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="4%"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" WIDTH="53%"#gt#ltFONT CLASS="small"#gt #lt?=$this-#gtlng['forum']['forum_name']?#gt/#lt?=$this-#gtlng['forum']['forum_desc']?#gt/#lt?=$this-#gtlng['forum']['moderators']?#gt#lt/FONT#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#ltFONT CLASS="small"#gt#lt?=$this-#gtlng['forum']['topics']?#gt#lt/FONT#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#ltFONT CLASS="small"#gt#lt?=$this-#gtlng['forum']['posts']?#gt#lt/FONT#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="29%"#gt#ltFONT CLASS="small"#gt#lt?=$this-#gtlng['forum']['last_post']?#gt#lt/FONT#gt#lt/TD#gt
	 #lt/TR#gt
#lt?				
				}
		$fc = count ($forums);
		foreach ($forums as $forumid) {
			if ($this-#gtcheckforumpermission(5, false, $forumid) == 1) {
				$forum = $this-#gtselectforum($forumid);
				$this-#gttopics = $this-#gttopics + $forum[2];
				$this-#gtposts = $this-#gtposts + $forum[3];
				if ($forum[4] == "") {
					$lastpost = $this-#gtlng['forum']['no_posts'];
					$forumimg = "forumold.gif";
				} else {
					$lasttopic = $this-#gtlasttopic;
					$linkstr1 = "#lta href=\"index.php".$this-#gts."a=topic&forum=".$forum[0]."&topic=".$lasttopic[ 0]."&page=last#last\"#gt".$lasttopic[1]."#lt/a#gt";
					$linkstr2 = "#lta href=\"index.php".$this-#gts."a=member&type=viewprofile&user=".$lasttopic[5]."\"#gt".$lasttopic[5]."#lt/a#gt";
					$linkstr3 = $this-#gtzonetime($this-#gtsettings['time_format'], $lasttopic[6]);
					$lastpost = $this-#gtemerald($this-#gtlng['forum']['last_post_in'], "%e", $linkstr1);
					$lastpost = $this-#gtemerald($lastpost, "%u", $linkstr2);
					$lastpost = $this-#gtemerald($lastpost, "%t", $linkstr3);
					if ($this-#gtuser[10] #lt $lasttopic[6]) {
						$forumimg = "forumnew.gif";
					} else {
						$forumimg = "forumold.gif";
					}
				}
				$nomods=true;
				$m = 0;
				$modtxt = "";
				$moderators = "";
				$g = "";
				$gmoderators[$forum[0]] = explode(",", $forum[10]);
				if (count($gmoderators[$forum[0]]) #gt 0) {
					foreach ($gmoderators[$forum[0]] as $gmoderatorid) { 
						if (!empty($gmoderatorid)) {
							if ($m #gt 0) {
								$g = ", ";
							}
							$gmoderator = $this-#gtselect($this-#gtdb['groups'], $gmoderatorid);
							$wm = $wm.$g."#lta href='index.php".$this-#gts."a=member&type=list&sort=group:".$gmoderator[0]."'#gt".$gmoderator[28].$gmoderator[1].$gmoderator[29]."#lt/a#gt";
							$m++;
							$nomods=false;
						}
					}
				}
				$moderators[$forum[0]] = explode(",", $forum[9]);
				if (count($moderators[$forum[0]]) #gt 0) {
					foreach ($moderators[$forum[0]] as $moderatorid) { 
						if (!empty($moderatorid)) {
							if ($m #gt 0) {
								$g = ", ";
							}
							$moderator = $this-#gtselect($this-#gtdb['users'], $moderatorid);
							$wm = $wm.$g."#lta href='index.php".$this-#gts."a=member&type=viewprofile&user=".$moderator[1]."'#gt".$moderator[1]."#lt/a#gt";
							$m++;
							$nomods=false;
						}
					}
				}
				
				if ($nomods) {
					$wm = $this-#gtlng['main']['no_moderators'];
				}
			?#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable2" ALIGN="center" WIDTH="4%"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/#lt?=$forumimg?#gt"#gt#lt/TD#gt
		  #ltTD CLASS="ctable2" WIDTH="53%"#gt#ltTABLE WIDTH="100%" CELLPADDING="0" CELLSPACING="1" BORDER="0" CLASS="regular"#gt
			 #ltTR#gt
			  #ltTD#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=forum&forum=#lt?=$forum[0]?#gt"#gt#lt?=$forum[1]?#gt#lt/A#gt#lt/TD#gt
			 #lt/TR#gt
			 #ltTR#gt
			  #ltTD CLASS="small" COLSPAN=2#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gttags($forum[8])?#gt#lt/TD#gt
			 #lt/TR#gt
			#lt/TABLE#gt
			#ltSPAN CLASS="small"#gt#ltB#gt#lt?=$this-#gtlng['forum']['moderators']?#gt#lt/B#gt: #lt?=$wm?#gt#lt? $wm = ""; ?#gt#lt/SPAN#gt#lt/TD#gt
		  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#ltSPAN CLASS="small"#gt#lt?=$forum[2]?#gt#lt/SPAN#gt#lt/TD#gt
		  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#ltSPAN CLASS="small"#gt#lt?=$forum[3]?#gt#lt/SPAN#gt#lt/TD#gt
		  #ltTD CLASS="ctable1" WIDTH="29%"#gt#ltSPAN CLASS="small"#gt#lt?=$lastpost?#gt#lt/SPAN#gt#lt/TD#gt
		 #lt/TR#gt
				#lt?
				$count_forums++;
				$f++;
			}
		}
		if (($count_forums == 0) && ($no_forums == false)) {
		?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" COLSPAN="100%"#gt#ltCENTER#gt#lt?=$this-#gtlng['forum']['no_forums']?#gt#lt/CENTER#gt#lt/TD#gt
	 #lt/TR#gt
		#lt?
		}
	?#gt#lt/TABLE#gt#ltBR#gt#lt?
		$c++;
	}
}

function displaywhosonline () {
	$guests = 0; $members = 0; $total = 0; $anonymous = 0; $list = "";
	$whosonline = $this-#gtselectall($this-#gtdb['online']);
	$groups = $this-#gtselectall($this-#gtdb['groups']);
	$glist .= "#ltspan class=\"small\"#gt".$this-#gtlng['main']['legend'].": ";
	foreach ($groups as $group) {
		$fgrup[$group[0]] = $group;
		$glist .= "[ #lta href=\"index.php".$this-#gts."a=member&type=list&sort=group:".$group[0]."\"#gt".$group[28].$group[1].$group[29]."#lt/a#gt ] ";
	}
	$glist .= "#lt/span#gt";
	foreach ($whosonline as $user) {
		if ($user[1] == 0) {
			$guests++;
		} elseif ($user[4] == "1") {
			if ($members #gt 0) {
				$list = $list . ", ";
			}
			$list = $list . "#lta href=\"index.php".$this-#gts."a=member&type=viewprofile&user=".$user[5]."\"#gt".$fgrup[$user[6]][28].$user[5].$fgrup[$user[6]][29]."#lt/a#gt";
			$members++;
		} elseif (($user[4] == "0") #12#12 ($user[4] == "2")) {
			if ($anonymous #gt 0) {
				$alist = $alist . ", ";
			}
			$alist = $alist . "#lta href=\"index.php".$this-#gts."a=member&type=viewprofile&user=".$user[5]."\"#gt".$fgrup[$user[6]][28].$user[5].$fgrup[$user[6]][29]."#lt/a#gt";
			$anonymous++;
		}
	}
	if ($anonymous #gt 0) {
		if ($members #gt 0) {
			$list = $list . ", ";
		}
		$list = $list . "(" . $anonymous . ") ";
		$list = $list . $this-#gtlng['misc']['a_members'];
		if ($this-#gtadministrator) {
			$list = $list . ": ".$alist;
		}
	}
	$this-#gttotal = $anonymous+ $guests + $members;
	?#gt
	#ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR CLASS="category"#gt
		#ltTD COLSPAN=3#gt#lt?=$this-#gtlng['main']['board_info']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #lt?=$this-#gtspacer()?#gt	
	 #ltTR#gt
	  #ltTD CLASS="category" ALIGN="center" WIDTH="4%"#gt#lt/TD#gt
	  #ltTD CLASS="category" COLSPAN=2#gt#ltFONT CLASS="small"#gt#ltA CLASS="catlink" HREF="index.php#lt?=$this-#gts?#gta=whosonline"#gt#lt?=$this-#gtlng['main']['whos_online']?#gt#lt/A#gt#lt/FONT#gt#lt/TD#gt
	 #lt/TR#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable2" ALIGN="center" WIDTH="4%"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=whosonline"#gt#ltIMG BORDER="0" SRC="#lt?=$this-#gttp['main']?#gtimages/whosonline.gif"#gt#lt/A#gt#lt/TD#gt
		  #ltTD CLASS="ctable2" COLSPAN="2"#gt
		  #ltSPAN CLASS="small"#gt[ #lt?=$this-#gtlng['misc']['members']?#gt: #lt?=$members?#gt #12 #lt?=$this-#gtlng['misc']['a_members']?#gt: #lt?=$anonymous?#gt #12 #lt?=$this-#gtlng['misc']['guests']?#gt: #lt?=$guests?#gt ] [ #ltB#gt#lt?=$this-#gtlng['misc']['total']?#gt: #lt?=$this-#gttotal?#gt#lt/B#gt ]#lt/SPAN#gt#ltBR#gt
		  #lt?=$glist?#gt#ltBR#gt#ltBR#gt
		  #ltSPAN CLASS="small"#gt#lt?=$list?#gt#lt/SPAN#gt#ltBR#gt
		  #ltSPAN CLASS="small"#gt#ltI#gt#lt?=$this-#gtemerald($this-#gtlng['main']['online_data'], "%e", ($this-#gtsettings[online_limit]/60))?#gt#lt/I#gt#lt/SPAN#gt
		  #lt/TD#gt
		 #lt/TR#gt
#lt?
$this-#gtspacer();
}

function displaylogin () {
	if ($this-#gtuser[0] == 0) {
	?#gt
	 #ltFORM ACTION="index.php" METHOD="POST" NAME="mainlogin"#gt
	 #ltINPUT TYPE="hidden" NAME="a" VALUE="main"#gt
	 #ltINPUT TYPE="hidden" NAME="checklogin" VALUE="true"#gt
	 #ltTR#gt
	  #ltTD CLASS="category" ALIGN="center" WIDTH="4%"#gt#lt/TD#gt
	  #ltTD CLASS="category" COLSPAN=2#gt#ltFONT CLASS="small"#gt#ltA CLASS="catlink" HREF="index.php#lt?=$this-#gts?#gta=guest&type=login"#gt#lt?=$this-#gtlng['toplinks']['login']?#gt#lt/A#gt#lt/FONT#gt#lt/TD#gt
	 #lt/TR#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable2" ALIGN="center" WIDTH="4%"#gt#ltA CLASS="catlink" HREF="index.php#lt?=$this-#gts?#gta=guest&type=login"#gt#ltIMG BORDER="0" SRC="#lt?=$this-#gttp['main']?#gtimages/loginico.gif"#gt#lt/A#gt#lt/TD#gt
		  #ltTD CLASS="ctable2" COLSPAN="4"#gt
		   #ltTABLE WIDTH="100%"#gt
		    #ltTR#gt
			 #ltTD WIDTH="50%" CLASS="ctable2" ALIGN="CENTER"#gt#lt?=$this-#gtlng['misc']['username']?#gt:&nbsp;#ltINPUT TYPE="text" NAME="username" SIZE=30#gt#lt/TD#gt
	      	 #ltTD WIDTH="50%" CLASS="ctable2" ALIGN="CENTER"#gt#lt?=$this-#gtlng['misc']['password']?#gt:&nbsp;#ltINPUT TYPE="password" NAME="password" SIZE=30#gt#lt/TD#gt
	         #lt/TR#gt
	        #ltTR#gt
	         #ltTD COLSPAN="2" CLASS="ctable2" ALIGN="CENTER"#gt#lt?=$this-#gtbutton($this-#gtlng['toplinks']['login'])?#gt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		   #ltA CLASS="regular" HREF="index.php#lt?=$this-#gts?#gta=guest&type=register"#gt#lt?=$this-#gtlng['toplinks']['register']?#gt-#gt#lt/A#gt#lt/TD#gt
	        #lt/TR#gt
	      #lt/TABLE#gt#lt/TD#gt
		 #lt/TR#gt
		 #lt/FORM#gt
#lt?
		$this-#gtspacer();
	}
}

function displaystats () {
	$users = $this-#gtselectall($this-#gtdb['users']);
	$total_posts = $this-#gtemerald($this-#gtlng['main']['number_posts'], "%e", $this-#gtposts);
	$total_posts = $this-#gtemerald($total_posts, "%t", $this-#gttopics);
	$total_members = $this-#gtemerald($this-#gtlng['main']['registered_members'], "%e", (count($users)));
	$most_online = $this-#gtemerald($this-#gtlng['main']['most_users'], "%e", $this-#gtsettings['most_mem_onl']);
	$most_online = $this-#gtemerald($most_online, "%t", $this-#gtzonetime("###", $this-#gtsettings['most_mem_tim']));
	if (count($users) == 0) {
		$recent_member = $this-#gtlng['main']['no_members'];
	} else { 
		$found = false;
		$i = count($users) - 1;
		$member = '#lta href="index.php'.$this-#gts.'a=member&type=viewprofile&user='.$users[$i][1].'"#gt'.$users[$i][1].'#lt/a#gt';
		$recent_member = $this-#gtemerald($this-#gtlng['main']['newest_member'], "%e", $member);
	} 
?#gt
	 #ltTR#gt
	  #ltTD CLASS="category" ALIGN="center" WIDTH="4%"#gt#lt/TD#gt
	  #ltTD CLASS="category" WIDTH="53%" COLSPAN="2"#gt#ltFONT CLASS="small"#gt#lt?=$this-#gtlng['main']['stats']?#gt#lt/FONT#gt#lt/TD#gt
	 #lt/TR#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable2" ALIGN="center" WIDTH="4%"#gt#ltIMG SRC="#lt?=$this-#gttp['main']?#gtimages/stats.gif"#gt#lt/TD#gt
		  #ltTD CLASS="ctable2" COLSPAN="2"#gt
		  	#ltSPAN CLASS="small"#gt#lt?=$total_posts?#gt#ltBR#gt
  			#lt?=$total_members?#gt#ltBR#gt
			#lt?=$most_online?#gt#ltBR#gt
			#lt?=$recent_member?#gt#lt/SPAN#gt
		  #lt/TD#gt
		 #lt/TR#gt
#lt?
$this-#gtspacer();
}

function displayforumimgs () {
?#gt
	 #ltTR#gt
	  #ltTD CLASS="category" ALIGN="center" WIDTH="4%"#gt#lt/TD#gt
	  #ltTD CLASS="category" COLSPAN=3#gt#ltFONT CLASS="small"#gt#lt?=$this-#gtlng['main']['forum_gfx']?#gt#lt/FONT#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" ALIGN="center" ROWSPAN="2" WIDTH="4%"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="48%"#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['main']['new_posts']?#gt#lt/SPAN#gt&nbsp;#lt/TD#gt
	  #ltTD CLASS="ctable2" ALIGN="center" WIDTH="48%"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/forumnew.gif"#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="48%"#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['main']['no_new_posts']?#gt#lt/SPAN#gt&nbsp;#lt/TD#gt
	  #ltTD CLASS="ctable2" ALIGN="center" WIDTH="48%"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/forumold.gif"#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt
#lt?
}

}

?#gt";}i:56;a:2:{i:0;s:14:"lib/member.php";i:1;s:16630:"#lt?php

class exclusive extends genesis {

function execute () {
	global $type;
	if ($this-#gtuser[1] == "Guest") {
		$this-#gtheader();
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_guest_perm']);
		$this-#gtfooter();
		die();
	}
	if ($type == "logout") {
		$this-#gtlogout();
	} elseif ($type == "changepass2") {
		$this-#gtchangepass2();
	} else {
		$this-#gtheader();
		if ($type == "profile") {
			$this-#gtprofile();
		} elseif ($type == "profile2") {
			$this-#gtprofile2();
		} elseif ($type == "viewprofile") {
			$this-#gtviewprofile();
		} elseif ($type == "list") {
			$this-#gtmemberlist();
		} elseif (($type == "saveinfo") && ($this-#gtuser[0] != 0)) {
			$this-#gtextenders['member']-#gtsaveinfo1($this-#gtuser, $this-#gtbutton($this-#gtlng['misc']['ok']), $this-#gtlng);
		} elseif (($type == "saveinfo2") && ($this-#gtuser[0] != 0)) {
			$this-#gtsaveinfo2();
		} elseif (($type == "activate") && ($this-#gtuser[0] != 0)) {
			$this-#gtextenders['member']-#gtactivate($this-#gtuser, $this-#gtbutton($this-#gtlng['misc']['ok']), $this-#gtlng);
		} elseif (($type == "activate2") && ($this-#gtuser[0] != 0)) {
			$this-#gtextenders['member']-#gtactivate2($this-#gtuser, $this-#gtbutton($this-#gtlng['misc']['ok']), $this-#gtlng);
		} elseif ($type == "changepass1") {
			$this-#gtchangepass1();
		}
		$this-#gtfooter();
	}
}

function saveinfo2 () {
	$this-#gtextenders['member']-#gtsaveinfo2($this-#gtuser, $this-#gtlng);
	$message = $this-#gtlng['misc']['info_saved'];
	//$redirect = "index.php".$this-#gts;
	$method = $this-#gtlng['toplinks']['register'];
	$this-#gtdisplaymessage($method, $message, $redirect);
}

function changepass2 () {
	global $oldpassword, $newpassword, $newpassword2;
	$user = $this-#gtuser;
	if ($this-#gtuser[2] != $this-#gtencrypt($oldpassword)) {
		$message = $this-#gtlng['errors']['incorrect_pw'];
	} elseif ($newpassword != $newpassword2) {
		$message = $this-#gtlng['errors']['no_pw_match'];
	} else {
		$user[2] = $this-#gtencrypt($newpassword);
		$this-#gtupdate($this-#gtdb['users'], $this-#gtuser[0], $user);
		setcookie("cpass", $this-#gtencrypt($newpassword), time()+5184000);
		$message = $this-#gtlng['misc']['pw_changed'];
		$method = $this-#gtlng['member']['change_pw'];
	}
	$this-#gtheader();
	$this-#gtdisplaymessage($method, $message, $redirect);
	$this-#gtfooter();
}

function changepass1 () {
	global $password, $special;
?#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	#ltFORM ACTION="index.php" METHOD="post"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="member"#gt
	#ltINPUT TYPE="hidden" NAME="type" VALUE="changepass2"#gt
#lt?
	$method = $this-#gtlng['member']['change_pw'];
	if ($this-#gtuser[0] == 0) {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_guest_perm']);
	} else {
?#gt
     #ltTR#gt
	  #ltTD COLSPAN=2 CLASS="category" ALIGN="center"#gt#lt?=$method?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['member']['logged']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#lt?=$this-#gtuser[1]?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH=150#gt#lt?=$this-#gtlng['member']['old_pw']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#ltINPUT NAME="oldpassword" TYPE="password"#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['member']['new_pw']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#ltINPUT NAME="newpassword" TYPE="password"#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH=150#gt#lt?=$this-#gtlng['member']['new_pw2']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#ltINPUT NAME="newpassword2" TYPE="password"#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD COLSPAN=2 ALIGN=center CLASS="ctable1"#gt#lt?=$this-#gtbutton($this-#gtlng['misc']['ok'])?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/FORM#gt
	#lt/TABLE#gt
#lt?
	}
}

function memberlist () {
	@set_time_limit(120);
	global $page, $sort, $letter;
	if ($page == "") {
		$page = 1;
	}
	$memcount = count( $this-#gtselectall( $this-#gtdb['users'] ) );
	list($criteria, $key) = explode(":", $sort);
	if (!empty($letter) && empty($sort)) {
		$sort = "letter";
		$criteria = "letter";
		$key = $letter;
	}
	$users = $this-#gtextenders['member']-#gtget_members_by($criteria, $key);
	for ($i=1;count($users)#gt=$i*$this-#gtsettings['membs_perpg']-$this-#gtsettings['membs_perpg']+1;$i++) {
		if ($i == $page) {
			$linko = "#ltb#gt";
			$linkc = "#lt/b#gt";
		} else {
			$linko = "#lta href=\"index.php".$this-#gts."a=member&type=list&sort=".$sort."&page=".$i."\"#gt";
			$linkc = "#lt/a#gt";
		}
		$pagelinks = $pagelinks . " ".$linko.$i.$linkc." ";
	}
	$users = $this-#gtlimit($users, ($page-1)*$this-#gtsettings['membs_perpg'], $this-#gtsettings['membs_perpg']-1);
	$desc = $this-#gtlng['member']['memberl'];
	$desc = $this-#gtemerald($desc, "%e", $page);
	$desc = $this-#gtemerald($desc, "%m", $this-#gtsettings['membs_perpg']);
	$desc2 = $this-#gtemerald($this-#gtlng['member']['memberm'], "%c", count($users));
	if ((count($users) == 0) #12#12 ($users == 0)) {
		$cont = 0;
		$desc = "";
		$pagelinks = "";
	} else {
		$cont = 1;
		$desc .= $desc2;
		$pagelinks = "[ ".$pagelinks." ]";
	}
	?#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1#gt
	 #ltTR#gt#ltFORM ACTION="index.php" NAME="mlist"#gt
	  #ltTD ALIGN="left"#gt
	   #ltINPUT TYPE="hidden" NAME="a" VALUE="member"#gt
	   #ltINPUT TYPE="hidden" NAME="type" VALUE="list"#gt
	   #ltSPAN CLASS="regular"#gtSort By: 
	   #ltSELECT NAME="sort" onChange="document.mlist.letter.value='';"#gt
	   	#ltOPTION#gt...#lt/OPTION#gt
	   	#ltOPTION #lt? if ($sort == "" #12#12 $sort == "userid" ) { $sort = "userid"; ?#gtSELECTED #lt? } ?#gtVALUE="userid"#gt#lt?=$this-#gtlng['misc']['userno']?#gt#lt/OPTION#gt
	   	#ltOPTION #lt? if ($sort == "username") {?#gtSELECTED #lt? } ?#gtVALUE="username"#gt#lt?=$this-#gtlng['misc']['username']?#gt#lt/OPTION#gt
		#ltOPTION #lt? if ($sort == "posts") {?#gtSELECTED #lt? } ?#gtVALUE="posts"#gt#lt?=$this-#gtlng['misc']['post_ct']?#gt#lt/OPTION#gt
#lt?
		$groups = $this-#gtselectall($this-#gtdb['groups']);
		foreach ($groups as $group) {
?#gt		#ltOPTION #lt? if ($sort == "group:".$group[0]) {?#gtSELECTED #lt? } ?#gtVALUE="group:#lt?=$group[0]?#gt"#gt -#gt #lt?=$group[1]?#gt#lt/OPTION#gt
#lt?
		}

?#gt		
	   #lt/SELECT#gt #lt?=$this-#gtbutton($this-#gtlng['misc']['sort'])?#gt#ltBR#gt
	   #lt?=$this-#gtlng['misc']['sbl']?#gt: #ltINPUT TYPE="text" NAME="letter" VALUE="#lt?=$letter?#gt" MAXLENGTH="1" SIZE="1"#gt
	   #lt?=$this-#gtbutton($this-#gtlng['misc']['sort'])?#gt#lt/SPAN#gt#lt/TD#gt#lt/FORM#gt
	  #ltTD ALIGN="right"#gt#ltSPAN CLASS="regular"#gt#lt?=$pagelinks?#gt#ltBR#gt#lt?=$desc?#gt#lt/SPAN#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
     #ltTR#gt
	  #ltTD CLASS="category" COLSPAN="7" class="category" align="center"#gt#lt?=$this-#gtlng['toplinks']['memberlist']?#gt#lt/td#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" ALIGN="center"#gtUsername#lt/TD#gt
	  #ltTD CLASS="ctable2" ALIGN="center"#gtPosts#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center"#gtEmail#lt/TD#gt
	  #ltTD CLASS="ctable2" ALIGN="center"#gtView Profile#lt/TD#gt
	 #lt/TR#gt
	#lt?
	if ($cont == 1) {
		foreach ($users as $user) {
			$hidemail = false;
			if ($user[16] == "1") { $hidemail = true; }
			if ($this-#gtadministrator) { $hidemail = false; }
			if ($this-#gtmoderator) { $hidemail = false; }
			if ($user[10] == "disabled") {
				$profilelink = "No Profile";
			} else {
				$profilelink = '#ltA HREF="index.php'.$this-#gts.'a=member&type=viewprofile&userid='.$user[0].'"#gtView Profile#lt/A#gt';
			}
		?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1"#gt#lt? if ($sort == "userid") { ?#gt#lt?=$user[0]?#gt. #lt? } ?#gt#ltB#gt#lt?=$user[1]?#gt#lt/B#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" ALIGN="center"#gt#lt?=$user[11]?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center"#gt#lt? 
			if ($hidemail) { 
				?#gt#lt?=$this-#gtlng['misc']['unse']?#gt#lt?
			} else { 
				?#gt#ltA HREF="mailto:#lt?=$user[4]?#gt"#gtSend Email#lt/A#gt#lt? } ?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" ALIGN="center"#gt#lt?=$profilelink?#gt#lt/TD#gt
	 #lt/TR#gt
		#lt?
		}
	} else {
		?#gt
	 #ltTR#gt
	  #ltTD COLSPAN=4 CLASS="ctable1" ALIGN="center"#gt#ltB#gt#lt?=$desc2?#gt#lt/B#gt#lt/TD#gt
	 #lt/TR#gt
		#lt?
	}
	?#gt
	#lt/TABLE#gt
	#lt?
}

function viewprofile () {
	global $userid, $user;
	if ($user == "Guest" #12#12 $userid == "0") {
		$user = ""; $userid = "";
	}
	if (!empty($userid)) {
		$user = $this-#gtselect($this-#gtdb['users'], $userid);
	} elseif (!empty($user)) {
		$user = $this-#gtselectwhere($this-#gtdb['users'], 1, $user);
		$user = $user[0];
		$userid = $user[0][0];
	} else {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_perm'], "", 0, 1);
	}
	$this-#gtpip($user[0]);
	$title = $this-#gtpipinfo[$user[0]]['title'];
	if ($this-#gtpipinfo[$user[0]]['titletype'] == "Standard") {
		$title = ":Standard:";
	}
	$help1 = $this-#gthelpbutton('ovt1');
	$help2 = $this-#gthelpbutton('ovt2');
	if ($user[14] != "") {
		$avatar = "#ltimg src=\"".$user[14]."\"#gt#ltbr#gt";
	} else {
		$avatar = "";
	}
	$span = 5;
	$usergroup = $this-#gtselect($this-#gtdb['groups'], $user[3]);
	if ($this-#gtadministrator) {
		$groups = $this-#gtselectall($this-#gtdb['groups']);
		foreach ($groups as $group) {
			if ($group[0] != 0) {
				$groupshtml = $groupshtml . "\t\t#ltoption value=\"".$group[0]."\"#gt".$group[1]."#lt/option#gt\r\n";
			}
		}
		$span = 6;
		$button = $this-#gtbt."OK".$this-#gtbe;
		$adminhtml = #lt#lt#ltHTML
		#lttable width="100%" class="ctable2"#gt
		 #ltform action="index.php"#gt
		 #ltinput type="hidden" name="a" value="iai"#gt
		 #ltinput type="hidden" name="type" value="editgroup"#gt
		 #ltinput type="hidden" name="user" value="$user[0]"#gt
		 #lttr#gt
		  #lttd#gt{$this-#gtlng['member']['ng']}:#lt/td#gt
		  #lttd#gt#ltselect name="group"#gt$groupshtml#lt/select#gt $help1#lt/td#gt
		  #lttd#gt$button#lt/td#gt
		 #lt/tr#gt#lt/form#gt
		 #lttr#gt
		 #ltform action="index.php"#gt
		 #ltinput type="hidden" name="a" value="iai"#gt
		 #ltinput type="hidden" name="type" value="overridetitle"#gt
		 #ltinput type="hidden" name="user" value="$user[0]"#gt
		  #lttd#gt{$this-#gtlng['member']['ot']}:#lt/td#gt
		  #lttd#gt#ltinput type="text" name="title" value="$title"#gt $help2#lt/td#gt
		  #lttd#gt$button#lt/td#gt
		 #lt/tr#gt#lt/form#gt
		#lt/table#gt
HTML;
		if ($user[10] == "disabled") {
			$statusadmin = "(#lta href=\"index.php".$this-#gts."a=iai&type=enableuser&userid=".$user[0]."\"#gt".$this-#gtlng['member']['au']."#lt/a#gt)";
		} else {
			$statusadmin = "(#lta href=\"index.php".$this-#gts."a=iai&type=disableuser&userid=".$user[0]."\"#gt".$this-#gtlng['member']['du']."#lt/a#gt)";
		}
		$changepasshtml = "#lttr#gt#lttd class=\"ctable1\" width=\"120\"#gt{$this-#gtlng['member']['change_pw']}:#lt/td#gt#ltTD CLASS=\"ctable1\"#gt#ltA HREF=\"index.php".$this-#gts."a=iai&type=changepassword&userid=".$user[0]."\"#gt".$this-#gtlng['member']['change_pw']."#lt/A#gt#lt/TD#gt#lt/tr#gt";
	}
	if ($user[10] == "disabled") {
		$status = $this-#gtlng['member']['du'];
	} else {
		$status = $this-#gtlng['member']['au'];
	}
	$ut = "#ltI#gt".$this-#gtpipinfo[$user[0]]['title']." #lt/I#gt";
	$title = $this-#gtemerald($this-#gtlng['member']['npp'], "%t", $ut);
	$title = $this-#gtemerald($title, "%e", $user[1]);
	$userq = "#ltB#gt".$user[1]."#lt/B#gt";
	if (empty($user[22])) {
		$regdate =  "?";
	} else {
		$regdate =  $this-#gtzonetime($this-#gtsettings['ltimeformat'], $user[22]);
	}
	$hidemail = false;
	if ($user[16] == "1") { $hidemail = true; }
	if ($this-#gtadministrator) { $hidemail = false; }
	if ($this-#gtmoderator) { $hidemail = false; }
	?#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR CLASS="category"#gt
	  #ltTD COLSPAN=3#gt#lt?=$title?#gt .... #lt?=$this-#gtlng['member']['ms']?#gt #lt?=$regdate?#gt#lt/TD#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH="44%" ROWSPAN="#lt?=$span?#gt"#gt#lt?=$avatar?#gt#ltu#gt#lt?=$this-#gtemerald($this-#gtlng['member']['writes'], "%e", $userq)?#gt:#lt/u#gt #ltBR#gt#lt? if (empty($user[21])) { echo "#lti#gt".$this-#gtlng['member']['nothing']."#lt/i#gt"; } else { echo $this-#gttags($user[21]); } ?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" WIDTH=120#gt#lt?=$this-#gtlng['member']['user_st']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#lt?=$status?#gt #lt?=$statusadmin?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt?=$changepasshtml?#gt
#lt?
	if ($user[10] != "disabled") {
?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=120#gt#lt?=$this-#gtlng['member']['msg']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=messenger&type=send&to=#lt?=$user[1]?#gt"#gt#lt?=$this-#gtlng['member']['sam']?#gt#lt/A#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH=120#gt#lt?=$this-#gtlng['member']['u,t']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#ltB#gt#lt?=$usergroup[1]?#gt#lt/B#gt, #ltI#gt#lt?=$this-#gtpipinfo[$user[0]]['title']?#gt#lt/I#gt#lt?=$adminhtml?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=120#gt#lt?=$this-#gtlng['misc']['level']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#lt?=$this-#gtpipinfo[$user[0]]['bigpip']?#gt#ltBR#gt#lt?=$this-#gtuser_smallpip?#gt#lt?=$this-#gtpipinfo[$user[0]]['pip']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=120#gt#lt?=$this-#gtlng['misc']['lastact']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#lt?=$this-#gtzonetime($this-#gtsettings[time_format], $user[10])?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" ROWSPAN=100%#gt#ltu#gt#lt?=$this-#gtlng['member']['sig']?#gt: #lt?=$this-#gtlng['member']['sia']?#gt#lt/u#gt#ltBR#gt
	  #lt? if (empty($user[12])) { echo "#lti#gtNo Signature#lt/i#gt"; } else { echo $this-#gttags($user[12]); } ?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" WIDTH=120#gt#lt?=$this-#gtlng['misc']['post_ct']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$user[11]?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH=120#gt#lt?=$this-#gtlng['member']['location']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$user[5]?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH=120#gt#lt?=$this-#gtlng['member']['web_page']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#ltA HREF="#lt?=$user[13]?#gt"#gt#lt?=$user[13]?#gt#lt/A#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=120#gt#lt?=$this-#gtlng['member']['email']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#lt? 
			if ($hidemail) { 
				?#gt#lt?=$this-#gtlng['misc']['unse']?#gt#lt?
			} else { 
				?#gt#ltA HREF="mailto:#lt?=$user[4]?#gt"#gt#lt?=$user[4]?#gt#lt/A#gt#lt? } ?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=120#gtAIM:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#ltA HREF="aim:goim?screenname=#lt?=$user[6]?#gt&message=Hi.+Are+you+there?"#gt#lt?=$user[6]?#gt#lt/A#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH=120#gtMSN:#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#ltA HREF='http://members.msn.com/default.msnw?mem=#lt?=$user[7]?#gt' TARGET='new'#gt#lt?=$user[7]?#gt#lt/A#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=120#gtYIM:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#ltA HREF='http://edit.yahoo.com/config/send_webmesg?.target=#lt?$user[8]?#gt& ;.src=pg' TARGET='new'#gt#lt?=$user[8]?#gt#lt/A#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH=120#gtICQ:#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#ltA HREF='http://web.icq.com/wwp?Uin=#lt?=$user[9]?#gt' TARGET='new'#gt#lt?=$user[9]?#gt#lt/A#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt
	#lt?
	}
}

function profile () {
	$this-#gtpip($this-#gtuser[0]);
	$this-#gtextenders['member']-#gteditprofile($this-#gtuser, $this-#gtbutton($this-#gtlng['misc']['ok']), $this-#gtlng, $this-#gtuserset);
}

function logout () {
	$where = $this-#gtselectwhere($this-#gtdb['online'], 1, $this-#gtuser[0]);
	$this-#gtdelete($this-#gtdb['online'], $where[0][0]);
	setcookie("cuser", "", time());
	setcookie("cpass", "", time());
	$this-#gtheader();
	$this-#gtdisplaymessage("Logout", "You have been logged out.", "index.php");
	$this-#gtfooter();
}

}

?#gt
";}i:57;a:2:{i:0;s:17:"lib/messenger.php";i:1;s:23878:"#lt?php

class exclusive extends genesis {

function execute () {
	global $type, $res;
	$this-#gtheader();
	$this-#gtguestblock();
	$this-#gtaccesslog['nullify'] = true;
	if (($type == "") #12#12 ($type == "inbox")) {
		$res = $this-#gtlng['messenger']['inbox'];
		$this-#gtdisplaylinks();
		$this-#gtinbox();
	} elseif ($type == "outbox") {
		$res = $this-#gtlng['messenger']['outbox'];
		$this-#gtdisplaylinks();
		$this-#gtoutbox();
	} elseif ($type == "forward") {
		$res = $this-#gtlng['messenger']['fwdg'];
		$this-#gtdisplaylinks();
		$this-#gtsendMessage();
	} elseif ($type == "forward2") {
		$res = $this-#gtlng['messenger']['fwdg'];
		$this-#gtdisplaylinks();
		$this-#gtsendMessage2();
	} elseif ($type == "eforward") {
		$res = $this-#gtlng['messenger']['fwdg'];
		$this-#gtdisplaylinks();
		$this-#gtesendMessage();
	} elseif ($type == "eforward2") {
		$res = $this-#gtlng['messenger']['fwdg'];
		$this-#gtdisplaylinks();
		$this-#gtesendMessage2();
	} elseif ($type == "send") {
		$res = $this-#gtlng['messenger']['sndg'];
		$this-#gtdisplaylinks();
		$this-#gtsendMessage();
	} elseif ($type == "send2") {
		$res = $this-#gtlng['messenger']['sndg'];
		$this-#gtdisplaylinks();
		$this-#gtsendMessage2();
	} elseif ($type == "view") {
		$res = $this-#gtlng['messenger']['vewg'];
		$this-#gtdisplaylinks();
		$this-#gtviewMessage();
	} elseif ($type == "delete") {
		$res = $this-#gtlng['messenger']['dltg'];
		$this-#gtdisplaylinks();
		$this-#gtdelete1();
	} elseif ($type == "delete2") {
		$res = $this-#gtlng['messenger']['dltg'];
		$this-#gtdisplaylinks();
		$this-#gtdelete2();
	} elseif ($type == "deletechecked") {
		$res = $this-#gtlng['messenger']['dltg'];
		$this-#gtdisplaylinks();
		$this-#gtdeletechecked1();
	} elseif ($type == "deletechecked2") {
		$res = $this-#gtlng['messenger']['dltg'];
		$this-#gtdisplaylinks();
		$this-#gtdeletechecked2();
	}
	$this-#gtendmessenger();
	$this-#gtfooter();
}

function delete2 () {
	global $id;
	$message = $this-#gtselect($this-#gtdb['messages'], $id);
	?#gt#lt/table#gt#ltBR#gt#lt?
	if (($this-#gtuser[0] != $message[1]) && ($this-#gtuser[0]) != $message[2]) {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_del']);
		$this-#gtfooter();
		die();
	} else {
		if ($message[1] == $this-#gtlng['acp']['sys']) {
			$message[6] = 3;
			$message[5] = "";
			$this-#gtupdate($this-#gtdb['messages'], $id, $message);
		} else {
			$this-#gtdelete($this-#gtdb['messages'], $id);
		}
		$this-#gtdisplaymessage($this-#gtlng['moderate']['delete'], $this-#gtlng['misc']['op_successs']);
	}
}


function delete1 () {
	global $id, $r;
	$message = $this-#gtselect($this-#gtdb['messages'], $id);
	?#gt#lt/table#gt#ltBR#gt#lt?
	if (($this-#gtuser[0] != $message[1]) && ($this-#gtuser[0]) != $message[2]) {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_del']);
		$this-#gtfooter();
		die();
	} else {
		$this-#gtquery($this-#gtlng['moderate']['delete'], $this-#gtlng['messenger']['mdq'], "index.php?a=messenger&type=delete2&id=".$id, "index.php?a=messenger", null, null);
	}
}

function deletechecked2 () {
	global $message;
	$errcount = 0;
	$message = explode(",", $message);
	$mescount = count($message);
	foreach ($message as $id) {
		$entry = $this-#gtselect($this-#gtdb['messages'], $id);
		if (($this-#gtuser[0] != $entry[1]) && ($this-#gtuser[0] != $entry[2])) {
			$errcount++;
		} else {
			if ($entry[1] == "System") {
				$entry[6] = 3;
				$entry[5] = "";
				$this-#gtupdate($this-#gtdb['messages'], $id, $entry);
			} else {
				$this-#gtdelete($this-#gtdb['messages'], $id);
			}
		}
	}
	if ($errcount #gt 0) {
		$message = $this-#gtlng['errors']['no_del2'];
	} else {
		$message = $this-#gtlng['misc']['op_successs'];
	}
	?#gt#lt/table#gt#ltBR#gt#lt?
	$this-#gtdisplaymessage($this-#gtlng['moderate']['delete'], $message);
}

function deletechecked1 () {
	global $message;
	if (count($message) == 0) {
		$this-#gtdisplaymessage($this-#gtlng['moderate']['delete'], $this-#gtlng['errors']['sdm']);
		$this-#gtfooter();
		die();
	}
	$i = 0;
	$count = count($message);
	foreach ($message as $id) {
		$i++;
		if ($i == $count) {
			$dtext = $dtext.$id;
		} else {
			$dtext = $dtext.$id.",";
		}
	}
	?#gt#lt/table#gt#ltBR#gt#lt?
	$this-#gtquery($this-#gtlng['moderate']['delete'], $this-#gtlng['messenger']['mdq'], "index.php?a=messenger&type=deletechecked2&message=".$dtext, "index.php?a=messenger", null, null);
}

function guestblock () {
	if ($this-#gtuser[0] == 0){
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_guest_perm'], "", "", 1);
	}
}

function viewMessage () {
	global $id, $res, $type, $cuser;
	$message = $this-#gtselect($this-#gtdb['messages'], $id);
	if (($this-#gtuser[0] != $message[1]) && ($this-#gtuser[0]) != $message[2]) {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_vew']);
		$this-#gtfooter();
		die();
	} else {
		if (($this-#gtuser[0] == $message[2]) && ($message[6] != 1)) {
			$message[6] = 1;
			$this-#gtupdate($this-#gtdb['messages'], $message[0], $message);
		}
		if ($message[1] == "System") {
			$from = array("", "System");
		} else {
			$from = $this-#gtselect($this-#gtdb['users'], $message[1]);
		}
		$to = $this-#gtselect($this-#gtdb['users'], $message[2]);
		$message[5] = $this-#gttags($message[5]);
		$delete = $this-#gtlng['moderate']['delete'];
		?#gt
		#ltTR#gt
		 #ltTD CLASS="ctable1" WIDTH="15%"#gt#lt?=$this-#gtlng['misc']['from']?#gt#lt/TD#gt
		 #ltTD CLASS="ctable1" WIDTH="85%" COLSPAN=4#gt#lt?=$from[1]?#gt#lt/TD#gt
		#lt/TR#gt
		#ltTR#gt
		 #ltTD CLASS="ctable2" WIDTH="15%"#gt#lt?=$this-#gtlng['misc']['to']?#gt#lt/TD#gt
		 #ltTD CLASS="ctable2" WIDTH="85%" COLSPAN=4#gt#lt?=$to[1]?#gt#lt/TD#gt
		#lt/TR#gt
		#ltTR#gt
		 #ltTD CLASS="ctable1" WIDTH="15%"#gt#lt?=$this-#gtlng['forum']['subject']?#gt:#lt/TD#gt
		 #ltTD CLASS="ctable1" WIDTH="85%" COLSPAN=4#gt#lt?=$message[4]?#gt#lt/TD#gt
		#lt/TR#gt
		#ltTR#gt
		 #ltTD CLASS="ctable2" WIDTH="15%"#gt#lt?=$this-#gtlng['misc']['mess']?#gt#lt/TD#gt
		 #ltTD CLASS="ctable2" WIDTH="85%" COLSPAN=4#gt#lt?
			$messagetxt = str_replace("&lt;br&gt;", "#ltbr#gt\n", $message[5]);
			$messagetxt = str_replace("&lt;BR&gt;", "#ltbr#gt\n", $messagetxt);
			echo $messagetxt;
		 ?#gt#lt/TD#gt
		#lt/TR#gt
		#ltTR#gt
		 #ltTD CLASS="ctable2" WIDTH="15%"#gt#lt?=$this-#gtlng['misc']['acti']?#gt#lt/TD#gt
		 #ltTD CLASS="ctable2" WIDTH="85%" COLSPAN=4#gt#ltA HREF="index.php?a=messenger&type=delete&id=#lt?=$id?#gt"#gt#lt?=$delete?#gt#lt/A#gt #12 #ltA HREF="index.php?a=messenger&type=send&to=#lt?=$from[1]?#gt&quote=#lt?=$message[0]?#gt"#gt#lt?=$this-#gtlng['messenger']['repl']?#gt#lt/A#gt #12 #ltA HREF="index.php?a=messenger&type=forward&to=#lt?=$from[1]?#gt&quote=#lt?=$message[0]?#gt"#gt#lt?=$this-#gtlng['messenger']['forw']?#gt#lt/A#gt#lt? if (($this-#gtoptions3[12] == 1) && ($this-#gtoptions1[11] == 1)) { ?#gt #12 #ltA HREF='index.php?a=messenger&type=eforward&quote=#lt?=$message[0]?#gt'#gt#lt?=$this-#gtlng['messenger']['fore']?#gt#lt/A#gt#lt? } ?#gt#lt/TD#gt
		#lt/TR#gt
		#lt?
	}
}

function displaylinks () {
global $res;
?#gt
#ltTABLE ALIGN="center" WIDTH="100%" CELLPADDING="2" CELLSPACING="1" BORDER="0" CLASS="bordertable"#gt
 #ltTR#gt
  #ltTD COLSPAN="100%" CLASS="category" ALIGN="center"#gt#lt?=$this-#gtlng['messenger']['mess']?#gt (#lt?=$res?#gt)#lt/TD#gt
 #lt/TR#gt
 #ltTR#gt
  #ltTD COLSPAN="100%" CLASS="ctable1" ALIGN="center"#gt#ltA HREF="index.php?a=messenger&type=inbox"#gt#lt?=$this-#gtlng['messenger']['inbox']?#gt#lt/A#gt #12 #ltA HREF="index.php?a=messenger&type=outbox"#gt#lt?=$this-#gtlng['messenger']['outbox']?#gt#lt/A#gt #12 #ltA HREF="index.php?a=messenger&type=send"#gt#lt?=$this-#gtlng['messenger']['send_pm']?#gt#lt/A#gt#lt/TD#gt
 #lt/TR#gt
#lt?
}

function outbox () {
	global $res;
	$messages = $this-#gtselectwhere($this-#gtdb['messages'], 1, $this-#gtuser[0]);
?#gt
	#ltFORM METHOD="post" ACTION="index.php" NAME="messenger"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="messenger"#gt
	#ltINPUT TYPE="hidden" NAME="type" VALUE="deletechecked"#gt
#lt?
	if (count($messages) == 0) {
?#gt	  #ltTD CLASS="ctable1" ALIGN="center" COLSPAN="3"#gt#lt?=$this-#gtemerald($this-#gtemerald($this-#gtlng['messenger']['inbox_stat'], "%e", $this-#gtlng['messenger']['outbox']), "%c", "0")?#gt#lt/TD#gt#lt?
	} else {
		$this-#gtdisplaymessages($messages);
	}
}

function inbox () {
	global $res;
	$messages = $this-#gtselectwhere($this-#gtdb['messages'], 2, $this-#gtuser[0]);
?#gt
	#ltFORM METHOD="post" ACTION="index.php" NAME="messenger"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="messenger"#gt
	#ltINPUT TYPE="hidden" NAME="type" VALUE="deletechecked"#gt
#lt?
	if (count($messages) == 0) {
?#gt	  #ltTD CLASS="ctable1" ALIGN="center" COLSPAN="3"#gt#lt?=$this-#gtemerald($this-#gtemerald($this-#gtlng['messenger']['inbox_stat'], "%e", $this-#gtlng['messenger']['inbox']), "%c", "0")?#gt#lt/TD#gt#lt?
	} else {
		$this-#gtdisplaymessages($messages);
	}
}

function displaymessages ($usermessages) {
	$usermessages = $usermessages;
	$cm = count($usermessages);
	foreach ($usermessages as $message) {
		if ($message[1] == "System") {
			$cm = $cm - 1;
		}
	}

	$i = 1;
	$messages = array();
	if ($this-#gtsettings[max_pm_inbx] #gt 0) {
		foreach ($usermessages as $usermessage) {
			if ($i #lt= $this-#gtsettings[max_pm_inbx]) {
				array_push($messages, $usermessage);
				$i++;
			} else {
				$missingpms = true;
			}
		}
	} else {
		$messages = $usermessages;
	}

	$messages = array_reverse($messages);

	if ($this-#gtsettings[max_pm_inbx] == 0) {
		$percentfull = "0";
	} else {
		$int = ($cm / $this-#gtsettings[max_pm_inbx]) * 100;
		$percentfull = ceil($int);
	}
	if (($cm #gt $this-#gtsettings[max_pm_inbx]) && ($percentfull != 0)) {
		$alert = $this-#gtemerald($this-#gtlng['errors']['maxin'], "%e", $this-#gtsettings[max_pm_inbx]).
		" #ltb#gt".$this-#gtlng['errors']['del_m']."#lt/b#gt";
	} elseif ($cm == $this-#gtsettings[max_pm_inbx]) {
		$alert = $this-#gtemerald($this-#gtlng['errors']['maxin2'], "%e", $this-#gtsettings[max_pm_inbx]).
		" #ltb#gt".$this-#gtlng['errors']['del_m']."#lt/b#gt";
	} elseif (($cm #lt $this-#gtsettings[max_pm_inbx]) #12#12 ($percentfull == 0)) {
		$alert = $this-#gtemerald($this-#gtlng['messenger']['boxalert'], "%e", ($this-#gtsettings[max_pm_inbx] - $cm));
	}
		?#gt
	#ltTR#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="5%" ROWSPAN="100%"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" COLSPAN=3#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="5%" ROWSPAN="100%"#gt#lt/TD#gt
	#lt/TR#gt
	#ltTR#gt
	 #ltTD CLASS="ctable2" COLSPAN="3"#gt#ltCENTER#gt#lt?=$alert?#gt#lt/CENTER#gt#lt/TD#gt
	#lt/TR#gt
	#ltTR#gt
#lt?
	if ($percentfull #gt 100) {
		$width = 100;
		$maintable = '#lttd border=0 width="'.$width.'%" class="category"#gt#lt/td#gt';
	} else {
		$maintable = '#lttd border=0 class="category" class="regular"#gt#lt/td#gt';
		$othertable = "#lttd border=0 width=\"".(100-$percentfull)."%\" class=\"ctable1\"#gt#lt/td#gt";
	}
?#gt
	 #ltTD CLASS="ctable2" COLSPAN="3"#gt#ltCENTER#gt#ltTABLE WIDTH="95%" HEIGHT="15" CLASS="bordertable"#gt#ltTR BORDER=0#gt#lt?=$maintable?#gt
	#lt?=$othertable?#gt#lt/TR#gt#lt/TABLE#gt
	 #lt?=$this-#gtemerald($this-#gtlng['messenger']['pf'], "%e", $percentfull)?#gt#lt/CENTER#gt#lt/TD#gt
	#lt/TR#gt
	#ltTR#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="4%"#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['messenger']['check']?#gt#lt/SPAN#gt#lt/TD#gt
	  #lt? /* #ltTD CLASS="ctable1" ALIGN="center" WIDTH="4%"#gt#ltSPAN CLASS="small"#gt#lt/SPAN#gt#lt/TD#gt */ ?#gt
	  #ltTD CLASS="ctable1" WIDTH="82%" COLSPAN="2"#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['messenger']['msrsd']?#gt/#lt?=$this-#gtlng['messenger']['status']?#gt#lt/SPAN#gt#lt/TD#gt
	#lt/TR#gt
	#lt?
	$i = 0;
	foreach ($messages as $message) {
		if ($message[1] == "System") {
			$from = array("", $this-#gtlng['acp']['sys']);
		} else {
			$from = $this-#gtselect($this-#gtdb['users'], $message[1]);
		}
		$to = $this-#gtselect($this-#gtdb['users'], $message[2]);
		if ($message[6] != 1) {
			$folderimg = "foldernew.gif";
			$foldertitle = $this-#gtlng['messenger']['newm'];
		} else {
			$folderimg = "folderold.gif";
			$foldertitle = $this-#gtlng['messenger']['oldm'];
		}
		if ($message[6] != 3) {
		$i++;
		?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" ALIGN="center"#gt#ltINPUT TYPE="checkbox" NAME="message[]" VALUE="#lt?=$message[0]?#gt" onClick="check('this');"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" COLSPAN="2"#gt#ltIMG TITLE="#lt?=$foldertitle?#gt" SRC="#lt?=$this-#gttp['forum']?#gtimages/#lt?=$folderimg?#gt"#gt #ltA HREF="index.php?a=messenger&type=view&id=#lt?=$message[0]?#gt"#gt#lt?=$message[4]?#gt#lt/A#gt #ltSPAN CLASS="small"#gt(From #lt?if ($from[1] != $this-#gtlng['acp']['sys']) { ?#gt#ltA HREF='index.php?a=messenger&type=send&to=#lt?=$from[1]?#gt'#gt#lt? } else { ?#gtthe #lt? } ?#gt#lt?=$from[1]?#gt#lt?if ($from[1] != $this-#gtlng['acp']['sys']) { ?#gt#lt/A#gt#lt? } ?#gt on #lt?=$this-#gtzonetime($this-#gtsettings['ltimeformat'], $message[3])?#gt)#lt/SPAN#gt#lt/TD#gt
	 #lt/TR#gt
		#lt?
		}
	}
		if ($i == 0) {
?#gt
		#ltTR#gt
		 #ltTD COLSPAN="3" CLASS="ctable2"#gt#ltCENTER#gt#lt?=$this-#gtlng['messenger']['nome']?#gt#lt/CENTER#gt#lt/TD#gt
		#lt/TR#gt#lt/TABLE#gt#ltBR#gt
#lt?
	} else {
?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" ALIGN="center"#gt#ltINPUT ID="check" TYPE="CHECKBOX" NAME="master" onClick="checkAll('this');"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" COLSPAN="2"#gt#ltLABEL FOR="check"#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['messenger']['checka']?#gt#lt/SPAN#gt#lt/LABEL#gt#lt/TD#gt
	 #lt/TR#gt
	   #ltTR#gt
		#ltTD CLASS="ctable1" COLSPAN="3"#gt#ltCENTER#gt#lt?=$this-#gtbutton($this-#gtlng['messenger']['dchm'])?#gt#lt/CENTER#gt#lt/TD#gt
		#lt/TR#gt
		#lt/FORM#gt
		#lt/table#gt
		#ltBR#gt
#lt? } ?#gt	#ltTABLE BORDER="0" CELLPADDING="2" CELLSPACING="1" ALIGN="center" CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD ALIGN="center" CLASS="ctable1"#gt
	   #ltTABLE BORDER="0" CELLPADDING="0" CELLSPACING="0"#gt
	    #ltTR#gt
		 #ltTD#gt#ltSPAN CLASS="regular"#gt#lt?=$this-#gtlng['messenger']['oldm']?#gt#lt/SPAN#gt#lt/TD#gt
		 #ltTD#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/folderold.gif"#gt#lt/TD#gt
		#lt/TR#gt
	   #lt/TABLE#gt
	  #lt/TD#gt
	  #ltTD ALIGN="center" CLASS="ctable1"#gt
	   #ltTABLE BORDER="0" CELLPADDING="0" CELLSPACING="0"#gt
	    #ltTR#gt
		 #ltTD#gt#ltSPAN CLASS="regular"#gt#lt?=$this-#gtlng['messenger']['newm']?#gt#lt/SPAN#gt#lt/TD#gt
		 #ltTD#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/foldernew.gif"#gt#lt/TD#gt
		#lt/TR#gt
	   #lt/TABLE#gt
	  #lt/TD#gt
	 #lt/TR#gt
#lt?
}

function sendMessage2 () {
	global $subject, $message, $to;
	$mo = explode(", ", $to);
	$tousers = array();
	$nonsend = array();
	$i = 1;
	foreach ($mo as $tou) {
		if ($i #gt $this-#gtsettings['max_pm_dest']) {
			array_push($nonsend, $tou);
		} else {
			array_push($tousers, $this-#gtselectwhere($this-#gtdb['users'], 1, $tou));
		}
		$i++;
	}
	$redirect = "";
	if ($this-#gtvalidate(15) == 0) {
		$message = $this-#gtlng['errors']['no_perm'];
	} elseif ($this-#gtvalidate(15) == 2) {
		$message = $this-#gtlng['errors']['no_guest_perm'];
	} elseif ($message == "") {
		$message = $this-#gtlng['errors']['nom'];
	} elseif ($subject == "") {
		$message = $this-#gtlng['errors']['nos'];
	} else {
		$subject = $this-#gtinputize($subject, 25);
		$message = $this-#gtinputize($message, $this-#gtsettings[max_post_sx], $this-#gtsettings[max_word_sz]);
		foreach ($tousers as $touser) {
			if ($touser[0][0] != "") {
				$newmessage = array($this-#gtuser[0], $touser[0][0], time(), $subject, $message, 0);
				$this-#gtinsert($this-#gtdb['messages'], $newmessage);
			} else {
				$x = $this-#gtlng['errors']['001'];
			}
		}
		if (count($nonsend) != 0) {
			$nmessage .= $this-#gtlng['errors']['002'];
			$nmessage = $this-#gtemerald($nmessage, "%e", count($nonsend));
			$nmessage = $this-#gtemerald($nmessage, "%f", count($mo));
			$nmessage = $this-#gtemerald($nmessage, "%g", (count($mo) - count($nonsend)));
			$nmessage .= "#ltbr#gt";
			foreach ($nonsend as $user) {
				$nmessage .= $user."#ltbr#gt\n";
			}
		}
		$message = $this-#gtlng['misc']['op_successs'].$x."#ltbr#gt".$nmessage;
	}
?#gt#lt/TABLE#gt#ltBR#gt#lt?
	$this-#gtdisplaymessage($this-#gtlng['messenger']['send_pm'], $message);
}

function sendMessage () {
	global $to, $quote, $type;
	if ($type == "forward") {
		$to = "";
		$s = "Fwd: ";
		?#gt	  #ltSCRIPT language=javascript#gt#lt!--
	var i = 0;
	//--#gt#lt/SCRIPT#gt#lt?
	} elseif ($type == "send" && isset($quote)) {
		$s = "Re: ";
		?#gt	  #ltSCRIPT language=javascript#gt#lt!--
	var i = 1;
	//--#gt#lt/SCRIPT#gt#lt?
	} else {
		?#gt	  #ltSCRIPT language=javascript#gt#lt!--
	var i = 0;
	//--#gt#lt/SCRIPT#gt#lt?
	}
	if (($to == $this-#gtlng['acp']['sys']) #12#12 ($to == "System")) {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtemerald($this-#gtlng['messenger']['ymrs'], "%e", $this-#gtlng['acp']['sys']));
		$this-#gtfooter;
		die();
	}
	if ($quote != "") {
		$quote = $this-#gtselect($this-#gtdb['messages'], $quote);
		if ($this-#gtuser[0] != $quote[2] && $this-#gtuser[0] != $quote[1]) {
			$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_vew']);
			$this-#gtfooter();
			$this-#gtendmessenger();
			die();
		} else {
			$reply = $s.$quote[4];
			if (($quote[1] == "System") #12#12 ($quote[1]== $this-#gtlng['acp']['sys'])) {
				$user = array("", "");
				$to = "";
			} else {
				$user = $this-#gtselect($this-#gtdb['users'], $quote[1]);
			}
			$quote = "\n\n[quote][i]".$this-#gtlng['messenger']['orgs']."[/i] [b]".$user[1]."[/b]\n".$quote[5]."[/quote]";
		}
	}
	$ulists = $this-#gtselectall($this-#gtdb['users']);
	foreach ($ulists as $ulist) {
		if (($ulist[0] != "0") && ($ulist[0] != "-1") && ($ulist[1] != "") && ($ulist[1] != " ")) {
			if (!strstr($ulist[1],"?#gt")) {
			$select = $select."\t#ltOPTION VALUE=\"".$ulist[1]."\"#gt".$ulist[1]."#lt/OPTION#gt\n";
			}
		}
	}
?#gt
	#ltFORM ACTION="index.php" NAME="sendmessage" METHOD="post"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="messenger"#gt
	#ltINPUT TYPE="hidden" NAME="type" VALUE="send2"#gt
     #ltTR#gt
	  #ltTD COLSPAN=5 CLASS="category" ALIGN="center"#gtSending A Message#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH=150#gt#lt?=$this-#gtlng['member']['logged']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" COLSPAN="4"#gt#lt?=$this-#gtuser[1]?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=150#gtTo:#lt/TD#gt
	  #ltTD CLASS="ctable1" COLSPAN="4"#gt
	  #ltTABLE WIDTH="100%" BORDER=0 CELLPADDING=0 CELLSPACING=0#gt#ltTR#gt#ltTD WIDTH="50%"#gt
	  #ltINPUT SIZE=30 VALUE="#lt?=$to?#gt" NAME="to" onClick="" onKeyUp=""#gt#lt/TD#gt#ltTD WIDTH="50%"#gt
	  #ltSELECT NAME="qa"#gt
	  #lt?=$select?#gt#lt/SELECT#gt #lt?
	echo str_replace("submit", "button", $this-#gtbt);
	echo $this-#gtlng['misc']['add']."\" onclick=\"quickadd(document.sendmessage.qa.value);";
	echo str_replace("   ", "", $this-#gtbe);
	echo " ".$this-#gthelpbutton('quickadd');
?#gt#lt/TD#gt#lt/TR#gt#lt/TABLE#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['forum']['subject']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1" COLSPAN="4"#gt#ltINPUT SIZE=30 MAXLENGTH="25" VALUE="#lt?=$reply?#gt" NAME="subject"#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" VALIGN="top" WIDTH=150#gt#lt?=$this-#gtlng['misc']['mess']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" COLSPAN="4"#gt
	#lt?=$this-#gtcustombbcode("sendmessage", "message")?#gt
	#ltTEXTAREA NAME="message" COLS=80 ROWS=8#gt#lt?=$this-#gtdeinputize($quote)?#gt#lt/TEXTAREA#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD COLSPAN=5 ALIGN=center CLASS="ctable2"#gt#lt?=$this-#gtbutton($this-#gtlng['misc']['ok'])?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/FORM#gt
	#lt/table#gt
#lt?
}

function esendMessage () {
	global $to, $quote, $type;
	if (($this-#gtoptions3[12] != 1) && ($this-#gtoptions1[11] != 1)) {
		$message = $this-#gtlng['errors']['no_perm'];
		$this-#gtdisplaymessage($this-#gtlng['messenger']['forw'], $message);
		$this-#gtendmessenger();
		$this-#gtfooter();
	}
	$s = "Fwd: ";
	if ($quote != "") {
		$quote = $this-#gtselect($this-#gtdb['messages'], $quote);
		if ($this-#gtuser[0] != $quote[2] && $this-#gtuser[0] != $quote[1]) {
			$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_vew']);
			$this-#gtfooter();
			$this-#gtendmessenger();
			die();
		} else {
			$reply = $s.$quote[4];
			if ($quote[1] == "System") {
				$user = array("", "");
				$to = "";
			} else {
				$user = $this-#gtselect($this-#gtdb['users'], $quote[1]);
			}
			$quote = "\n\n[quote][i]".$this-#gtlng['messenger']['orgs']."[/i] [b]".$user[1]."[/b]\n".$quote[5]."[/quote]";
		}
	}
?#gt
	#ltFORM ACTION="index.php" NAME="sendmessage" METHOD="post"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="messenger"#gt
	#ltINPUT TYPE="hidden" NAME="type" VALUE="eforward2"#gt
     #ltTR#gt
	  #ltTD COLSPAN=5 CLASS="category" ALIGN="center"#gtSending A Message#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH=150#gt#lt?=$this-#gtlng['member']['logged']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" COLSPAN="4"#gt#lt?=$this-#gtuser[1]?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['messenger']['rpea']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" COLSPAN="4"#gt#ltINPUT SIZE=30 NAME="to"#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['forum']['subject']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1" COLSPAN="4"#gt#ltINPUT SIZE=30 MAXLENGTH="25" VALUE="#lt?=$reply?#gt" NAME="subject"#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" VALIGN="top" WIDTH=150#gt#lt?=$this-#gtlng['misc']['mess']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" COLSPAN="4"#gt#ltTEXTAREA NAME="message" COLS=80 ROWS=8#gt#lt?=$quote?#gt#lt/TEXTAREA#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD COLSPAN=5 ALIGN=center CLASS="ctable2"#gt#lt?=$this-#gtbutton($this-#gtlng['misc']['ok'])?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/FORM#gt
	#lt/table#gt
#lt?
}

function esendMessage2 () {
	global $subject, $message, $to;
	$tousers = explode(", ", $to);
	if ($this-#gtvalidate(15) == 0) {
		$message = $this-#gtlng['errors']['no_perm'];
	} elseif ($this-#gtvalidate(15) == 2) {
		$message = $this-#gtlng['errors']['no_guest_perm'];
	} elseif ($message == "") {
		$message = $this-#gtlng['errors']['nom'];
	} elseif (($this-#gtsettings[enable_emal] != true) && ($this-#gtsettings[enablefemal] != true)) {
		$message = "This action has been dissallowed by the board administrator.";
	} elseif ($subject == "") {
		$message = $this-#gtlng['errors']['nos'];
	} elseif ($to == "") {
		$message = $this-#gtlng['errors']['nor'];
	} else {
		$subject = $this-#gtinputize($subject, 25);
		$message = $this-#gtinputize($message, $this-#gtsettings[max_post_sz], $this-#gtsettings[max_word_sz]);
		foreach ($tousers as $touser) {
			$this-#gtemail($touser, $subject, $this-#gttags($message));
		}
		$message = $this-#gtlng['misc']['op_successs'];
	}
?#gt#lt/table#gt#ltBR#gt#lt?
	$this-#gtdisplaymessage($this-#gtlng['messenger']['fore'], $message);
}

function endmessenger () {
?#gt
#lt/table#gt
#lt?
}

}

?#gt";}i:58;a:2:{i:0;s:16:"lib/moderate.php";i:1;s:21550:"#lt?php

class exclusive extends genesis {

var $forum, $topic, $post;

function execute () {
	global $type, $subject, $forum, $topic, $post;
	$this-#gtforum = $forum;
	$this-#gttopic = $topic;
	$this-#gtpost = $post;
	$this-#gtheader();
	$this-#gtguestblock();
	if (($type == "edit") && ($subject == "")) {
		$this-#gtedit1();
	} elseif (($type == "edit") && ($subject != "")) {
		$this-#gtedit2();
	}
	if ($type == "postdelete") {
		$this-#gtpostdelete1();
	} elseif ($type == "postdelete2") {
		$this-#gtpostdelete2();
	}
	if ($type == "topicdelete") {
		$this-#gttopicdelete1();
	} elseif ($type == "topicdelete2") {
		$this-#gttopicdelete2();
	}
	if ($type == "ban") {
		$this-#gtban();
	} elseif ($type == "ban2") {
		$this-#gtban2();
	}
	if ($type == "close") {
		$this-#gtclose();
	} elseif ($type == "close2") {
		$this-#gtclose2();
	}
	if ($type == "move") {
		$this-#gtmove();
	} elseif ($type == "move2") {
		$this-#gtmove2();
	}
	if ($type == "pin") {
		$this-#gtpin();
	} elseif ($type == "pin2") {
		$this-#gtpin2();
	}
	if ($type == "rename") {
		$this-#gtrename();
	} elseif ($type == "rename2") {
		$this-#gtrename2();
	}
	$this-#gtfooter();
}

function moderationvalidation ($uservalidation, $allvalidation, $topicpost) {
	if ($topicpost == "topic") {
		$lookingin = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
		$user = $this-#gtselect($this-#gtdb['users'], $lookingin[3]);
	} else {
		$lookingin = $this-#gtselect("data/".$this-#gtforum."/".$this-#gttopic.".php", $this-#gtpost);
		$user = $this-#gtselect($this-#gtdb['users'], $lookingin[4]);
	}
	if ($this-#gtuser[1] == $user[1]) {
		$permission = $this-#gtvalidate($uservalidation);
	} else {
		$permission = $this-#gtvalidate($allvalidation);
	}
	if ($this-#gtmoderator) {
		$permission = 1;
	}
	if ($this-#gtadministrator) {
		$permission = 1;
	}
	if ($permission == 0) {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_perm']);
		$this-#gtfooter();
		die();
	} elseif ($permission == 2) {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_guest_perm']);
		$this-#gtfooter();
		die();
	}
}

function find ($file, $partid, $part) {
	$openfile = $this-#gtselectall($file);
	foreach ($openfile as $array) {
		if ($array[$partid] == $part) {
			$return = $array;
		}
	}
	if (isset($return)) {
		return $return;
	} else {
		return 0;
	}
}

function ban () {
	global $bansessionid, $id;
	if ($this-#gtmoderator #12#12 $this-#gtadministrator) {
		$title = $this-#gtlng['moderate']['conf_ban'];	
		$url = "index.php".$this-#gts."a=moderate&type=ban2&bansessionid=".$bansessionid."&id=".$id;
		$query = $this-#gtlng['moderate']['conf_ban_query'];
		$this-#gtquery($title, $query, $url, null, 0, 0);
	}
}

function ban2 () {
	global $bansessionid, $id;
	if ($this-#gtmoderator #12#12 $this-#gtadministrator) {
		$this-#gtextenders['ban']-#gtdo_ban($bansessionid, "", "", $id);
	}
	$this-#gtdisplaymessage($this-#gtlng['moderate']['ban'], $this-#gtlng['misc']['op_successs']);	
}

function guestblock () {
	global $user;
	if (($this-#gtuser[0] == "0") #12#12 ($this-#gtuser[1] == "Guest")) {
		if ($this-#gtvalidator() != 1) {
			$this-#gtaccesslog['description'] = $this-#gtlng['errors']['unauth_action'];
			$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_guest_perm']);
       			$this-#gtfooter();
			die();
		}
	}
}

function rename2 () {
	global $subject;
	if (($this-#gtadministrator) #12#12 ($this-#gtmoderator)) {
		$topic = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
		$topic[1] = $this-#gtinputize($subject, $this-#gttopiclength);
		$this-#gtupdate("data/".$this-#gtforum."/list.php", $this-#gttopic, $topic);
		$this-#gtdisplaymessage($this-#gtlng['moderate']['rename'], $this-#gtlng['misc']['op_successs']);
	}
}

function rename () {
	$this-#gtaccesslog['nullify'] = true;
	$this-#gtmoderationvalidation(10, 11, "topic");
	$topic = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
	?#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	#ltFORM ACTION="index.php" METHOD="post"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="moderate"#gt
	#ltINPUT TYPE="hidden" NAME="type" VALUE="rename2"#gt
	#ltINPUT TYPE="hidden" NAME="forum" VALUE="#lt?=$this-#gtforum?#gt"#gt
	#ltINPUT TYPE="hidden" NAME="topic" VALUE="#lt?=$this-#gttopic?#gt"#gt
	 #ltTR#gt
	  #ltTD COLSPAN="2" CLASS="category" ALIGN="center"#gt#lt?=$this-#gtlng['moderate']['rename']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH="20%"#gt#lt?=$this-#gtlng['forum']['subject']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#lt?=$topic[1]?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH="20%"#gt#lt?=$this-#gtlng['moderate']['rename']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#ltINPUT SIZE=30 NAME="subject"#gt#lt/TD#gt
	 #ltTR#gt
	  #ltTD COLSPAN=2 ALIGN=center CLASS="ctable1"#gt#lt?=$this-#gtbutton($this-#gtlng['moderate']['rename'])?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/FORM#gt
	#lt/TABLE#gt
	#lt?
}

function close2 () {

	$this-#gtmoderationvalidation(10, 11, "topic");
	$dbtopic = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
	if ($dbtopic[7] == 1) {
		$dbtopic[7] = 0;
		$res = 0;
		$sho = $this-#gtlng['moderate']['open'];
	} else {
		$dbtopic[7] = 1;
		$res = 1;
		$sho = $this-#gtlng['moderate']['close'];
	}
	$this-#gtupdate("data/".$this-#gtforum."/list.php", $this-#gttopic, $dbtopic);
	$topics = $this-#gtselectall("data/".$this-#gtforum."/".$this-#gttopic.".php");
	$count = count($topics);
	$topic = $this-#gtselect("data/".$this-#gtforum."/".$this-#gttopic.".php", $count);
	$topic[6] = $res;
	$this-#gtupdate("data/".$this-#gtforum."/".$this-#gttopic.".php", $count, $topic);
	$this-#gtdisplaymessage($sho, $this-#gtlng['misc']['op_successs']);
}

function close () {
	$this-#gtaccesslog['nullify'] = true;
	$this-#gtmoderationvalidation(10, 11, "topic");
	$topic = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
	?#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	#ltFORM ACTION="index.php" METHOD="post"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="moderate"#gt
	#ltINPUT TYPE="hidden" NAME="type" VALUE="close2"#gt
	#ltINPUT TYPE="hidden" NAME="forum" VALUE="#lt?=$this-#gtforum?#gt"#gt
	#ltINPUT TYPE="hidden" NAME="topic" VALUE="#lt?=$this-#gttopic?#gt"#gt
	 #ltTR#gt
	  #ltTD COLSPAN="2" CLASS="category" ALIGN="center"#gt#lt? if ($topic[7] == 1) { ?#gt#lt?=$this-#gtlng['moderate']['open']?#gt#lt? } else { ?#gt#lt?=$this-#gtlng['moderate']['close']?#gt#lt? } ?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=100#gt#lt?=$this-#gtlng['forum']['subject']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#lt?=$topic[1]?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD COLSPAN=2 ALIGN=center CLASS="ctable1"#gt#lt?
	  if ($topic[7] == 1) {
		    echo $this-#gtbutton($this-#gtlng['moderate']['open']);
	  } else {
		    echo $this-#gtbutton($this-#gtlng['moderate']['close']);
	  } ?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/FORM#gt
	#lt/TABLE#gt
	#lt?
}

function pin2 () {
	$this-#gtmoderationvalidation(14, 15, "topic");
	$dbtopic = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
	if ($dbtopic[10] != 1) {
		$dbtopic[10] = 1;
		$res = 1;
		$txt = $this-#gtlng['moderate']['pin'];
	} else {
		$txt = $this-#gtlng['moderate']['unpin'];
		$dbtopic[10] = 0;
		$res = 0;
	}
	$this-#gtupdate("data/".$this-#gtforum."/list.php", $this-#gttopic, $dbtopic);
	$topics = $this-#gtselectall("data/".$this-#gtforum."/".$this-#gttopic.".php");
	$count = count($topics);
	$topic = $this-#gtselect("data/".$this-#gtforum."/".$this-#gttopic.".php", $count);
	$topic[9] = $res;
	$this-#gtupdate("data/".$this-#gtforum."/".$this-#gttopic.".php", $count, $topic);
	$this-#gtdisplaymessage($txt, $this-#gtlng['misc']['op_successs']);
}

function pin () {
	$this-#gtdoomsday(13);
	$topic = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
	?#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	#ltFORM ACTION="index.php" METHOD="post"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="moderate"#gt
	#ltINPUT TYPE="hidden" NAME="type" VALUE="pin2"#gt
	#ltINPUT TYPE="hidden" NAME="forum" VALUE="#lt?=$this-#gtforum?#gt"#gt
	#ltINPUT TYPE="hidden" NAME="topic" VALUE="#lt?=$this-#gttopic?#gt"#gt
	 #ltTR#gt
	  #ltTD COLSPAN="2" CLASS="category" ALIGN="center"#gt#lt?=$this-#gtlng['moderate']['pin']?#gt/#lt?=$this-#gtlng['moderate']['unpin']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=100#gt#lt?=$this-#gtlng['forum']['subject']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#lt?=$topic[1]?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD COLSPAN=2 ALIGN=center CLASS="ctable1"#gt#lt?
	  if ($topic[10] == 1) {
		    echo $this-#gtbutton($this-#gtlng['moderate']['unpin']);
	  } else {
		    echo $this-#gtbutton($this-#gtlng['moderate']['pin']);
	  } ?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/FORM#gt
	#lt/TABLE#gt
	#lt?
}

function add_tonewforum () {
	global $newforum;
	$newtopic = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
	array_shift($newtopic);
	$lineid = $this-#gtinsert("data/".$newforum."/list.php", $newtopic);
	$forum = $this-#gtselect("data/forums.php", $newforum);
	$forum[2]++;
	$forum[3] = $forum[3] + 1 + $newtopic[1];
	$forum[4] = $lineid;
	$this-#gtupdate("data/forums.php", $newforum, $forum);
	return $lineid;
}

function update_oldforum ($lineid) {
	global $newforum;
	$topic = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
	for ($i=0;count($topic)#lt16;$i++) {
		array_push($topic, "");
	}
	$topic[13] = "moved";
	$topic[14] = $newforum.":".$lineid;
	$topic[15] = 1209600 + time();
	$this-#gtupdate("data/".$this-#gtforum."/list.php", $topic[0], $topic);
	$forum = $this-#gtselect("data/forums.php", $this-#gtforum);
	$topics = $this-#gtselectsort("data/".$this-#gtforum."/list.php", 6);
	$topics = array_reverse($topics);
	$forum[2] = $forum[2] - 1;
	$forum[3] = $forum[3] - $topic[2];
	$forum[4] = $topics[0][0];
	$this-#gtupdate("data/forums.php", $this-#gtforum, $forum);
	return $topic;
}

function move2 () {
	global $newforum;
	$this-#gtmoderationvalidation(12, 13, "topic");
	$lineid = $this-#gtadd_tonewforum();
	$oldtopic = $this-#gtupdate_oldforum($lineid);
	$oldid = $oldtopic[0];
	$newtopic = $this-#gtselect("data/".$newforum."/list.php", $lineid);
	if ($newtopic[13] == "moved") {
		$newtopic[13] = "";
		$newtopic[14] = "";
		$newtopic[15] = "";
		$this-#gtupdate("data/".$newforum."/list.php", $lineid, $newtopic);
	}
	copy("data/".$this-#gtforum."/".$this-#gttopic.".php", "data/".$newforum."/".$lineid.".php");
	@unlink("data/".$this-#gtforum."/".$this-#gttopic.".php");
	if (file_exists("data/".$this-#gtforum."/pollinfo-".$oldid.".php")) {
		copy("data/".$this-#gtforum."/pollinfo-".$oldid.".php", "data/".$newforum."/pollinfo-".$lineid.".php");
		@unlink("data/".$this-#gtforum."/pollinfo-".$oldid.".php");
	}
	if (file_exists("data/".$this-#gtforum."/".$oldid."backup.php")) {
		copy("data/".$this-#gtforum."/".$oldid."backup.php", "data/".$newforum."/".$lineid."backup.php");
		$this-#gtclear("data/".$this-#gtforum."/".$oldid."backup.php");
		$this-#gtinsert_alt("data/".$this-#gtforum."/".$oldid."backup.php", $oldtopic, $oldid);
	}
	$this-#gtdisplaymessage($this-#gtlng['moderate']['move'], $this-#gtlng['misc']['op_successs']."#lta href=\"index.php".$this-#gts."a=topic&forum=".$newforum."&topic=".$lineid."\"#gt".$this-#gtlng['misc']['go']."#lt/a#gt");
}

function move () {
	$this-#gtmoderationvalidation(12, 13, "topic");
	$topic = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
	$forums = $this-#gtselectall("data/forums.php");
	$forumlist = "";
	foreach ($forums as $forum) {
		if ($forum[0] != $this-#gtforum) {
			$forumlist = $forumlist . "#ltoption value=\"".$forum[0]."\"#gt".$forum[1]."#lt/option#gt";
		}
	}
	?#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	#ltFORM ACTION="index.php" METHOD="post"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="moderate"#gt
	#ltINPUT TYPE="hidden" NAME="type" VALUE="move2"#gt
	#ltINPUT TYPE="hidden" NAME="forum" VALUE="#lt?=$this-#gtforum?#gt"#gt
	#ltINPUT TYPE="hidden" NAME="topic" VALUE="#lt?=$this-#gttopic?#gt"#gt
	 #ltTR#gt
	  #ltTD COLSPAN="2" CLASS="category" ALIGN="center"#gt#lt?=$this-#gtlng['moderate']['move']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=100#gt#lt?=$this-#gtlng['forum']['subject']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#lt?=$topic[1]?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=100#gt#lt?=$this-#gtlng['moderate']['dest']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#ltSELECT NAME="newforum"#gt#lt?=$forumlist?#gt#lt/SELECT#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD COLSPAN=2 ALIGN=center CLASS="ctable1"#gt#lt?=$this-#gtbutton($this-#gtlng['moderate']['move'])?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/FORM#gt
	#lt/TABLE#gt
	#lt?
}

function topicdelete2 () {
	$this-#gtmoderationvalidation(8, 9, "topic");
	$topic = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
	$forum = $this-#gtselect("data/forums.php", $this-#gtforum);
	$forum[2] = $forum[2] - 1;
	$forum[3] = $forum[3] - $topic[2];
	$topics = $this-#gtselectsort("data/".$this-#gtforum."/list.php", 6);
	$topics = array_reverse($topics);
	if ($topics[1][0] != 0) {
		$forum[4] = $topics[0][0];
	} else {
		$forum[4] = "";
	}
	$this-#gtupdate("data/forums.php", $this-#gtforum, $forum);
	@unlink("data/".$this-#gtforum."/".$this-#gttopic.".php");
	if (file_exists("data/".$this-#gtforum."/pollinfo-".$this-#gttopic.".php")) {
		@unlink("data/".$this-#gtforum."/pollinfo-".$this-#gttopic.".php");
	}
	if (file_exists("data/".$this-#gtforum."/".$this-#gttopic."backup.php")) {
		@unlink("data/".$this-#gtforum."/".$this-#gttopic."backup.php");
	}
	$this-#gtdelete("data/".$this-#gtforum."/list.php", $this-#gttopic);
	$this-#gtdisplaymessage($this-#gtlng['moderate']['delete'], $this-#gtlng['misc']['op_successs'].$x);
}

function topicdelete1 () {
	$this-#gtmoderationvalidation(8, 9, "topic");
	$topic = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
	?#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	#ltFORM ACTION="index.php" METHOD="post"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="moderate"#gt
	#ltINPUT TYPE="hidden" NAME="type" VALUE="topicdelete2"#gt
	#ltINPUT TYPE="hidden" NAME="forum" VALUE="#lt?=$this-#gtforum?#gt"#gt
	#ltINPUT TYPE="hidden" NAME="topic" VALUE="#lt?=$this-#gttopic?#gt"#gt
	 #ltTR#gt
	  #ltTD COLSPAN="2" CLASS="category" ALIGN="center"#gt#lt?=$this-#gtlng['moderate']['delete']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1"#gt#lt?=$this-#gtlng['forum']['subject']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1" WIDTH="80%"#gt#lt?=$topic[1]?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD COLSPAN=2 ALIGN=center CLASS="ctable1"#gt#lt?=$this-#gtbutton($this-#gtlng['moderate']['delete'])?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/FORM#gt
	#lt/TABLE#gt
	#lt?
}

function postdelete2 () {
	$this-#gtmoderationvalidation(6, 7, "post");
	if ($this-#gtpost == 1) {
		displaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['003']);
	} else {
		$post = $this-#gtselect("data/".$this-#gtforum."/".$this-#gttopic.".php", $this-#gtpost);
		$user = $this-#gtselect($this-#gtdb['users'], $post[4]);
		$user[11] = $user[11] - 1;
		$this-#gtupdate($this-#gtdb['users'], $user[0], $user);
		$this-#gtdelete("data/".$this-#gtforum."/".$this-#gttopic.".php", $this-#gtpost);
		$topic = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
		$topic[2] = $topic[2] - 1;
		$topic = $this-#gtupdate("data/".$this-#gtforum."/list.php", $this-#gttopic, $topic);
		$line = $this-#gtselect("data/forums.php", $this-#gtforum);
		$this-#gtupdate("data/forums.php", $this-#gtforum, $line);
		$this-#gtdisplaymessage($this-#gtlng['moderate']['delete'], $this-#gtlng['misc']['op_successs']);
	}
}

function postdelete1 () {
	$this-#gtmoderationvalidation(6, 7, "post");
	if ($this-#gtpost == 1) {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['003']);
	} else {
	$post = $this-#gtselect("data/".$this-#gtforum."/".$this-#gttopic.".php", $this-#gtpost);
	?#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	#ltFORM ACTION="index.php" METHOD="post"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="moderate"#gt
	#ltINPUT TYPE="hidden" NAME="type" VALUE="postdelete2"#gt
	#ltINPUT TYPE="hidden" NAME="forum" VALUE="#lt?=$this-#gtforum?#gt"#gt
	#ltINPUT TYPE="hidden" NAME="topic" VALUE="#lt?=$this-#gttopic?#gt"#gt
	#ltINPUT TYPE="hidden" NAME="post" VALUE="#lt?=$this-#gtpost?#gt"#gt
	 #ltTR#gt
	  #ltTD COLSPAN="2" CLASS="category" ALIGN="center"#gt#lt?=$this-#gtlng['moderate']['delete']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=100#gt#lt?=$this-#gtlng['forum']['subject']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#lt?=$post[1]?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD COLSPAN=2 ALIGN=center CLASS="ctable1"#gt#lt?=$this-#gtbutton($this-#gtlng['moderate']['delete'])?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/FORM#gt
	#lt/TABLE#gt
	#lt?
	}
}

function edit1 () {
	$this-#gtmoderationvalidation(4, 5, "post");
	$post = $this-#gtselect("data/".$this-#gtforum."/".$this-#gttopic.".php", $this-#gtpost);
	?#gt
	#ltSCRIPT language='javascript'#gt
	 function emoticon(smilie)
	 {
	document.Post.message.value = document.Post.message.value + smilie;
	document.Post.message.focus();
				}
				#lt/SCRIPT#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	#ltFORM ACTION="index.php" METHOD="post" NAME="Post"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="moderate"#gt
	#ltINPUT TYPE="hidden" NAME="type" VALUE="edit"#gt
	#ltINPUT TYPE="hidden" NAME="forum" VALUE="#lt?=$this-#gtforum?#gt"#gt
	#ltINPUT TYPE="hidden" NAME="topic" VALUE="#lt?=$this-#gttopic?#gt"#gt
	#ltINPUT TYPE="hidden" NAME="post" VALUE="#lt?=$this-#gtpost?#gt"#gt
	 #ltTR#gt
	  #ltTD COLSPAN="2" CLASS="category" ALIGN="center"#gt#lt?=$this-#gtlng['iai']['edit']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['misc']['info']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#lt?=$this-#gtlng['forum']['posted_by']?#gt: #lt?=$user[1]?#gt on #lt?=date($this-#gttimeformat, $post[3])?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH=150#gt#lt?=$this-#gtlng['member']['logged']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtuser[1]?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['forum']['subject']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#ltINPUT SIZE=30 NAME="subject" VALUE="#lt?=$post[1]?#gt"#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH=150#gt
		       #lt?=$this-#gtlng['misc']['mess']?#gt
	  #lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtcustombbcode("Post","message")?#gt#ltTEXTAREA onSelect="storeCaret(this);" onClick="storeCaret(this);" onKeyUp="storeCaret(this);" NAME="message" COLS=80 ROWS=8#gt#lt?=$this-#gtdeinputize($post[2])?#gt#lt/TEXTAREA#gt#lt/TD#gt
	 #lt/TR#gt
#lt? if ($this-#gtadministrator == true #12#12 $this-#gtmoderator == true) { ?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH=150#gt#lt?=$this-#gtlng['misc']['sebl']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt[ #ltINPUT CHECKED TYPE="radio" NAME="showedit" VALUE="yes"#gt #lt?=$this-#gtlng['misc']['yes']?#gt #12 #ltINPUT TYPE="radio" NAME="showedit" VALUE="no"#gt #lt?=$this-#gtlng['misc']['no']?#gt ]#lt/TD#gt
	 #lt/TR#gt
#lt? } else { ?#gt
	 #ltINPUT TYPE="HIDDEN" NAME="showedit" VALUE="yes"#gt
#lt? } ?#gt
	 #ltTR#gt
	  #ltTD COLSPAN=2 ALIGN=center CLASS="ctable1"#gt#lt?=$this-#gtbutton($this-#gtlng['iai']['edit'])?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/FORM#gt
	#lt/TABLE#gt
	#lt?
}

function edit2 () {
	global $subject, $message, $thetime, $showedit;
	$this-#gtmoderationvalidation(4, 5, "post");
	$post = $this-#gtselect("data/".$this-#gtforum."/".$this-#gttopic.".php", $this-#gtpost);
	if ($showedit != "no") {
		while (count($post) #lt 20) {
			array_push($post, NULL);
		}
		$post[15] = $this-#gtuser[1];
		$post[16] = time();
	}
	$subject = $this-#gtinputize($subject, $this-#gttopiclength);
	$message = $this-#gtinputize($message);
	$post[1] = $subject;
	$post[2] = $message;
	$this-#gtupdate("data/".$this-#gtforum."/".$this-#gttopic.".php", $this-#gtpost, $post);

	if ($this-#gtpost == 1) {
		$topic = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
		$topic[1] = $subject;
		$this-#gtupdate("data/".$this-#gtforum."/list.php", $this-#gttopic, $topic);
	}

	$this-#gtdisplaymessage($this-#gtlng['iai']['edit'], $this-#gtlng['misc']['op_successs']."#lta href=\"index.php".$this-#gts."a=topic&forum=".$this-#gtforum."&topic=".$this-#gttopic."\"#gt".$this-#gtlng['misc']['go']."#lt/a#gt");
}

}

?#gt";}i:59;a:2:{i:0;s:12:"lib/post.php";i:1;s:28512:"#lt?php

class exclusive extends genesis {

var $forum, $topic;

function execute () {
	global $forum, $topic, $type, $poll, $message, $subject;
	$this-#gtforum = $forum;
	$this-#gttopic = $topic;
	$this-#gtpoll = $poll;
	$this-#gtgetguestwarning();
	
	if (($subject != "") #12#12 ($message != "")) {
		$this-#gtcheckposttime();
	}

	$this-#gtheader();
	$this-#gtselectforum($this-#gtforum);
	if ($type == "poll") {
		if ($this-#gtpoll == "") {
			if (!$this-#gtcheckforumpermission(6, false, $this-#gtforum)) {
				$this-#gtdisplaylogin();
			}
			if ($subject == "") {
				$this-#gtnewpoll();
			} else {
				$this-#gtnewpoll2();
			}
		} else {
			if (file_exists("data/".$this-#gtforum."/".$poll.".php")) {
				if (!$this-#gtcheckforumpermission(7, false, $this-#gtforum)) {
					$this-#gtdisplaylogin();
				}
				if ($subject == "") {
					$this-#gtvote();
				} else {
					$this-#gtvote2();
				}
			} else {
				$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['noe'], "", "1", "1");
			}
		}	
	} else {
		if ($type == "newtopic") {
			$this-#gtcheckforumpermission(6, true, $this-#gtforum);
			if (!$this-#gtcheckforumpermission(6, false, $this-#gtforum)) {
				$this-#gtdisplaylogin();
			}
			if ($subject == "") {
				$this-#gtnewtopic();
			} else {
				$this-#gtnewtopic2();
			}
		} else {
			if (file_exists("data/".$this-#gtforum."/".$topic.".php")) {
				if (!$this-#gtcheckforumpermission(7, false, $this-#gtforum)) {
					$this-#gtdisplaylogin();
				}
				if ($subject == "") {
					$this-#gtreply();
				} else {
					$this-#gtreply2();
				}
			} else {
				$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['noe'], "", "1", "1");
			}
		}
	}
	$this-#gtfooter();
}

function displaylogin () {
	global $type;
	$redirect = "index.php{$this-#gts}a=post&type={$type}&forum={$this-#gtforum}&topic={$this-#gttopic}&poll={$this-#gtpoll}&message={$message}&subject={$subject}";
	if ((int) $this-#gtlogged_in == 0) {	if ((string) $this-#gtsettings['enable_gpos'] == "false") {
		$message .= $this-#gtwarning;
		$message .= "#ltBR#gt#ltBR#gt\r\n";
		$message .= $this-#gtdisplay_generic_login(false, $redirect);
		$this-#gtdisablesecurity = true;
		$this-#gtdisplaymessage($this-#gtlng['toplinks']['login'], $message, "", "", 1);
		$this-#gtdisablesecurity = false;
	}} else {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_perm'], "", "", 1);
	}
}

function checkposttime () {
	global $lastposttime, $HTTP_COOKIE_VARS;
	if (($lastposttime #gt time()-$this-#gtsettings['posting_dly']) && (!$this-#gtadministrator) && (!$this-#gtmoderator)) {
		$this-#gtheader();
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtemerald($this-#gtlng['errors']['004'], "%e", $this-#gtposttime));
		$this-#gtfooter();
		die();
		setcookie("lastposttime", time(), time()+300);
	} else {
		setcookie("lastposttime", time(), time()+300);
	}
}

function getguestwarning() {
	if ($this-#gtuser[0] == 0) {
		if ($this-#gtsettings['enable_gpos'] == true) {
			$this-#gtwarning = "#lta href=\"index.php".$this-#gts."a=guest&type=register\"#gt".$this-#gtlng['post']['reb']."#lt/a#gt";
		} elseif ($this-#gtsettings['enable_gpos'] == false) {
			$this-#gtwarning .= $this-#gtlng['post']['ngp'];
		}
	}
}

function setform () {
	global $type;
		$form = #lt#lt#ltFORM
	 #ltFORM ACTION="index.php" METHOD="POST" NAME="mainlogin"#gt
	 #ltINPUT TYPE="hidden" NAME="a" VALUE="guest"#gt
	 #ltINPUT TYPE="hidden" NAME="type" VALUE="login2"#gt
	 #ltINPUT TYPE="hidden" NAME="redirect" VALUE="index.php{$this-#gts}a=post&type={$type}&forum={$this-#gtforum}&topic={$this-#gttopic}&poll={$this-#gtpoll}&message={$message}&subject={$subject}"#gt
		   #ltTABLE ALIGN="CENTER" WIDTH="100%" ALIGN=center CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
		    #ltTR#gt
			 #ltTD WIDTH="30%" CLASS="ctable2" ALIGN="right"#gt#ltSPAN CLASS="regular"#gt{$this-#gtlng['misc']['username']}:#lt/SPAN#gt&nbsp;#lt/TD#gt
	      	 #ltTD WIDTH="30%" CLASS="ctable2" ALIGN="left"#gt#ltINPUT TYPE="text" NAME="username" SIZE=30#gt#lt/TD#gt
	        #lt/TR#gt
	        #ltTR#gt
	         #ltTD WIDTH="30%" CLASS="ctable2" ALIGN="right"#gt#ltSPAN CLASS="regular"#gt{$this-#gtlng['misc']['password']}:#lt/SPAN#gt&nbsp;#lt/TD#gt
	         #ltTD WIDTH="30%" CLASS="ctable2" ALIGN="left"#gt#ltINPUT TYPE="password" NAME="password" SIZE=30 #gt#lt/TD#gt
	        #lt/TR#gt
	        #ltTR#gt
	         #ltTD WIDTH="30%" COLSPAN="2" CLASS="ctable2" ALIGN="CENTER"#gt#ltbutton="{$this-#gtlng['toplinks']['login']}"#gt#lt/TD#gt
	        #lt/TR#gt
	      #lt/TABLE#gt
	#lt/FORM#gt
FORM;
	return $form;
}

function displaypicons () {
?#gt
	   #ltTABLE WIDTH="400" BORDER="0" CELLPADDING="0" CELLSPACING="0" ALIGN="left"#gt
	    #ltTR#gt
		 #ltTD WIDTH="20%" ALIGN="center"#gt#ltINPUT TYPE="radio" NAME="posticon" VALUE="pi1" ID="1"#gt#ltLABEL FOR="1"#gt&nbsp;#ltIMG SRC="images/picons/pi1.gif"#gt#lt/LABEL#gt#lt/TD#gt
		 #ltTD WIDTH="20%" ALIGN="center"#gt#ltINPUT TYPE="radio" NAME="posticon" VALUE="pi2" ID="2"#gt#ltLABEL FOR="2"#gt&nbsp;#ltIMG SRC="images/picons/pi2.gif"#gt#lt/LABEL#gt#lt/TD#gt
		 #ltTD WIDTH="20%" ALIGN="center"#gt#ltINPUT TYPE="radio" NAME="posticon" VALUE="pi3" ID="3"#gt#ltLABEL FOR="3"#gt&nbsp;#ltIMG SRC="images/picons/pi3.gif"#gt#lt/LABEL#gt#lt/TD#gt
		 #ltTD WIDTH="20%" ALIGN="center"#gt#ltINPUT TYPE="radio" NAME="posticon" VALUE="pi4" ID="4"#gt#ltLABEL FOR="4"#gt&nbsp;#ltIMG SRC="images/picons/pi4.gif"#gt#lt/LABEL#gt#lt/TD#gt
		 #ltTD WIDTH="20%" ALIGN="center"#gt#ltINPUT TYPE="radio" NAME="posticon" VALUE="pi5" ID="5"#gt#ltLABEL FOR="5"#gt&nbsp;#ltIMG SRC="images/picons/pi5.gif"#gt#lt/LABEL#gt#lt/TD#gt
	    #lt/TR#gt
	    #ltTR#gt
		 #ltTD WIDTH="20%" ALIGN="center"#gt#ltINPUT TYPE="radio" NAME="posticon" VALUE="pi6" ID="6"#gt#ltLABEL FOR="6"#gt&nbsp;#ltIMG SRC="images/picons/pi6.gif"#gt#lt/LABEL#gt#lt/TD#gt
		 #ltTD WIDTH="20%" ALIGN="center"#gt#ltINPUT TYPE="radio" NAME="posticon" VALUE="pi7" ID="7"#gt#ltLABEL FOR="7"#gt&nbsp;#ltIMG SRC="images/picons/pi7.gif"#gt#lt/LABEL#gt#lt/TD#gt
		 #ltTD WIDTH="20%" ALIGN="center"#gt#ltINPUT TYPE="radio" NAME="posticon" VALUE="pi8" ID="8"#gt#ltLABEL FOR="8"#gt&nbsp;#ltIMG SRC="images/picons/pi8.gif"#gt#lt/LABEL#gt#lt/TD#gt
		 #ltTD WIDTH="20%" ALIGN="center"#gt#ltINPUT TYPE="radio" SELECTED NAME="posticon" VALUE="" ID="9"#gt#ltLABEL FOR="9"#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['main']['none']?#gt#lt/SPAN#gt#lt/LABEL#gt#lt/TD#gt
		#lt/TR#gt
	   #lt/TABLE#gt
#lt?
}

function newtopic() {
	global $message, $HTTP_COOKIE_VARS;
	?#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	#ltFORM ENCTYPE="multipart/form-data" ACTION="index.php" METHOD="post" NAME="Post"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="post"#gt
	#ltINPUT TYPE="hidden" NAME="type" VALUE="newtopic"#gt
	#ltINPUT TYPE="hidden" NAME="forum" VALUE="#lt?=$this-#gtforum?#gt"#gt
     #ltTR#gt
	  #ltTD COLSPAN=2 CLASS="category" ALIGN="center"#gt#lt?=$this-#gtlng['post']['pnt']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #lt?
	   if ($this-#gtuser[1] == "Guest") {?#gt
		#ltTR#gt
		 #ltTD CLASS="ctable2"#gt#lt?=$this-#gtlng['misc']['username']?#gt:&nbsp;#lt/TD#gt
		 #ltTD CLASS="ctable2"#gt#ltINPUT TYPE="text" VALUE="Guest" NAME="username" SIZE=30#gt#lt/TD#gt
		#lt/TR#gt
		#ltTR#gt
		 #ltTD CLASS="ctable1"#gt#lt?=$this-#gtlng['misc']['password']?#gt:&nbsp;#lt/TD#gt
		 #ltTD CLASS="ctable1"#gt#ltINPUT TYPE="password" NAME="password" SIZE=30 #gt#lt/TD#gt
		#lt/TR#gt
		#ltINPUT TYPE="hidden" NAME="checklogin" VALUE="true"#gt
			#lt?
	   }
	 ?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH=100#gt#lt?=$this-#gtlng['member']['logged']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtuser[1]?#gt #lt?
	    if ($this-#gtuser[0] == 0) {
	      ?#gt( #ltA HREF="index.php#lt?=$this-#gts?#gta=guest&type=register"#gt#lt?=$this-#gtlng['toplinks']['register']?#gt#lt/A#gt )
		  #ltBR#gt#lt?=$this-#gtwarning?#gt#lt? } ?#gt
	  #lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['forum']['subject']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#ltINPUT SIZE=30 MAXLENGTH="#lt?=$this-#gtsettings['max_topic_l']?#gt" NAME="subject"#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['forum']['td']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#ltINPUT SIZE=30 MAXLENGTH="#lt?=$this-#gtsettings['max_topic_l']?#gt" NAME="desc"#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" VALIGN="top" WIDTH=150#gt#lt?=$this-#gtlng['forum']['pi']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtdisplaypicons()?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" VALIGN="top" WIDTH=150#gt#lt?=$this-#gtlng['misc']['mess']?#gt
	  #lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtdisplaybbcode();?#gt
		#ltTEXTAREA NAME="message" COLS=80 ROWS=8 onSelect="storeCaret(this);" onClick="storeCaret(this);" onKeyUp="storeCaret(this);"#gt#lt/TEXTAREA#gt#lt/TD#gt
	 #lt/TR#gt
#lt? if ($this-#gtsettings[max_upld_sz] #gt 0) { ?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" VALIGN="top" WIDTH=150#gt#lt?=$this-#gtlng['post']['att']?#gt
	  #lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#ltINPUT TYPE="hidden" NAME="MAX_FILE_SIZE" VALUE="#lt?=$this-#gtsettings['max_upld_sz']?#gt"#gt
			      #ltINPUT TYPE="checkbox" NAME="attachment" VALUE="true"#gt#lt?=$this-#gtemerald($this-#gtlng['post']['ina'], "%e", $this-#gtsettings['max_upld_sz'])?#gt#ltBR#gt
			      #ltINPUT NAME="userfile" TYPE="file" SIZE="50"#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/span#gt
#lt? } ?#gt
	 #ltTR#gt
	  #ltTD COLSPAN=2 ALIGN=center CLASS="ctable2"#gt#lt?=$this-#gtbutton($this-#gtlng['forum']['post'])?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/FORM#gt
	#lt/TABLE#gt
	#lt?
}

function newpoll() {
	global $topic, $forum;
	if (($this-#gtoptions2[6] != 1) && ($this-#gtuser[1] == "Guest")) {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_guest_perm']."#ltbr#gt[ #lta href='index.php".$this-#gts."a=member&type=login'#gt".$this-#gtlng['toplinks']['login']."#lt/a#gt #12 #lta href='index.php".$this-#gts."a=member&type=register'#gt".$this-#gtlng['toplinks']['register']."#lt/a#gt ]");
	} else {
	?#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	#ltFORM ENCTYPE="MULTIPART/FORM-DATA" ACTION="index.php" METHOD="post" NAME="Post"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="post"#gt
	#ltINPUT TYPE="hidden" NAME="type" VALUE="poll"#gt
	#ltINPUT TYPE="hidden" NAME="forum" VALUE="#lt?=$this-#gtforum?#gt"#gt
     #ltTR#gt
	  #ltTD COLSPAN=2 CLASS="category" ALIGN="center"#gt#lt?=$this-#gtlng['forum']['post']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #lt?
	   if ($this-#gtuser[1] == "Guest") {?#gt
		#ltTR#gt
		 #ltTD CLASS="ctable2"#gt#lt?=$this-#gtlng['misc']['username']?#gt:&nbsp;#lt/TD#gt
		 #ltTD CLASS="ctable2"#gt#ltINPUT TYPE="text" VALUE="Guest" NAME="username" SIZE=30#gt#lt/TD#gt
		#lt/TR#gt
		#ltTR#gt
		 #ltTD CLASS="ctable1"#gt#lt?=$this-#gtlng['misc']['password']?#gt:&nbsp;#lt/TD#gt
		 #ltTD CLASS="ctable1"#gt#ltINPUT TYPE="password" NAME="password" SIZE=30 #gt#lt/TD#gt
		#lt/TR#gt
		#ltINPUT TYPE="hidden" NAME="checklogin" VALUE="true"#gt
			#lt?
	   }
	 ?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH=100#gt#lt?=$this-#gtlng['member']['logged']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtuser[1]?#gt #lt?
	    if ($this-#gtuser[0] == 0) {
	      ?#gt( #ltA HREF="index.php#lt?=$this-#gts?#gta=guest&type=register"#gt#lt?=$this-#gtlng['toplinks']['register']?#gt#lt/A#gt )
		  #ltBR#gt#lt?=$this-#gtwarning?#gt#lt? } ?#gt
	  #lt/TD#gt
	 #lt/TR#gt
	  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['forum']['subject']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#ltINPUT SIZE=30 MAXLENGTH="#lt?=$this-#gtsettings['max_topic_l']?#gt" NAME="subject"#gt#lt/TD#gt
	 #lt/tr#gt
	  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['forum']['question']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#ltINPUT SIZE=30 MAXLENGTH="#lt?=($this-#gtsettings['max_topic_l']+20)?#gt" NAME="desc"#gt?#lt/TD#gt
	 #lt/tr#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" VALIGN="top" WIDTH=150#gt#lt?=$this-#gtlng['forum']['pi']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtdisplaypicons()?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" VALIGN="top" WIDTH=150#gtChoices
	  #lt/TD#gt
	  #ltTD CLASS="ctable2"#gt
List all of the poll choices below.  Leave all unused fields blank.#ltBR#gt
		#ltINPUT TYPE="text" NAME="choice1" SIZE=50 MAXLENGTH="#lt?=($this-#gtsettings['max_topic_l']+20)?#gt"#gt#ltBR#gt
		#ltINPUT TYPE="text" NAME="choice2" SIZE=50 MAXLENGTH="#lt?=($this-#gtsettings['max_topic_l']+20)?#gt"#gt#ltBR#gt
		#ltINPUT TYPE="text" NAME="choice3" SIZE=50 MAXLENGTH="#lt?=($this-#gtsettings['max_topic_l']+20)?#gt"#gt#ltBR#gt
		#ltINPUT TYPE="text" NAME="choice4" SIZE=50 MAXLENGTH="#lt?=($this-#gtsettings['max_topic_l']+20)?#gt"#gt#ltBR#gt
		#ltINPUT TYPE="text" NAME="choice5" SIZE=50 MAXLENGTH="#lt?=($this-#gtsettings['max_topic_l']+20)?#gt"#gt#ltBR#gt
		#ltINPUT TYPE="text" NAME="choice6" SIZE=50 MAXLENGTH="#lt?=($this-#gtsettings['max_topic_l']+20)?#gt"#gt#ltBR#gt
		#ltINPUT TYPE="text" NAME="choice7" SIZE=50 MAXLENGTH="#lt?=($this-#gtsettings['max_topic_l']+20)?#gt"#gt#ltBR#gt
		#ltINPUT TYPE="text" NAME="choice8" SIZE=50 MAXLENGTH="#lt?=($this-#gtsettings['max_topic_l']+20)?#gt"#gt#ltBR#gt
		#ltINPUT TYPE="text" NAME="choice9" SIZE=50 MAXLENGTH="#lt?=($this-#gtsettings['max_topic_l']+20)?#gt"#gt#ltBR#gt
		#ltINPUT TYPE="text" NAME="choice10" SIZE=50 MAXLENGTH="#lt?=($this-#gtsettings['max_topic_l']+20)?#gt"#gt#ltBR#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD COLSPAN=2 ALIGN=center CLASS="ctable2"#gt#lt?=$this-#gtbutton($this-#gtlng['forum']['post'])?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/FORM#gt
	#lt/TABLE#gt
	#lt?
	}
}

function reply() {
	global $quote;
	if (isset($quote)) {
		$post = $this-#gtselect("data/".$this-#gtforum."/".$this-#gttopic.".php", $quote);
		$user = $this-#gtselect($this-#gtdb['users'], $post[4]);
		$quote = "[quote][i]".$this-#gtlng['post']['orp']."[/i][b]".$user[1]."[/b]\n".$this-#gtdeinputize($post[2])."[/quote]\n";
	}
	?#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	#ltFORM ENCTYPE="multipart/form-data" ACTION="index.php" METHOD="post" NAME="Post"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="post"#gt
	#ltINPUT TYPE="hidden" NAME="forum" VALUE="#lt?=$this-#gtforum?#gt"#gt
	#ltINPUT TYPE="hidden" NAME="topic" VALUE="#lt?=$this-#gttopic?#gt"#gt
     #ltTR#gt
	  #ltTD COLSPAN=2 CLASS="category" ALIGN="center"#gt#lt?=$this-#gtlng['messenger']['repl']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #lt?
	   if ($this-#gtuser[1] == "Guest") {?#gt
		#ltTR#gt
		 #ltTD CLASS="ctable2"#gt#lt?=$this-#gtlng['misc']['username']?#gt:&nbsp;#lt/TD#gt
		 #ltTD CLASS="ctable2"#gt#ltINPUT TYPE="text" VALUE="Guest" NAME="username" SIZE=30#gt#lt/TD#gt
		#lt/TR#gt
		#ltTR#gt
		 #ltTD CLASS="ctable1"#gt#lt?=$this-#gtlng['misc']['password']?#gt:&nbsp;#lt/TD#gt
		 #ltTD CLASS="ctable1"#gt#ltINPUT TYPE="password" NAME="password" SIZE=30 #gt#lt/TD#gt
		#lt/TR#gt
		#ltINPUT TYPE="hidden" NAME="checklogin" VALUE="true"#gt
			#lt?
	   }
	 ?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH=100#gt#lt?=$this-#gtlng['member']['logged']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtuser[1]?#gt #lt?
	    if ($this-#gtuser[0] == 0) {
	      ?#gt( #ltA HREF="index.php#lt?=$this-#gts?#gta=guest&type=register"#gt#lt?=$this-#gtlng['toplinks']['register']?#gt#lt/A#gt )
		  #ltBR#gt#lt?=$this-#gtwarning?#gt#lt? } ?#gt
	  #lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['forum']['subject']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#ltINPUT SIZE=30 MAXLENGTH="#lt?=$this-#gtsettings['max_topic_l']?#gt" NAME="subject" VALUE="Re: #lt?=$this-#gtlisttopic[1]?#gt"#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" VALIGN="top" WIDTH=150#gt
	  Message
	  #lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtdisplaybbcode();?#gt
	  #ltTEXTAREA NAME="message" COLS=80 ROWS=8 onSelect="storeCaret(this);" onClick="storeCaret(this);" onKeyUp="storeCaret(this);"#gt#lt?=$quote?#gt#lt/TEXTAREA#gt#lt/TD#gt
	 #lt/TR#gt
#lt? if ($this-#gtsettings[max_upld_sz] #gt 0) { ?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" VALIGN="top" WIDTH=150#gt#lt?=$this-#gtlng['post']['att']?#gt
	  #lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#ltINPUT TYPE="hidden" NAME="MAX_FILE_SIZE" VALUE="#lt?=$this-#gtsettings['max_upld_sz']?#gt"#gt
			      #ltINPUT TYPE="checkbox" NAME="attachment" VALUE="true"#gt#lt?=$this-#gtemerald($this-#gtlng['post']['ina'], "%e", $this-#gtsettings['max_upld_sz'])?#gt#ltBR#gt
			      #ltINPUT NAME="userfile" TYPE="file" SIZE="50"#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/span#gt
#lt? } ?#gt
	 #ltTR#gt
	  #ltTD COLSPAN=2 ALIGN=center CLASS="ctable1"#gt#lt?=$this-#gtbutton($this-#gtlng['messenger']['repl'])?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/FORM#gt
	#lt/TABLE#gt
	#ltBR#gt#ltBR#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD CLASS="category" ALIGN="center" COLSPAN="2"#gt#lt?=$this-#gtlng['post']['pro']?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt?
	$posts = $this-#gtselectall("data/".$this-#gtforum."/".$this-#gttopic.".php");
	$posts = array_reverse($posts);
	$start = (count($posts)-1);
	$start = $start - $this-#gtsettings['posts_perpg'];
	if ($start #lt 0) {
		$start = 0;
	}
	$posts = $this-#gtlimit($posts, $start, $this-#gtsettings['posts_perpg']);
	foreach ($posts as $post) {
		$user = $this-#gtselect($this-#gtdb['users'], $post[4]);
		$post[2] = $this-#gttags($post[2]);
		?#gt
		#ltTR#gt
		 #ltTD CLASS="ctable1" WIDTH="100" VALIGN="top"#gt#lt?=$user[1]?#gt#lt/TD#gt
		 #ltTD CLASS="ctable2" WIDTH="85%"#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['forum']['subject']?#gt: #lt?=$post[1]?#gt#lt/SPAN#gt#ltHR SIZE="1"#gt#lt?=$post[2]?#gt#lt/TD#gt
		#lt/TR#gt
		#lt?
	}
	?#gt#lt/TABLE#gt#lt?
}

function newtopic2() {
	global $subject, $message, $gtime, $posticon, $gtime, $inca, $attachmenturl;
	global $desc, $HTTP_COOKIE_VARS, $attachment, $userfile;
	$valid = $this-#gtvalidate(2);
	if (
		(!$this-#gtlogged_in)	&&	
		((string) $this-#gtsettings['enable_gpos'] == "true")
	) {
			$valid = 1;
	} elseif (
		(!$this-#gtlogged_in)	&&	
		((string) $this-#gtsettings['enable_gpos'] == "false")
	) {
			$valid = 3;
	}
	if ($valid == 0) {
		$message = $this-#gtlng['errors']['no_perm'];
	} elseif ($valid == 3) {
		$message = $this-#gtlng['errors']['no_guest_perm'];
	} elseif ($message == "") {
		$message = $this-#gtlng['errors']['nom'];
	} else {
		$continue = false;
		if (!empty($attachment)) {
			global $userfile, $userfile_name, $userfile_size, $userfile_type;
			$continue = true;
		}
		if (($continue) && (!empty($userfile)) && (!empty($userfile_name)) && (!empty($userfile_size)) && (!empty($userfile_type))) {
			$upload = true;
			if (!file_exists("data/uploads/")) {
				mkdir("data/uploads/", 0777);
			}
			$type = explode(".", $userfile_name);
			$i = (count($type)-1);
			$filetype = $type[$i];
			$continue = true;
			//foreach ($this-#gtrestricted_files as $rfiletype) {
			//	if (strstr(strtolower($filetype), strtolower($rfiletype))) {
			//		$continue = false;
			//		$reason = 0;
			//		unlink($userfile);
			//		break;
			//	}
			//}
			if ($userfile_size #gt $this-#gtsettings['max_upld_sz']) {
				$continue = false;
				unlink($userfile);
			}
			if ($continue) {
				$attachmentfile = "data/uploads/".$this-#gtuser[1]."_".time().".".$filetype;
				move_uploaded_file($userfile, $attachmentfile);
				$uploadmessage = $this-#gtemerald($this-#gtlng['post']['asu'], "%e", $userfile_name);
			} else {
				if ($reason == 1) {
					$uploadmessage = $this-#gtemerald($this-#gtlng['post']['auu'], "%e", $userfile_name);
				} elseif ($reason == 2) {
					$uploadmessage = $this-#gtemerald($this-#gtlng['post']['amu'], "%e", $userfile_name);
					$uploadmessage = $this-#gtemerald($uploadmessage, "%s", $userfile_size);
					$uploadmessage = $this-#gtemerald($uploadmessage, "%m", $this-#gtsettings['max_upld_sz']);
				}
			}
		}
		$subject = $this-#gtinputize($subject, $this-#gtsettings['max_topic_l']);
		$message = $this-#gtinputize($message, $this-#gtsettings['max_post_sz'], $this-#gtsettings['max_word_sz']);
		$desc = $this-#gtinputize($desc, 100);
// begin old code
//		$line = array($subject, 0, $this-#gtuser[1], time(), $this-#gtuser[1], time(), 0, $posticon, 0, 0, $this-#gtses_id, $desc);
//		$lineid = $this-#gtinsert("data/".$this-#gtforum."/list.php", $line);
// end old code
// begin MPHH mod
		$topics = $this-#gtselectall("data/".$this-#gtforum."/list.php");
		$lineid = 1;
		foreach ($topics as $topicnum) {
			if ($topicnum[1]==$lineid #12#12 file_exists("data/".$this-#gtforum."/".$lineid.".php")) {
				$lineid++;
			} else {
				break;
			}
		}
		$line = array($lineid, $subject, 0, $this-#gtuser[1], time(), $this-#gtuser[1], time(), 0, $posticon, 0, 0, $this-#gtses_id, $desc);
		$this-#gtinsertid("data/".$this-#gtforum."/list.php", $lineid, $line);
// end MPHH mod
		$this-#gtinsert_alt("data/".$this-#gtforum."/".$lineid."backup.php", $line, $lineid);
		$line = array($subject, $message, time(), $this-#gtuser[0], $this-#gtses_id, 0, $posticon, 0, "", "", $attachmentfile, "");
		$this-#gtinsert("data/".$this-#gtforum."/".$lineid.".php", $line);
		$lines = $this-#gtselect("data/forums.php", $this-#gtforum);
		$lines[2] = $lines[2] + 1;
		$lines[3] = $lines[3] + 1;
		$lines[4] = $lineid;
		$this-#gtupdate("data/forums.php", $this-#gtforum, $lines);
		$this-#gtaddpost();
		$message = $this-#gtlng['misc']['op_successs']." ".$uploadmessage." #lta href=\"index.php".$this-#gts."a=topic&forum=".$this-#gtforum."&topic=".$lineid."\"#gt".$this-#gtlng['misc']['go']."#lt/a#gt";
	}
	$this-#gtdisplaymessage($this-#gtlng['forum']['post'], $message, $redirect);
}

function newpoll2() {
	global $subject, $posticon, $desc;
	global $choice1, $choice2, $choice3, $choice4, $choice5, $choice6, $choice7;
	global $choice8, $choice9, $choice10;
	$choicelist = array($choice1, $choice2, $choice3, $choice4, $choice5, $choice6, $choice7, $choice8, $choice9, $choice10);
	$choices = array();
	foreach ($choicelist as $singlechoice) {
		if (!empty($singlechoice)) {
			$c .= ".";
			array_push($choices, $singlechoice);
		}
	}
	$valid = $this-#gtvalidate(2);
	if (
		(!$this-#gtlogged_in)	&&	
		((string) $this-#gtsettings['enable_gpos'] == "true")
	) {
			$valid = 1;
	} elseif (
		(!$this-#gtlogged_in)	&&	
		((string) $this-#gtsettings['enable_gpos'] == "false")
	) {
			$valid = 3;
	}
	if ($valid == 0) {
		$message = $this-#gtlng['errors']['no_perm'];
	} elseif ($valid == 3) {
		$message = $this-#gtlng['errors']['no_guest_perm'];
	} elseif ($c == "") {
		$message = $this-#gtlng['errors']['noc'];
	} elseif ($c == ".") {
		$message = $this-#gtlng['errors']['nec'];
	} else {
		$subject = $this-#gtinputize($subject, $this-#gtsettings['max_topic_l']);
		$desc = $this-#gtinputize($desc);
		$line = array($subject, 0, $this-#gtuser[1], time(), $this-#gtuser[1], time(), 0, $posticon, 0, 0, $this-#gtses_id, $desc, "poll");
		$lineid = $this-#gtinsert("data/".$this-#gtforum."/list.php", $line);
		$this-#gtinsert_alt("data/".$this-#gtforum."/".$lineid."backup.php", $line, $lineid);
		$line = array($subject, time(), $this-#gtuser[0], $this-#gtses_id, 0, $posticon, 0, "", "", "poll");
		$this-#gtinsert("data/".$this-#gtforum."/".$lineid.".php", $line);
		foreach ($choices as $choice) {
			$choice = $this-#gtinputize($choice, $this-#gtsettings['max_post_sz']);
			$this-#gtinsert("data/".$this-#gtforum."/pollinfo-".$lineid.".php", array($choice, "0", "0"));
		}
		$lines = $this-#gtselect("data/forums.php", $this-#gtforum);
		$lines[2] = $lines[2] + 1;
		$lines[3] = $lines[3] + 1;
		$lines[4] = $lineid;
		$this-#gtupdate("data/forums.php", $this-#gtforum, $lines);
		$this-#gtaddpost();
		$message = $this-#gtlng['misc']['op_successs']." ".$uploadmessage." #lta href=\"index.php".$this-#gts."a=poll&forum=".$this-#gtforum."&poll=".$lineid."\"#gt".$this-#gtlng['misc']['go']."#lt/a#gt";
	}
	$this-#gtdisplaymessage($this-#gtlng['forum']['post'], $message);
}

function reply2() {
	global $subject, $message, $gtime, $posticon, $inca, $attachmenturl;
	global $desc, $HTTP_COOKIE_VARS, $attachment, $userfile;
	$topic = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
	$valid = $this-#gtvalidate(2);
	if (
		(!$this-#gtlogged_in)	&&	
		((string) $this-#gtsettings['enable_gpos'] == "true")
	) {
			$valid = 1;
	} elseif (
		(!$this-#gtlogged_in)	&&	
		((string) $this-#gtsettings['enable_gpos'] == "false")
	) {
			$valid = 3;
	}
	if ($valid == 0) {
		$message = $this-#gtlng['errors']['no_perm'];
	} elseif ($valid == 3) {
		$message = $this-#gtlng['errors']['no_guest_perm'];
	} elseif ($message == "") {
		$message = $this-#gtlng['errors']['nom'];
	} elseif ($topic[7] == 1 && !$this-#gtmoderator && !$this-#gtadministrator) {
		$message = $this-#gtlng['errors']['tic'];
	} else {
		$continue = false;
		if (!empty($attachment)) {
			global $userfile, $userfile_name, $userfile_size, $userfile_type;
			$continue = true;
		}
		if (($continue) && (!empty($userfile)) && (!empty($userfile_name)) && (!empty($userfile_size)) && (!empty($userfile_type))) {
			$upload = true;
			if (!file_exists("data/uploads/")) {
				mkdir("data/uploads/", 0777);
			}
			$type = explode(".", $userfile_name);
			$i = (count($type)-1);
			$filetype = $type[$i];
			$continue = true;
			//foreach ($this-#gtrestricted_files as $rfiletype) {
			//	if (strstr(strtolower($filetype), strtolower($rfiletype))) {
			//		$continue = false;
			//		$reason = 0;
			//		unlink($userfile);
			//		break;
			//	}
			//}
			if ($userfile_size #gt $this-#gtsettings['max_upld_sz']) {
				$continue = false;
				unlink($userfile);
			}
			if ($continue) {
				$attachmentfile = "data/uploads/".$this-#gtuser[1]."_".time().".".$filetype;
				move_uploaded_file($userfile, $attachmentfile);
				$uploadmessage = $this-#gtemerald($this-#gtlng['post']['asu'], "%e", $userfile_name);
			} else {
				if ($reason == 1) {
					$uploadmessage = $this-#gtemerald($this-#gtlng['post']['auu'], "%e", $userfile_name);
				} elseif ($reason == 2) {
					$uploadmessage = $this-#gtemerald($this-#gtlng['post']['amu'], "%e", $userfile_name);
					$uploadmessage = $this-#gtemerald($uploadmessage, "%s", $userfile_size);
					$uploadmessage = $this-#gtemerald($uploadmessage, "%m", $this-#gtsettings['max_upld_sz']);
				}
			}
		}
		$subject = $this-#gtinputize($subject, $this-#gtsettings['max_topic_l']);
		$message = $this-#gtinputize($message, $this-#gtsettings['max_post_sz'], $this-#gtsettings['max_word_sz']);
		$closed = $topic[6];
		$posticon = $topic[7];
		$views = $topic[8];
		$pinned = $topic[9];
		$line = array($subject, $message, time(), $this-#gtuser[0], $this-#gtses_id, $closed, $posticon, $views, $pinned, $attachmentfile, $desc, "post");
		$this-#gtinsert("data/".$this-#gtforum."/".$this-#gttopic.".php", $line);
		$line = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
		$line[2] = $line[2] + 1;
		$line[5] = $this-#gtuser[1];
		$line[6] = time();
		$this-#gtupdate("data/".$this-#gtforum."/list.php", $this-#gttopic, $line);
		$this-#gtupdate_alt("data/".$this-#gtforum."/".$line[0]."backup.php", $line);
		$lines = $this-#gtselect("data/forums.php", $this-#gtforum);
		$lines[3] = $lines[3] + 1;
		$lines[4] = $this-#gttopic;
		$this-#gtupdate("data/forums.php", $this-#gtforum, $lines);
		$this-#gtaddpost();
		$message = $this-#gtlng['misc']['op_successs']." ".$uploadmessage." #lta href=\"index.php".$this-#gts."a=topic&forum=".$this-#gtforum."&topic=".$this-#gttopic."&page=last\"#gt".$this-#gtlng['misc']['go']."#lt/a#gt";
		$redirect = "index.php".$this-#gts."a=topic&forum=".$this-#gtforum."&topic=".$this-#gttopic."&page=last#last";
	}
	$this-#gtdisplaymessage($this-#gtlng['messenger']['repl'], $message, $redirect);
}

}

?#gt
";}i:60;a:2:{i:0;s:13:"lib/topic.php";i:1;s:17697:"#lt?php 

class exclusive extends genesis {
var $forum, $topic, $replylink, $posts, $page, $pagelinks, $listtopic;

function execute () {
	global $forum, $topic, $page, $poll;
	$this-#gtforum = $forum;
	$this-#gttopic = $topic;
	$this-#gtpoll = $poll;
	if (!empty($topic)) {
		$id = $topic;
	} elseif (!empty($poll)) {
		$id = $poll;
	}
	if (file_exists("data/".$this-#gtforum."/".$id.".php")) {
		$this-#gtheader();
		$this-#gtposts = file("data/".$this-#gtforum."/".$this-#gttopic.".php");
		array_shift($this-#gtposts);
		$this-#gtsetlisttopic();
		if ($page == "") {
				$this-#gtpage = 1;
		} elseif ($page == "last") {
				$this-#gtsetlastpage();
		} else {
				$this-#gtpage = $page;
		}
		$this-#gtcheckforumpermission(5, true, $this-#gtforum);
		if ((file_exists("data/".$this-#gtforum."/pollinfo-".$this-#gttopic.".php")) && (!empty($this-#gttopic))) {
			$this-#gtdisplaymessage($this-#gtlng['misc']['wait'], $this-#gtlng['misc']['being_redirected'], "index.php".$this-#gts."a=poll&forum=".$this-#gtforum."&poll=".$this-#gttopic);
		} elseif ((file_exists("data/".$this-#gtforum."/pollinfo-".$this-#gtpoll.".php")) && (!empty($this-#gtpoll))) {
			$this-#gtdisplaymessage($this-#gtlng['misc']['wait'], $this-#gtlng['misc']['being_redirected'], "index.php".$this-#gts."a=poll&forum=".$this-#gtforum."&poll=".$this-#gtpoll);
		} else {
			$this-#gtsetpagelinks();
			$this-#gtsetreplylink();
			$this-#gtdisplaytopicinfotop();
			$this-#gtdisplayposts();
			$this-#gtdisplaytopicinfobottom();
		}
	} else {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['noe'], "", "1", "1");
	}
	$this-#gtfooter();
}

function setlastpage () {
        $this-#gtpage = ceil(count($this-#gtposts)/$this-#gtsettings['posts_perpg']);
}

function setlisttopic () {
        $this-#gtlisttopic = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
        $this-#gtlisttopic[9]++;
        $this-#gtupdate("data/".$this-#gtforum."/list.php", $this-#gttopic, $this-#gtlisttopic);
}

function setreplylink () {
        if ($this-#gtlisttopic[7] == 1) {
		if ($this-#gtmoderator #12#12 $this-#gtadministrator) {
			$this-#gtreplylink = "#lta href=\"index.php".$this-#gts."a=post&forum=".$this-#gtforum."&topic =".$this-#gttopic."\"#gt#ltimg src=\"".$this-#gttp['forum']."images/topic_closed.gif\" border=\"0\"#gt#lt/a#gt";
		} else {
			$this-#gtreplylink = "#ltimg src=\"".$this-#gttp['forum']."images/topic_closed.gif\" border=\"0\"#gt";
		}
        } else {
                $this-#gtreplylink = "#lta href=\"index.php".$this-#gts."a=post&forum=".$this-#gtforum."&topic=".$this-#gttopic."\"#gt#ltimg src=\"".$this-#gttp['forum']."images/topic_reply.gif\" border=\"0\"#gt#lt/a#gt";
        }
}

function setpagelinks () {
        $this-#gtpagelinks = "";
		if (phpversion() #gt 4.2) {
			$i = 1;
			$posts = array_chunk($this-#gtposts, $this-#gtsettings['posts_perpg'], TRUE);
			foreach ($posts as $post) {
					if ($i == $this-#gtpage) {
							$b = " #ltb#gt";
							$r = "#lt/b#gt";
					} else {
							$b = " #lta href=\"index.php".$this-#gts."a=topic&forum=".$this-#gtforum."&topic=".$this-#gttopic."&page=".$i."\"#gt";
							$r = "#lt/a#gt";
					}
					$this-#gtpagelinks = $this-#gtpagelinks.$b.$i.$r;
					$i++;
			}
		} else {
			for ($i=1;count($this-#gtposts)#gt=$i*$this-#gtsettings['posts_perpg']-$this-#gtsettings['posts_perpg']+1;$i++){
					if ($i == $this-#gtpage) {
							$b = " #ltb#gt";
							$r = "#lt/b#gt";
					} else {
							$b = " #lta href=\"index.php".$this-#gts."a=topic&forum=".$this-#gtforum."&topic=".$this-#gttopic."&page=".$i."\"#gt";
							$r = "#lt/a#gt";
					}
					$this-#gtpagelinks = $this-#gtpagelinks.$b.$i.$r;
			}
		}
}

function displaytopicinfotop () {
	if (empty($this-#gtpostimagespacer)) {
		$this-#gtpostimagespacer = " ";
	}
	if ($this-#gtlisttopic[7] == "1") {
		$topicname = "Closed: " . $topicname;
	} ?#gt
	#ltTABLE WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD CLASS="category" ALIGN="center" COLSPAN="2"#gt#lt?=$this-#gtlng['forum']['topic']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH="100%"#gt#ltSPAN CLASS="regular"#gt#lt?=$this-#gtlng['forum']['viewing_topic']?#gt: #lt?=$this-#gtlisttopic[1]?#gt#lt/SPAN#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" NOWRAP ROWSPAN="2"#gt#ltSPAN CLASS="regular"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=post&forum=#lt?=$this-#gtforum?#gt&type=newtopic"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/topic_new.gif" BORDER="0"#gt#lt/A#gt #lt?=$this-#gtreplylink?#gt #ltA HREF="index.php#lt?=$this-#gts?#gta=post&type=poll&forum=#lt?=$this-#gtforum?#gt"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/poll_new.gif" BORDER="0"#gt#lt/A#gt#lt/SPAN#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1"#gt[ #lt?=$this-#gtpagelinks?#gt ]#lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt
	#ltBR#gt
	#lt?
}

function displayposts () {
	$i = 1;
	?#gt
	#ltTABLE WIDTH="100%" CELLPADDING=5 CELLSPACING=1 CLASS="bordertable"#gt
	#lt?

	if (phpversion() #gt 4.2) {
		$offset = ($this-#gtpage - 1);
		$posts = array_chunk($this-#gtposts, $this-#gtsettings['posts_perpg'], TRUE);
		$posts = $posts[$offset];
	} else {
		$posts = $this-#gtlimit($this-#gtposts, ($this-#gtpage-1)*$this-#gtsettings['posts_perpg'], $this-#gtsettings['posts_perpg']-1);
	}
	foreach ($posts as $post) {
		$attachment = "";
		$post = explode ("#12", $post);
		if ($post[0] == (count($this-#gtposts)-1)) {
			$anchor = "last";
		} else {
			$anchor = $post[0];
		}
		$user = $this-#gtselect($this-#gtdb['users'], $post[4]);
		$this-#gtpip($user[1]);
		if (empty($user[1])) {
			$user = array(0, "Guest");
		}
		if (!empty($post[15])) {
			$eby = $this-#gtemerald($this-#gtlng['acp']['eby'], "%e", $post[15]);
			$post[2] .= "#ltbr#gt#ltbr#gt".$this-#gtemerald($eby, "%d", $this-#gtzonetime("#", $post[16]));
		}
		$post[2] = $this-#gttags($post[2]);
		if ( (!empty($post[11])) && ($post[0] == 1) && (strlen($post[11]) #gt 5)) {
			$post[11] = str_replace("\r\n", "", $post[11]);
			$post[11] = str_replace("\n", "", $post[11]);
			$this-#gtdisablesecurity = true;
			if (substr($post[11], 0, -1) == " ") {
				$file = substr($post[11], 0, -1);
			} else {
				$file = $post[11];
			}
			$file = explode(".", $file);
			$lastkey = count($file)-1;
			if (file_exists("images/icons/".$file[$lastkey].".gif")) {
				$image = "#ltimg src='images/icons/".$file[$lastkey].".gif'#gt ";
			}
			$attachment = $this-#gttags("[quote][b]Attachment:[/b]#ltbr#gt
			".$image."[attachment={$post[11]}]{$post[11]}[/attachment][/quote]#ltbr#gt");
			$this-#gtdisablesecurity = false;
		}
		if ( (!empty($post[10])) && ($post[0] #gt 1) && (strlen($post[10]) #gt 5)) {
			$post[10] = str_replace("\r\n", "", $post[10]);
			$post[10] = str_replace("\n", "", $post[10]);
			$this-#gtdisablesecurity = true;
			if (substr($post[10], 0, -1) == " ") {
				$file = substr($post[10], 0, -1);
			} else {
				$file = $post[10];
			}
			$file = explode(".", $file);
			$lastkey = count($file)-1;
			if (file_exists("images/icons/".$file[$lastkey].".gif")) {
				$image = "#ltimg src='images/icons/".$file[$lastkey].".gif'#gt ";
			}
			$attachment = $this-#gttags("[quote][b]Attachment:[/b]#ltbr#gt
			".$image."[attachment=$post[10]]$post[10][/attachment][/quote]#ltbr#gt");
			$this-#gtdisablesecurity = false;
		}
		if ($user[5] != "") {
			$location = $this-#gtlng['member']['location']." ".$user[5]."#ltBR#gt";
		} else {
			$location = "";
		}
		if ($user[12] != "") {
			$signature = "#ltBR#gt\r\n#ltHR CLASS=\"bordertable\" HEIGHT=\"1\" WIDTH=\"80%\"#gt#ltBR#gt\r\n".
			$this-#gttags($user[12]);
		} else {
			$signature = "";
		}
		if ($user[14] != "") {
			$avatar = "#ltimg src=\"".$user[14]."\"#gt#ltBR#gt";
		} else {
			$avatar = "";
		}
		if ($i == 1) {
			$int = 9;
		        if ($user[1] == "Guest") {
				$suser = "guest";
			} else { 
				$suser = $post[4];
			}
		} else {
			$int = 10;
        		if ($user[1] == "Guest") {
				$suser = "guest";
			} else {
				$suser = $post[4];
			}
		}
		if (empty($user[11])) {
			$p = "Guest Post";
		} else {
			$p = $user[11];
		}
?#gt
		#ltTR#gt
			#ltTD CLASS="ctable1" VALIGN="top" WIDTH="18%"#gt
			#ltA NAME="#lt?=$anchor?#gt"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=member&type=viewprofile&user=#lt?=$user[1]?#gt"#gt#ltB#gt#lt?=$user[1]?#gt#lt/B#gt#lt/A#gt#ltBR#gt
			#ltSPAN CLASS="small"#gt
			#lt? if ($user[1] != "Guest") { 									?#gt
			#lt? 	echo $this-#gtpipinfo[$user[0]]['title'];  						?#gt#ltBR#gt
			#lt?	if ($user[10] == "disabled") {								?#gt#ltBR#gt
        	#lt?		echo "#ltb#gt".$this-#gtlng['forum']['inactive']."#lt/b#gt\n"; 				?#gt#ltBR#gt
			#lt?	} else {										?#gt
			#lt?		echo $avatar;									?#gt
			#lt?		echo $this-#gtpipinfo[$user[0]]['bigpip'];					?#gt#ltBR#gt
			#lt?		echo $this-#gtpipinfo[$user[0]]['pip'];						?#gt#ltBR#gt#ltBR#gt
        	#lt?		echo $this-#gtlng['ucp']['009'] . ": " . $this-#gtpipinfo[$user[0]]['usergroup'];	?#gt#ltBR#gt
			#lt?		echo $this-#gtlng['misc']['date_j'] . ": " . $this-#gtpipinfo[$user[0]]['joined'];	?#gt#ltBR#gt
			#lt?		echo $location;									?#gt
			#lt?		echo $this-#gtlng['forum']['posts'].": ".$p; 					?#gt
			#lt?	}											?#gt
			#lt?	} 										?#gt
			#lt/SPAN#gt
			#lt/TD#gt
			#ltTD CLASS="ctable2" VALIGN="top" WIDTH="82%" COLSPAN="2"#gt
			#ltTABLE WIDTH="100%" ALIGN="center"#gt 
				#ltTR#gt 
					#ltTD VALIGN="middle" ALIGN="left" WIDTH="60%"#gt#ltDIV ALIGN="left"#gt 
					#ltSPAN CLASS="small"#gtSubject: #lt?=$post[1]?#gt#lt/SPAN#gt#lt/DIV#gt#lt/TD#gt 
					#ltTD ALIGN="right" WIDTH="40%"#gt#ltDIV ALIGN="right"#gt
					#ltA HREF="index.php#lt?=$this-#gts?#gta=post&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$this-#gttopic?#gt&quote=#lt?=$post[0]?#gt"#gt#ltIMG ALT="Quote this Post" SRC="#lt?=$this-#gttp['topic']?#gtimages/quote.gif" BORDER="0"#gt#lt/A#gt#lt?=$this-#gtpostimagespacer?#gt
					#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=edit&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$this-#gttopic?#gt&post=#lt?=$post[0]?#gt"#gt#ltIMG ALT="Edit this Post" SRC="#lt?=$this-#gttp['topic']?#gtimages/edit.gif" BORDER="0"#gt#lt/A#gt#lt?=$this-#gtpostimagespacer?#gt
					#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=postdelete&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$this-#gttopic?#gt&post=#lt?=$post[0]?#gt"#gt#ltIMG ALT="Delete this Post" SRC="#lt?=$this-#gttp['topic']?#gtimages/delete.gif" BORDER="0"#gt#lt/A#gt#lt? if ($this-#gtadministrator == 1) { ?#gt#lt?=$this-#gtpostimagespacer?#gt
					#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=ban&session=#lt?=$post[5]?#gt&id=#lt?=$user[0]?#gt"#gt#ltIMG ALT="Ban this User" SRC="#lt?=$this-#gttp['topic']?#gtimages/ban.gif" BORDER="0"#gt#lt/A#gt#lt? } ?#gt
					#lt/DIV#gt
					#lt/TD#gt
				#lt/TR#gt 
				#ltTR#gt
					#ltTD COLSPAN="2" HEIGHT="1" CLASS="bordertable"#gt#lt/TD#gt
				#lt/TR#gt 
				#ltTR#gt
					#ltTD COLSPAN="2"#gt
						#ltSPAN CLASS="regular"#gt
						#lt?=$attachment?#gt#lt?=$post[2]?#gt#ltBR#gt
						#lt?=$signature?#gt 
						#lt/SPAN#gt
					#lt/TD#gt
				#lt/TR#gt
			#lt/TABLE#gt
			#lt/TD#gt
		#lt/TR#gt
			#ltTD CLASS="ctable1" ALIGN="center" WIDTH="18%"#gt
				#ltA HREF="javascript:scroll(0,0);"#gtGo To Top#lt/A#gt
			#lt/TD#gt
			#ltTD CLASS="ctable2" ALIGN="left" WIDTH="60%"#gt
			#ltSPAN CLASS="small"#gt
#lt?
		$hidemail = false;
		if ($user[16] == "1") { $hidemail = true; }
		if ($this-#gtadministrator) { $hidemail = false; }
		if ($this-#gtmoderator) { $hidemail = false; }
		$buttons = "#lta href=\"index.php".$this-#gts."a=messenger&type=send&to=$user[1]\"#gt#ltimg src=\"".$this-#gttp['postbuttons']."images/pb_msg.gif\" border=\"0\"#gt#lt/a#gt ";
		if (($user[4] != "") && (!$hidemail)) {
			$buttons = $buttons . "#lta href=\"mailto:$user[4]\"#gt#ltimg src=\"".$this-#gttp['postbuttons']."images/pb_mail.gif\" border=\"0\"#gt#lt/a#gt ";
		}
		if ($user[6] != "") {
		$buttons = $buttons . "#lta href=\"aim:goim?screenname=".$user[6]."&message=Hi.+Are+you+there?\"#gt#ltimg src=\"".$this-#gttp['postbuttons']."images/pb_aim.gif\" border=\"0\"#gt#lt/a#gt ";
		}
		if ($user[7] != "") {
		$buttons = $buttons . "#lta href='http://members.msn.com/default.msnw?mem=$user[7]' TARGET='new'#gt#ltimg src=\"".$this-#gttp['postbuttons']."images/pb_msn.gif\" border=\"0\"#gt#lt/a#gt ";
		}
		if ($user[8] != "") {
		$buttons = $buttons . "#lta href='http://edit.yahoo.com/config/send_webmesg?.target=$user[8]& ;.src=pg' TARGET='new'#gt#ltimg src=\"".$this-#gttp['postbuttons']."images/pb_yim.gif\" border=\"0\"#gt#lt/a#gt ";
		}
		if ($user[9] != "") {
		$buttons = $buttons . "#lta href='http://web.icq.com/wwp?Uin=$user[9]' TARGET='new'#gt#ltimg src=\"".$this-#gttp['postbuttons']."images/pb_icq.gif\" border=\"0\"#gt#lt/a#gt ";
		}
		if ($user[13] != "") {
		$buttons = $buttons . "#lta href='$user[13]' TARGET='new'#gt#ltimg src=\"".$this-#gttp['postbuttons']."images/pb_www.gif\" border=\"0\"#gt#lt/a#gt ";
		}
		if ($user[10] != "disabled") {
				echo $buttons;
		} else {
			echo "#ltspan style='display: none;'#gt.#lt/span#gt";
		}
?#gt
			#lt/SPAN#gt
			#lt/TD#gt
			#ltTD CLASS="ctable2" ALIGN="center" WIDTH="22%"#gt
			#lt?=$this-#gtzonetime($this-#gtsettings['time_format'], $post[3])?#gt
			#lt/TD#gt
		#lt/TR#gt
		#ltTR#gt
			#ltTD CLASS="darkspacer" HEIGHT="4" COLSPAN="3"#gt#lt/TD#gt
		#lt/TR#gt
#lt?
		$i++;
	}
}

function displaytopicinfobottom () {
	$forum = $this-#gtselectforum($this-#gtforum, "f");
	$topic = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gttopic);
        ?#gt
        #lt/TABLE#gt
        #ltBR#gt
#lt? if ($this-#gtlogged_in) { ?#gt
#lttable align=center width=100% cellpadding=2 cellspacing=1 class="bordertable"#gt
#ltform action="index.php" method="post" name="Post"#gt
#ltinput type="hidden" name="a" value="post"#gt
#ltinput type="hidden" name="forum" value="#lt?=$this-#gtforum?#gt"#gt
#ltinput type="hidden" name="topic" value="#lt?=$this-#gttopic?#gt"#gt
#lttr#gt
#lttd colspan=2 class="category" align="center"#gtQuick Reply#lt/td#gt
#lt/tr#gt
#lttr#gt
	 #lttd class="ctable1" width="20%"align="center"#gt#ltspan class="small"#gt#ltb#gtSubject Title#lt/b#gt#lt/span#gt#lt/td#gt
	  #lttd class="ctable1"width="20%"align="left"#gt#ltinput size=90 maxlength="#lt?=$this-#gttopiclength?#gt" name="subject" value="Re: #lt?=$this-#gtlisttopic[1]?#gt"#gt#lt/td#gt#lt/tr#gt 
	
#lttr#gt
#lttd class="ctable2"align="center"width="20%"#gt
#lttable border='0' cellpadding='2' cellspacing='0' valign=top align=center#gt
	 #lttr#gt
	 #lttd class='ctable2' align="center"valign="top"#gt#ltspan class="small"#gt#ltb#gt
	 Message 
	 #lt/b#gt#lt/span#gt#lt/td#gt
	 #lt/tr#gt
	 #lttr#gt
	 #lttd align="center"#gt#lt/td#gt
		 #lt/tr#gt
	 #lttd#gt#lt/td#gt
	 #lt/tr#gt#lt/table#gt#lt/td#gt
#lttd class="ctable2" width="70%"#gt
#lttextarea name="message" cols=92 rows=6 onSelect="storeCaret(this);"
onClick="storeCaret(this);"
onKeyUp="storeCaret(this);"#gt#lt?=$quote?#gt#lt/textarea#gt#lt/td#gt
#ltbr#gt
#lt? } ?#gt
#lttr#gt
#lttd colspan=2 align=center class="ctable1"#gt#lt?=$this-#gtbutton("Post")?#gt#lt/td#gt
#lt/tr#gt
#lt/form#gt
#lt/table#gt
	#ltBR#gt
        #ltTABLE WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
         #ltTR#gt
          #ltTD CLASS="ctable1"#gt[ #lt?=$this-#gtpagelinks?#gt ]#lt/TD#gt
           #ltTD CLASS="ctable2" NOWRAP ROWSPAN="2"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=post&forum=#lt?=$this-#gtforum?#gt"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/topic_new.gif" BORDER="0"#gt#lt/A#gt #lt?=$this-#gtreplylink?#gt #ltA HREF="index.php#lt?=$this-#gts?#gta=post&type=poll&forum=#lt?=$this-#gtforum?#gt"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/poll_new.gif" BORDER="0"#gt#lt/A#gt#lt/TD#gt
         #lt/TR#gt
         #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH="100%"#gt
#lt? if (($this-#gtadministrator) #12#12 ($this-#gtmoderator)) { ?#gt#lt?=$this-#gtlng['moderate']['topic']?#gt ( 
	#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=close&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$this-#gttopic?#gt"#gt#lt? if ($topic[7] == 1) { ?#gt#lt?=$this-#gtlng['moderate']['open']?#gt#lt? } else { ?#gt#lt?=$this-#gtlng['moderate']['close']?#gt#lt? } ?#gt#lt/A#gt #12 
	#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=topicdelete&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$this-#gttopic?#gt"#gtDelete#lt/A#gt #12 
	#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=move&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$this-#gttopic?#gt"#gtMove#lt/A#gt #12 
	#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=pin&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$this-#gttopic?#gt"#gt#lt? if ($poll[10] == 1) { ?#gt#lt?=$this-#gtlng['moderate']['unpin']?#gt#lt? } else { ?#gt#lt?=$this-#gtlng['moderate']['pin']?#gt#lt? } ?#gt#lt/A#gt #12 
	#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=rename&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$this-#gttopic?#gt"#gt#lt?=$this-#gtlng['moderate']['rename']?#gt#lt/A#gt )
#lt? } else { ?#gt#ltA HREF="index.php"#gt#lt?=$this-#gtsettings[edgebrd_name]?#gt#lt/A#gt#lt? } ?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" COLSPAN="2" WIDTH="100%"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=forum&forum=#lt?=$forum[0]?#gt"#gt#lt?=$forum[1]?#gt#lt/A#gt#lt/span#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt
        #lt?
}

}

?#gt";}i:61;a:2:{i:0;s:14:"lib/search.php";i:1;s:285:"#lt?php

class exclusive extends genesis {

function execute () {
	global $search, $adv, $cs, $ss;
	$this-#gtheader();
	$this-#gtdisplaymessage($this-#gtlng['misc']['wait'], $this-#gtlng['misc']['being_redirected'], "search.php".$this-#gts);
	$this-#gtfooter();
}

}

?#gt";}i:62;a:2:{i:0;s:11:"lib/iai.php";i:1;s:45623:"#lt?php

class exclusive extends genesis {

function execute() {
	global $type, $forum, $userid, $f_button, $c_button;
	$this-#gtheader();
	$this-#gtcleanup();
	if (!empty($c_button)) {
		if ($c_button == $this-#gtlng['iai']['delete']) {
			$type = "deletecategory";
		} elseif ($c_button == $this-#gtlng['iai']['edit']) {
			$type = "editcategory";
		} elseif ($c_button == $this-#gtlng['iai']['move_up']) {
			$type = "movecategoryup";
		} elseif ($c_button == $this-#gtlng['iai']['move_down']) {
			$type = "movecategorydown";
		} elseif ($c_button == $this-#gtlng['iai']['new_forum']) {
			$type = "newforum";
		}
	} elseif (!empty($f_button)) {
		if ($f_button == $this-#gtlng['iai']['delete']) {
			$type = "deleteforum";
		} elseif ($f_button == $this-#gtlng['iai']['edit']) {
			$type = "editforum";
		} elseif ($f_button == $this-#gtlng['iai']['move_up']) {
			$type = "moveforumup";
		} elseif ($f_button == $this-#gtlng['iai']['move_down']) {
			$type = "moveforumdown";
		} elseif ($f_button == $this-#gtlng['iai']['move_forum']) {
			$type = "moveforum";
		}
	}
	$this-#gtdoomsday(14);
	if ($type == "addnote") {
		$this-#gtaddnote();
	} elseif ($type == "addnote2") {
		$this-#gtaddnote2();
	} elseif ($type == "deletenote") {
		$this-#gtdeletenote();
	} elseif ($type == "deletenote2") {
		$this-#gtdeletenote2();
	} elseif ($type == "editnote") {
		$this-#gteditnote();
	} elseif ($type == "editnote2") {
		$this-#gteditnote2();
	} elseif ($type == "note") {
		$this-#gtnote();
	} elseif ($type == "editgroup") {
		$this-#gteditgroup();
	} elseif ($type == "movecategorydown") {
		$this-#gtmovecategorydown();
	} elseif ($type == "movecategoryup") {
		$this-#gtmovecategoryup();
	} elseif ($type == "moveforumup") {
		$this-#gtmoveforumup();
	} elseif ($type == "moveforum") {
		$this-#gtmoveforum();
	} elseif ($type == "moveforum2") {
		$this-#gtmoveforum2();
	} elseif ($type == "newforum") {
		$this-#gtnewforum();
	} elseif ($type == "newforum2") {
		$this-#gtnewforum2();
	} elseif ($type == "deleteforum") {
		$this-#gtdeleteforum();
	} elseif ($type == "deleteforum2") {
		$this-#gtdeleteforum2();
	} elseif ($type == "moveforumdown") {
		$this-#gtmoveforumdown();
	} elseif ($type == "moveforumup") {
		$this-#gtmoveforumup();
	} elseif ($type == "editforum") {
		$this-#gteditforum();
	} elseif ($type == "editforum2") {
		$this-#gteditforum2();
	} elseif ($type == "changepassword") {
		$this-#gtchangepassword();
	} elseif ($type == "changepassword2") {
		$this-#gtchangepassword2();
	} elseif ($type == "disableuser") {
		$this-#gtdisableuser();
	} elseif ($type == "editmods") {
		$this-#gteditmods();
	} elseif ($type == "removemod") {
		$this-#gtremovemod();
	} elseif ($type == "addmod") {
		$this-#gtaddmod();
	} elseif ($type == "addmod2") {
		$this-#gtaddmod2();
	} elseif ($type == "disableuser2") {
		$this-#gtdisableuser2();
	} elseif ($type == "enableuser") {
		$this-#gtenableuser();
	} elseif ($type == "enableuser2") {
		$this-#gtenableuser2();
	} elseif ($type == "forumrestrictions") {
		$this-#gtlockforum();
	} elseif ($type == "forumrestrictions2") {
		$this-#gtlockforum2();
	} elseif ($type == "overridetitle") {
		$this-#gtoverridetitle();
	}
	$this-#gtfooter();
}

function note () {
	$notes = $this-#gtselectall($this-#gtdb['notes']);
	if (count($notes)==0) {
		$nonotes = true;
	}
?#gt
       #ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="4%"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" WIDTH="56%"#gt#lt?=$this-#gtlng['iai']['note_contents']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" WIDTH="20%"#gtDisplay Time#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="20%"#gt#lt?=$this-#gtlng['acp']['controls']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD COLSPAN="100%" CLASS="category"#gt#lt?=$this-#gtlng['iai']['notes']?#gt [ #lt?=$this-#gtlng['iai']['add_note']?#gt: #ltA CLASS="catlink" HREF="index.php#lt?=$this-#gts?#gta=iai&type=addnote&location=q1:*"#gt#lt?=$this-#gtlng['iai']['g_note']?#gt#lt/A#gt ]#lt/TD#gt
	 #lt/TR#gt
#lt?
	if ($nonotes != true) {
		$i = 0;
		$current = 1;
		foreach ($notes as $note) {
			if ($note[1] != "*") {
				$link = "index.php".$this-#gts;
				$l_note = true;
				$g_note = false;
				if (!empty($note[1])) {
					$link .= "a=".$note[1];
				}
				if (!empty($note[2])) {
					$link .= "&type=".$note[2];
				}
				if (!empty($note[3])) {
					$link .= "&forum=".$note[3];
				}
				if (!empty($note[4])) {
					$link .= "&topic=".$note[4];
				}
			} else {
				$g_note = true;
				$l_note = false;
				$link = "";
			}
			$controls  = " [ #lta href=\"index.php".$this-#gts."a=iai&type=editnote&note=".$note[0]."\"#gt".$this-#gtlng['iai']['edit']."#lt/a#gt";
			$controls .= " #12 #lta href=\"index.php".$this-#gts."a=iai&type=deletenote&note=".$note[0]."\"#gt".$this-#gtlng['iai']['delete']."#lt/a#gt ] ";
?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable#lt?=$current?#gt" ALIGN="center" WIDTH="4%"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/forumnew.gif"#gt#lt/TD#gt
	  #ltTD CLASS="ctable#lt?=$current?#gt" COLSPAN="3"#gt
	      #ltTABLE WIDTH="100%" CELLPADDING="0" CELLSPACING="0" BORDER="0" CLASS="regular"#gt
		 #ltTR#gt
		  #ltTD CLASS="small" WIDTH="38%"#gt#lt?=$this-#gttags($note[5])?#gt#lt/TD#gt
		  #ltTD WIDTH="18%"#gt#lt?
		 	if ($g_note) {
		  		?#gt#ltB#gt#lt?=$this-#gtlng['iai']['g_note']?#gt#lt/B#gt#lt?
			} elseif ($l_note) {
		 		?#gt#ltB#gt#lt?=$this-#gtlng['iai']['l_note']?#gt#lt/B#gt [ #ltA CLASS="small" HREF="#lt?=$link?#gt"#gt#lt?=$this-#gtlng['misc']['go']?#gt---&gt;#lt/A#gt ]#lt?
			}
		  ?#gt#lt/TD#gt
		  #ltTD CLASS="small" WIDTH="20%"#gt#ltB#gt#lt?
			if (empty($note[6]) && empty($note[7])) {
				echo $this-#gtlng['iai']['n_dn'];
			} elseif (!empty($note[6]) && !empty($note[7])) {
				$fromto = $this-#gtlng['iai']['n_ft'];
				$fromto = $this-#gtemerald($fromto, "%e", $this-#gtzonetime("#", $note[6]));
				$fromto = $this-#gtemerald($fromto, "%f", $this-#gtzonetime("#", $note[7]));
				echo $fromto;
			} elseif (empty($note[6]) && !empty($note[7])) {
				$until = $this-#gtlng['iai']['n_un'];
				$until = $this-#gtemerald($until, "%e", $this-#gtzonetime("#", $note[7]));
				echo $until;
			} elseif (!empty($note[6]) && empty($note[7])) {
				$start = $this-#gtlng['iai']['n_st'];
				$start = $this-#gtemerald($start, "%e", $this-#gtzonetime("#", $note[6]));
				echo $start;
			}
		  ?#gt#lt/B#gt#lt/TD#gt
		  #ltTD WIDTH="20%" ALIGN="right"#gt#lt?=$controls?#gt#lt/TD#gt
		 #lt/TR#gt
	      #lt/TABLE#gt
	  #lt/TD#gt
	 #lt/TR#gt
#lt?
			if ($current == 1) {
				$current = 2;
			} else {
				$current = 1;
			}
		}
	} else {
?#gt	  #ltTD CLASS="ctable2" ALIGN="center"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/forumnew.gif"#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" ALIGN="center" COLSPAN=4#gt#lt?=$this-#gtlng['iai']['no_notes']?#gt#lt/TD#gt
#lt?
	}
?#gt
#lt/TABLE#gt
#lt?


}

function deletenote () {
	global $note;
	$link = "index.php".$this-#gts."a=iai&type=deletenote2&note=".$note;
	$this-#gtquery($this-#gtlng['iai']['delete'], $this-#gtlng['misc']['aus-nu'], $link);
}

function deletenote2 () {
	global $note;
	$this-#gtdelete($this-#gtdb['notes'], $note);
	$this-#gtdisplaymessage($this-#gtlng['iai']['delete'], $this-#gtlng['misc']['op_successs']);
}

function editnote () {
	global $note;
	$note = $this-#gtselect($this-#gtdb['notes'], $note);
	$form =	 "#ltform name=\"formnote\" action=\"index.php\" method=\"post\"#gt";
	$form = $form . "#ltinput type=\"hidden\" name=\"a\" value=\"iai\"#gt";
	$form = $form . "#ltinput type=\"hidden\" name=\"note\" value=\"".$note[0]."\"#gt";
	$form = $form . "#ltinput type=\"hidden\" name=\"type\" value=\"editnote2\"#gt";
	if ($note[6] != "") {
		$tc = "1";
		$stime = $this-#gtzonetime("j M Y", $note[6]);
		$dis_s = "DISABLED";
		$checked = "CHECKED";
	}
	if ($note[7] != "") {
		$tc = "1";
		$etime = $this-#gtzonetime("j M Y", $note[7]);
		$dis_e = "DISABLED";
		$checked = "CHECKED";
	}
	$form = $form . #lt#lt#ltFORM
#ltINPUT TYPE="CHECKBOX" $checked onClick="javascript:enabletime('1');" NAME="timecheck" ID="tc" VALUE="$tc"#gt
#ltLABEL FOR="tc"#gtEnable special start and end times for this note?#lt/LABEL#gt
#ltTABLE WIDTH="100%" CELLPADDING="0" CELLSPACING="3" BORDER="0"#gt
	#ltTR#gt
		#ltTD ALIGN="LEFT" WIDTH="20%" CLASS="ctable1"#gtStart Time#lt/TD#gt
		#ltTD ALIGN="LEFT" CLASS="small"#gt#ltINPUT TYPE="TEXT" NAME="stime" $dis_s VALUE="$stime"#gt#lt/TD#gt
	#lt/TR#gt
	#ltTR#gt
		#ltTD ALIGN="LEFT" WIDTH="20%" CLASS="ctable1"#gtEnd Time#lt/TD#gt
		#ltTD ALIGN="LEFT" CLASS="small"#gt#ltINPUT TYPE="TEXT" NAME="etime" $dis_e VALUE="$etime"#gt#lt/TD#gt
	#lt/TR#gt
#lt/TABLE#gt
#ltSCRIPT language="javascript"#gtenabletime('1');#lt/script /#gt
FORM;
	$form = $form . $this-#gtlng['iai']['note_contents'].":#ltbr#gt\n".$this-#gtcustombbcode("formnote","nc")."#lttextarea  onSelect=\"storeCaret(this);\" onClick=\"storeCaret(this);\" onKeyUp=\"storeCaret(this);\" ";
	$form = $form . "name=\"nc\" cols=\"60\" rows=\"5\"#gt".$this-#gtdeinputize($note[5])."#lt/textarea#gt#ltbr#gt\n";
	$form = $form . '#ltbr#gt#ltcenter#gt'.$this-#gtbt.$this-#gtlng['misc']['ok'].$this-#gtbe.'#lt/center#gt#lt/form#gt';
	$this-#gtdisablesecurity = true;
	$this-#gtdisplaymessage($this-#gtlng['iai']['edit'], $form);
	$this-#gtdisablesecurity = false;
}

function editnote2 () {
	global $note, $nc, $stime, $etime;
	$start = strtotime($stime);
	$end = strtotime($etime);
	if (empty($stime) && empty($etime)) {
		$start = 1;
		$end = 1;
		$stime = 1;
		$etime = 1;
		$blue = true;
	}
	if ($start #gt $end) {
		$message = "End time must not occur before start time!";	
	} elseif (empty($stime)) {
		$message = "Starting time must not be blank!";
	} elseif (empty($etime)) {
		$message = "Ending time must not be blank!";
	} else {
		$message = $this-#gtlng['misc']['op_successs'];
		$note = $this-#gtselect($this-#gtdb['notes'], $note);
		$note[5] = $this-#gtinputize(stripslashes($nc));
		if ($blue) {
			$note[6] = "";
			$note[7] = "";
		} else {
			$note[6] = $start;
			$note[7] = $end;
		}
		$this-#gtupdate($this-#gtdb['notes'], $note[0], $note);
	}
	$this-#gtdisplaymessage($this-#gtlng['iai']['edit'], $message);
}

function addnote () {
	global $location;
	$hidden_values = array();
	$location = explode(",", $location);
	$form =	 "#ltform name=\"formnote\" action=\"index.php\" method=\"post\"#gt";
	$form = $form . "#ltinput type=\"hidden\" name=\"a\" value=\"iai\"#gt";
	$form = $form . "#ltinput type=\"hidden\" name=\"type\" value=\"addnote2\"#gt";
	foreach ($location as $place) {
		$place = explode(":", $place);
		if (!empty($place[0]) && !empty($place[1])) {
			$form = $form . '#ltinput type="HIDDEN" name="'.$place[0].'" value="'.$place[1].'"#gt';
		}
	}
	for (	( $i = (int) date("Y") );
			( $i #lt ( ((int) date("Y")) + 5 ) );
			( $i++ ) ) {
		$yearlist .= "			#ltOPTION VALUE=\"$i\"#gt$i#lt/OPTION#gt\r\n";
	}
	$form = $form . #lt#lt#ltFORM
#ltINPUT TYPE="CHECKBOX" onClick="javascript:enabletime('0');" NAME="timecheck" ID="tc" VALUE="1"#gt
#ltLABEL FOR="tc"#gtEnable special start and end times for this note?#lt/LABEL#gt
#ltTABLE WIDTH="100%" CELLPADDING="0" CELLSPACING="3" BORDER="0"#gt
	#ltTR#gt
		#ltTD ALIGN="LEFT" WIDTH="20%" CLASS="ctable1"#gtStart Time#lt/TD#gt
		#ltTD ALIGN="RIGHT" CLASS="small"#gt
			Day: #lt/TD#gt#ltTD#gt#ltSELECT DISABLED NAME='sday'#gt
			#ltOPTION VALUE='0'#gt---#lt/OPTION#gt #ltOPTION VALUE='1'#gt1#lt/OPTION#gt #ltOPTION VALUE='2'#gt2#lt/OPTION#gt
			#ltOPTION VALUE='3'#gt3#lt/OPTION#gt #ltOPTION VALUE='4'#gt4#lt/OPTION#gt #ltOPTION VALUE='5'#gt5#lt/OPTION#gt
			#ltOPTION VALUE='6'#gt6#lt/OPTION#gt #ltOPTION VALUE='7'#gt7#lt/OPTION#gt #ltOPTION VALUE='8'#gt8#lt/OPTION#gt
			#ltOPTION VALUE='9'#gt9#lt/OPTION#gt #ltOPTION VALUE='10'#gt10#lt/OPTION#gt #ltOPTION VALUE='11'#gt11#lt/OPTION#gt
			#ltOPTION VALUE='12'#gt12#lt/OPTION#gt #ltOPTION VALUE='13'#gt13#lt/OPTION#gt #ltOPTION VALUE='14'#gt14#lt/OPTION#gt
			#ltOPTION VALUE='15'#gt15#lt/OPTION#gt #ltOPTION VALUE='16'#gt16#lt/OPTION#gt #ltOPTION VALUE='17'#gt17#lt/OPTION#gt
			#ltOPTION VALUE='18'#gt18#lt/OPTION#gt #ltOPTION VALUE='19'#gt19#lt/OPTION#gt #ltOPTION VALUE='20'#gt20#lt/OPTION#gt
			#ltOPTION VALUE='21'#gt21#lt/OPTION#gt #ltOPTION VALUE='22'#gt22#lt/OPTION#gt #ltOPTION VALUE='23'#gt23#lt/OPTION#gt
			#ltOPTION VALUE='24'#gt24#lt/OPTION#gt #ltOPTION VALUE='25'#gt25#lt/OPTION#gt #ltOPTION VALUE='26'#gt26#lt/OPTION#gt
			#ltOPTION VALUE='27'#gt27#lt/OPTION#gt #ltOPTION VALUE='28'#gt28#lt/OPTION#gt #ltOPTION VALUE='29'#gt29#lt/OPTION#gt
			#ltOPTION VALUE='30'#gt30#lt/OPTION#gt #ltOPTION VALUE='31'#gt31#lt/OPTION#gt #lt/SELECT#gt 
			#lt/TD#gt#ltTD CLASS="small" ALIGN="RIGHT"#gt
  			Month:#lt/TD#gt#ltTD ALIGN="LEFT"#gt#ltSELECT DISABLED NAME='smonth'#gt
			#ltOPTION VALUE='0'#gt---#lt/OPTION#gt #ltOPTION VALUE='1'#gtJanuary#lt/OPTION#gt #ltOPTION VALUE='2'#gtFebruary#lt/OPTION#gt
			#ltOPTION VALUE='3'#gtMarch#lt/OPTION#gt #ltOPTION VALUE='4'#gtApril#lt/OPTION#gt #ltOPTION VALUE='5'#gtMay#lt/OPTION#gt
			#ltOPTION VALUE='6'#gtJune#lt/OPTION#gt #ltOPTION VALUE='7'#gtJuly#lt/OPTION#gt #ltOPTION VALUE='8'#gtAugust#lt/OPTION#gt
			#ltOPTION VALUE='9'#gtSeptember#lt/OPTION#gt #ltOPTION VALUE='10'#gtOctober#lt/OPTION#gt #ltOPTION VALUE='11'#gtNovember#lt/OPTION#gt
			#ltOPTION VALUE='12'#gtDecember#lt/OPTION#gt#lt/SELECT#gt
			 #lt/TD#gt#ltTD CLASS="small" ALIGN="RIGHT"#gt
			Year:#lt/TD#gt#ltTD ALIGN="LEFT"#gt#ltSELECT DISABLED name='syear'#gt
			#ltOPTION VALUE='0'#gt---#lt/OPTION#gt
$yearlist
			#lt/SELECT#gt#lt/TD#gt
	#lt/TR#gt
	#ltTR#gt
		#ltTD ALIGN="LEFT" WIDTH="20%" CLASS="ctable1"#gtEnd Time#lt/TD#gt
		#ltTD ALIGN="RIGHT" CLASS="small"#gt
			Day: #lt/TD#gt#ltTD#gt#ltSELECT DISABLED NAME='eday'#gt
			#ltOPTION VALUE='0'#gt---#lt/OPTION#gt #ltOPTION VALUE='1'#gt1#lt/OPTION#gt #ltOPTION VALUE='2'#gt2#lt/OPTION#gt
			#ltOPTION VALUE='3'#gt3#lt/OPTION#gt #ltOPTION VALUE='4'#gt4#lt/OPTION#gt #ltOPTION VALUE='5'#gt5#lt/OPTION#gt
			#ltOPTION VALUE='6'#gt6#lt/OPTION#gt #ltOPTION VALUE='7'#gt7#lt/OPTION#gt #ltOPTION VALUE='8'#gt8#lt/OPTION#gt
			#ltOPTION VALUE='9'#gt9#lt/OPTION#gt #ltOPTION VALUE='10'#gt10#lt/OPTION#gt #ltOPTION VALUE='11'#gt11#lt/OPTION#gt
			#ltOPTION VALUE='12'#gt12#lt/OPTION#gt #ltOPTION VALUE='13'#gt13#lt/OPTION#gt #ltOPTION VALUE='14'#gt14#lt/OPTION#gt
			#ltOPTION VALUE='15'#gt15#lt/OPTION#gt #ltOPTION VALUE='16'#gt16#lt/OPTION#gt #ltOPTION VALUE='17'#gt17#lt/OPTION#gt
			#ltOPTION VALUE='18'#gt18#lt/OPTION#gt #ltOPTION VALUE='19'#gt19#lt/OPTION#gt #ltOPTION VALUE='20'#gt20#lt/OPTION#gt
			#ltOPTION VALUE='21'#gt21#lt/OPTION#gt #ltOPTION VALUE='22'#gt22#lt/OPTION#gt #ltOPTION VALUE='23'#gt23#lt/OPTION#gt
			#ltOPTION VALUE='24'#gt24#lt/OPTION#gt #ltOPTION VALUE='25'#gt25#lt/OPTION#gt #ltOPTION VALUE='26'#gt26#lt/OPTION#gt
			#ltOPTION VALUE='27'#gt27#lt/OPTION#gt #ltOPTION VALUE='28'#gt28#lt/OPTION#gt #ltOPTION VALUE='29'#gt29#lt/OPTION#gt
			#ltOPTION VALUE='30'#gt30#lt/OPTION#gt #ltOPTION VALUE='31'#gt31#lt/OPTION#gt #lt/SELECT#gt 
			#lt/TD#gt#ltTD CLASS="small" ALIGN="RIGHT"#gt
  			Month:#lt/TD#gt#ltTD ALIGN="LEFT"#gt#ltSELECT DISABLED NAME='emonth'#gt
			#ltOPTION VALUE='0'#gt---#lt/OPTION#gt #ltOPTION VALUE='1'#gtJanuary#lt/OPTION#gt #ltOPTION VALUE='2'#gtFebruary#lt/OPTION#gt
			#ltOPTION VALUE='3'#gtMarch#lt/OPTION#gt #ltOPTION VALUE='4'#gtApril#lt/OPTION#gt #ltOPTION VALUE='5'#gtMay#lt/OPTION#gt
			#ltOPTION VALUE='6'#gtJune#lt/OPTION#gt #ltOPTION VALUE='7'#gtJuly#lt/OPTION#gt #ltOPTION VALUE='8'#gtAugust#lt/OPTION#gt
			#ltOPTION VALUE='9'#gtSeptember#lt/OPTION#gt #ltOPTION VALUE='10'#gtOctober#lt/OPTION#gt #ltOPTION VALUE='11'#gtNovember#lt/OPTION#gt
			#ltOPTION VALUE='12'#gtDecember#lt/OPTION#gt#lt/SELECT#gt
			 #lt/TD#gt#ltTD CLASS="small" ALIGN="RIGHT"#gt
			Year:#lt/TD#gt#ltTD ALIGN="LEFT"#gt#ltSELECT DISABLED name='eyear'#gt
			#ltOPTION VALUE='0'#gt---#lt/OPTION#gt
$yearlist
			#lt/SELECT#gt#lt/TD#gt
	#lt/TR#gt
#lt/TABLE#gt
FORM;
	$form = $form . $this-#gtlng['iai']['note_contents'].":#ltbr#gt\n".$this-#gtcustombbcode("formnote","nc")."#lttextarea onSelect=\"storeCaret(this);\" onClick=\"storeCaret(this);\" onKeyUp=\"storeCaret(this);\" ";
	$form = $form . "name=\"nc\" cols=\"60\" rows=\"5\"#gt...#lt/textarea#gt#ltbr#gt\n";
	$form = $form . '#ltbr#gt#ltcenter#gt'.$this-#gtbt.$this-#gtlng['misc']['ok'].$this-#gtbe.'#lt/center#gt#lt/form#gt';
	$this-#gtdisablesecurity = true;
	$this-#gtdisplaymessage($this-#gtlng['iai']['add_note'], $form);
	$this-#gtdisablesecurity = false;
}

function addnote2 () {
	global $q1, $q2, $q3, $q4, $nc;
	global $sday, $smonth, $syear, $eday, $emonth, $eyear;
	$start = gmmktime(0, 0, 0, $smonth, $sday, $syear);
	$end = gmmktime(0, 0, 0, $emonth, $eday, $eyear);
	if (empty($sday) && empty($smonth) && empty($syear) && empty($sday) && empty($smonth) && empty($syear)) {
		$sday = "1";
		$eday = "1";
		$start = "";
		$end = "";
	}
	if ($start #gt $end) {
		$message = "End time must not occur before start time!";	
	} elseif (empty($sday) && empty($smonth) && empty($syear)) {
		$message = "Starting time must not be blank!";
	} elseif (empty($eday) && empty($emonth) && empty($eyear)) {
		$message = "Ending time must not be blank!";
	} else {
		$message = $this-#gtlng['misc']['op_successs'];
		$newnote = $this-#gtinputize2(array($q1, $q2, $q3, $q4, stripslashes($nc), $start, $end, ""));
		$this-#gtinsert($this-#gtdb['notes'], $newnote);
	}
	$this-#gtdisplaymessage($this-#gtlng['iai']['add_note'], $message);
}

function overridetitle () {
	global $user, $title;
	$new_title = $title;
	$dbctitles = $this-#gtselect($this-#gtdb['titles'], 1);
	$custom_titles = explode(":", $dbctitles[4]);
	$updated_titles = array();
	if (strtoupper($new_title) == ":STANDARD:") {
		foreach ($custom_titles as $title) {
			$title = explode(",", $title);
			if ($title[0] != $user) {
				$add = implode(",", $title);
				array_push($updated_titles, $add);
			}
		}
		$dbctitles[4] = implode(":", $updated_titles);
		$this-#gtreplace($this-#gtdb['titles'], $dbctitles);
		$message = $this-#gtlng['iai']['user_title_standard'];
	} else {
		$new_title = str_replace(":", "!", $title);
		$found = 0;
		foreach ($custom_titles as $c_title) {
			$c_title = explode(",", $c_title);
			if ($c_title[0] == $user) {
				$found = 1;
				$prev_title = $c_title[1];
				$c_title[1] = $this-#gtinputize($new_title, 20);
				$add = implode(",", $c_title);
				$message = $this-#gtemerald($this-#gtlng['iai']['user_title_alter'], "%e", $prev_title);
				$message = $this-#gtemerald($message, "%n", $new_title);
			} else {
				$add = implode(",", $c_title);
			}
			array_push($updated_titles, $add);
		}
		if ($found == 0) {
			$dbtitle = array($this-#gtinputize($user), $this-#gtinputize($new_title, 20));
			$add = implode(",", $dbtitle);
			array_push($updated_titles, $add);
			$message = $this-#gtemerald($this-#gtlng['iai']['user_title_custom'], "%e", $new_title);
		}
		$dbctitles[4] = implode(":", $updated_titles);
		$this-#gtreplace($this-#gtdb['titles'], $dbctitles);
	}
	$this-#gtdisplaymessage($this-#gtlng['iai']['override_title'], $message);
}

function moveforum () {
	global $category, $forum;
	$forum = $this-#gtselect("data/forums.php", $forum);
	$form = "#ltform method=\"post\" action=\"index.php\"#gt\n";
	$form .= "#ltinput type=\"hidden\" name=\"a\" value=\"iai\"#gt";
	$form .= "#ltinput type=\"hidden\" name=\"type\" value=\"moveforum2\"#gt";
	$form .= "#ltinput type=\"hidden\" name=\"forum\" value=\"".$forum[0]."\"#gt";
	$form .= "#ltinput type=\"hidden\" name=\"category\" value=\"".$category."\"#gt";
	$form .= $this-#gtemerald($this-#gtlng['iai']['select_forum_destination'], "%e", $forum[1]);
	$form .= "#ltcenter#gt#ltbr#gt\n#ltselect name=\"rcategory\"#gt\n";
	$cats = $this-#gtselectall("data/categories.php");
	foreach ($cats as $cat) {
		if ($cat[0] #gt 0) {
			$form .= "#ltOPTION VALUE=\"$cat[0]\"#gt$cat[1]#lt/OPTION#gt\n";
		}
	}
	$form .= "#lt/select#gt\n";
	$form .= "#ltbr#gt\n";
	$form .= $this-#gtbt.$this-#gtlng['iai']['move_forum'].$this-#gtbe;
	$form .= "#lt/form#gt";
	$this-#gtdisablesecurity = true;
	$this-#gtdisplaymessage($this-#gtlng['iai']['move_forum'], $form);
	$this-#gtdisablesecurity = false;
}

function moveforum2 () {
	global $forum, $category, $rcategory;
	$forum = $this-#gtselect("data/forums.php", $forum);
	$category = $this-#gtselect("data/categories.php", $category);
	$forums = explode(",", $category[2]);
	$catf = array();
	foreach ($forums as $sforum) {
		if ($sforum != $forum[0]) {
			array_push($catf, $sforum);
		}
	}
	$continue = true;
	$rcategory =  $this-#gtselect("data/categories.php", $rcategory);
	$rforums = explode(",", $rcategory[2]);
	foreach ($rforums as $aforum) {
		if ($aforum == $forum[0]) {
			$continue = false;
		}
	}
	if ($continue == true) {
		array_push($rforums, $forum[0]);
		$rcategory[2] = implode(",", $rforums);
		$category[2] = implode(",", $catf);
		$this-#gtupdate("data/categories.php", $rcategory[0], $rcategory);
		$this-#gtupdate("data/categories.php", $category[0], $category);
		$message = $this-#gtemerald($this-#gtlng['iai']['forum_move_success'], "%e", $forum[1]);
		$this-#gtdisplaymessage($this-#gtlng['iai']['move_forum'], $message);
	} else {
		$message = $this-#gtemerald($this-#gtlng['iai']['fourm_move_error'], "%e", $forum[1]);
		$this-#gtdisplaymessage($this-#gtlng['iai']['move_forum'], $message);
	}
}

function removemod () {
	global $mod, $gmod, $forum;
	if ($mod!="") {
		$forum = $this-#gtselect("data/forums.php", $forum);
		$forumid = $forum[0];
		$forum[1] = stripslashes($forum[1]);
		$endmsg = "#ltbr#gt#ltbr#gt#ltcenter#gt[ #lta href='index.php?a=iai&type=editmods&forum=$forumid'#gt".$this-#gtlng['iai']['edit_moderators']."#lt/a#gt #12 #lta href='index.php?a=iai&type=addmod&forum=$forumid'#gt".$this-#gtlng['iai']['add_moderator']."#lt/a#gt ]#lt/center#gt";
		$moderators = explode(",", $forum[9]);
		$newlist = array();
		foreach ($moderators as $moderator) {
			if ($moderator != $mod) {
				array_push($newlist, $moderator);
			}
		}
		$forum[9] = implode(",", $newlist);
		$this-#gtupdate("data/forums.php", $forum[0], $forum);
		$message = $this-#gtemerald($this-#gtlng['iai']['remove_moderator_success'], "%e", $forum[1]);
		$this-#gtdisplaymessage($this-#gtlng['iai']['remove_moderator'], $message.$endmsg);
	} elseif ($gmod!="") {
		$forum = $this-#gtselect("data/forums.php", $forum);
		$forumid = $forum[0];
		$forum[1] = stripslashes($forum[1]);
		$endmsg = "#ltbr#gt#ltbr#gt#ltcenter#gt[ #lta href='index.php?a=iai&type=editmods&forum=$forumid'#gt".$this-#gtlng['iai']['edit_moderators']."#lt/a#gt #12 #lta href='index.php?a=iai&type=addmod&forum=$forumid'#gt".$this-#gtlng['iai']['add_moderator']."#lt/a#gt ]#lt/center#gt";
		$gmoderators = explode(",", $forum[10]);
		$newlist = array();
		foreach ($gmoderators as $gmoderator) {
			if ($gmoderator != $gmod) {
				array_push($newlist, $gmoderator);
			}
		}
		$forum[10] = implode(",", $newlist);
		$this-#gtupdate("data/forums.php", $forum[0], $forum);
		$message = $this-#gtemerald($this-#gtlng['iai']['remove_moderator_success'], "%e", $forum[1]);
		$this-#gtdisplaymessage($this-#gtlng['iai']['remove_moderator'], $message.$endmsg);
	} else {
		$this-#gtdisplaymessage($this-#gtlng['iai']['no_mods_named_t'], $this-#gtlng['iai']['no_mods_named_m']);
	}
}

function addmod2 () {
	global $newmod, $newgmod, $forumid;
	$endmsg = "#ltbr#gt#ltbr#gt#ltcenter#gt[ #lta href='index.php?a=iai&type=editmods&forum=$forumid'#gt".$this-#gtlng['iai']['edit_moderators']."#lt/a#gt #12 #lta href='index.php?a=iai&type=addmod&forum=$forumid'#gt".$this-#gtlng['iai']['add_moderator']."#lt/a#gt ]#lt/center#gt";
	$forum = $this-#gtselect("data/forums.php", $forumid);
	$forum[1] = stripslashes($forum[1]);
	if ($newmod!="") {
		if (empty($forum[9])) {
			$moderators = array($newmod);
			$continue = true;
		} else {
			$continue = true;
			$moderators = explode(",", $forum[9]);
			foreach ($moderators as $moderator) {
				if ($moderator == $newmod) {
					$continue = false;
				}
			}
			if ($continue == true) {
				array_push($moderators, $newmod);
			}
		}
		if ($continue == true) {
			$forum[9] = implode(",", $moderators);
			if ($this-#gtupdate("data/forums.php", $forum[0], $forum)) {
				$message = $this-#gtemerald($this-#gtlng['iai']['add_moderator_success'], "%e", $forum[1]);
				$this-#gtdisplaymessage($this-#gtlng['iai']['add_moderator'], $message.$endmsg);
			}
		} else {
			$this-#gtdisplaymessage($this-#gtlng['iai']['add_moderator'], $this-#gtlng['iai']['add_moderator_error'].$endmsg);
		}
	} elseif ($newgmod!="") {
		if (empty($forum[10])) {
			$gmoderators = array($newgmod);
			$continue = true;
		} else {
			$continue = true;
			$gmoderators = explode(",", $forum[10]);
			foreach ($gmoderators as $gmoderator) {
				if ($gmoderator == $newgmod) {
					$continue = false;
				}
			}
			if ($continue == true) {
				array_push($gmoderators, $newgmod);
			}
		}
		if ($continue == true) {
			$forum[10] = implode(",", $gmoderators);
			if ($this-#gtupdate("data/forums.php", $forum[0], $forum)) {
				$message = $this-#gtemerald($this-#gtlng['iai']['add_moderator_success'], "%e", $forum[1]);
				$this-#gtdisplaymessage($this-#gtlng['iai']['add_moderator'], $message.$endmsg);
			}
		} else {
			$this-#gtdisplaymessage($this-#gtlng['iai']['add_moderator'], $this-#gtlng['iai']['add_moderator_error'].$endmsg);
		}
	}
}

function addmod () {
	global $forum;
	$forum = $this-#gtselect("data/forums.php", $forum);
	$forum[1] = stripslashes($forum[1]);
	$form = "#ltform method=\"post\" action=\"index.php\"#gt\n";
	$form .= "#ltinput type=\"hidden\" name=\"a\" value=\"iai\"#gt";
	$form .= "#ltinput type=\"hidden\" name=\"type\" value=\"addmod2\"#gt";
	$form .= "#ltinput type=\"hidden\" name=\"forumid\" value=\"".$forum[0]."\"#gt";
	$form .= $this-#gtemerald($this-#gtlng['iai']['select_new_moderator'], "%e", $forum[1]);
	$form .= "#ltBR#gt#ltBR#gt";
	$form .= $this-#gtlng['iai']['new_mod_group'] . " #ltselect name=\"newgmod\"#gt\n";
	$form .= "#ltoption value=\"\"#gt...#lt/option#gt\n";
	$groups = $this-#gtselectall($this-#gtdb['groups']);
	foreach ($groups as $group) {
		if ($group[0] #gt 0) {
			$form .= "#ltoption value=\"$group[0]\"#gt$group[1]#lt/option#gt\n";
		}
	}
	$form .= "#lt/select#gt\n";
	$form .= "#ltbr#gt\n";
	$form .= $this-#gtlng['iai']['new_mod_user'];
	$form .= " #ltselect name=\"newmod\"#gt\n";
	$form .= "#ltoption value=\"\"#gt...#lt/option#gt\n";
	$users = $this-#gtselectall($this-#gtdb['users']);
	foreach ($users as $user) {
		if ($user[0] #gt 0) {
			$form .= "#ltoption value=\"$user[0]\"#gt$user[1]#lt/option#gt\n";
		}
	}
	$form .= "#lt/select#gt\n";
	$form .= "#ltbr#gt\n";
	$form .= $this-#gtbt.$this-#gtlng['iai']['add_moderator'].$this-#gtbe;
	$form .= "#lt/form#gt";
	$this-#gtdisablesecurity = true;
	$this-#gtdisplaymessage($this-#gtlng['iai']['add_moderator'], $form);
	$this-#gtdisablesecurity = false;
}

function editmods () {
	global $forum;
	$forum = $this-#gtselect("data/forums.php", $forum);
	$forum[1] = stripslashes($forum[1]);
	$nomods=false;
	$nogmods=false;
	$global_moderators = array();
	if (!empty($forum[9])) {
		$moderators = explode(",", $forum[9]);
		foreach ($moderators as $moderator) {
			$user = $this-#gtselect($this-#gtdb['users'], $moderator);
			array_push($global_moderators, array($user[1], $moderator));
		}
	} else {
		$nomods = true;
	}
	$global_gmoderators = array();
	if (!empty($forum[10])) {
		$gmoderators = explode(",", $forum[10]);
		foreach ($gmoderators as $gmoderator) {
			$user = $this-#gtselect($this-#gtdb['groups'], $gmoderator);
			array_push($global_gmoderators, array($user[1], $gmoderator));
		}
	} else {
		$nogmods = true;
	}
?#gt
       #ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="4%"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" WIDTH="53%"#gt#lt?=$this-#gtlng['misc']['name']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="43%"#gt#lt?=$this-#gtlng['acp']['controls']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD COLSPAN="100%" CLASS="category"#gt#lt?=$this-#gtemerald($this-#gtlng['iai']['forum_moderators'], "%e", $forum[1])?#gt [ #ltA CLASS="catlink" HREF="index.php?a=iai&type=addmod&forum=#lt?=$forum[0]?#gt"#gt#lt?=$this-#gtlng['iai']['add_moderator']?#gt#lt/A#gt ]#lt/TD#gt
	 #lt/TR#gt
#lt?
	$current = 1;

	if ($nogmods != true) {
		$i = 0;
		foreach ($global_gmoderators as $single_gmoderator) {
			if ($single_gmoderator[0]=="") {
				continue;
			}
?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable#lt?=$current?#gt" ALIGN="center" WIDTH="4%"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/forumnew.gif"#gt#lt/TD#gt
	  #ltTD CLASS="ctable#lt?=$current?#gt" COLSPAN="2" WIDTH="53%"#gt
	      #ltTABLE WIDTH="100%" CELLPADDING="0" CELLSPACING="0" BORDER="0" CLASS="regular"#gt
		 #ltTR#gt
		  #ltTD#gt#lt?=$single_gmoderator[0]?#gt#lt/TD#gt
		  #ltTD ALIGN="right"#gt[ #ltA HREF="index.php?a=iai&type=removemod&forum=#lt?=$forum[0]?#gt&gmod=#lt?=$single_gmoderator[1]?#gt"#gt#lt?=$this-#gtlng['iai']['remove_moderator']?#gt#lt/A#gt ]#lt/TD#gt
		 #lt/TR#gt
	      #lt/TABLE#gt
	  #lt/TD#gt
	 #lt/TR#gt
#lt?
			if ($current == 1) {
				$current = 2;
			} else {
				$current = 1;
			}
		}
	}

	if ($nomods != true) {
		$i = 0;
		foreach ($global_moderators as $single_moderator) {
			if ($single_moderator[0]=="") {
				continue;
			}
?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable#lt?=$current?#gt" ALIGN="center" WIDTH="4%"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/forumnew.gif"#gt#lt/TD#gt
	  #ltTD CLASS="ctable#lt?=$current?#gt" COLSPAN="2" WIDTH="53%"#gt
	      #ltTABLE WIDTH="100%" CELLPADDING="0" CELLSPACING="0" BORDER="0" CLASS="regular"#gt
		 #ltTR#gt
		  #ltTD#gt#lt?=$single_moderator[0]?#gt#lt/TD#gt
		  #ltTD ALIGN="right"#gt[ #ltA HREF="index.php?a=iai&type=removemod&forum=#lt?=$forum[0]?#gt&mod=#lt?=$single_moderator[1]?#gt"#gt#lt?=$this-#gtlng['iai']['remove_moderator']?#gt#lt/A#gt ]#lt/TD#gt
		 #lt/TR#gt
	      #lt/TABLE#gt
	  #lt/TD#gt
	 #lt/TR#gt
#lt?
			if ($current == 1) {
				$current = 2;
			} else {
				$current = 1;
			}
		}
	}

	if ($nomods && $nogmods) {
?#gt	  #ltTD CLASS="ctable2" ALIGN="center"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/forumnew.gif"#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" ALIGN="center" COLSPAN=4#gt#lt?=$this-#gtlng['iai']['no_moderators']?#gt#lt/TD#gt
#lt?
	}
?#gt
#lt/TABLE#gt
#lt?
}

function editgroup () {
	global $user, $group;
	if ($this-#gtadministrator) {
		$newuser = $this-#gtselect($this-#gtdb['users'], $user);
		$newuser[3] = $group;
		$this-#gtsystempm($user, 3);
		$userlink = "#lta href=\"index.php".$this-#gts."a=member&type=viewprofile&userid=".$newuser[0]."\"#gt".$newuser[1]."#lt/a#gt";
		$this-#gtupdate($this-#gtdb['users'], $newuser[0], $newuser);
		$message = $this-#gtemerald($this-#gtlng['iai']['edit_group_success'], "%e", $userlink);
		$this-#gtdisplaymessage ($this-#gtlng['iai']['edit_group'], $message);
	}
}

function movecategoryup () {
	global $category;
	$this-#gtmoveoneup("data/categories.php", $category);
	$this-#gtdisplaymessage($this-#gtlng['iai']['move_up'], $this-#gtlng['iai']['cmove_up_success']);
}

function movecategorydown () {
	global $category;
	$this-#gtmoveonedown("data/categories.php", $category);
	$this-#gtdisplaymessage($this-#gtlng['iai']['move_down'], $this-#gtlng['iai']['cmove_down_success']);
}

function moveforumdown () {
	global $forum, $category;
	$cat = $this-#gtselect("data/categories.php", $category);
	$forums = explode(",", $cat[2]);
	$continue = True;
	for ($i=0; $continue == True; $i++) {
		if ($forums[$i] == $forum) {
			$temp = array();
			$temp = $forums[$i+1];
			$forums[$i+1] = $forums[$i];
			$forums[$i] = $temp;
			$continue = False;
		}
		if ($i #gt= count($forums)-2) {$continue = False;}
	}
	$lalahaha = "";
	for ($i=0; $i#ltcount($forums);$i++) {
		if ($lalahaha == "") {
				$lalahaha = $forums[$i];
		} else {
			$lalahaha = $lalahaha . "," . $forums[$i];
		}
	}
	$cat[2] = $lalahaha;
	$this-#gtupdate("data/categories.php", $cat[0], $cat);
	$this-#gtdisplaymessage($this-#gtlng['iai']['move_forum'], $this-#gtlng['iai']['move_forum_success']);
}

function moveforumup () {
	global $forum, $category;
	$cat = $this-#gtselect("data/categories.php", $category);
	$forums = explode(",", $cat[2]);
	$continue = True;
	for ($i=0; $continue == True; $i++) {
		if ($forums[$i] == $forum) {
			$temp = array();
			$temp = $forums[$i-1];
			$forums[$i-1] = $forums[$i];
			$forums[$i] = $temp;
			$continue = False;
		}
		if ($i #gt count($forums)) {$continue = False;}
	}
	$lalahaha = "";
	for ($i=0; $i#ltcount($forums);$i++) {
		if ($lalahaha == "") {
				$lalahaha = $forums[$i];
		} else {
			$lalahaha = $lalahaha . "," . $forums[$i];
		}
	}
	$cat[2] = $lalahaha;
	$this-#gtupdate("data/categories.php", $cat[0], $cat);
	$this-#gtdisplaymessage($this-#gtlng['iai']['move_forum'], $this-#gtlng['iai']['move_forum_success']);
}

function newforum () {
	global $category;
	$form =	"#ltform action=\"index.php\" method=\"post\"#gt\n";
	$form = $form . "#ltinput type=\"hidden\" name=\"a\" value=\"iai\"#gt\n";
	$form = $form . "#ltinput type=\"hidden\" name=\"type\" value=\"newforum2\"#gt\n";
	$form = $form . "#ltinput type=\"hidden\" name=\"category\" value=\"".$category."\"#gt\n";
	$form = $form . $this-#gtlng['forum']['forum_name'].": #ltinput name=\"forumname\" size=\"25\"#gt#ltbr#gt\n";
	$form = $form . $this-#gtlng['forum']['forum_desc'].": #ltinput name=\"forumdescription\" size=\"45\"#gt#ltbr#gt\n";
	$form = $form . '#ltcenter#gt'.$this-#gtbt.$this-#gtlng['misc']['ok'].$this-#gtbe.'#lt/center#gt#lt/form#gt';
	$this-#gtdisplaymessage($this-#gtlng['iai']['new_forum'], $form);
}

function newforum2 () {
	global $category, $forumname, $forumdescription;
	$forum = array($forumname, 0, 0, "", "", "", "", $forumdescription);
	$forumid = $this-#gtinsert("data/forums.php", $forum);
	$cat = $this-#gtselect("data/categories.php", $category);
	$forums = explode (",", $cat[2]);
	if (count($forums) #gt= 1) {
		if ($forum[0] == "") {
			$forums = array($forumid);
		} else {
			array_push($forums, $forumid);
		}
	} else {
		array_push($forums, $forumid);
	}
	$lalahaha = "";
	for ($i=0; $i#ltcount($forums);$i++) {
		if ($i == 0) {
				$lalahaha = $forums[$i];
		} else {
			$lalahaha = $lalahaha . "," . $forums[$i];
		}
	}
	$cat[2] = $lalahaha;
	$this-#gtupdate("data/categories.php", $cat[0], $cat);
	mkdir("data/".$forumid, 0777);
	chmod("data/".$forumid, 0777);
	$message = $this-#gtemerald($this-#gtlng['iai']['new_forum_success'], "%e", $forumname);
	$this-#gtdisplaymessage($this-#gtlng['iai']['new_forum'], $message);
}

function deleteforum () {
	global $forum, $category;
	$dbforum = $this-#gtselect("data/forums.php", $forum);
	$query = $this-#gtemerald($this-#gtlng['iai']['delete_forum_query'], "%e", $dbforum[1]);
	$this-#gtquery($this-#gtlng['iai']['delete'], $query, 
	"index.php".$this-#gts."a=iai&type=deleteforum2&forum=".$forum[0]."&category=".$category, null, 0, 0);
}

function deleteforum2 () {
	global $forum, $category;
	if (!is_array($forum)) {
		$forum = $this-#gtselect("data/forums.php", $forum);
	}
	$cat = $this-#gtselect("data/categories.php", $category);
	$forums = explode(",", $cat[2]);
	$lalahaha = array();
	for ($i=0; $i#ltcount($forums);$i++) {
		if ($forums[$i] != $forum[0]) {
			if ($forums[$i] != "") {
				array_push($lalahaha, $forums[$i]);
			}
		}
	}
	$cat[2] = implode(",", $lalahaha);
	$this-#gtupdate("data/categories.php", $cat[0], $cat);
	$this-#gtdelete("data/forums.php", $forum);
	$dhandle = opendir("data/".$forum[0]."/");
	while ($file = readdir($dhandle)) {
		if (($file == ".") #12#12 ($file == "..")) {
		} else {
			unlink($file);
		}
	}
	rmdir("data/".$forum[0]);
	$this-#gtdisplaymessage($this-#gtlng['iai']['delete'], $this-#gtlng['iai']['delete_fsuccess']);
}

function editforum () {
	global $forum, $listgroups, $num, $findgs, $findg;
	$i = 0;
	$indent = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
	$findgs = $this-#gtselectall($this-#gtdb['groups']);
	$gusetg = array(array("0", $this-#gtlng['misc']['guests']));
	$findgs = array_merge($gusetg, $findgs);
	$dbforum = $this-#gtselect("data/forums.php", $forum);
	$postgs = explode(",", $dbforum[6]);
	$replgs = explode(",", $dbforum[7]);
	$viewgs = explode(",", $dbforum[5]);
	foreach ($findgs as $findg) {
		if ($findg[0] == "0") {
			$button = " ".$this-#gthelpbutton('iaigp');
		} else {
			$button = "";
		}
		if (count($replgs) == 1 #12#12 count($replgs) == 0) { if (empty($replgs[0])) { $r = "CHECKED "; } }
		if (count($viewgs) == 1 #12#12 count($viewgs) == 0) { if (empty($viewgs[0])) { $v = "CHECKED "; } }
		if (count($postgs) == 1 #12#12 count($viewgs) == 0) { if (empty($postgs[0])) { $p = "CHECKED "; } }
		foreach ($postgs as $postg) {
			if ($postg == $findg[0]) {
				$postgroups .= $indent."#ltinput type='checkbox' ".$p."CHECKED name='forumpostgroups[]'";
	 			$postgroups .= " value='".$findg[0]."'#gt".$findg[1].$button."#ltbr#gt\n";
				$this-#gtwritten1[$findg[0]] = 1;
			}
		}
		foreach ($postgs as $postg) {
			if ($postg != $findg[0]) {
				if ($this-#gtwritten1[$findg[0]] != 1) {
					$postgroups .= $indent."#ltinput type='checkbox' ".$p."name='forumpostgroups[]'";
					$postgroups .= " value='".$findg[0]."'#gt".$findg[1].$button."#ltbr#gt\n";
					$this-#gtwritten1[$findg[0]] = 1;
				}
			}
			$this-#gtwritten1[$findg[0]] = 1;
		}
		foreach ($replgs as $replg) {
			if ($replg == $findg[0]) {
				$replgroups .= $indent."#ltinput type='checkbox' ".$r."CHECKED name='forumreplgroups[]'";
	     			$replgroups .= " value='".$findg[0]."'#gt".$findg[1].$button."#ltbr#gt\n";
				$this-#gtwritten2[$findg[0]] = 1;
			}
		}
		foreach ($replgs as $replg) {
			if ($replg != $findg[0]) {
				if ($this-#gtwritten2[$findg[0]] != 1) {
					$replgroups .= $indent."#ltinput type='checkbox' ".$r."name='forumreplgroups[]'";
					$replgroups .= " value='".$findg[0]."'#gt".$findg[1].$button."#ltbr#gt\n";
					$this-#gtwritten2[$findg[0]] = 1;
				}
			}
			$this-#gtwritten2[$findg[0]] = 1;
		}
		foreach ($viewgs as $viewg) {
			if ($viewg == $findg[0]) {
				$viewgroups .= $indent."#ltinput type='checkbox' ".$v."CHECKED name='forumviewgroups[]'";
     	 			$viewgroups .= " value='".$findg[0]."'#gt".$findg[1]."#ltbr#gt\n";
				$this-#gtwritten3[$findg[0]] = 1;
			}
		}
		foreach ($viewgs as $viewg) {
			if ($viewg != $findg[0]) {
				if ($this-#gtwritten3[$findg[0]] != 1) {
					$viewgroups .= $indent."#ltinput type='checkbox' ".$v."name='forumviewgroups[]'";
					$viewgroups .= " value='".$findg[0]."'#gt".$findg[1]."#ltbr#gt\n";
					$this-#gtwritten3[$findg[0]] = 1;
				}
			}
			$this-#gtwritten3[$findg[0]] = 1;
		}
	}
	$dbforum[8] = str_replace("#ltbr#gt", "\n", $dbforum[8]);
	$form =	 "#ltform name=\"forumedit\" action=\"index.php\" method=\"post\"#gt\n";
	$form = $form . "#ltinput type=\"hidden\" name=\"a\" value=\"iai\"#gt\n";
	$form = $form . "#ltinput type=\"hidden\" name=\"type\" value=\"editforum2\"#gt\n";
	$form = $form . "#ltinput type=\"hidden\" name=\"forum\" value=\"".$forum."\"#gt\n";
	$form = $form . $this-#gtlng['forum']['forum_name'].": #ltinput name=\"forumname\" size=\"25\" value=\"".stripslashes($dbforum[1])."\"#gt#ltbr#gt\n";
	$form = $form . $this-#gtlng['forum']['forum_desc'].":#ltbr#gt".$this-#gtcustombbcode("forumedit","forumdescription")."#lttextarea  onSelect=\"storeCaret(this);\" onClick=\"storeCaret(this);\" onKeyUp=\"storeCaret(this);\" ";
	$form = $form . "name=\"forumdescription\" cols=\"60\" rows=\"5\"#gt".stripslashes($dbforum[8])."#lt/textarea#gt#ltbr#gt\n";
	$form = $form . "#ltbr#gt".$this-#gtlng['iai']['edit_forum_post_groups'].": ".$this-#gthelpbutton('post_groups')."#ltbr#gt\n";
	$form = $form . $postgroups;
	$form = $form . "#ltbr#gt".$this-#gtlng['iai']['edit_forum_reply_groups'].": ".$this-#gthelpbutton('reply_groups')."#ltbr#gt\n";
	$form = $form . $replgroups;
	$form = $form . "#ltbr#gt".$this-#gtlng['iai']['edit_forum_view_groups'].": ".$this-#gthelpbutton('view_groups')."#ltbr#gt\n";
	$form = $form . $viewgroups;
	$form = $form . '#ltbr#gt#ltcenter#gt'.$this-#gtbt.$this-#gtlng['iai']['edit_forum'].$this-#gtbe.'#lt/center#gt#lt/form#gt';
	$this-#gtdisablesecurity = true;
	$this-#gtdisplaymessage($this-#gtlng['iai']['edit_forum'], $form);
	$this-#gtdisablesecurity = false;
}

function editforum2 () {
	global $forum, $forumname, $forumdescription, $forumpostgroups, $forumviewgroups, $forumreplgroups;
	$dbforum = $this-#gtselect("data/forums.php", $forum);
	$dbforum[1] = stripslashes($this-#gtinputize($forumname));
	$gcount = count($this-#gtselectall($this-#gtdb['groups']));
	$gcount++;


	if (count($forumpostgroups) != 0) {
		$dbforum[6] = implode(",", $forumpostgroups);
	} else {
		$dbforum[6] = "z";
	}
	if (count($forumpostgroups) == $gcount ) {
		$dbforum[6] = "";
	}

	if (count($forumviewgroups) != 0) {
		$dbforum[5] = implode(",", $forumviewgroups);
	} else {
		$dbforum[5] = "z";
	}	
	if (count($forumviewgroups) == $gcount ) {
		$dbforum[5] = "";
	} 

	if (count($forumreplgroups) != 0) {
		$dbforum[7] = implode(",", $forumreplgroups);
	} else {
		$dbforum[7] = "z";
	}
	if (count($forumreplgroups) == $gcount ) {
		$dbforum[7] = "";
	}

	$dbforum[8] = $this-#gtinputize(stripslashes($forumdescription));
	$this-#gtupdate("data/forums.php", $forum, $dbforum);
	$message = $this-#gtemerald($this-#gtlng['iai']['edit_forum_success'], "%e", stripslashes($dbforum[1]));
	$this-#gtdisplaymessage($this-#gtlng['iai']['edit_forum'], $message);
}

function changepassword2 () {
	global $userid, $newpassword, $newpassword2;
	clearstatcache();
	if ($newpassword != $newpassword2) {
		$message = $this-#gtlng['iai']['new_passwords_dont_match'];
	} else {
		$user = $this-#gtselect($this-#gtdb['users'], $userid);
		$user[2] = $this-#gtencrypt($newpassword);
		$this-#gtupdate($this-#gtdb['users'], $userid, $user);
		$message = $this-#gtemerald($this-#gtlng['iai']['password_changed'], "%e", $user[1]);
	}
	$this-#gtdisplaymessage($this-#gtlng['iai']['change_password'], $message);
}

function changepassword () {
	global $userid;
	$user = $this-#gtselect($this-#gtdb['users'], $userid);
	$title = $this-#gtemerald($this-#gtlng['iai']['changing_password'], "%e", $user[1]);
?#gt
	#ltTABLE ALIGN=center WIDTH=65% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	#ltFORM ACTION="index.php" METHOD="post"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="iai"#gt
	#ltINPUT TYPE="hidden" NAME="type" VALUE="changepassword2"#gt
	#ltINPUT TYPE="hidden" NAME="userid" VALUE="#lt?=$userid?#gt"#gt
	#ltTR#gt
	#ltTD CLASS="category" COLSPAN="2" ALIGN="center"#gt#lt?=$title?#gt#lt/TD#gt
	#lt/TR#gt
	#ltTR#gt
	#ltTD CLASS="ctable1"#gt#lt?=$this-#gtlng['iai']['new_pass']?#gt:#lt/TD#gt
	#ltTD CLASS="ctable1"#gt#ltINPUT NAME="newpassword" TYPE="password"#gt#lt/TD#gt
	#lt/TR#gt
	#ltTR#gt
	#ltTD CLASS="ctable2"#gt#lt?=$this-#gtlng['iai']['new_pass_again']?#gt:#lt/TD#gt
	#ltTD CLASS="ctable2"#gt#ltINPUT NAME="newpassword2" TYPE="password"#gt#lt/TD#gt
	#lt/TR#gt
	#ltTR#gt
	#ltTD COLSPAN=2 ALIGN=center CLASS="ctable1"#gt#lt?=$this-#gtbutton($this-#gtlng['iai']['change_password'])?#gt#lt/TD#gt
	#lt/TR#gt
	#lt/FORM#gt
	#lt/TABLE#gt
#lt?
}

function disableuser2 () {
	global $userid;
	$this-#gtdisable($userid);
	$user = $this-#gtfindselect($this-#gtdb['users'], $userid);
	$message = $this-#gtemerald($this-#gtlng['iai']['account_has_been_disabled'], "%e", $user[1]);
	$this-#gtdisplaymessage($this-#gtlng['iai']['disable_account'], $message);
}

function disableuser () {
	global $userid;
	$user = $this-#gtselect($this-#gtdb['users'], $userid);
	$query = $this-#gtemerald($this-#gtlng['iai']['disable_account_query'], "%e", $user[1]);
	$this-#gtquery($this-#gtlng['iai']['disable_account'], $query, 
	"index.php".$this-#gts."a=iai&type=disableuser2&userid=".$userid, null, 0, 0);
}

function enableuser2 () {
	global $userid;
	$user = $this-#gtselect($this-#gtdb['users'], $userid);
	$user[10] = time();
	$this-#gtupdate($this-#gtdb['users'], $user[0], $user);
	$message = $this-#gtemerald($this-#gtlng['iai']['account_enable_success'], "%e", $user[1]);
	$this-#gtdisplaymessage($this-#gtlng['iai']['account_enable'], $message);
}

function enableuser () {
	global $userid;
	$user = $this-#gtselect($this-#gtdb['users'], $userid);
	$query = $this-#gtemerald($this-#gtlng['iai']['enable_account_query'], "%e", $user[1]);
	$this-#gtquery($this-#gtlng['iai']['account_enable'], $query, 
	"index.php".$this-#gts."a=iai&type=enableuser2&userid=".$userid, null, 0, 0);
}

}
?#gt";}i:63;a:2:{i:0;s:15:"lib/genesis.php";i:1;s:56595:"#lt?

include_once "lib/flatfile.php";

class genesis EXTENDS flatfile {

function genesis () {
	$this-#gtget_extenders();
	$this-#gtexecutestart = $this-#gtgetmicrotime();
	$this-#gtsettings();
	$this-#gtchecklogin();
	$this-#gtset_user($this-#gtcuser, $this-#gtcpass);
	$this-#gtset_gsv();
	$this-#gtget();
	$this-#gthandle_request();
}

function zonetime ($timeformat, $time) {
	if (($timeformat == "#") #12#12 ($timeformat == "")) {
		$timeformat = $this-#gtsettings['time_format'];
	}
	if ($timeformat == "##") {
		$timeformat = $this-#gtsettings['stimeformat'];
	}
	if ($timeformat == "###") {
		$timeformat = $this-#gtsettings['ltimeformat'];
	}
	if (empty($this-#gtuser[17])) { 
		$this-#gtuser[17] = $this-#gtsettings['time_offset'];
	}
	return gmdate($timeformat, ($time + $this-#gtuser[17] + $this-#gtuser[24]));
}

function cleanup () {
	global $forum;
	if (is_array($forum)) {
		$forum = $forum[0];
	}
	if (is_array($category)) {
		$category = $category[0];
	}
}

function set_gsv () {
	global $theme;
	if (!empty($theme)) { 
		if (file_exists("html/".$theme."/")) {
			$vars .= "&theme=".$theme;
			$this-#gtsettings['eboard_theme'] = $theme;
		}
	}
	$this-#gts = "?SID=".$this-#gtses_id.$vars."&";
}

function get () {
	$this-#gthic = false;
	$this-#gtget_notes();
	$this-#gtget_messages();
}

function get_forum_category ($forumid) {
	$categories = $this-#gtselectall("data/categories.php");
	foreach ($categories as $category) {
		$forums = explode(",", $category[2]);
		foreach ($forums as $forum) {
			if ($forum == $forumid) {
				return $category;
			}
		}
	}
	return 0;
}

function get_notes () {
	global $a, $type, $forum, $topic, $poll;
	$local_notes = array();
	$global_notes = array();

	$this-#gtdb_notes = $this-#gtselectall($this-#gtdb['notes']);
	$this-#gtvaid_notes = array();
	
	foreach ($this-#gtdb_notes as $note) {
			$start = $note[6];
			$end = $note[7];
			$con = 1;
			if (!empty($start)) {
	 			if ($start #gt= time())
					$con = 0;
			} elseif (!empty($end)) {
				if ($end #lt= time()) 
					$con = 0;
			}
			if ($con)
				array_push($this-#gtvaid_notes, $note);
	}

	if ($type != "") {
		if ($forum != "") {
			if ($topic != "") {
				$this-#gtboard[local_notes] = $this-#gtnote_return($a, $type, $forum, $topic);
			} elseif ($poll != "") {
				$this-#gtboard[local_notes] = $this-#gtnote_return($a, $type, $forum, $poll);
			} else {
				$this-#gtboard[local_notes] = $this-#gtnote_return($a, $type, $forum);
			}	
		} else {
			$this-#gtboard[local_notes] = $this-#gtnote_return($a, $type);
		}
	} else {
		if ($forum != "") {
			if ($topic != "") {
				$this-#gtboard[local_notes] = $this-#gtnote_return($a, "", $forum, $topic);
			} elseif ($poll != "") {
				$this-#gtboard[local_notes] = $this-#gtnote_return($a, "", $forum, $poll);
			} else {
				$this-#gtboard[local_notes] = $this-#gtnote_return($a, "", $forum);
			}	
		} else {
			$this-#gtboard[local_notes] = $this-#gtnote_return($a);
		}
	}
	$this-#gtboard[global_notes] = $this-#gtwhere($this-#gtvaid_notes, 1, "*");
	if ($this-#gtboard[global_notes] == 0) {
		$this-#gtboard[global_notes] = $global_notes;
	} else {
		$this-#gtboard[global_notes] = array_reverse($this-#gtboard[global_notes]);
	}
	if ($this-#gtboard[local_notes] == 0) {
		$this-#gtboard[local_notes] = $local_notes;
	} else {
		$this-#gtboard[local_notes] = array_reverse($this-#gtboard[local_notes]);
	}
}

function note_return ($a="main", $n_a="", $n_b="", $n_c="") {
	$selectnotes = array();
	$selectnotes = $this-#gtwhere($this-#gtvaid_notes, 1, $a);
	if (!empty($n_a)) {
		$selectnotes = $this-#gtwhere($selectnotes, 2, $n_a);
	}
	if (!empty($n_b)) {
		$selectnotes = $this-#gtwhere($selectnotes, 3, $n_b);
	}
	if (!empty($n_c)) {
		$selectnotes = $this-#gtwhere($selectnotes, 4, $n_c);
	}
	return array_reverse($selectnotes);
}

function get_extenders () {
	global $a, $type;
	$this-#gtdimension = new dimension;
	include_once "lib/sublib/acp.ext.php";		// WE NEED THE ACP SUB-LIBRARY
	include_once "lib/sublib/ban.ext.php";			// WE ALWAYS NEED THE BAN SUB-LIBRARY
	if ($a == "post") {
		include_once "lib/sublib/upload.ext.php";		// WE NEED THE UPLOAD SUB-LIBRARY
		include_once "lib/sublib/member.ext.php";		// WE NEED THE MEMBER SUB-LIBRARY
	} elseif ($a == "member") {
		include_once "lib/sublib/member.ext.php";		// WE NEED THE MEMBER SUB-LIBRARY
	} elseif ($a == "guest") {
		include_once "lib/sublib/member.ext.php";		// WE NEED THE MEMBER SUB-LIBRARY
	} elseif ($a == "recount") {
	} elseif ($a == "main") {		
	}
	if (strstr($a,"controlpanel")) {
		include_once "lib/sublib/member.ext.php";		// WE NEED THE MEMBER SUB-LIBRARY
	}
}

function get_messages ($userid="z") {
	if ($userid == "z") {
		$userid = $this-#gtuser[0];
	}
	if ($userid != 0) {
			$criteria = array(
			2 =#gt $userid, 
			6 =#gt 0
			);
		$messages = $this-#gtsuper_selectwhere($this-#gtdb['messages'], $criteria);
		$messages = $this-#gtwhere($messages, 6, 0);
		$inboxlink = "#lta href='index.php".$this-#gts."a=messenger'#gt".$this-#gtlng['messenger']['inbox']."#lt/a#gt";
		$message = $this-#gtemerald($this-#gtlng['messenger']['inbox_stat'], "%e", $inboxlink);
		$message = $this-#gtemerald($message, "%c", count($messages));
		$this-#gtboard[welcome_message] = "$message\n";
	} else {
		$this-#gtboard[welcome_message] = "( #lta href='index.php".$this-#gts."a=guest&type=register'#gt".$this-#gtlng['toplinks']['register']."#lt/a#gt #12 #lta href='index.php".$this-#gts."a=guest&type=login'#gt".$this-#gtlng['toplinks']['login']."#lt/a#gt )";
	}
}

function get_validation () {
	global $a, $forum;
	if (($a == "topic") #12#12 ($a == "forum") #12#12 ($a == "moderate")) {
		$dbforum = $this-#gtselect("data/forums.php", $forum);
		$gmoderators = explode(",", $dbforum[10]);
		if (count($gmoderators) #gt 0) {
			foreach ($gmoderators as $gmoderator) {
				if ($gmoderator == $this-#gtuser[3]) {
					$this-#gtmoderator = true;
				}
			}
		}
		$moderators = explode(",", $dbforum[9]);
		if (count($moderators) #gt 0) {
			foreach ($moderators as $moderator) {
				if ($moderator == $this-#gtuser[0]) {
					$this-#gtmoderator = true;
				}
			}
		}
	}
	if ($this-#gtusergroup[14] == 2) {
		$this-#gtmoderator = true;
	}
	if ($this-#gtusergroup[14] == 1) {
		$this-#gtmoderator = true;
		$this-#gtadministrator = true;
	}
	if ($this-#gtsettings['admin_mem_id'] == $this-#gtuser[0]) {
		$this-#gtmoderator = true;
		$this-#gtadministrator = true;
	}
}

function validate ($permission) {
	if ($this-#gtadministrator == true) {
		return 1;
	}
	if ($this-#gtuser[0] == 0) {
		return 2;
	} elseif ($this-#gtcpass == $this-#gtuser[2]) {
		if ($this-#gtusergroup[$permission] == 1) {
			return 1;
		} elseif ($this-#gtusergroup[$permission] == 2) {
			if ($permission == 14) {
				return 0;
			} else {
				return 1;
			}
		} else {
			return 0;
		}
	} else {
		return 0;
	}
}

function validate2 ($permission) {
	if ($this-#gtuser[0] == 0) {
		return 0;
	} elseif ($this-#gtcpass == $this-#gtuser[2]) {
		if ($this-#gtusergroup[$permission]!="") {
			return $this-#gtusergroup[$permission];
		} else {
			return 0;
		}
	} else {
		return 0;
	}
}

function handle_request () {
	$this-#gtwhosonline();
	$this-#gtcleanup();
	if ($this-#gtadministrator #12#12 $this-#gtmoderator) {
		if ($this-#gtsettings['board_status'] != 0) {
			$this-#gtheader();
			$die = 0;
			$wholepage = 0;
			$TTLE = $this-#gtlng['errors']['fctgp'];
			$LANG = $this-#gtlng['errors']['fca'];
		}
	} else {
		if ($this-#gtsettings['board_status'] == 1) {
			$TTLE = $this-#gtlng['errors']['fctgp'];
			$LANG = $this-#gtlng['errors']['ftc'] ;
		} elseif ($this-#gtsettings['board_status'] == 2) {
			$TTLE = $this-#gtlng['errors']['fctgp'];
			$LANG = $this-#gtlng['errors']['fc'];
		} elseif ($this-#gtsettings['board_status'] == 3) {
			$TTLE = $this-#gtlng['errors']['mcfu'];
			$LANG = $this-#gtlng['errors']['mcfum'];
		}
		$die = 1;
		$wholepage = 1;
	}
	if ($this-#gtsettings['board_status'] == 1) {
		// BOARD IS TEMP. CLOSED
		$this-#gtdisplaymessage($TTLE, $LANG, $redirect, $wholepage, $die);
	} elseif ($this-#gtsettings['board_status'] == 2) {
		// BOARD IS PERMANETLY CLOSED
		$this-#gtdisplaymessage($TTLE, $LANG, $redirect, $wholepage, $die);
	} elseif ($this-#gtsettings['board_status'] == 3) {
		// BOARD IS CLOSED FOR UPDATES
		$this-#gtdisplaymessage($TTLE, $LANG, $redirect, $wholepage, $die);
	}
	if (empty($this-#gts) #12#12 empty($this-#gtses_id)) {
		$this-#gts = "?";
	}
}


function set_user ($cuser, $cpass) {
	$this-#gtlogged_in = true;
	if ($cuser == "") {
		$this-#gtset_guest();
	} else {
		$user = $this-#gtselectwhere($this-#gtdb['users'], 1, $cuser);
		if ($user[0][2] == $cpass) {
			if (count($user[0]) #lt 25) {
				for ($i=0;( count($user[0]) #lt= 35 );$i++) {
					array_push($user[0], NULL);
				}
			}
			$this-#gtuser = $user[0];
			if (empty($this-#gtuser[22]) #12#12 (date("Y", $this-#gtuser[22]) #lt "1972")) {
				$this-#gtuser[22] = time();
				$this-#gtupdate($this-#gtdb['users'], $this-#gtuser[0], $this-#gtuser);
			}
			$this-#gtusergroup = $this-#gtselect($this-#gtdb['groups'], $this-#gtuser[3]);
			$this-#gtcpass = $cpass;
			$this-#gtget_validation();
		} else {
			$this-#gtset_guest();
		}
	}
	if ($this-#gtis_banned() == true) {
		include_once "lib/sublib/register.ext.php";
		$this-#gtset_gsv();
		$this-#gtget();
		$this-#gthandle_request();
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['banned'], "", 1, 1);
	}
	include_once "lib/sublib/register.ext.php";
}

function set_guest () {
	$this-#gtuser = array(0, "Guest");
	$this-#gtlogged_in = false;
	$this-#gtusergroup = array("0", $this-#gtlng['misc']['guests']);
	$this-#gtcpass = "";
	$this-#gtcuser = "";
}

function minipanel ($userid="z") {
	global $type, $a;
	if ($userid == "z") {
		$userid = $this-#gtuser[0];
	}
	$admin = 0;
	$user = $this-#gtselect($this-#gtdb['users'], $userid);
	if ($user[0] == 0) {
		$wm = $this-#gtboard[welcome_message];
		$s = $this-#gts;
			?#gt#ltCENTER#gt#lt?=$wm?#gt#lt/CENTER#gt#lt?
	} else {
		if ($a == "iai") {
			$admin = 1;
		} elseif ( strstr($a,"panel") && ($a != "user.controlpanel") ) {
			$admin = 1;
		}
		if ($admin) {
			?#gt#ltCENTER#gtPlease exit the ACP to have access to your mini panel.#lt/CENTER#gt#lt?
		} else {
			echo #lt#lt#ltMINIPANEL
			#ltcenter#gt#ltfont size="3"#gt#ltb#gt#lta href="index.php{$this-#gts}a=member&type=viewprofile&userid={$user[0]}"#gt{$user[1]}#lt/a#gt#lt/b#gt#lt/font#gt#ltbr#gt
			#ltspan class="small"#gt{$this-#gtboard[welcome_message]}#lt/span#gt#ltbr#gt
			[ #lta href='index.php{$this-#gts}a=messenger'#gt{$this-#gtlng['messenger']['inbox']}#lt/a#gt #12 
			#lta href='index.php{$this-#gts}a=messenger&type=outbox'#gt{$this-#gtlng['messenger']['outbox']}#lt/a#gt #12 
			#lta href='index.php{$this-#gts}a=messenger&type=send'#gt{$this-#gtlng['messenger']['send_pm']}#lt/a#gt ]#ltbr#gt
			[ #lta href='index.php{$this-#gts}a=controlpanel'#gt{$this-#gtlng['misc']['cp']}#lt/a#gt ]#lt/center#gt
MINIPANEL;
		}
	}
}

function saveoptions ($disp=1) {
	$newsettings = $this-#gtextenders['acp']-#gtsaveoptions($this-#gtsettings);
	$dbset = $this-#gtselect($this-#gtdb['settings'], 1);
	$dbset[1] = $newsettings;
	$this-#gtupdate($this-#gtdb['settings'], 1, $dbset);
	if ($disp) {
		$message = $this-#gtlng['acp']['saved']."#ltBR#gt#ltBR#gt\n";
		$message .= $this-#gtemerald($this-#gtlng['acp']['sm'], "%e", "#lta href=\"acp.php".$this-#gts."\"#gt".$this-#gtlng['misc']['acp_main']."#lt/a#gt");
		$message = $this-#gtemerald($message, "%f", "#lta href=\"index.php".$this-#gts."a=main\"#gt".$this-#gtlng['misc']['forum_main']."#lt/a#gt");
		$this-#gtdisplaymessage($this-#gtlng['misc']['saved'], $message);
	}
}

function settings () {
	global $a;
	$this-#gtsetdb();
	$this-#gta = $a;
	$settings = $this-#gtselect($this-#gtdb['settings'], 1);
	$this-#gtsettings = unserialize($settings[1]);
	/*		[edgebrd_name] BOARD NAME 		
			[admin_mem_id] ADMIN USERID 
			[board_status] STATUS CODE		
			[eboard_theme] BOARD THEME
			[brd_language] LANGUAGE			
			[eboard_email] BOARD EMAIl ADDRESS
			[brd_tm_offst] (not used)		
			[online_limit] WHO'S ONLINE INACTIVITY LIMIT
			[board_locatn] BOARD LOCATION
			
			[max_upld_sz] MAX UPLOAD SIZE (bytes)
			[max_avatr_w] [max_avatr_h] MAX AVATAR W/H 
			[max_topic_l] MAX TOPIC SUBJECT LEGNTH
			[max_post_sz] MAX # OF CHARACTERS IN A POST
			[max_word_sz] MAX # OF CONSECUTIVE CHARACTERS BEFOR A SPACE IS INSERTED
			[topic_perpg] MAX # OF TOPICS PER PAGE
			[posts_perpg] MAX # OF POSTS PER PAGE
			[max_pm_dest] MAX # OF RECIPIANTS PER PRIVATE MESSAGE
			[max_pm_inbx] MAX # OF PRIVATE MESSAGES IN INBOX
			[max_pollq_l] MAX POLL SUBJECT LEGNTH
			[max_pollt_l] MAX POLL CHOICE LEGNTH
			[posting_dly] NUM OF SECONDS BEFORE A USER CAN POST AGAIN AFTER POSTING
			[membs_perpg] NUM OF MEMBERS PER PAGE
			[badwrd_fltr] BAD WORDS TO FILER FROM MESSAGES, ETC
			[time_format] FORMAT OF REGULAR-LEGNTH TIME
			[ltimeformat] FORMAT OF LONG-LEGNTH TIME
			[stimeformat] FORMAT OF SHORT-LEGNTH TIME
			[enable_bbcd] DEFINES IF BBCODE CAN BE USED
			[enable_emal] DEFINES IF EMAIL CAN BE USED
			[enablefemal] DEFINES IF PM's CAN BE FORWARDED TO EMAIL
			[enable_html] DEFINES IF HTML CAN BE USED 
			[enable_gpos] DEFINES IF GUESTS CAN POST
			[enable_emot] DEFINES IF EMOTICONS CAN BE USED
			[reqir_email] DEFINES IF USERS HAVE TO SUPPLY A VALID EMAIL
	*/
	$this-#gtversion = "1.3.0 Pre-Release";
	$this-#gtboard[special_name] = "Genesis";
	$this-#gtbt = "#ltinput style=\"cursor: hand;\" class=\"button\" type=\"submit\" value=\"";
	$this-#gtbe = "\"#gt";
	$this-#gtcnt = false;
	$this-#gtboard[version] = $this-#gtversion;
	include "language/".$this-#gtsettings['brd_language']."/language.php";
	$this-#gtset_theme();
}

function toplinks () {
	global $HTTP_SERVER_VARS;
	if ($this-#gtuser[0] == 0) {
		$links = $this-#gtsettings['nonmem_links'];
	} else {
		$links = $this-#gtsettings['member_links'];
	}
	if ($this-#gtadministrator == true) {
		array_push($links, "&admin!");
	}
	$top = "";
	$spacer = $this-#gttoplinks['$spacr!'];
	$i = 0;
	foreach ($links as $link) {
		if ($i == 0) {
			$this-#gttoplinks['$spacr!'] = "";
		} else {
			$this-#gttoplinks['$spacr!'] = $spacer;
		}
		if ($link == "&userc!") {
			$top .= $this-#gttoplinks['$spacr!']."#lta href=\"ucp.php".$this-#gts."\"#gt".$this-#gttoplinks['&userc!']."#lt/a#gt";
		} elseif ($link == "&logou!") {
			$top .= $this-#gttoplinks['$spacr!']."#lta href=\"index.php".$this-#gts."a=member&type=logout\"#gt".$this-#gttoplinks['&logou!']."#lt/a#gt";
		} elseif ($link == "&login!") {
			$top .= $this-#gttoplinks['$spacr!']."#lta href=\"index.php".$this-#gts."a=guest&type=login&redir=".$this-#gtredirect."\"#gt".$this-#gttoplinks['&login!']."#lt/a#gt";
		} elseif ($link == "&searc!") {
			$top .= $this-#gttoplinks['$spacr!']."#lta href=\"search.php".$this-#gts."\"#gt".$this-#gttoplinks['&searc!']."#lt/a#gt";
		} elseif ($link == "&membe!") {
			$top .= $this-#gttoplinks['$spacr!']."#lta href=\"index.php".$this-#gts."a=member&type=list\"#gt".$this-#gttoplinks['&membe!']."#lt/a#gt";
		} elseif ($link == "&profi!") {
			$top .= $this-#gttoplinks['$spacr!']."#lta href=\"index.php".$this-#gts."a=member&type=profile\"#gt".$this-#gttoplinks['&profi!']."#lt/a#gt";
		} elseif ($link == "&homel!") {
			$top .= $this-#gttoplinks['$spacr!']."#lta href=\"index.php".$this-#gts."\"#gt".$this-#gttoplinks['&homel!']."#lt/a#gt";
		} elseif ($link == "&ebhom!") {
			$top .= $this-#gttoplinks['$spacr!']."#lta href=\"http://www.edgeboard.net\"#gt".$this-#gttoplinks['&homel!']."#lt/a#gt";
		} elseif ($link == "&whool!") {
			$top .= $this-#gttoplinks['$spacr!']."#lta href=\"index.php".$this-#gts."a=whosonline\"#gt".$this-#gttoplinks['&whool!']."#lt/a#gt";
		} elseif ($link == "&regis!") {
			$top .= $this-#gttoplinks['$spacr!']."#lta href=\"index.php".$this-#gts."a=guest&type=register\"#gt".$this-#gttoplinks['&regis!']."#lt/a#gt";
		} elseif ($link == "&admin!") {
			$top .= $this-#gttoplinks['$spacr!']."#lta href=\"acp.php".$this-#gts."\"#gt".$this-#gttoplinks['&admin!']."#lt/a#gt";
		} else {
			$i--;
		}
		$i++;
	}
	return stripslashes($top);
}

function systempm ($user, $messageid) {
	if ($messageid == 1) {
		$dbmessage = $this-#gtsettings['spm'][1];
		$go = 2;
	} elseif ($messageid == 2) {
		$dbmessage = $this-#gtsettings['spm'][2];
		$go = 2;
	} elseif ($messageid == 3) {
		$dbmessage = $this-#gtsettings['spm'][3];
		$go = 2;
	}
	if ($go == 2) {
		$subject = $dbmessage[1];
		$message = $dbmessage[2];
		$continue = true;
		$criteria = array(
			1 =#gt "System", 
			2 =#gt $user, 
			4 =#gt $subject
			);
		$pms = $this-#gtsuper_selectwhere($this-#gtdb['messages'], $criteria);
		if ($pms[0][0] != 0) {
			foreach ($pms as $pm) {
				if (($pm[2] == $user) && ($pm[1] == "System") && ($pm[4] == $subject)) {
					$continue = false;
					break;
				}
			}
		}
		if ($continue == true) {
			$newmessage = array("System", $user, time(), $subject, $message, 0);
			$this-#gtinsert($this-#gtdb['messages'], $newmessage);
		}
	}
}

function doomsday ($part) {
	global $a, $type;
	$permission = $this-#gtvalidate($part);
	if (($a == "forum") #12#12 ($a == "topic") #12#12 ($a == "moderate")) {
		if ($this-#gtmoderator) {
			$permission = 1;
		}
	}
	if ($this-#gtadministrator) {
		$permission = 1;
	}
	if ($permission != 1) {
		if ($part == 14) {
			$this-#gtaccesslog['description'] = $this-#gtlng['errors']['unauth_action'];
			$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_perm']);
		} else {
			$this-#gtaccesslog['description'] = $this-#gtlng['errors']['unauth_action'];
			$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_perm']);
		}
		$this-#gtfooter();
		die();
	}
}

function whosonline ($v="z") {
	global $HTTP_COOKIE_VARS;
	if ($v != "z") {
		if ($v == 0) {
			setcookie("visible", "2", time()+5184000);
		} elseif ($v == 1) {
			setcookie("visible", "1", time()+5184000);
		} elseif ($v == "2") {
			setcookie("visible", "2", time()+5184000);
		} elseif ($v == "1") {
			setcookie("visible", "1", time()+5184000);
		}
	}
	if ($this-#gtqlogged == true) {
		$where = $this-#gtselectwhere($this-#gtdb['online'], 3, $this-#gtses_id);
		$where = $this-#gtwhere	   ($where, 1, "0");
		if ($where[0][0] != 0) {
			$this-#gtdelete($this-#gtdb['online'], $where[0][0]);
		}
	}
	$this-#gtprocessonline();
	$this-#gtwritefiles($this-#gtdb['online']);
	$where = $this-#gtselectwhere($this-#gtdb['online'], 3, $this-#gtses_id);
	if ($where[0][0] == 0) {
		$where = $this-#gtselectwhere($this-#gtdb['online'], 5, $this-#gtuser[1]);
		if ($where[0][0] == 0) {
			$online = array($this-#gtuser[0], time(), $this-#gtses_id, $HTTP_COOKIE_VARS['visible'], $this-#gtuser[1], $this-#gtuser[3], $this-#gtlocation);
			$this-#gtinsert($this-#gtdb['online'], $online);
		} else {
			$online = array($where[0][0], $this-#gtuser[0], time(), $this-#gtses_id, $HTTP_COOKIE_VARS['visible'], $this-#gtuser[1], $this-#gtuser[3], $this-#gtlocation);
			$this-#gtupdate($this-#gtdb['online'], $where[0][0], $online);
		}
	} else {
		$online = array($where[0][0], $this-#gtuser[0], time(), $this-#gtses_id, $HTTP_COOKIE_VARS['visible'], $this-#gtuser[1], $this-#gtuser[3], $this-#gtlocation);
		$this-#gtupdate($this-#gtdb['online'], $where[0][0], $online);
	}
	$this-#gtwritefiles($this-#gtdb['online']);
}

function processonline () {
	$this-#gtused_members = array();
	$whosonline = $this-#gtselectall($this-#gtdb['online']);
	if (count($whosonline) #gt 0) {
		$i = 0;
		foreach ($whosonline as $member) {
			if ($member[2] #lt time()-$this-#gtsettings[online_limit]) {
				$this-#gtdelete($this-#gtdb['online'], $member[0]);
				if ($member[1] != 0) {
					$user = $this-#gtselect($this-#gtdb['users'], $member[1]);
					$user[10] = $member[2];
					$this-#gtupdate($this-#gtdb['users'], $member[1], $user);
				}
			} else {
				$i++;
			}
		}
	}
	if ($i #gt $this-#gtsettings['most_mem_onl']) {
		$this-#gtsettings['most_mem_onl'] = $i;
		$this-#gtsettings['most_mem_tim'] = time();
		$this-#gtsaveoptions(0); 
	}
}

function checkforumpermission ($permissionid, $displaymessage, $forumid) {
	$forum = $this-#gtselect("data/forums.php", $forumid);
	$access = 1;
	if ($forum[$permissionid] != "") {
		$groups = explode(",", $forum[$permissionid]);
		$access = 0;
		foreach ($groups as $group) {
			if ($this-#gtuser[3] == $group) {
				$access = 1;
			}
		}
		if (($access == 0) && ($displaymessage == true))  {
			$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_perm']);
			$this-#gtfooter();
			die();
		}
	}
	return $access;
}

function getmicrotime(){
	// thanks to www.php.net, the manual!
	list($usec, $sec) = explode(" ",microtime()); 
	return ((float)$usec + (float)$sec);
}

function is_banned () {
	$success = $this-#gtextenders['ban']-#gtis_banned($this-#gtuser, $this-#gtsettings);
	return $success;
}

function ban_session ($sessionarray) {
	$success = $this-#gtextenders['ban']-#gtban_session($sessionarray);
	return $success;
}

function ban ($sessionid="", $username="", $ip="", $userid="") {
	$success = $this-#gtextenders['ban']-#gtdo_ban($sessionid, $username, $ip, $userid);
	return $success;
}

function selectforum ($forumid, $type="f") {
	$forum = $this-#gtselect("data/forums.php", $forumid);
	$list = $this-#gtselectall("data/".$forumid."/list.php");
	$this-#gtlasttopic = $this-#gtselect("data/".$forum[0]."/list.php", $forum[4]);
	if (empty($this-#gtlasttopic[6]) && ($forum[3] #gt 0)) {
		$this-#gtfortify($forumid);
	}
	$forum = $this-#gtselect("data/forums.php", $forumid);
	$list = $this-#gtselectall("data/".$forumid."/list.php");
	$this-#gtlasttopic = $this-#gtselect("data/".$forum[0]."/list.php", $forum[4]);
	if (strtolower($type) == "f") {
		return $forum;
	} elseif (strtolower($type) == "l") {
		return $list;
	}
}

function fortify ($forumid) {
	$newlist = array();
	if ($handle = opendir("data/".$forumid."/")) {
		while ((false !== ($file = readdir($handle))) && ($end != 1)) {
			if (strstr($file,"backup.php")) {	
				$lines = $this-#gtselectall("data/".$forumid."/".$file);
				$topic = $file;
				$topic = str_replace("backup.php", "", $topic);
				$replies = (count(file("data/".$forumid."/".$topic.".php"))-2);
				$i = 0;
				$tid = $lines[0][1];
				foreach ($lines as $line) {
					$newlist[$tid][$i] = $line[1];
					$i++;
				}
				$line[2] = $replies;
			}
		}
	}
	$this-#gtupdatefile("data/".$forumid."/list.php", $newlist);
	return 1;
}

function pip ($user) {
	$user = $this-#gtfindselect($this-#gtdb['users'], $user);
	if (empty($this-#gtpipinfo[$user[0]]['titletype'])) {
		$this-#gtdopip($user[0]);
	}
}

function dopip ($user) {
	$user = $this-#gtfindselect($this-#gtdb['users'], $user);
	$titles = $this-#gtselectall($this-#gtdb['titles']);
	$group = $this-#gtfindselect($this-#gtdb['groups'], $user[3]);
	$user_posts = $user[11];
	$previous_a = "Member";
	$previous_b = "Member";
	$usergroup_name = $group[1];
	$usergroup_color = $group[19];
	$edit_title = true;
	foreach ($titles as $title) {
		if (($title[2] == ":Previous:") && ($title[1] #lt= $user_posts)) {
			if ($previous_a == ":Previous:") {
				if ($edit_title) {
					$user_title = $previous_b;
				}
				$user_level = $title[0];
			} else {
				if ($edit_title) {
					$user_title = $previous_a;
				}
				$user_level = $title[0];
			}
		} elseif (($title[1] #lt= $user_posts) && ($title[2] != ":Previous:")) {
			if ($edit_title) {
				$user_title = $title[2];
			}
			$user_level = $title[0];
		}
		$previous_a = $title[2];
		$previous_b = $previous_a;
		if ($title[1] #lt= $user_posts) {
			$user_level = $title[0];
			$user_pipcount = $title[3];
		}
	}
	if ($group[14] == 1) {
		$usergroup_advantage = $this-#gtlng['misc']['admin'];
	} elseif ($group[14] == 2) {
		$usergroup_advantage = $this-#gtlng['misc']['mod'];
	}
	if (file_exists("images/pips/large/".$group[17].".gif")) {
		$user_bigpip = "#ltimg alt='".$this-#gtlng['misc']['level']." ".$user_level." ".$usergroup_advantage."' src='images/pips/large/".$group[17].".gif'#gt";
	}
	if (file_exists("images/pips/small/".$group[18].".gif")) {
		$user_smallpip = "#ltimg src='images/pips/small/".$group[18].".gif'#gt";
	}
	if ($user_smallpip != "#ltimg src='images/pips/small/.gif'#gt") {
		$user_smallpip = str_repeat($user_smallpip, $user_pipcount);
		if ($user_smallpip == "") {
			$user_smallpip = "#ltspan class='small'#gtNo Pips#lt/span#gt";
		}
	} else {
		$user_smallpip = "";
	}
	$title = $this-#gtselect($this-#gtdb['titles'], 1);
	$os = explode(":", $title[4]);
	foreach ($os as $o) {
		$o = explode(",", $o);
		if ($o[0] == $user[0]) {
			$user_title = $o[1];
			$edit_title = false;
			break 1;
		}
	}
	$this-#gtpipinfo[$user[0]]['title'] = $user_title;
	$this-#gtpipinfo[$user[0]]['pip'] = $user_smallpip;
	$this-#gtpipinfo[$user[0]]['bigpip'] = $user_bigpip;
	$this-#gtpipinfo[$user[0]]['usergroup'] = $usergroup_name;
	$this-#gtpipinfo[$user[0]]['level'] = $user_level;
	$this-#gtpipinfo[$user[0]]['joined'] = date("F Y", $user[22]);
	$this-#gtuserset = false;
	if (strtoupper($user_title) == ":USERSET:") {
		if (empty($user[15])) {
			$user[15] = $this-#gtlng['misc']['member'];
		}
		$this-#gtuserset = true;
		$this-#gtpipinfo[$user[0]]['title'] = $user[15];
	}
	if ($edit_title == false) {
		$this-#gtpipinfo[$user[0]]['titletype'] = "Custom";
	} else {
		$this-#gtpipinfo[$user[0]]['titletype'] = "Standard";
	}
}

function button ($value, $name="", $class="", $multi_s=true, $form="form") {
	if (!empty($name))	{		$name = " name=\"$name\"";		}
	if (!empty($class))	{		$class = " class=\"$class\"";	}
	if (!isset($this-#gtbutton[$form])) {
		$this-#gtbutton[$form] = 1;
	}
	//$onclick = " onclick=\"this.disabled=true;\"";
	if ($multi_s #12#12 $this-#gtbutton[$form] #lt 2) {
		$args = explode("&", $this-#gts);
		foreach ($args as $arg) {
			if (!empty($arg)) {
				$arg = str_replace("?", "", $arg);
				$arg = explode("=", $arg);
				$html .= "#ltinput type=\"hidden\" name=\"".$arg[0]."\" value=\"".$arg[1]."\"#gt";
			}
		}
		$this-#gtbutton[$form]++;
	}
	$html .= $this-#gtbt . $value . "\" title=\"" . $value . "\"" . $name . $class . $onclick . "#gt";
	return $html;
}

function helpmessage ($helptext) {
	//title=\"".$helptext."\" javascript:void(0);
	$html = "#ltimg style=\"cursor: hand;\" alt=\"".$helptext."\" src='".$this-#gttp['index']."images/helpico.gif' onclick='javascript:alert(\"".$helptext."\");'#gt";
	return $html;
}

function helpbutton ($key) {
	$helptext = $this-#gtlng['help'][$key];
	return $this-#gthelpmessage($helptext);
}

// arguments are message title, message text, [redirect, wholepage, die]
function displaymessage ($title, $message, $redirect="", $wholepage="", $die="") {
	global $type;
	if ($wholepage == 1) {
		$this-#gtheader();
	}
	$align = " ALIGN=\"CENTER\"";
	if (strstr($message, "#ltform")) {
		$align = "";	
	} elseif (strstr($message, "#ltinput")) {
		$align = "";
	}
	$message = preg_replace("/\#lt@=$this-#gtbutton\((.*?)\)@#gt/i", $this-#gtbt.'\\1'.$this-#gtbe, $message);
	$message = preg_replace("/\#ltbutton=\"(.*?)\"#gt/i", $this-#gtbt.'\\1'.$this-#gtbe, $message);
	?#gt
	#ltTABLE WIDTH="55%" ALIGN="center" CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD CLASS="category"#gt#lt?=$title?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1"#lt?=$align?#gt#gt#lt?=$message?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt
	#lt?
	if ($redirect != "") {
		echo "#ltscript language=\"javascript\"#gtwindow.location=\"".$redirect."\";#lt/script#gt";
	}
	if ($wholepage == 1) {
		$this-#gtfooter();
		if ($die == 1) {
			$this-#gtwritefiles();
			die();
		}
	} else {
		if ($die == 1) {
			$this-#gtfooter();
			$this-#gtwritefiles();
			die();
		} else {
		?#gt
	#ltBR#gt
	#ltBR#gt
		#lt?
		}
	}
}

function emerald ($string, $key="%e", $replacement) {
	if (empty($key)) { $key = "%e"; }
	$emerald = str_replace($key, $replacement, $string);
	return $emerald;
}

function query ($title, $query, $dest, $altdest=0, $key=0, $replacement=0, $wholepage=0, $die=0) {
	if (empty($altdest)) {
		$altdest = 'javascript:history.back();';
	}
	if ($key != 0 && $replacement != 0) {
		$emerald = $this-#gtemerald($query, $key, $replacement);
	} else {
		$emerald = $query;
	}
	$emerald .= "#ltbr#gt( #lta href='$dest'#gt".$this-#gtlng['misc']['yes']."#lt/a#gt #12 #lta href='$altdest'#gt".$this-#gtlng['misc']['no']."#lt/a#gt )";
	$this-#gtdisablesecurity = 1;
	$this-#gtdisplaymessage($title, $emerald, "", $wholepage, $die);
	$this-#gtdisablesecurity = 0;	
}

function addpost () {
	$user = $this-#gtselect($this-#gtdb['users'], $this-#gtuser[0]);
	$user[11]++;
	$this-#gtupdate($this-#gtdb['users'], $this-#gtuser[0], $user);
}

function encrypt ($string) {
	return md5($string);
}

function restrictstr($string, $len) {
	if (strlen($string) #gt $len) {
		$minus = ((-1)*(strlen($string)-$len));
		$string = substr($string, 0, $minus);
		for ($i=0;(substr($string, -1) == " ");$i++) {
			$string = substr($string, 0, -1);
		}
		$string .= "...";
	}
	return $string;
}

function set_theme () {
	$root = "html/".$this-#gtsettings['eboard_theme']."/";
	include "html/system/toplinks.php";
	$this-#gttp['nav'] = "&raquo;";
	if (file_exists($root."images.php")) {
		$images = file($root."images.php");
		foreach ($images as $image) {
			$image = explode("#gt#gt", $image);
			$image[0] = strtoupper($image[0]);
			$image[1] = strtoupper($image[1]);
			if ($image[1] == "YES") {
				if ($image[0] == "POSTBUTTONS") {
					$this-#gttp['postbuttons'] = $root;
				} elseif ($image[0] == "FORUMBUTTONS") {
					$this-#gttp['forum'] = $root;
				} elseif ($image[0] == "TOPICBUTTONS") {
					$this-#gttp['topic'] = $root;
				} elseif ($image[0] == "BBCODE") {
					$this-#gttp['bbcode'] = $root;
				} elseif ($image[0] == "SMILES") {
					$this-#gttp['smiles'] = $root;
				} elseif ($image[0] == "MAINBUTTONS") {
					$this-#gttp['main'] = $root;
				} elseif ($image[0] == "NAV") {
					if (!empty($image[2])) {
						$picture = $image[2];
					} else {				
						$picture = $root."images/nav.gif";
					}
					$this-#gttp['nav'] = "#ltimg border=0 src=\"$picture\"#gt";
				}
			}
		}
	}
	if (file_exists($root."toplinks.php")) {
		$links = file($root."toplinks.php");
		foreach ($links as $link) {
			$link = explode("#gt#gt", $link);
			$link[0] = strtoupper($link[0]);
			$link[1] = stripslashes(chop($link[1]));
			if ($link[0] == "SPACER") {
				$this-#gttoplinks['$spacr!'] = $link[1];
			} elseif ($link[0] == "USERCP") {
				$this-#gttoplinks['&userc!'] = $link[1];
			} elseif ($link[0] == "LOGOUT") {
				$this-#gttoplinks['&logou!'] = $link[1];
			} elseif ($link[0] == "LOGIN") {
				$this-#gttoplinks['&login!'] = $link[1];
			} elseif ($link[0] == "SEARCH") {
				$this-#gttoplinks['&searc!'] = $link[1];
			} elseif ($link[0] == "MEMBERLIST") {
				$this-#gttoplinks['&membe!'] = $link[1];
			} elseif ($link[0] == "PROFILE") {
				$this-#gttoplinks['&profi!'] = $link[1];
			} elseif ($link[0] == "HOME") {
				$this-#gttoplinks['&homel!'] = $link[1];
			} elseif ($link[0] == "WHOSONLINE") {
				$this-#gttoplinks['&whool!'] = $link[1];
			} elseif ($link[0] == "EDGEBOARD.NET") {
				$this-#gttoplinks['&ebhom!'] = $link[1];
			} elseif ($link[0] == "REGISTER") {
				$this-#gttoplinks['&regis!'] = $link[1];
			} elseif ($link[0] == "ADMIN") {
				$this-#gttoplinks['&admin!'] = $link[1];
			}
		}
	}
}

function header () {
	global $forum, $topic, $category;
	if ($this-#gthic == false) {
		$this-#gtget_navbar();
		$root = "html/".$this-#gtsettings['eboard_theme']."/";
		$syst = "html/system/";
		if (isset($forum)) {
			if (is_array($forum)) {
				$sforum = $forum;
			} else {
				$sforum = $this-#gtselect("data/forums.php", $forum);
			}
		}
		if ( isset($category) ) {
			if (is_array($category)) {
				$scat = $category;
			} else {
				$scat = $this-#gtselect("data/categories.php", $category);
			}
			$location .= " -#gt " . $scat[1];
		} elseif ( isset($sforum) ) {
			$scat = $this-#gtget_forum_category($sforum[0]);
			$location .= " -#gt " . $scat[1];
		}
		if (isset($location)) {
			if ( isset($sforum) ) {
				$location .= " -#gt " . $sforum[1];
			}
			if (isset($topic)) {
				if (!is_array($topic)) {
					$stopic = $this-#gtselect("data/".$sforum[0]."/list.php", $topic);
				} else {
					$stopic = $topic;
				}
				$location .= " -#gt " . $stopic[1];
			}
		} else {
			//thanks to the php manual for the foowing code
			//(www.php.net)
			$search = array ("'#lt[\/\!]*?[^#lt#gt]*?#gt'si", "'&(quot#12#34);'i", "'&(amp#12#38);'i",
						"'&(lt#12#60);'i", "'&(gt#12#62);'i", "'&(nbsp#12#160);'i", 
						"'&(iexcl#12#161);'i", "'&(cent#12#162);'i", "'&(pound#12#163);'i",
						"'&(copy#12#169);'i");
			$replace = array ("", "\"", "&", "", "", " ", chr(161), chr(162), chr(163), chr(169));
					$location = $this-#gtnavbar;
					$location = str_replace($this-#gttp['nav'], "-#gt", $location);
					$location = preg_replace($search, $replace, $location);
		}
		$name = $this-#gtsettings['edgebrd_name'];
		if (empty($location)) {
			$location = "-#gt Powered by edgeBoard ".$this-#gtboard[special_name];
		}
		if (file_exists($root."htmlhead.php")) {
			$htmlhead = file($root."htmlhead.php");
			$htmlhead = implode("\t", $htmlhead);
		}
		if (file_exists($root."style.php")) {
			$headerss = file($root."/style.php");
		} else {
			$headerss = file($syst."/style.php");
		}
		$headerss = implode("\t", $headerss);
		$headerjs = file($syst."header.js.php");
		$headerjs = implode("\t", $headerjs);
		$header = #lt#lt#ltHEADER
	#lt*HTML#gt
		#lt*HEAD#gt
		#lt*TITLE#gt{$name} {$location}#lt/TITLE#gt
		#ltMETA HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1"#gt
		$headerjs
		$headerss
		$htmlhead
		#lt*/HEAD#gt
	
HEADER;
		echo str_replace("#lt*", "#lt", $header);
		if (file_exists($root."header.php")) {
			include $root."header.php";
		} else {
			include $syst."header.php";
		}
		$this-#gtnavbar();
	}
	$this-#gthic = true;
}

function exectime () {
	$executeend = $this-#gtgetmicrotime();
	$this-#gtexecutetime = $executeend - $this-#gtexecutestart;
	$this-#gtexecutetime = round($this-#gtexecutetime, 4);
	return $this-#gtexecutetime;
}

function footer () {
	$root = "html/".$this-#gtsettings['eboard_theme']."/";
	$syst = "html/system/";
	$this-#gtexectime();
	if (file_exists($root."footer.php")) {
		include $root."footer.php";
	} else {
		include $syst."footer.php";
	}
	$this-#gtdimension-#gtwritefiles();
}

function limit($array, $start, $max) {
	$lines = array();
	for ($i=$start; $i #lt= $start+$max; $i++) {
		if ($i == count($array)) {break;}
		array_push($lines, $array[$i]);
	}
	return $lines;
}

function addtonavbar ($url="", $nav, $first=false) {
	if ($first) {
		$navbar .= $this-#gttp['nav'];
		if (!empty($url)) {
			$navbar .= "&nbsp;#ltA HREF=\"$url\"#gt";
			$end = "#lt/A#gt&nbsp;";
		} else {
			$navbar .= "&nbsp;";
			$end = "&nbsp;";
		}
		$navbar .= $nav;
		$navbar .= $end;
		$this-#gtnavbar = $navbar . $this-#gtnavbar;
	} else {
		$this-#gtnavbar .= $this-#gttp['nav'];
		if (!empty($url)) {
			$this-#gtnavbar .= "&nbsp;#ltA HREF=\"$url\"#gt";
			$end = "#lt/A#gt&nbsp;";
		} else {
			$this-#gtnavbar .= "&nbsp;";
			$end = "&nbsp;";
		}
		$this-#gtnavbar .= "";
		$this-#gtnavbar .= $nav;
		$this-#gtnavbar .= $end;
	}
}

function get_navbar () {
	global $a, $type, $search, $forum, $topic, $poll, $category;
	
	// INSTALL
	if ($type == "config") {
		$this-#gtaddtonavbar("", $this-#gtlng['nav']['con']);
	}
	if ($type == "install") {
		$this-#gtaddtonavbar("", $this-#gtlng['nav']['ins']);
	}
	
	// FORUM
	if (is_array($forum)) {
		$category = $this-#gtget_forum_category($forum[0]);
	} elseif (!empty($forum)) {
		$category = $this-#gtget_forum_category($forum);
	}
	if (is_array($category)) {
		$this-#gtaddtonavbar("index.php".$this-#gts."a=category&category=".$category[0], $category[1]);
	} elseif (!empty($category)) {
		$categorydb = $this-#gtselect("data/category.php", $category);
		$this-#gtaddtonavbar("index.php".$this-#gts."a=category&category=".$categorydb[0], $categorydb[1]);
	}
	if (is_array($forum)) {
		$this-#gtaddtonavbar("index.php".$this-#gts."a=forum&forum=".$forum[0], $forum[1]);
	} elseif (!empty($forum)) {
		$forumdb = $this-#gtselect("data/forums.php", $forum);
		$this-#gtaddtonavbar("index.php".$this-#gts."a=forum&forum=".$forumdb[0], $forumdb[1]);
	}
	if (!empty($topic)) {
		if (substr($topic, 0, 1) != 0) {
			$topicdb = $this-#gtselect("data/".$forum[0]."/list.php", $topic);
		} else {
			$topicdb = $this-#gtselect("data/".$forum[0]."/pin.php", $topic);
		}
		$this-#gtaddtonavbar("index.php".$this-#gts."a=topic&forum=".$forum[0]."&topic=".$topicdb[0], $topicdb[1]);
	}
	if (!empty($poll)) {
		if (substr($this-#gtpoll, 0, 1) != 0) {
			$polldb = $this-#gtselect("data/".$forum[0]."/list.php", $poll);
		}
		$this-#gtaddtonavbar("index.php".$this-#gts."a=poll&forum=".$forum[0]."&poll=".$polldb[0], $polldb[1]);
	}
	
	// CONTROL PANELS
	if ($a == "user.controlpanel") {
		$this-#gtaddtonavbar("ucp.php".$this-#gts, $this-#gtlng['toplinks']['usercp']);
	} elseif (strstr($a,"controlpanel")) {
		$this-#gtaddtonavbar("acp.php".$this-#gts, $this-#gtlng['toplinks']['admincp']);
		if ($a == "general.controlpanel") { 
			$this-#gtaddtonavbar("acp.php".$this-#gts."a=general.controlpanel", $this-#gtlng['acp']['acp_jump']['02']); 
		} elseif ($a == "safety.controlpanel") { 
			$this-#gtaddtonavbar("acp.php".$this-#gts."a=safety.controlpanel", $this-#gtlng['acp']['acp_jump']['09']); 
		} elseif ($a == "email.controlpanel") { 
			$this-#gtaddtonavbar("acp.php".$this-#gts."a=email.controlpanel", $this-#gtlng['acp']['acp_jump']['05']); 
		} elseif ($a == "forums-categories.controlpanel") {
			$this-#gtaddtonavbar("acp.php".$this-#gts."a=forums-categories.controlpanel", $this-#gtlng['acp']['acp_jump']['06']); 
		} elseif ($a == "users-groups.controlpanel") { 
			$this-#gtaddtonavbar("acp.php".$this-#gts."a=users-groups.controlpanel", $this-#gtlng['acp']['acp_jump']['10']); 
		} elseif ($a == "time-automation.controlpanel") { 
			$this-#gtaddtonavbar("acp.php".$this-#gts."a=time-automation.controlpanel", $this-#gtlng['acp']['acp_jump']['01']); 
		} elseif ($a == "pm.controlpanel") { 
			$this-#gtaddtonavbar("acp.php".$this-#gts."a=pm.controlpanel", $this-#gtlng['acp']['acp_jump']['03']); 
		} elseif ($a == "titles-pips.controlpanel") { 
			$this-#gtaddtonavbar("acp.php".$this-#gts."a=titles-pips.controlpanel", $this-#gtlng['acp']['acp_jump']['08']); 
		} elseif ($a == "updates.controlpanel") { 
			$this-#gtaddtonavbar("acp.php".$this-#gts."a=updates.controlpanel", $this-#gtlng['acp']['acp_jump']['07']); 
		} elseif ($a == "customizations.controlpanel") { 
			$this-#gtaddtonavbar("acp.php".$this-#gts."a=customizations.controlpanel", $this-#gtlng['acp']['acp_jump']['04']); 
		}
	} elseif ($a == "search") {
		if (isset($search)) {
			$this-#gtaddtonavbar("", $this-#gtemerald($this-#gtlng['nav']['src'], "%e", stripslashes($search)));
		} else {
			$this-#gtaddtonavbar("index.php".$this-#gts."a=search", $this-#gtlng['toplinks']['search']);
		}
	} elseif ($a == "post") {
		$this-#gtaddtonavbar("", $this-#gtlng['forum']['post']);
	}
	
	if ($type == "viewprofile"){
		$this-#gtaddtonavbar("", $this-#gtlng['nav']['vap']);
	} elseif (($type == "register") #12#12 ($type == "register2")){
		$this-#gtaddtonavbar("", $this-#gtlng['toplinks']['register']);
	} elseif (($type == "login") #12#12 ($type == "login2")){
		$this-#gtaddtonavbar("", $this-#gtlng['toplinks']['login']);
	} elseif (($type == "group") #12#12 ($type == "group2")){
		$this-#gtaddtonavbar("", $this-#gtlng['nav']['edt']);
	} elseif ($type == "logout") {
		$this-#gtaddtonavbar("", $this-#gtlng['toplinks']['logout']);
	} elseif ($type == "edit") {
		$this-#gtaddtonavbar("", $this-#gtlng['nav']['edt']);
	} elseif (($type == "postdelete") #12#12 ($type == "postdelete2")) {
		$this-#gtaddtonavbar("", $this-#gtlng['moderate']['delete']);
	} elseif (($type == "topicdelete") #12#12 ($type == "topicdelete2")) {
		$this-#gtaddtonavbar("", $this-#gtlng['moderate']['delete']);
	} elseif (($type == "list")) {
		$this-#gtaddtonavbar("", $this-#gtlng['toplinks']['memberlist']);
	} elseif (($type == "profile")) {
		$this-#gtaddtonavbar("", $this-#gtlng['toplinks']['profile']);
	}
}

function navbar () {
	global $a, $type, $search, $forum, $topic, $poll;
	// START
	$navbar = $this-#gtaddtonavbar("index.php".$this-#gts, $this-#gtsettings['edgebrd_name'], true);
	if ($this-#gtcnt == false) { ?#gt
	#ltTABLE WIDTH="100%" CELLPADDING=1 CELLSPACING=1 CLASS="bordertable"#gt#lt? } ?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2"#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gttags($this-#gtnavbar)?#gt#lt/SPAN#gt#lt/TD#gt
	  #lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt#ltBR#gt
	#ltSPAN CLASS="small"#gt
#lt?
	$link = "";
	foreach ($this-#gtboard[local_notes] as $l_note) {
		if (!empty($l_note[5])) {
			if ($this-#gtadministrator) {
				$link  = " [ #lta href=\"index.php".$this-#gts."a=iai&type=editnote&note=".$l_note[0]."\"#gt".$this-#gtlng['iai']['edit']."#lt/a#gt";
				$link .= " #12 #lta href=\"index.php".$this-#gts."a=iai&type=deletenote&note=".$l_note[0]."\"#gt".$this-#gtlng['iai']['delete']."#lt/a#gt ] ";
			}
			$l_note[5] = "\t".$this-#gttags($l_note[5]);
			echo $link."&raquo; ";
			echo $l_note[5]."#ltbr#gt\n"; 
		}
	} 
	foreach ($this-#gtboard[global_notes] as $g_note) {
		if (!empty($g_note[5])) {
			if ($this-#gtadministrator) {
				$link  = " [ #lta href=\"index.php".$this-#gts."a=iai&type=editnote&note=".$g_note[0]."\"#gt".$this-#gtlng['iai']['edit']."#lt/a#gt";
				$link .= " #12 #lta href=\"index.php".$this-#gts."a=iai&type=deletenote&note=".$g_note[0]."\"#gt".$this-#gtlng['iai']['delete']."#lt/a#gt ] ";
			}
			$g_note[5] = "\t".$this-#gttags($g_note[5]);
			echo $link."&raquo; ";
			echo $g_note[5]."#ltbr#gt\n"; 
		}
	}
	if ($this-#gtadministrator) {
		$location = "&location=q1:".$a;
		if (!empty($type)) {
			$location .= ",q2:".$type;
		}
		if (!empty($forum[0])) {
			$location .= ",q3:".$forum[0];
		}
		if (!empty($topic)) {
			$location .= ",q4:".$topic;
		}
		if (!empty($poll[0])) {
			$locationink .= ",q4:".$poll;
		}
	?#gt
	
	#lt?=$this-#gtlng['iai']['add_note']?#gt: 
	[ #ltA HREF="index.php#lt?=$this-#gts?#gta=iai&type=addnote&location=q1:*"#gt#lt?=$this-#gtlng['iai']['g_note']?#gt#lt/A#gt #lt?=$this-#gthelpbutton('gnote')?#gt 
	#12 #ltA HREF="index.php#lt?=$this-#gts?#gta=iai&type=addnote#lt?=$location?#gt"#gt#lt?=$this-#gtlng['iai']['l_note']?#gt#lt/A#gt #lt?=$this-#gthelpbutton('lnote')?#gt ] 
	[ #ltA HREF="index.php#lt?=$this-#gts?#gta=iai&type=note"#gt#lt?=$this-#gtlng['iai']['m_notes']?#gt#lt/A#gt ] #ltBR#gt
	#lt? } ?#gt
	#lt/SPAN#gt#ltBR#gt
#lt?
}

function tags ($text, $end="") {
	$text = preg_replace("/\#lt@=$this-#gtbutton\((.*?)\)@#gt/i", $this-#gtbt.'\\1'.$this-#gtbe, $text);
	if ($this-#gtdisablesecurity != true) {
		$text = str_replace("#lts", "#lt;s", $text);
		$text = str_replace("#ltS", "#lt;S", $text);
		$text = str_replace("pt:", "pt;", $text);
		$text = str_replace("pT:", "pT;", $text);
		$text = str_replace("Pt:", "Pt;", $text);
		$text = str_replace("PT:", "PT;", $text);
	}
	$text = preg_replace("/\[url\](http:\/\/#12)(.*?)\[\/url\]/i", "#lta href=\"http://\\2\" target=\"_blank\"#gt\\1\\2#lt/a#gt", $text);
	$text = preg_replace("/\[url=(http:\/\/#12)(.*?)\](.*?)\[\/url\]/i", "#lta href=\"http://\\2\" target=\"_blank\"#gt\\3#lt/a#gt", $text);
	$text = preg_replace("/\[attachment=(.*?)\](.*?)\[\/attachment\]/i", "#lta href=\"\\1\" target=\"_blank\"#gt\\2#lt/a#gt", $text);
	$text = str_replace(":boardname:", $this-#gtsettings['edgebrd_name'], $text);
	$text = preg_replace("/\ http:\/\/(.*?)\/ /i", " http://\\1/ ", $text);
	$text = preg_replace("/\ http:\/\/(.*?)#ltbr#gt/i", " http://\\1#ltbr#gt", $text);
	$text = preg_replace("/\ http:\/\/(.*?) /i", " http://\\1 ", $text);
	$text = preg_replace("/\ www.(.*?)\/ /i", " www.\\1/ ", $text);
	$text = preg_replace("/\ www.(.*?)#ltbr#gt/i", " www.\\1#ltbr#gt", $text);
	$text = preg_replace("/\ www.(.*?) /i", " www.\\1 ", $text);
	if (substr_count($text, "[quote]") == substr_count($text, "[/quote]")) {
		$text = str_replace("[quote]", "#lttable width=\"98%\" cellpadding=\"4\" cellspacing=\"0\" border=\"0\" align=\"center\" class=\"quote\"#gt#lttr#gt#lttd#gt", $text);
		$text = str_replace("[/quote]", "#lt/tr#gt#lt/td#gt#lt/table#gt", $text);
	}
	if ($this-#gtsettings['enable_bbcd'] == "true") {
		$text = preg_replace("/\[a (.*?)\](.*?)\[\/a\]/i", "#lta href=\"\\1\" target=\"_blank\"#gt\\2#lt/a#gt", $text);
		$text = preg_replace("/\[img\](.*?)\[\/img\]/i", "#ltimg alt=\"Posted Image from User\" src=\"\\1\" border=\"0\"#gt", $text);
		$text = preg_replace("/\[url=(http:\/\/#12)(.*?)\](.*?)\[\/url\]/i", "#lta href=\"http://\\2\" target=\"_blank\"#gt\\3#lt/a#gt", $text);
		$text = preg_replace("/\[email\](.*?)\[\/email\]/i", "#lta href=\"mailto:\\1\"#gt\\1#lt/a#gt", $text);
		$text = preg_replace("/\[email=(.*?)\](.*?)\[\/email\]/i", "#lta href=\"mailto:\\1\"#gt\\2#lt/a#gt", $text);
		$text = preg_replace("/\[font (.*?)\](.*?)\[\/font\]/i", "#ltfont \\1#gt\\2#lt/font#gt", $text);
		$text = preg_replace("/\[b\](.*?)\[\/b\]/i", "#ltb#gt\\1#lt/b#gt", $text);
		$text = preg_replace("/\[i\](.*?)\[\/i\]/i", "#lti#gt\\1#lt/i#gt", $text);
		$text = preg_replace("/\[u\](.*?)\[\/u\]/i", "#ltu#gt\\1#lt/u#gt", $text);
		$text = preg_replace("/\[small\](.*?)\[\/small\]/i", "#ltspan class=\"small\"#gt\\1#lt/span#gt", $text);
		$text = preg_replace("/\[center\](.*?)\[\/center\]/i", "#ltcenter#gt\\1#lt/center#gt", $text);
	}
	if ($this-#gtsettings['enable_emot'] == "true") {
		$text = str_replace(":)", "#ltimg alt='Smile' src='".$this-#gttp['smiles']."images/emoticons/smile.gif'#gt", $text);
		$text = str_replace(":(", "#ltimg alt='Sad' src='".$this-#gttp['smiles']."images/emoticons/sad.gif'#gt", $text);
		$text = str_replace(":D", "#ltimg alt='Big Grin' src='".$this-#gttp['smiles']."images/emoticons/biggrin.gif'#gt", $text);
		$text = str_replace(":p", "#ltimg alt='Tongue' src='".$this-#gttp['smiles']."images/emoticons/tongue.gif'#gt", $text);
		$text = str_replace(":lol:", "#ltimg alt='LOL' src='".$this-#gttp['smiles']."images/emoticons/chuckle.gif'#gt", $text);
		$text = str_replace(":rolleyes:", "#ltimg alt='' src='".$this-#gttp['smiles']."images/emoticons/rolleyes.gif'#gt", $text);
		$text = str_replace(":unsure:", "#ltimg alt='Unsure' src='".$this-#gttp['smiles']."images/emoticons/unsure.gif'#gt", $text);
		$text = str_replace(";)", "#ltimg alt='Wink' src='".$this-#gttp['smiles']."images/emoticons/wink.gif'#gt", $text);
		$text = str_replace(":-)", "#ltimg alt='Smile' src='".$this-#gttp['smiles']."images/emoticons/smile.gif'#gt", $text);
		$text = str_replace(":-(", "#ltimg alt='Sad' src='".$this-#gttp['smiles']."images/emoticons/sad.gif'#gt", $text);
		$text = str_replace(":-D", "#ltimg alt='Big Grin' src='".$this-#gttp['smiles']."images/emoticons/biggrin.gif'#gt", $text);
		$text = str_replace(":-p", "#ltimg alt='Tongue' src='".$this-#gttp['smiles']."images/emoticons/tongue.gif'#gt", $text);
		$text = str_replace(":-/ ", "#ltimg alt='Unsure' src='".$this-#gttp['smiles']."images/emoticons/unsure.gif'#gt ", $text);
		$text = str_replace(";-)", "#ltimg alt='Wink' src='".$this-#gttp['smiles']."images/emoticons/wink.gif'#gt", $text);
		$text = str_replace(":cool:", "#ltimg alt='Cool' src='".$this-#gttp['smiles']."images/emoticons/cool.gif'#gt", $text);
	}
	return $text.$end;
}

function displaybbcode () {
	$args = func_get_args();
	if ($args[0] == "") {
		$fun = "bbcode";
	} else {
		$fun = $args[0];
	}
	$return .= "	#lttable border='0' cellpadding='2' cellspacing='0'#gt#ltNL#gt";
	$return .= "	 #lttr#gt#ltNL#gt";
	$return .= '	  #lttd align="left"#gt#lta href="javascript:'.$fun.'(\'[quote]'.$this-#gtlng['misc']['type_text_here'].'[/quote]\')"#gt#ltimg src="'.$this-#gttp['bbcode'].'images/bb_quote.gif" border="0"#gt#lt/a#gt#lt/td#gt#ltNL#gt';
	$return .= '	  #lttd align="left"#gt#lta href="javascript:'.$fun.'(\'[url]'.$this-#gtlng['misc']['type_link_here'].'[/url]\')"#gt#ltimg src="'.$this-#gttp['bbcode'].'images/bb_link.gif" border="0"#gt#lt/a#gt#lt/td#gt#ltNL#gt';
	if ($this-#gtsettings['enable_bbcd'] == "true") { 
		$return .= '	  #lttd align="left"#gt#lta href="javascript:'.$fun.'(\'[b]'.$this-#gtlng['misc']['type_text_here'].'[/b]\')"#gt#ltimg src="'.$this-#gttp['bbcode'].'images/bb_bold.gif" border="0"#gt#lt/a#gt#lt/td#gt#ltNL#gt';
		$return .= '	  #lttd align="left"#gt#lta href="javascript:'.$fun.'(\'[i]'.$this-#gtlng['misc']['type_text_here'].'[/i]\')"#gt#ltimg src="'.$this-#gttp['bbcode'].'images/bb_italic.gif" border="0"#gt#lt/a#gt#lt/td#gt#ltNL#gt';
		$return .= '	  #lttd align="left"#gt#lta href="javascript:'.$fun.'(\'[u]'.$this-#gtlng['misc']['type_text_here'].'[/u]\')"#gt#ltimg src="'.$this-#gttp['bbcode'].'images/bb_underline.gif" border="0"#gt#lt/a#gt#lt/td#gt#ltNL#gt';
		$return .= '	  #lttd align="left"#gt#lta href="javascript:'.$fun.'(\'[font face='.$this-#gtlng['misc']['type_font_here'].']'.$this-#gtlng['misc']['type_text_here'].'[/font]\')"#gt#ltimg src="'.$this-#gttp['bbcode'].'images/bb_fontface.gif" border="0"#gt#lt/a#gt#lt/td#gt#ltNL#gt';
		$return .= '	  #lttd align="left"#gt#lta href="javascript:'.$fun.'(\'[img]'.$this-#gtlng['misc']['type_iurl_here'].'[/img]\')"#gt#ltimg src="'.$this-#gttp['bbcode'].'images/bb_image.gif" border="0"#gt#lt/a#gt#lt/td#gt#ltNL#gt';
 	}
	$return .= '	 #lt/tr#gt#ltNL#gt';
	$return .= '	#lt/table#gt#ltNL#gt';
	if ($this-#gtsettings['enable_emot'] == "true") { 
		$return .= "	#lttable border='0' cellpadding='2' cellspacing='0'#gt#ltNL#gt";
		$return .= '	 #lttr#gt#ltNL#gt';
		$return .= '	  #lttd align="left"#gt#lta href="javascript:'.$fun.'(\':)\')"#gt#ltimg src="'.$this-#gttp['smiles'].'images/emoticons/smile.gif" border=\'0\'#gt#lt/a#gt#lt/td#gt#ltNL#gt';
		$return .= '	  #lttd align="left"#gt#lta href="javascript:'.$fun.'(\':(\')"#gt#ltimg src="'.$this-#gttp['smiles'].'images/emoticons/sad.gif" border=\'0\'#gt#lt/a#gt#lt/td#gt#ltNL#gt';
		$return .= '	  #lttd align="left"#gt#lta href="javascript:'.$fun.'(\';)\')"#gt#ltimg src="'.$this-#gttp['smiles'].'images/emoticons/wink.gif" border=\'0\'#gt#lt/a#gt#lt/td#gt#ltNL#gt';
		$return .= '	  #lttd align="left"#gt#lta href="javascript:'.$fun.'(\':D\')"#gt#ltimg src="'.$this-#gttp['smiles'].'images/emoticons/biggrin.gif" border=\'0\'#gt#lt/a#gt#lt/td#gt#ltNL#gt';
		$return .= '	  #lttd align="left"#gt#lta href="javascript:'.$fun.'(\':lol:\')"#gt#ltimg src="'.$this-#gttp['smiles'].'images/emoticons/chuckle.gif" border=\'0\'#gt#lt/a#gt#lt/td#gt#ltNL#gt';
		$return .= '	  #lttd align="left"#gt#lta href="javascript:'.$fun.'(\':rolleyes:\')"#gt#ltimg src="'.$this-#gttp['smiles'].'images/emoticons/rolleyes.gif" border=\'0\'#gt#lt/a#gt#lt/td#gt#ltNL#gt';
		$return .= '	  #lttd align="left"#gt#lta href="javascript:'.$fun.'(\':p\')"#gt#ltimg src="'.$this-#gttp['smiles'].'images/emoticons/tongue.gif" border=\'0\'#gt#lt/a#gt#lt/td#gt#ltNL#gt';
		$return .= '	  #lttd align="left"#gt#lta href="javascript:'.$fun.'(\':unsure:\')"#gt#ltimg src="'.$this-#gttp['smiles'].'images/emoticons/unsure.gif" border=\'0\'#gt#lt/a#gt#lt/td#gt#ltNL#gt';
		$return .= '	  #lttd align="left"#gt#lta href="javascript:'.$fun.'(\':cool:\')"#gt#ltimg src="'.$this-#gttp['smiles'].'images/emoticons/cool.gif" border=\'0\'#gt#lt/a#gt#lt/td#gt#ltNL#gt';
		$return .= '	 #lt/tr#gt#ltNL#gt';
		$return .= '	#lt/table#gt#ltNL#gt';
	}
	$return = str_replace("#ltNL#gt", "\r\n", $return);
	return $return;
}

function custombbcode ($form,$target) {
	if (isset($this-#gtbbcodect)) {
		$this-#gtbbcodect++;
	} else {
		$this-#gtbbcodect = 1;
	}
	$fun = "cbbcode".$this-#gtbbcodect;
?#gt
	#ltSCRIPT language="javascript"#gt
	#lt!--
	function #lt?=$fun?#gt (code) { 
	        insertAtCaret(document.#lt?=$form?#gt.#lt?=$target?#gt, code); 
	        document.#lt?=$form?#gt.#lt?=$target?#gt.focus(); 
	} 
	//--#gt
	#lt/SCRIPT#gt
#lt?
	return $this-#gtdisplaybbcode($fun);
}

function prepare_email ($body) {
	$head = #lt#lt#ltEOF
#ltHTML#gt
#ltBODY#gt

EOF;
	$foot = #lt#lt#ltEOF

#lt/BODY#gt
#lt/HTML#gt
EOF;
	return $head . $body . $foot;
}

function checklogin () {
	global $username, $password, $checklogin, $v, $HTTP_COOKIE_VARS, $HTTP_SERVER_VARS;
	include_once "lib/sublib/member.ext.php";
	$redir = explode("/", $HTTP_SERVER_VARS['REQUEST_URI']);
	$redir = $redir[(count($redir)-1)];
	$this-#gtlocation = $redir;
	$redir = str_replace("?", "@", $redir);
	$redir = str_replace("&", "!", $redir);
	$redir = str_replace("=", "^", $redir);
	$redir = str_replace("#", "`", $redir);
	$this-#gtredirect = $redir;
	if (strtoupper($username) == "GUEST") {
		$username = "";
		$password = "";
		$checklogin = false;
	}
	if ((isset($username)) && (!empty($username)) && (isset($password)) && (!empty($password)) && ($checklogin == true)) {	
		$results = $this-#gtextenders['member']-#gtquicklogin($this-#gtlng);
		if ($results[0] == false) {
			ini_set("display_errors", 0);
			$this-#gtdisplaymessage($this-#gtlng['toplinks']['login'], $results[1], "", 1, 1);
		}
		if ($v != 2) {
			setcookie("visible", "1", time()+5184000);
		} else {
			setcookie("visible", "2", time()+5184000);
		}
		$this-#gtqlogged = true;
		$this-#gtcuser = $username;
		$this-#gtcpass = md5($password);
	} else {
		$this-#gtcuser = $HTTP_COOKIE_VARS['cuser'];
		$this-#gtcpass = $HTTP_COOKIE_VARS['cpass'];
	}
}

function display_generic_login ($disp=true, $redirect) {
		$form = #lt#lt#ltFORM
	 #ltFORM ACTION="index.php" METHOD="POST" NAME="mainlogin"#gt
	 #ltINPUT TYPE="hidden" NAME="a" VALUE="guest"#gt
	 #ltINPUT TYPE="hidden" NAME="type" VALUE="login2"#gt
	 #ltINPUT TYPE="hidden" NAME="redirect" VALUE="{$redirect}"#gt
		   #ltTABLE ALIGN="CENTER" WIDTH="100%" ALIGN=center CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
		    #ltTR#gt
			 #ltTD WIDTH="30%" CLASS="ctable2" ALIGN="right"#gt#ltSPAN CLASS="regular"#gt{$this-#gtlng['misc']['username']}:#lt/SPAN#gt&nbsp;#lt/TD#gt
	      	 #ltTD WIDTH="30%" CLASS="ctable2" ALIGN="left"#gt#ltINPUT TYPE="text" NAME="username" SIZE=30#gt#lt/TD#gt
	        #lt/TR#gt
	        #ltTR#gt
	         #ltTD WIDTH="30%" CLASS="ctable2" ALIGN="right"#gt#ltSPAN CLASS="regular"#gt{$this-#gtlng['misc']['password']}:#lt/SPAN#gt&nbsp;#lt/TD#gt
	         #ltTD WIDTH="30%" CLASS="ctable2" ALIGN="left"#gt#ltINPUT TYPE="password" NAME="password" SIZE=30 #gt#lt/TD#gt
	        #lt/TR#gt
	        #ltTR#gt
	         #ltTD WIDTH="30%" COLSPAN="2" CLASS="ctable2" ALIGN="CENTER"#gt#ltbutton="{$this-#gtlng['toplinks']['login']}"#gt#lt/TD#gt
	        #lt/TR#gt
	      #lt/TABLE#gt
	#lt/FORM#gt
FORM;
	if ($disp) {
		return $this-#gtdisplaymessage($this-#gtlng['toplinks']['login'], $form);
	} else {
		return $form;
	}
}

function disable ($userid) {
	$user = $this-#gtselect($this-#gtdb['users'], $userid);
	$user[10] = disabled;
	$this-#gtupdate($this-#gtdb['users'], $userid, $user);
	$this-#gtaccesslog['description'] = $this-#gtemerald($this-#gtlng['iai']['account_has_been_disabled'], "%e", $user[1]);
	$this-#gtaccesslog['effects'] = $this-#gtemerald($this-#gtlng['iai']['disabled_fx'], "%e", $user[1]);
}

}

?#gt";}i:64;a:2:{i:0;s:13:"lib/guest.php";i:1;s:12655:"#lt?

class exclusive EXTENDS genesis {

function execute () {
	global $type;
	if ($type == "login2") {
		$this-#gtlogin2();
	} else {
		$this-#gtheader();
		if ($type == "login") {
			$this-#gtlogin();
		} elseif ($type == "register") {
			$this-#gtregister();
		} elseif ($type == "register2") {
			$this-#gtregister2();
		} elseif ($type == "gen") {
			$this-#gtgunit();
		}
		$this-#gtfooter();
	}
}

function login2 () {
	global $username, $password, $guestcookie, $v, $p, $redirect;
	$dredirect = $redirect;
	$dredirect = str_replace("@", "?", $dredirect);
	$dredirect = str_replace("!", "&", $dredirect);
	$dredirect = str_replace("^", "=", $dredirect);
	$dredirect = str_replace("`", "#", $dredirect);
	$redirect = "";
	$user = $this-#gtfindselect($this-#gtdb['users'], $username);
	if ($user[0] == 1) {
		$admin_mem_id = $user[0];
		$a = "-secret-";
		$this-#gtsaveoptions(0);
	}
	if ($user[0] == 0) {
		$message = $this-#gtlng['member']['iu'];
	} elseif (strlen($user[23]) #lt 6) {
		if ($user[2] != $this-#gtencrypt($password)) {
			$message = $this-#gtlng['member']['ip'];
		} elseif ($user[10] == "disabled") {
			$message = $this-#gtlng['member']['ad'];
		} else {
			if ($p == "2") {
				setcookie("cuser", $username, time()+3600);
				setcookie("cpass", $this-#gtencrypt($password), time()+3600);
			} else {
				setcookie("cuser", $username, time()+172800);
				setcookie("cpass", $this-#gtencrypt($password), time()+172800);
				setcookie("luser", $username, time()+691200);
			}
			$where = $this-#gtselectwhere($this-#gtdb['online'], 3, $GLOBALS['REMOTE_ADDR']);
			$this-#gtdelete($this-#gtdb['online'], $where[0][0]);
			if ($v != 2) {
				setcookie("visible", $v, time()+5184000);
			} else {
				setcookie("visible", "2", time()+5184000);
			}
			$message = $this-#gtlng['member']['li'];
			$redirect = "index.php".$this-#gts;
		}
	} elseif ($user[23] == "OPTIONAL") {
		if ($user[2] != $this-#gtencrypt($password)) {
			$message = $this-#gtlng['member']['ip'];
		} elseif ($user[10] == "disabled") {
			$message = $this-#gtlng['member']['ad'];
		} else {
			if ($p == "2") {
				setcookie("cuser", $username, time()+3600);
				setcookie("cpass", $this-#gtencrypt($password), time()+3600);
			} else {
				setcookie("cuser", $username, time()+172800);
				setcookie("cpass", $this-#gtencrypt($password), time()+172800);
				setcookie("luser", $username, time()+691200);
			}
			$where = $this-#gtselectwhere($this-#gtdb['online'], 3, $GLOBALS['REMOTE_ADDR']);
			$this-#gtdelete($this-#gtdb['online'], $where[0][0]);
			if ($v != 2) {
				setcookie("visible", $v, time()+5184000);
			} else {
				setcookie("visible", "2", time()+5184000);
			}
			$this-#gtsystempm($user[0], 1);
			$message = $this-#gtlng['member']['li'];
			$redirect = "index.php".$this-#gts."a=member&type=saveinfo";
		}
	} else {
		if ($user[2] != $this-#gtencrypt($password)) {
			$message = $this-#gtlng['member']['ip'];
		} elseif ($user[10] == "disabled") {
			$message = $this-#gtlng['member']['ad'];
		} else {
			if ($p == "2") {
				setcookie("cuser", $username, time()+3600);
				setcookie("cpass", $this-#gtencrypt($password), time()+3600);
			} else {
				setcookie("cuser", $username, time()+172800);
				setcookie("cpass", $this-#gtencrypt($password), time()+172800);
				setcookie("luser", $username, time()+691200);
			}
			$where = $this-#gtselectwhere($this-#gtdb['online'], 3, $GLOBALS['REMOTE_ADDR']);
			$this-#gtdelete($this-#gtdb['online'], $where[0][0]);
			if ($v != 2) {
				setcookie("visible", $v, time()+5184000);
			} else {
				setcookie("visible", "2", time()+5184000);
			}
			$this-#gtsystempm($user[0], 1);
			$message = $this-#gtlng['member']['aa'];
			$redirect = "index.php".$this-#gts."a=member&type=activate";
		}
	}
	if (!empty($dredirect)) {
		$redirect = $dredirect;
	}
	$this-#gtheader();
	$this-#gtdisplaymessage($this-#gtlng['toplinks']['login'], $message, $redirect);
	$this-#gtfooter();
}

function login () {
	global $HTTP_COOKIE_VARS, $redir;
?#gt
#ltTABLE ALIGN=center WIDTH=400 CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
#ltFORM NAME"LOGINREG" action="index.php" METHOD="post"#gt
#ltINPUT TYPE="hidden" NAME="a" VALUE="guest"#gt
#ltINPUT TYPE="hidden" NAME="type" VALUE="login2"#gt
#ltINPUT TYPE="HIDDEN" NAME="redirect" VALUE="#lt?=$redir?#gt"#gt
 #ltTR#gt
  #ltTD CLASS="category" COLSPAN="2" ALIGN="center"#gt#lt?=$this-#gtlng['toplinks']['login']?#gt#lt/TD#gt
 #lt/TR#gt
 #ltTR#gt
  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtlng['misc']['username']?#gt:#lt/TD#gt
  #ltTD CLASS="ctable1"#gt#ltINPUT TYPE="text" NAME="username" VALUE="#lt?=$HTTP_COOKIE_VARS['luser']?#gt" SIZE=30#gt#lt/TD#gt
 #lt/TR#gt
 #ltTR#gt
  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtlng['member']['pw']?#gt#lt/TD#gt
  #ltTD CLASS="ctable1"#gt#ltINPUT TYPE="password" NAME="password" SIZE=30#gt#lt/TD#gt
 #lt/TR#gt
 #ltTR#gt
  #ltTD CLASS="ctable2" COLSPAN="100%" ALIGN="center"#gt
   #ltCENTER#gt
    #ltSELECT NAME="v"#gt
     #ltOPTION SELECTED VALUE="1"#gt#lt?=$this-#gtlng['member']['mvi']?#gt#lt/OPTION#gt
     #ltOPTION VALUE="2"#gt#lt?=$this-#gtlng['member']['miv']?#gt#lt/OPTION#gt
    #lt/SELECT#gt
   #lt/CENTER#gt
  #lt/TD#gt
 #lt/TR#gt
 #ltTR#gt
  #ltTD CLASS="ctable1" COLSPAN="100%" ALIGN="center"#gt
   #ltCENTER#gt
    #ltSELECT NAME="p"#gt
     #ltOPTION SLECTED VALUE="0"#gt#lt?=$this-#gtlng['member']['rmm']?#gt#lt/OPTION#gt
     #ltOPTION VALUE="1"#gt#lt?=$this-#gtlng['member']['drm']?#gt#lt/OPTION#gt
    #lt/SELECT#gt
   #lt/CENTER#gt
  #lt/TD#gt
 #lt/TR#gt
 #ltTR#gt
  #ltTD CLASS="ctable2" COLSPAN=2 ALIGN=center#gt#lt?=$this-#gtbutton($this-#gtlng['toplinks']['login'])?#gt#lt/TD#gt
 #lt/TR#gt#lt/FORM#gt
#lt/TABLE#gt
#lt?
}

function register () {
?#gt
#ltTABLE ALIGN=center WIDTH=400 CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
#ltFORM ACTION="index.php" METHOD="post"#gt
#ltINPUT TYPE="hidden" NAME="a" VALUE="guest"#gt
#ltINPUT TYPE="hidden" NAME="type" VALUE="register2"#gt
 #ltTR#gt
  #ltTD CLASS="category" COLSPAN="2" ALIGN="center"#gt#lt?=$this-#gtlng['toplinks']['register']?#gt#lt/TD#gt
 #lt/TR#gt
 #ltTR#gt
  #ltTD CLASS="ctable1" SIZE="25"#gt#lt?=$this-#gtlng['misc']['username']?#gt:#lt/TD#gt
  #ltTD CLASS="ctable1"#gt#ltINPUT SIZE=30 NAME="username" MAXSIZE=35#gt#lt/TD#gt
 #lt/TR#gt
#lt? if ($this-#gtsettings['enable_mail'] == 0 #12#12 $this-#gtsettings['reqir_email'] == 0) {?#gt
 #ltTR#gt
  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtlng['member']['pw']?#gt#lt/TD#gt
  #ltTD CLASS="ctable2"#gt#ltINPUT SIZE=30 NAME="password" TYPE="password"#gt#lt/TD#gt
 #lt/TR#gt
 #ltTR#gt
  #ltTD CLASS="ctable1"#gt#lt?=$this-#gtlng['member']['pag']?#gt:#lt/TD#gt
  #ltTD CLASS="ctable1"#gt#ltINPUT SIZE=30 NAME="password2" TYPE="password"#gt#lt/TD#gt
 #lt/TR#gt
#lt? } ?#gt
 #ltTR#gt
  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtlng['member']['email']?#gt#lt/TD#gt
  #ltTD CLASS="ctable2"#gt#ltINPUT SIZE=35 MAXSIZE=60 NAME="email"#gt#lt/TD#gt
 #lt/TR#gt
#lt? if ((extension_loaded("gd")) && ($this-#gtsettings[enable_gdis] == true)) {
	$maxran = 1000000;
	$random_num = mt_rand(0, $maxran); ?#gt
 #ltINPUT TYPE="HIDDEN" VALUE="#lt?=$random_num?#gt" NAME="random_num"#gt
 #ltTR#gt
  #ltTD CLASS="ctable2" SIZE="25"#gtType Security Code:
  #lt/TD#gt
  #ltTD CLASS="ctable2"#gt#ltIMG VSPACE="3" WIDTH="77" HEIGHT="20" BORDER="1" SRC="lib/sublib/image.tool.php?random_num=#lt?=$random_num?#gt"#gt#ltBR#gt
  #ltINPUT SIZE=7 NAME="gfx_check" MAXSIZE=6#gt#lt/TD#gt
 #lt/TR#gt
#lt? } ?#gt
 #ltTR#gt
  #ltTD CLASS="ctable2" COLSPAN=2 ALIGN=center#gt
#ltTEXTAREA ROWS=6 COLS=50#gt#lt?

	$rules = file("data/language/".$this-#gtsettings['brd_language']."/rules.cgi");
	$rules = implode ("", $rules);
	$rules = str_replace("\r\n", "", $rules);
	$rules = str_replace("\n", "", $rules);
	$rules = str_replace("#ltBR#gt", "\r\n", $rules);
	echo $rules;

?#gt#lt/TEXTAREA#gt
  #lt/TD#gt
 #lt/TR#gt
 #ltTR#gt
  #ltTD CLASS="ctable2" COLSPAN=2 ALIGN=left#gt
   #ltTABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%"#gt#ltTR#gt
   #ltTD ALIGN="CENTER" CLASS="small"#gt#ltINPUT TYPE="radio" NAME="agree" VALUE="true"#gt #lt?=$this-#gtlng['misc']['iagree']?#gt#lt/TD#gt
   #ltTD ALIGN="CENTER" CLASS="small"#gt#ltINPUT TYPE="radio" NAME="agree" VALUE="false"#gt #lt?=$this-#gtlng['misc']['idagre']?#gt#lt/TD#gt
   #lt/TR#gt#lt/TABLE#gt
  #lt/TD#gt
 #lt/TR#gt
 #ltTR#gt
  #ltTD CLASS="ctable2" COLSPAN=2 ALIGN=center#gt#lt?=$this-#gtbutton($this-#gtlng['toplinks']['register'])?#gt#lt/TD#gt
 #lt/TR#gt
#lt/FORM#gt
#lt/TABLE#gt
#lt?
}

function register2 () {
	global $username, $email, $agree, $password, $password2, $HTTP_SERVER_VARS, $random_num, $gfx_check;
	$existingusername = $this-#gtselectwhere_upcase($this-#gtdb["users"], 1, strtoupper($username));
	$existingemail = $this-#gtselectwhere_upcase($this-#gtdb["users"], 4, strtoupper($email));
	$badcode = false;
	$back = "#ltBR#gt".$this-#gtlng['member']['gb'];
	if ((extension_loaded("gd")) && ($this-#gtsettings[enable_gdis] == true)) {
		$datekey = date("F j");
		$rcode = hexdec(md5($_SERVER[HTTP_USER_AGENT] . $sitekey . $random_num . $datekey));
		$code = substr($rcode, 2, 6);
		if ($code != $gfx_check) {
			$badcode = true;
		}
	}
	if ($password != $password2) {
		$message = $this-#gtlng['member']['asd'];
	} elseif ($agree == "false") {
		$message = $this-#gtlng['errors']['must_agree'];
	} elseif ($existingusername[0][0] != 0) {
		$message = $this-#gtlng['member']['zxc'];
	} elseif ($badcode) {
		$message = $this-#gtlng['errors']['bsc'];
	} elseif ($existingemail[0][0] != 0) {
		$message = $this-#gtlng['member']['qwe'];
	} elseif (strlen($username) #gt 35) {
		$message = $this-#gtlng['member']['cvb'];
	} elseif ($username == "") {
		$message = $this-#gtlng['member']['wer'];
	} elseif (strtoupper($username) == "GUEST") {
		$message = $this-#gtlng['member']['sdf'];
	} elseif (strtoupper($username) == "SYSTEM") {
		$message = $this-#gtlng['member']['sdf'];
	} elseif (strstr(strtoupper($username),"SYS/REDIR")) {
		$message = $$this-#gtlng['member']['ert'];
	} elseif (strstr($username,"#gt") #12#12 strstr($username,"#lt") #12#12 strstr($username,",")) {
		$message = $this-#gtlng['member']['ert'];
	} elseif ($email == "" #12#12 !strstr($email,"@")) {
		$message = $this-#gtlng['member']['sss'];
	} elseif ($password == "" && ($this-#gtsettings[enable_emal] == 0 #12#12 $this-#gtsettings['reqir_email'] == 0)) {
		$message = $this-#gtlng['member']['dfg'];
	} else {
		if ($this-#gtsettings['reqir_email'] == 1) {
			$password = $this-#gtgenstr(8, 0, 0);
		}
		$admin = $this-#gtselect($this-#gtdb['users'], $this-#gtsettings['admin_mem_id']);
		$location = $this-#gtsettings['edgeboardurl']."/index.php".$this-#gts."a=guest&type=login";
		$emessage = implode("", file("data/language/".$this-#gtsettings['brd_language']."/welcomeemail.cgi"));
		$emessage = str_replace("\r\n", "#ltBR#gt", $emessage);
		$emessage = str_replace("\n", "#ltBR#gt", $emessage);
		$emessage = $this-#gtprepare_email($emessage);
		$emessage = $this-#gtemerald($emessage, "%e", $location);
		$emessage = $this-#gtemerald($emessage, "%u", $username);
		$emessage = $this-#gtemerald($emessage, "%p", $password);
		$emessage = $this-#gtemerald($emessage, "%b", $this-#gtsettings['edgebrd_name']);
		$emessage = $this-#gtemerald($emessage, "%m", $admin[4]);
		if ($this-#gtsettings['enable_emal'] == 1 && $this-#gtsettings['reqir_email'] == 1) {
			$utype = "PENDING";
			$message = $this-#gtlng['member']['dfg'];
			$this-#gtemail($email, $this-#gtsettings['edgebrd_name'], $emessage);
		} elseif ($this-#gtsettings['enable_emal'] == 1 && $this-#gtsettings['reqir_email'] == 0) {
			$utype = "OPTIONAL";
			$message = $this-#gtlng['member']['cva']."#ltbr#gt#lta href='index.php".$this-#gts."a=guest&type=login'#gt".$this-#gtlng['toplinks']['login']."#lt/a#gt";
			$this-#gtemail($email, $this-#gtsettings['edgebrd_name'], $emessage);
		} else {
			$utype = "OPTIONAL";
			$message = $this-#gtlng['member']['cva'];
		}
		$user = array($this-#gtinputize($username, 35), $this-#gtencrypt($password), 2, 
			$this-#gtinputize($email, 60), NULL, NULL, NULL, NULL, NULL, time(), 0, 
			NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, time(), $utype);
		$userid = $this-#gtinsert($this-#gtdb['users'], $user);
		$back = "";
		$this-#gtsystempm($userid, 1);
	}
	$this-#gtdisplaymessage($this-#gtlng['toplinks']['register'], $message.$back);
}

}

?#gt";}i:65;a:2:{i:0;s:16:"lib/category.php";i:1;s:8366:"#lt?php

class exclusive extends genesis {
var $category, $page, $forums, $pagelinks;

function execute () {
	global $category;
	$this-#gtcategoryid = $category;
	$category = $this-#gtselect("data/categories.php", $category);
	$this-#gtheader();
	$category[2] = explode(",", $category[2]);
	$temp = array();
	foreach ($category[2] as $forumid) {
		if ($this-#gtcheckforumpermission(5, false, $forumid) == 1) {
			$forum = $this-#gtselectforum($forumid);
			array_push($temp, $forum);
		}
	}
	$category[2] = $temp;
	$this-#gtcategroy = $category;
	$this-#gtdisplaycatinfo();
	$this-#gtdisplayforums();
	$this-#gtfooter();
}

function displaycatinfo () {
?#gt
#ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=1 BORDER="0" CLASS="bordertable"#gt
 #ltTR#gt
  #ltTD CLASS="category"#gt#lt?=$this-#gtcategroy[1]?#gt#lt/TD#gt
 #lt/TR#gt
 #ltTR#gt
   #ltTD NOWRAP ROWSPAN="2" CLASS="ctable2"#gt#ltSPAN CLASS="regular"#gt#lt?=$this-#gttags($category[3], "...")?#gt#lt/SPAN#gt#lt/TD#gt
 #lt/TR#gt
#lt/TABLE#gt
#ltBR#gt
#lt?
}

function displayforums () {
	?#gt
	#ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="4%"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" WIDTH="53%"#gt#ltFONT CLASS="small"#gt#lt?=$this-#gtlng['forum']['forum_name']?#gt/#lt?=$this-#gtlng['forum']['forum_desc']?#gt/#lt?=$this-#gtlng['forum']['moderators']?#gt#lt/FONT#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#ltFONT CLASS="small"#gt#lt?=$this-#gtlng['forum']['topics']?#gt#lt/FONT#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#ltFONT CLASS="small"#gt#lt?=$this-#gtlng['forum']['posts']?#gt#lt/FONT#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="29%"#gt#ltFONT CLASS="small"#gt#lt?=$this-#gtlng['forum']['last_post']?#gt#lt/FONT#gt#lt/TD#gt
	 #lt/TR#gt
	#lt?
	if (count($this-#gtcategroy[2]) == 0) {
	?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" COLSPAN="100%"#gt#ltCENTER#gt#lt?=$this-#gtlng['forum']['no_forums']?#gt#lt/CENTER#gt#lt/TD#gt
	 #lt/TR#gt
	#lt?
	} else {
		$hb_dl = $this-#gthelpbutton('delete_forum');
		$hb_ed = $this-#gthelpbutton('edit_forums_description');
		$hb_up = $this-#gthelpbutton('forum_up');
		$hb_dn = $this-#gthelpbutton('forum_down');
		$hb_mv = $this-#gthelpbutton('move_forum');
		
		foreach ($this-#gtcategroy[2] as $forum) {
			if (!empty($forum[1])) {
				$this-#gtselectforum($forum[0]);
				$this-#gttopics = $this-#gttopics + $forum[2];
				$this-#gtposts = $this-#gtposts + $forum[3];
				if ($forum[4] == "") {
					$lastpost = $this-#gtlng['forum']['no_posts'];
					$forumimg = "forumold.gif";
				} else {
					$lasttopic = $this-#gtlasttopic;
					$linkstr1 = "#lta href=\"index.php".$this-#gts."a=topic&forum=".$forum[0]."&topic=".$lasttopic[ 0]."&page=last#last\"#gt".$lasttopic[1]."#lt/a#gt";
					$linkstr2 = "#lta href=\"index.php".$this-#gts."a=member&type=viewprofile&user=".$lasttopic[5]."\"#gt".$lasttopic[5]."#lt/a#gt";
					$linkstr3 = $this-#gtzonetime($this-#gtsettings['time_format'], $lasttopic[6]);
					$lastpost = $this-#gtemerald($this-#gtlng['forum']['last_post_in'], "%e", $linkstr1);
					$lastpost = $this-#gtemerald($lastpost, "%u", $linkstr2);
					$lastpost = $this-#gtemerald($lastpost, "%t", $linkstr3);
					if ($this-#gtuser[10] #lt $lasttopic[6]) {
						$forumimg = "forumnew.gif";
					} else {
						$forumimg = "forumold.gif";
					}
				}
				$nomods=true;
				$m = 0;
				$modtxt = "";
				$moderators = "";
				$g = "";
				$gmoderators[$forum[0]] = explode(",", $forum[10]);
				if (count($gmoderators[$forum[0]]) #gt 0) {
					foreach ($gmoderators[$forum[0]] as $gmoderatorid) { 
						if (!empty($gmoderatorid)) {
							if ($m #gt 0) {
								$g = ", ";
							}
							$gmoderator = $this-#gtselect($this-#gtdb['groups'], $gmoderatorid);
							$wm = $wm.$g."#lta href='index.php".$this-#gts."a=member&type=list&sort=group:".$gmoderator[0]."'#gt".$gmoderator[28].$gmoderator[1].$gmoderator[29]."#lt/a#gt";
							$m++;
							$nomods=false;
						}
					}
				}
				$moderators[$forum[0]] = explode(",", $forum[9]);
				if (count($moderators[$forum[0]]) #gt 0) {
					foreach ($moderators[$forum[0]] as $moderatorid) { 
						if (!empty($moderatorid)) {
							if ($m #gt 0) {
								$g = ", ";
							}
							$moderator = $this-#gtselect($this-#gtdb['users'], $moderatorid);
							$wm = $wm.$g."#lta href='index.php".$this-#gts."a=member&type=viewprofile&user=".$moderator[1]."'#gt".$moderator[1]."#lt/a#gt";
							$m++;
							$nomods=false;
						}
					}
				}
				if ($nomods) {
					$wm = $this-#gtlng['main']['no_moderators'];
				}
				if ($this-#gtadministrator) {
					if ($wm == $this-#gtlng['main']['no_moderators']) {
						$modtxt = "#ltSPAN CLASS=\"small\"#gt#ltb#gt#lta href=\"index.php".$this-#gts."a=iai&type=addmod&forum=".$forum[0]."\"#gt".$this-#gtlng['iai']['add_moderator']."#lt/a#gt#lt/b#gt#lt/SPAN#gt";
					}
					$links = "";
					$link = "index.php".$this-#gts."a=iai&category=".$this-#gtcategoryid."&forum=".$forum[0]."&f_button=";
						$links .= " [ #lta href=\"";
						$links .= $link.$this-#gtlng['iai']['edit'];
						$links .= "\"#gt".$this-#gtlng['iai']['edit']."#lt/a#gt ".$hb_ed;
						$links .= " #12 #lta href=\"";
						$links .= $link.$this-#gtlng['iai']['move_forum'];
						$links .= "\"#gt".$this-#gtlng['iai']['move_forum']."#lt/a#gt ".$hb_mv;
						$links .= " #12 #lta href=\"";
						$links .= $link.$this-#gtlng['iai']['delete'];
						$links .= "\"#gt".$this-#gtlng['iai']['delete']."#lt/a#gt ".$hb_dl." ]#ltBR#gt";
						if (($f == 1) && ($f != $fc)) {
							$links .= " ".$this-#gtlng['iai']['move'].":";
							$links .= " [ #lta href=\"";
							$links .= $link.$this-#gtlng['iai']['move_down'];
							$links .= "\"#gt".$this-#gtlng['iai']['move_down']."#lt/a#gt ".$hb_dn." ] ";
						} elseif (($f != count($forums)) && ($f != 1)) {
							$links .= " ".$this-#gtlng['iai']['move'].":";
							$links .= " [ #lta href=\"";
							$links .= $link.$this-#gtlng['iai']['move_up'];
							$links .= "\"#gt".$this-#gtlng['iai']['move_up']."#lt/a#gt ".$hb_up;
							$links .= " #12 #lta href=\"";
							$links .= $link.$this-#gtlng['iai']['move_down'];
							$links .= "\"#gt".$this-#gtlng['iai']['move_down']."#lt/a#gt ".$hb_dn." ]";
						} elseif ($f == count($forums) && ($f != 1)) {
							$links .= " ".$this-#gtlng['iai']['move'].":";
							$links .= " [ #lta href=\"";
							$links .= $link.$this-#gtlng['iai']['move_up'];
							$links .= "\"#gt".$this-#gtlng['iai']['move_up']."#lt/a#gt ".$hb_up." ]";
						} else {
							$links .= " ".$this-#gtlng['iai']['cant_move'];
						}
					$iaiforum = "#ltSPAN CLASS=\"small\"#gt#ltcenter#gt".$links."#lt/center#gt#lt/SPAN#gt";
					$iaimods = " #ltb#gt[ #lta href=\"index.php".$this-#gts."a=iai&type=editmods&forum=".$forum[0]."\"#gt".$this-#gtlng['iai']['edit']."#lt/a#gt ]#lt/b#gt";
				}
				if ($wm != $this-#gtlng['main']['no_moderators']) {
					$modtxt = #lt#lt#ltLONG
#ltSPAN CLASS="small"#gt#ltB#gt{$this-#gtlng['forum']['moderators']}#lt/B#gt{$iaimods}: {$wm}#lt/SPAN#gt
LONG;
				}
				$wm = "";
				?#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable2" ALIGN="center" WIDTH="4%"#gt#ltIMG SRC="images/#lt?=$forumimg?#gt"#gt#lt/TD#gt
		  #ltTD CLASS="ctable2" WIDTH="53%"#gt#ltTABLE WIDTH="100%" CELLPADDING="0" CELLSPACING="1" BORDER="0" CLASS="regular"#gt
			 #ltTR#gt
			  #ltTD#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=forum&forum=#lt?=$forum[0]?#gt"#gt#lt?=$forum[1]?#gt#lt/A#gt#lt/TD#gt
			 #lt/TR#gt
			 #ltTR#gt
			  #ltTD CLASS="small" COLSPAN=2#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gttags($forum[8])?#gt#lt/SPAN#gt
			  #ltB#gt#ltCENTER#gt#lt?=$iaiforum?#gt#lt/CENTER#gt#lt/B#gt
			  #lt?=$modtxt?#gt#lt/TD#gt
			 #lt/TR#gt
			#lt/TABLE#gt#lt/TD#gt
		  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#ltSPAN CLASS="small"#gt#lt?=$forum[2]?#gt#lt/SPAN#gt#lt/TD#gt
		  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#ltSPAN CLASS="small"#gt#lt?=$forum[3]?#gt#lt/SPAN#gt#lt/TD#gt
		  #ltTD CLASS="ctable1" WIDTH="29%"#gt#ltSPAN CLASS="small"#gt#lt?=$lastpost?#gt#lt/SPAN#gt#lt/TD#gt
		 #lt/TR#gt
				#lt?
			}
		}
	}
	?#gt
	#lt/TABLE#gt#ltBR#gt
	#lt?
}

}

?#gt";}i:66;a:2:{i:0;s:15:"lib/upgrade.php";i:1;s:1259:"#lt?

class exclusive EXTENDS genesis {

	function upgrade () {
		$this-#gtupdateforums();
		$this-#gtupdatesettings();
	}

	function updateforums () {
		$forums = $this-#gtselectall("forums/forums.cgi");
		$this-#gtupdatefile("data/forums.php", $forums);
		foreach ($forums as $forum) {
			$this-#gtupdatelist($forum[0]);
		}
	}

	function updatelist ($forum) {
		$topics = $this-#gtselectall("forums/".$forum."/list.cgi");
		$this-#gtupdatefile("data/".$forum."/list.php", $topics);
		foreach ($topics as $topic) {
			$this-#gtupdatetopic($topic[0]);
		}
	}

	function updatetopic ($topic) {
		$topicfile = $this-#gtselectall("data/".$forum."/".$topic.".php");
		$this-#gtupdatefile("data/".$forum."/".$topic.".php", $topicfile);
	}

	function updatesettings () {
		$dbsettings = $this-#gtselectall("data/settings.php");
		list($id, $brdnm, $avatw, $avath, $topcl, $timef, $pstsz, $wrdsz, $toppp, $wrdfl, $bbcod, $aemal, $reqem, $stats) = $dbsettings[0];
		list($id, $pstpp, $membe, $postt, $topl1, $topl2, $allgu, $rcolo, $rollo, $theme, $langu, $brdem, $reqch) = $dbsettings[1];
		list($id, $ahtml, $hmurl, $maxpm, $offst, $maxin, $polll, $allog, $onltm, $usrpl, $maxup, $bdurl, $allfe) = $dbsettings[2];
	}

}

?#gt";}i:67;a:2:{i:0;s:16:"lib/flatfile.php";i:1;s:28064:"#lt?php
/*
* Some simple functions for working with a flat-file database. 
* You may modify this script for your own use, but please do not re-distribute it.
* Copyright edge-programming.com
*/

class flatfile {

var $filelock, $tfiles, $files;

function setdb () {
	$this-#gtfilelock = true;
	$this-#gtfiles = array();
	$this-#gttfiles = array();
	$this-#gtchars = array(
				'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 
				'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 
				'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 
				'y', 'z', 
				'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 
				'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 
				'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 
				'Y', 'Z', 
				'1', '2', '3', '4', '5', '6', '7', '8', 
				'9', '0'
				);
	$this-#gtunchars = array(
				'#12', '/', '\\', '#lt', '#gt', ',', ':', ';',
				);
	$this-#gtdb['users'] = "data/users.php";
	$this-#gtdb['messages'] = "data/messages.php";
	$this-#gtdb['online'] = "data/online.php";
	$this-#gtdb['groups'] = "data/groups.php";
	$this-#gtdb['settings'] = "data/settings.php";
	$this-#gtdb['titles'] = "data/titles.php";
	$this-#gtdb['sessions'] = "data/sessions.php";
	$this-#gtdb['counter'] = "data/counter.php";
	$this-#gtdb['session_archive'] = "data/archive_sessions.php";
	$this-#gtdb['banned'] = "data/banned.php";
	$this-#gtdb['notes'] = "data/notes.php";
	$this-#gtdb['cache'] = "data/cache.php";
	$this-#gtdb['errors'] = "data/errors.php";
	$this-#gtread_cache();
}

function read_cache () {
	$cache = file($this-#gtdb['cache']);
	array_shift($cache);
	$cache = implode("", $cache);
	$this-#gtcache = @unserialize($cache);
}

function touchfile ($filename) {
	if (! in_array($filename, $this-#gttfiles)) {
		array_push($this-#gttfiles, $filename);
	}
}

function writefiles ($files="all") {
	if ($files == "all") {
		if (isset($this-#gttemails)) {
			foreach ($this-#gttemails as $email) {
				$this-#gtsendemail($email);
			}
		}
		foreach ($this-#gttfiles as $filename) {
			$this-#gtwrite($filename);
		}
	} else {
		$this-#gtwrite($files);
		$this-#gtfiles[$filename] = 0;
		$this-#gtopenfile[$filename];
	}
}

function email ($destination, $subject, $message) {
	if (!isset($this-#gttemails)) {
		$this-#gttemails = array();
	}
	array_push ($this-#gttemails, array($destination, $subject, $message));
}

function sendemail ($emailinfo) {
	$headers = "From: ".$this-#gtsettings['edgebrd_name']." #lt".$this-#gtsettings['eboard_email']."#gt";
	$to = $emailinfo[0];
	$subject = $emailinfo[1];
	$message= $emailinfo[2];
	if (!@mail($to, $subject, $message, $headers)) {
		$email = $this-#gtinputize2(array(serialize("email"), serialize(time()), serialize($to), serialize($subject), serialize($message), serialize($headers)));
		$this-#gtinsert($this-#gtdb['errors'], $email);
	}
}

function write ($file) {
	$filename = $file;
	if ($this-#gtfiles[$filename] == 0) {
		$this-#gtfiles[$filename] = array();
	}
	$file = $this-#gtfiles[$filename];
	$newfile = "";
	$l = 0;
	foreach ($file as $line) {
		if ($l == 0) {
			$newfile = "#lt? die('edgeBoard Security: Please do not request this file!'); ?#gt\r\n";
			$l = 1;
		}
		for ($i=0;(($i #lt count($line)));$i++) {
			if ($i == 0) {
				$newfile = $newfile . $line[$i];
			} else {
				$newfile = $newfile . "#12" . $line[$i];
			}
		}
		$newfile = $newfile . "\r\n";
	}
	$fhandle = fopen($filename, "w");
	if ($this-#gtfilelock) {@flock ($fhandle, LOCK_EX);}
	fwrite($fhandle, $newfile);
	fclose ($fhandle);
	if ($this-#gtfilelock) {@flock ($fhandle, LOCK_UN);}
	@chmod($filename, 0777);
}

function openfile ($filename, $implode=false, $implodekey="") {
	if (!is_array($filename) && ($implode == false)) {
		$this-#gtopenl2($filename);
	} elseif (!is_array($filename) && ($implode == true)) {
		$this-#gtopenl2($filename, $implodekey);
	} elseif (is_array($filename) && ($implode == true)) {
		$this-#gtopenl1($filename, $implodekey);
	}
}

function openl1 ($filename, $implode) {
	if (!empty($this-#gtfiles[$filename])) {
		foreach ($this-#gtfiles[$filename] as $line) {
			$rawline = implode("#12", $line);
			$istr .= $rawline."\r\n";
		}
	} else {
		$istr = "";
	}
	$this-#gtselectall[$implode] = $istr;
}

function openl2 ($filename, $implode="") {
	if (empty($this-#gtfiles[$filename])) {
		if (file_exists($filename) && is_file($filename)) {
			$file = file($filename);
			$lines = array();
			foreach ($file as $rawline) {
				$rawline = chop($rawline);
				if (!strstr($rawline,"#lt? die(); ?#gt") &&
					!strstr($rawline,"#lt? die('edgeBoard Security: Please do not request this file!'); ?#gt")) {
					if (!empty($implode)) { 
						$istr .= $rawline."\r\n";
					}
					$line = explode("#12", $rawline);
					array_push($lines, $line);
				}
			}
			$this-#gtfiles[$filename] = $lines;
		} else {
			$this-#gtfiles[$filename] = array();
		}
	}
	if (!empty($implode)) { 
		$this-#gtselectall[$implode] = $istr;
	}
}

function findselect ($file, $what, $bool=false) {
	$got = 0;
	$data = 0;
	if ((is_numeric($what)) #12#12 (is_int($what))) {
		$data = $this-#gtselect($file, $what);
		$got = 1;
	}
	if (empty($data)) {
		$data = $this-#gtselectwhere($file, 1, $what);
		if ($data[0] != 0) {
			$data = $data[0];
			$got = 1;
		}
	}
	if ($bool) {
		return $got;
	} else {
		return $data;
	}
}

// returns requested line as array
function select ($filename, $lineid) {
	$this-#gtopenfile($filename);
	$line = array();
	foreach ($this-#gtfiles[$filename] as $line) {
		if ($line[0] == $lineid) {
			return $line;
		}
	}
}

// returns multi-dimensional array
function selectall ($filename, $implode=false, $implodekey="") {
	if ($implode) {
		$this-#gtopenfile($filename, $implode, $implodekey);
	} else {
		$this-#gtopenfile($filename);
	}
	return $this-#gtfiles[$filename];
}

function gethits ($haystack, $needle) {
	$terms = explode(" ", $needle);
	$hits["total"] = 0;
	if (!empty($haystack) && !empty($needle)) {
		$hits["phrase"] = substr_count($haystack, $needle);
		$hits["terms"] = 0;
		foreach ($terms as $term) { 
			if (!empty($term)) {
				$morehits = substr_count($haystack, $term);
				$hits["terms"] = $hits["terms"] + $morehits;
			}
		}
		$hits["total"] = ($hits["phrase"] * 10) + $hits["terms"];
	}
	return $hits["total"];
}

function search ($filename, $string, $ss=false, $cs=false, $partid="all") {
	$results = array();
	$file = $this-#gtselectall($filename);
	$this-#gtopenl1($filename, "search");
	if (strstr(" ", $string)) {
		$terms = explode(" ", $srting);
	} else {
		$terms = array($string);
	}
	if ($cs == false) {
		foreach ($terms as $term) {
			$term = strtolower($term);
		}
		$string = strtolower($string);
		$this-#gtselectall["search"] = strtolower($this-#gtselectall["search"]);
	}
	$hits = $this-#gtgethits($this-#gtselectall["search"], $string);

	if ($hits #gt 0) {
		foreach ($file as $line) {
			$hitline = implode("¶", $line);
			if ($cs == false) {
				$hitline = strtolower($hitline);
			}
			$linehits = $this-#gtgethits($hitline, $string);
			if ($linehits #gt 0) {
				if ($partid == "all") {
					foreach ($line as $part) {
						if ($cs == false) {
							$part = strtolower($part);
						}
						if ($ss == true) {
							if ($part == $string) {
								array_push($results, array($line, $filename, $linehits));
							}
						} else {
							if (stristr($part,$string)) {
								array_push($results, array($line, $filename, $linehits));
							}
						}
					}				
				} else {
					if ($cs == false) {
						$part[$partid] = strtolower($part[$partid]);
					}
					if ($ss == true) {
							if ($part[$partid] == $string) {
								array_push($results, array($line, $filename, $linehits));
							}
					} else {
						if (stristr($part[$partid],$string)) {
							array_push($results, array($line, $filename, $linehits));
						}
					}
				}
			}
		}
	}
	return $results;
}

// returns 0 if not found, or the lines found
function selectwhereNOT ($filename, $partid, $part, $both=false, $partid2="", $part2="") {
	$nl = 0;
	$al = 0;
	$this-#gtopenfile($filename);
	$not_lines = array();
	$are_lines = array();
	foreach ($this-#gtfiles[$filename] as $line) {
		if (!empty($part2)) {
			if (($line[$partid] == $part) && ($line[$partid2] == $part2)) {
				array_push($are_lines, $line);
				$al = 1;
			} else {
				array_push($not_lines, $line);
				$nl = 0;
			}
		} else {
			if ($line[$partid] == $part) {
				array_push($are_lines, $line);
				$al = 1;
			} else {
				array_push($not_lines, $line);
				$nl = 0;
			}
		}
	}
	if ($al #12#12 $nl) {
		if ($both) {
			return array($not_lines, $are_lines);
		} else {
			return $not_lines;
		}
	} else {
		return 0;
	}
}

function selectwhere_byletter ($filename, $partid, $letter) {
	$this-#gtopenfile($filename);
	$al = 0;
	$lines = array();
	foreach ($this-#gtfiles[$filename] as $line) {
		if (strtoupper($line[$partid]{0}) == strtoupper($letter)) {
			array_push($lines, $line);
			$al = 1;
		}
	}
	if ($al) {
		return $lines;
	} else {
		return 0;
	}
}

// returns 0 if not found, or the lines found
function selectwhere_upcase ($filename, $partid, $part) {
	$this-#gtopenfile($filename);
	$lines = array();
	foreach ($this-#gtfiles[$filename] as $line) {
		if (strtoupper($line[$partid]) == strtoupper($part)) {
			$newline = array();
			foreach ($line as $seg) {
				$seg = strtoupper($seg);
				array_push($newline, $seg);
			}
			array_push($lines, $newline);
		}
	}
	if ($lines #gt 0) {
		return $lines;
	} else {
		return 0;
	}
}

// returns 0 if not found, or the lines found
function selectwhere ($filename, $partid, $part) {
	$this-#gtopenfile($filename);
	$lines = array();
	$ch = 0;
	foreach ($this-#gtfiles[$filename] as $line) {
		if ($line[$partid] == $part) {
			array_push($lines, $line);
			$ch = 1;
		}
	}
	if ($ch) {
		return $lines;
	} else {
		return array();
	}
}

// returns 0 if not found, or the lines found
function super_selectwhere ($filename, $dbarray) {
	$this-#gtopenfile($filename);
	$lines = array();
	$ch = 0;
	foreach ($this-#gtfiles[$filename] as $line) {
		$valid = 1;
		for ($i=0;($i #lt count($line));$i++) {
			if (isset($dbarray[$i])) {
				if (($dbarray[$i] == $line[$i]) && ($valid != "z")) {
					$valid == 1;
				} else {
					$valid = "z";
				}
			}
		}
		if ($valid != "z") {
			$ch = 1;
			array_push($lines, $line);
		}
	}
	if ($ch) {
		return $lines;
	} else {
		return array();
	}
}

function insertid($filename, $lineid, $newline) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	$this-#gtdelete($filename, $lineid);
	$this-#gtinserti($filename, $newline);
	return $lineid;
}

function inserti($filename, $newline) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	array_push($this-#gtfiles[$filename], $newline);
	if (is_array($newline)) {
		return $newline[0];
	}
}

function replace ($filename, $line) {
	$this-#gtdelete($filename, $line[0]);
	return $this-#gtinserti($filename, $line);
}

// returns 0 if not found, or the lines found
function where ($table, $partid, $part) {
	$lines = array();
	foreach ($table as $row) {
		if ($row[$partid] == $part) {
			array_push($lines, $row);
		}
	}
	return $lines;
}

// returns multi-deminsional array
function selectsort ($filename, $sort) {
	$this-#gtopenfile($filename);
	$lines = $this-#gtfiles[$filename];
	$lines = $this-#gtsort($lines, $sort);
	return $lines;
}

// returns multi-deminsional array
function sort ($lines, $sort) {
	// this just seems to go better if we sort it twice.
	for ($t=0; $t#lt=count($lines); $t++) {
		// for each line, $i is the line
		for ($i=0; $i #lt count($lines); $i++) {
			// everytime line $i is less than the next line
			while (strtolower($lines[$i][$sort]) #lt strtolower($lines[$i-1][$sort])) {
				// make a place to temporarily store $i.
				$temp = array();
				$temp = $lines[$i];
				// line $i becomes $i++
				$lines[$i] = $lines[$i-1];
				// line $i++ becomes line $i
				$lines[$i-1] = $temp;
				// this process repeats until all values greater than line i
				// are above line i
			}
		}
	}
	return $lines;
}

function moveoneup ($filename, $line) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	// for each line, $i is the line
	$continue = True;
	for ($i=1; $continue == True; $i++) {
		// everytime line $i is less than the next line
		if ($this-#gtfiles[$filename][$i][0] == $line) {
			// make a place to temporarily store $i++.
			$temp = array();
			$temp = $this-#gtfiles[$filename][$i-1];
			// line $i becomes $i++
			$this-#gtfiles[$filename][$i-1] = $this-#gtfiles[$filename][$i];
			// line $i becomes line $i++
			$this-#gtfiles[$filename][$i] = $temp;
			$continue = False;
		}
		if ($i #gt count($this-#gtfiles[$filename])) {$continue = False;}
	}
}

function moveonedown ($filename, $line) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	// for each line, $i is the line
	$continue = True;
	for ($i=0; $continue == True; $i++) {
		// everytime line $i is less than the next line
		if ($this-#gtfiles[$filename][$i][0] == $line) {
			// make a place to temporarily store $i++.
			$temp = array();
			$temp = $this-#gtfiles[$filename][$i+1];
			// line $i becomes $i--
			$this-#gtfiles[$filename][$i+1] = $this-#gtfiles[$filename][$i];
			// line $i becomes line $i++
			$this-#gtfiles[$filename][$i] = $temp;
			$continue = False;
		}
		if ($i #gt= count($this-#gtfiles[$filename])-2) {$continue = False;}
	}
}

// returns 1 when complete
function update ($filename, $lineid, $newline) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	for ($i=0; $i #lt count($this-#gtfiles[$filename]); $i++) {
		if ($this-#gtfiles[$filename][$i][0] == $lineid) {
			$this-#gtfiles[$filename][$i] = $newline;
		}
	}
	return 1;
}

// replaces an entire db with $newfile [$newfile is an array ;)]
function updatefile ($filename, $newfile) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	$this-#gtfiles[$filename] = $newfile;
	$this-#gtwritefiles($filename);
	$this-#gtopenfile($filename);
	return 1;
}

// returns 1 when complete
function insert_alt ($filename, $newline, $id) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	array_unshift($newline, $id);
	$i = 1;
	foreach ($newline as $line) {
		$array = array($i, $line);
		array_push($this-#gtfiles[$filename], $array);
		$i++;
	}
	return 1;
}

function update_alt ($filename, $newlines) {
	$this-#gttouchfile($filename);
	$lines = $this-#gtselectall($filename);
	$i = 0;
	foreach ($newlines as $newline) {
		$lines[$i][1] = $newline;
		$i++;
	}
	$this-#gtfiles[$filename] = $lines;
	return 1;
}
	
// returns $lineid when complete
function insert($filename, $newline) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	if (count($this-#gtfiles[$filename]) != 0) {
		$lineid = $this-#gtfiles[$filename][count($this-#gtfiles[$filename])-1][0] + 1;
	} else {
		$lineid = 1;
	}
	array_unshift($newline, $lineid);
	array_push($this-#gtfiles[$filename], $newline);
	return $lineid;
}
	
// returns 1 when complete
function delete($filename, $lineid) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	for ($i=0; $i#ltcount($this-#gtfiles[$filename]);$i++) {
		if ($this-#gtfiles[$filename][$i][0] == $lineid) {
			array_splice($this-#gtfiles[$filename], $i, 1);
		}
	}
	return 1;
}

function clear ($filename) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	$this-#gtfiles[$filename] = array(array());
}

function inputize2 ($array) {
	$args = func_get_args();
	foreach ($array as $value) {
		if (isset($args[1]) && isset($args[2])) {
			$value = $this-#gtinputize($value, $args[1], $args[2]);
		} elseif (isset($args[1])) {
			$value = $this-#gtinputize($value, $args[1]);
		} else {
			$value = $this-#gtinputize($value);
		}
	}
	return $array;
}

// arguments are
// $text to inputize, maximum length of text, maxsize of any one word
// $text is only required variable
function inputize () {
	$args = func_get_args();
	$text = $args[0];
	if ((isset($args[1])) && (strlen($text) #gt $args[1])) {
		$text = substr($text, 0, $args[1]);
	}
	if (isset($args[2])) {
	// the following loop was found at php.net
	// http://www.php.net/manual/en/ref.strings.php
	// created by heiko@individual-web.com
		$l = 0;
		$temp = "";
		for ($i = 0; $i #lt strlen($text); $i++) {
			$char = substr($text,$i,1);
			if ($char != " ") { $l++; }
			else { $l = 0; }
			if ($l == $args[2]) { $l = 0; $temp .= " "; }
			$temp .= $char;
		}
		$text = $temp;
	}
	$text = stripslashes($text);
	$text = str_replace("#gt", "&gt;", $text);
	$text = str_replace("#lt", "&lt;", $text);
	$text = str_replace("\n", "#ltBR#gt", $text);
	$text = str_replace("#12", "&#124;", $text);
	return $text;
}

function deinputize ($text) {
	$text = str_replace("#ltBR#gt", "\n", $text);
	$text = str_replace("#ltRETURN#gt", "\n", $text);
	return $text;
}

function settemp ($var,$new,$val) {
	$this-#gttempvars['$var'] = $val;
	return $new;
}

function rettemp ($var) {
	return $this-#gttempvars['$var'];
}

function genstr ($stringlength, $offset=0, $maxoffset=0) {
	if ($maxoffset #gt 0) {
		$maxoffset = (-1*$maxoffset);
	}
	if ($offset #lt 0) {
		$offset = (-1*$maxoffset);
	}
	$chars = $this-#gtchars;
	$max = count($chars) - 1 + $maxoffset;
	$offsettotal = (-1*$max) + $offset;
	if ($offsettotal #gt count($chars)-1) {
		$max = count($chars) - 1;
	}
	srand((double) microtime()*1000000);
	$rand_str = '';
	for ($i=1;$i#lt$stringlength;$i++) {
		$rand_str .= $chars[rand($offset, $max)];
	}
	return $rand_str;
}

}

//////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////

class dimension {

function dimension () {
	$this-#gtfilelock = true;
	$this-#gtfiles = array();
	$this-#gttfiles = array();
}

function touchfile ($filename) {
	if (! in_array($filename, $this-#gttfiles)) {
		array_push($this-#gttfiles, $filename);
	}
}

function writefiles ($files="all") {
	if ($files == "all") {
		foreach ($this-#gttfiles as $filename) {
			$this-#gtwrite($filename);
		}
	} else {
		$this-#gtwrite($files);
		$this-#gtfiles[$filename] = 0;
		$this-#gtopenfile[$filename];
	}
}

function write ($file) {
	$filename = $file;
	if ($this-#gtfiles[$filename] == 0) {
		$this-#gtfiles[$filename] = array();
	}
	$file = $this-#gtfiles[$filename];
	$newfile = serialize($file);
	$fhandle = fopen($filename, "w");
	if ($this-#gtfilelock) {@flock ($fhandle, LOCK_EX);}
	fwrite($fhandle, $newfile);
	fclose ($fhandle);
	if ($this-#gtfilelock) {@flock ($fhandle, LOCK_UN);}
}

function openfile ($filename) {
	if (!isset($this-#gtfiles[$filename])) {
		$file = file($filename);
		$file = implode("", $file);
		if (empty($file)) {
			$file = array();
		} else {
			$file = unserialize($file);
		}
	}
	$this-#gtfiles[$filename] = $file;
}

function findselect ($file, $what, $bool=false) {
	$got = 0;
	$data = 0;
	if ((is_numeric($what)) #12#12 (is_int($what))) {
		$data = $this-#gtselect($file, $what);
		$got = 1;
	}
	if (empty($data)) {
		$data = $this-#gtselectwhere($file, 1, $what);
		if ($data[0] != 0) {
			$data = $data[0];
			$got = 1;
		}
	}
	if ($bool) {
		return $got;
	} else {
		return $data;
	}
}

// returns requested line as array
function select ($filename, $lineid) {
	$this-#gtopenfile($filename);
	$line = array();
	foreach ($this-#gtfiles[$filename] as $line) {
		if ($line[0] == $lineid) {
			return $line;
		}
	}
}

// returns multi-dimensional array
function selectall ($filename) {
	$this-#gtopenfile($filename);
	return $this-#gtfiles[$filename];
}

// returns 0 if not found, or the lines found
function selectwhereNOT ($filename, $partid, $part, $both=false, $partid2="", $part2="") {
	$nl = 0;
	$al = 0;
	$this-#gtopenfile($filename);
	$not_lines = array();
	$are_lines = array();
	foreach ($this-#gtfiles[$filename] as $line) {
		if (!empty($part2)) {
			if (($line[$partid] == $part) && ($line[$partid2] == $part2)) {
				array_push($are_lines, $line);
				$al = 1;
			} else {
				array_push($not_lines, $line);
				$nl = 0;
			}
		} else {
			if ($line[$partid] == $part) {
				array_push($are_lines, $line);
				$al = 1;
			} else {
				array_push($not_lines, $line);
				$nl = 0;
			}
		}
	}
	if ($al #12#12 $nl) {
		if ($both) {
			return array($not_lines, $are_lines);
		} else {
			return $not_lines;
		}
	} else {
		return 0;
	}
}

function selectwhere_byletter ($filename, $partid, $letter) {
	$this-#gtopenfile($filename);
	$al = 0;
	$lines = array();
	foreach ($this-#gtfiles[$filename] as $line) {
		if (strtoupper($line[$partid]{0}) == strtoupper($letter)) {
			array_push($lines, $line);
			$al = 1;
		}
	}
	if ($al) {
		return $lines;
	} else {
		return 0;
	}
}

// returns 0 if not found, or the lines found
function selectwhere ($filename, $partid, $part) {
	$this-#gtopenfile($filename);
	$lines = array();
	$ch = 0;
	foreach ($this-#gtfiles[$filename] as $line) {
		if ($line[$partid] == $part) {
			array_push($lines, $line);
			$ch = 1;
		}
	}
	if ($ch) {
		return $lines;
	} else {
		return array();
	}
}

// returns 0 if not found, or the lines found
function super_selectwhere ($filename, $dbarray) {
	$this-#gtopenfile($filename);
	$lines = array();
	$ch = 0;
	foreach ($this-#gtfiles[$filename] as $line) {
		$valid = 1;
		for ($i=0;($i #lt count($line));$i++) {
			if (isset($dbarray[$i])) {
				if (($dbarray[$i] == $line[$i]) && ($valid != "z")) {
					$valid == 1;
				} else {
					$valid = "z";
				}
			}
		}
		if ($valid != "z") {
			$ch = 1;
			array_push($lines, $line);
		}
	}
	if ($ch) {
		return $lines;
	} else {
		return array();
	}
}

function replace ($filename, $line) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	for ($i=0; $i#ltcount($this-#gtfiles[$filename]);$i++) {
		if ($this-#gtfiles[$filename][$i][0] == $line[0]) {
			$this-#gtfiles[$filename][$i] = $line;
		}
	}
	return 1;
}

// returns 0 if not found, or the lines found
function where ($table, $partid, $part) {
	$lines = array();
	foreach ($table as $row) {
		if ($row[$partid] == $part) {
			array_push($lines, $row);
		}
	}
	return $lines;
}

// returns multi-deminsional array
function selectsort ($filename, $sort) {
	$this-#gtopenfile($filename);
	$lines = $this-#gtfiles[$filename];
	$lines = $this-#gtsort($lines, $sort);
	return $lines;
}

// returns multi-deminsional array
function sort ($lines, $sort) {
	// this just seems to go better if we sort it twice.
	for ($t=0; $t#lt=count($lines); $t++) {
		// for each line, $i is the line
		for ($i=0; $i #lt count($lines); $i++) {
			// everytime line $i is less than the next line
			while (strtolower($lines[$i][$sort]) #lt strtolower($lines[$i-1][$sort])) {
				// make a place to temporarily store $i.
				$temp = array();
				$temp = $lines[$i];
				// line $i becomes $i++
				$lines[$i] = $lines[$i-1];
				// line $i++ becomes line $i
				$lines[$i-1] = $temp;
				// this process repeats until all values greater than line i
				// are above line i
			}
		}
	}
	return $lines;
}

function moveoneup ($filename, $line) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	// for each line, $i is the line
	$continue = True;
	for ($i=1; $continue == True; $i++) {
		// everytime line $i is less than the next line
		if ($this-#gtfiles[$filename][$i][0] == $line) {
			// make a place to temporarily store $i++.
			$temp = array();
			$temp = $this-#gtfiles[$filename][$i-1];
			// line $i becomes $i++
			$this-#gtfiles[$filename][$i-1] = $this-#gtfiles[$filename][$i];
			// line $i becomes line $i++
			$this-#gtfiles[$filename][$i] = $temp;
			$continue = False;
		}
		if ($i #gt count($this-#gtfiles[$filename])) {$continue = False;}
	}
}

function moveonedown ($filename, $line) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	// for each line, $i is the line
	$continue = True;
	for ($i=0; $continue == True; $i++) {
		// everytime line $i is less than the next line
		if ($this-#gtfiles[$filename][$i][0] == $line) {
			// make a place to temporarily store $i++.
			$temp = array();
			$temp = $this-#gtfiles[$filename][$i+1];
			// line $i becomes $i--
			$this-#gtfiles[$filename][$i+1] = $this-#gtfiles[$filename][$i];
			// line $i becomes line $i++
			$this-#gtfiles[$filename][$i] = $temp;
			$continue = False;
		}
		if ($i #gt= count($this-#gtfiles[$filename])-2) {$continue = False;}
	}
}

// returns 1 when complete
function update ($filename, $lineid, $newline) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	for ($i=0; $i #lt count($this-#gtfiles[$filename]); $i++) {
		if ($this-#gtfiles[$filename][$i][0] == $lineid) {
			$this-#gtfiles[$filename][$i] = $newline;
		}
	}
	return 1;
}

// replaces an entire db with $newfile [$newfile is an array ;)]
function updatefile ($filename, $newfile) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	$this-#gtfiles[$filename] = $newfile;
	return 1;
}
	
// returns $lineid when complete
function insert($filename, $newline) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	$lineid = (count($this-#gtfiles[$filename])+1);
	array_unshift($newline, $lineid);
	array_push($this-#gtfiles[$filename], $newline);
	return $lineid;
}
	
// returns 1 when complete
function delete($filename, $lineid) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	for ($i=0; $i#ltcount($this-#gtfiles[$filename]);$i++) {
		if ($this-#gtfiles[$filename][$i][0] == $lineid) {
			$this-#gtfiles[$filename][$i] = array($lineid);
		}
	}
	return 1;
}

function clear ($filename) {
	$this-#gtopenfile($filename);
	$this-#gttouchfile($filename);
	$this-#gtfiles[$filename] = array(array());
}

function inputize2 ($array) {
	$args = func_get_args();
	foreach ($array as $value) {
		if (isset($args[1]) && isset($args[2])) {
			$value = $this-#gtinputize($value, $args[1], $args[2]);
		} elseif (isset($args[1])) {
			$value = $this-#gtinputize($value, $args[1]);
		} else {
			$value = $this-#gtinputize($value);
		}
	}
	return $array;
}

// $text to inputize, maximum length of text, maxsize of any one word
function inputize () {
	$args = func_get_args();
	$text = $args[0];
	if ((isset($args[1])) && (strlen($text) #gt $args[1])) {
		$text = substr($text, 0, $args[1]);
	}
	if (isset($args[2])) {
	// the following loop was found at php.net
	// http://www.php.net/manual/en/ref.strings.php
	// created by heiko@individual-web.com
		$l = 0;
		$temp = "";
		for ($i = 0; $i #lt strlen($text); $i++) {
			$char = substr($text,$i,1);
			if ($char != " ") { $l++; }
			else { $l = 0; }
			if ($l == $args[2]) { $l = 0; $temp .= " "; }
			$temp .= $char;
		}
		$text = $temp;
	}
	$text = stripslashes($text);
	return $text;
}

function deinputize ($text) {
	$text = str_replace("#ltBR#gt", "\n", $text);
	$text = str_replace("#ltBR#gt", "\n", $text);
	$text = str_replace("&lt;br&gt;", "\n", $text);
	$text = str_replace("&lt;BR&gt;", "\n", $text);
	$text = str_replace("#ltRETURN#gt", "\n", $text);
	return $text;
}

}

?#gt";}i:68;a:2:{i:0;s:19:"lib/admin.links.php";i:1;s:173:"#lt?
	global $a;
	if ($this-#gtadministrator == true) {
		$this-#gtextenders['acp']-#gtadminjump($a, $this-#gtlng, $this-#gtbutton($this-#gtlng['misc']['go']));
	}
?#gt";}i:69;a:2:{i:0;s:26:"lib/email.controlpanel.php";i:1;s:4815:"#lt?php

class exclusive extends genesis {

function execute () {
	global $type;
	if ($this-#gtadministrator) {
		$this-#gtheader();
		$this-#gtadminlinks();
		if ($type == "save") {
			$this-#gtsaveoptions();
		} else {
			$this-#gtspecify();
		}
		$this-#gtfooter();
	} else {
		$this-#gtheader();
		$this-#gtaccesslog['description'] = $this-#gtlng['errors']['unauth_action'];
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_perm']);
		$this-#gtfooter();
	}
}

function adminlinks () {
	include "lib/admin.links.php";
}

function specify () {
	global $a;
?#gt#ltTABLE WIDTH="100%" CELLPADDING="2" CELLSPACING="1" CLASS="bordertable"#gt
#ltFORM ACTION="acp.php" METHOD="post" NAME="acpgen"#gt
    #ltINPUT TYPE="hidden" NAME="a" VALUE="#lt?=$a?#gt"#gt
        #ltINPUT TYPE="hidden" NAME="type" VALUE="save"#gt
    #ltTR#gt
      #ltTD COLSPAN="2" ALIGN="center" CLASS="ctable2"#gt#lt?=$this-#gtbutton($this-#gtlng['misc']['ok'])?#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2" COLOR="blue"#gt#lt?=$this-#gtlng['acp']['ase']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="enable_mail"#gt
					#ltOPTION #lt? if ($this-#gtsettings['enable_mail'] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings['enable_mail'] == "0") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2" COLOR="blue"#gt#lt?=$this-#gtlng['acp']['bem']?#gt:#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT TYPE="TEXT" NAME="eboard_email" VALUE="#lt?=$this-#gtsettings['eboard_email']?#gt" SIZE="20"#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2" COLOR="blue"#gt#lt?=$this-#gtlng['acp']['bsv']?#gt:#ltBR#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['acp']['aaq']?#gt#lt/SPAN#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT TYPE="TEXT" NAME="edgeboardurl" VALUE="#lt?=$this-#gtsettings['edgeboardurl']?#gt" SIZE="20"#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['qem']?#gt#ltBR#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['acp']['abl']?#gt#lt/SPAN#gt#lt/FONT#gt#lt/font#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="reqir_email"#gt
					#ltOPTION #lt? if ($this-#gtsettings['reqir_email'] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings['reqir_email'] == "0" #12#12 $this-#gtsettings['reqir_email'] == "") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['aac']?#gt#ltBR#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['acp']['aab']?#gt  #lt?=$this-#gtlng['acp']['abl']?#gt#lt/SPAN#gt#lt/FONT#gt#lt/font#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="CHreqirmail"#gt
					#ltOPTION #lt? if ($this-#gtsettings['CHreqirmail'] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings['CHreqirmail'] == "0" #12#12 $this-#gtsettings['CHreqirmail'] == "") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['aad']?#gt #ltBR#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['acp']['aaa']?#gt  #lt?=$this-#gtlng['acp']['abl']?#gt#lt/SPAN#gt#lt/FONT#gt#lt/font#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="enablefemal"#gt
					#ltOPTION #lt? if ($this-#gtsettings['enablefemal'] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings['enablefemal'] == "0" #12#12 $this-#gtsettings['enablefemal'] == "") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD COLSPAN="2" ALIGN="center" CLASS="ctable2"#gt#lt?=$this-#gtbutton($this-#gtlng['misc']['ok'])?#gt#lt/TD#gt
    #lt/TR#gt
#lt/TABLE#gt#lt/form#gt
#lt?
}

}?#gt";}i:70;a:2:{i:0;s:38:"lib/forums-categories.controlpanel.php";i:1;s:5774:"#lt?php

class exclusive extends genesis {

function execute () {
	global $type;
	if ($this-#gtadministrator) {
		$this-#gtheader();
		$this-#gtadminlinks();
		if ($type == "newcategory") {
			$this-#gtaccesslog['nullify'] = true;
			$this-#gtnewcategory();
		} elseif ($type == "newcategory2") {
			$this-#gtnewcategory2();
		} elseif ($type == "deletecategory") {
			$this-#gtdeletecategory();
		} elseif ($type == "deletecategory2") {
			$this-#gtdeletecategory2();
		} else {
			$this-#gtspecify();
		}
		$this-#gtfooter();
	} else {
		$this-#gtheader();
		$this-#gtaccesslog['description'] = $this-#gtlng['errors']['unauth_action'];
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_perm']);
		$this-#gtfooter();
	}
}

function adminlinks () {
	include "lib/admin.links.php";
}

function specify () {
	$acats = $this-#gtselectall("data/categories.php");
?#gt
       #ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="4%"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" WIDTH="53%"#gt#lt?=$this-#gtlng['misc']['name']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="29%"#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD COLSPAN=5 CLASS="category"#gt#lt?=$this-#gtlng['forum']['categories']?#gt [ #ltA CLASS="catlink" HREF="acp.php#lt?=$this-#gts?#gta=#lt?=$this-#gta?#gt&type=newcategory" class="catlink"#gt#lt?=$this-#gtlng['forum']['new_categroy']?#gt#lt/a#gt ]#lt/TD#gt
	 #lt/TR#gt
#lt?
	$current = 1;
	foreach ($acats as $acat) {
?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable#lt?=$current?#gt" ALIGN="center" WIDTH="4%"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/forumnew.gif"#gt#lt/TD#gt
	  #ltTD CLASS="ctable#lt?=$current?#gt" COLSPAN="4" WIDTH="53%"#gt
	      #ltTABLE WIDTH="100%" CELLPADDING="0" CELLSPACING="0" BORDER="0" CLASS="regular"#gt
		 #ltTR#gt
		  #ltTD#gt#lt?=$acat[1]?#gt#lt/TD#gt
		  #ltTD ALIGN="right"#gt[ #ltA HREF="acp.php#lt?=$this-#gts?#gta=#lt?=$this-#gta?#gt&type=deletecategory&catnumber=#lt?=$acat[0]?#gt"#gt#lt?=$this-#gtlng['moderate']['delete']?#gt#lt/A#gt ]#lt/TD#gt
		 #lt/TR#gt
	      #lt/TABLE#gt
	  #lt/TD#gt
	 #lt/TR#gt
#lt?
       if ($current == 1) {
	       $current = 2;
       } else {
	       $current = 1;
       }

       }
?#gt
#lt/TABLE#gt
#lt?
}

function newcategory () {
	$form =	"#ltform action=\"acp.php\" method=\"post\"#gt\n";
	$form = $form . "#ltinput type=\"hidden\" name=\"a\" value=\"$this-#gta\"#gt\n";
	$form = $form . "#ltinput type=\"hidden\" name=\"type\" value=\"newcategory2\"#gt\n";
	$form = $form . $this-#gtlng['misc']['name'] . ": #ltinput name=\"catname\" size=\"25\"#gt#ltbr#gt\n";;
	$form = $form . "#ltcenter#gt#lt@=$this-#gtbutton( " . $this-#gtlng['misc']['ok'] . ")@#gt#lt/center#gt#lt/form#gt\n";
	$this-#gtdisplaymessage($this-#gtlng['forum']['new_categroy'], $form);
}

function newcategory2 () {
	global $catname;
	$categroies = $this-#gtselectall("data/categories.php");
	$catid = 1;
	foreach ($categroies as $category) {
		if ($category[0] #gt $catid) {
			$catid = $category[0];
		}
	}
	$catid++;
	$save = array($catid, $this-#gtinputize($catname), "");
	$c = $this-#gtinsertid("data/categories.php", $catid, $save);
	$addnew = "#lta href=\"index.php".$this-#gts."a=iai&type=newforum&category=".$c."\"#gt".$this-#gtlng['acp']['add']."#lt/a#gt";
	$message = $this-#gtemerald($this-#gtlng['acp']['cbc'], "%e", $d);
	$this-#gtdisplaymessage($this-#gtlng['forum']['new_categroy'], $this-#gtemerald($message, "%a", $addnew));
}

function deletecategory () {
	global $catnumber;
	$acats = $this-#gtselectall("data/categories.php");
	foreach ($acats as $acat) {
		 if ($acat[0] != $catnumber) {
			   $cattxt = $cattxt . "#ltoption value=\"" . $acat[0] . "\"#gt" . $acat[1] . "#lt/option#gt\n";
		 }
	}
	$cat = $this-#gtselect("data/categories.php", $catnumber);
	$title = $this-#gtemerald($this-#gtlng['acp']['sdc'], "", $cat[1]);
	$button = $this-#gtbt.$this-#gtlng['misc']['ok'].$this-#gtbe;
	$category = $acats[($catnumber-1)][1];
	$formhtml = #lt#lt#ltHTML
    #ltinput type="hidden" name="catnumber" value="$catnumber"#gt
	#ltspan class="regular"#gt{$title}#lt/span#gt
	#ltcenter#gt#ltselect name="resultcat"#gt$cattxt#lt/select#gt#lt/center#gt
	#ltcenter#gt$button#lt/center#gt
HTML;
	echo '#ltform action="acp.php" method="post"#gt';
	echo '    #ltinput type="hidden" name="a" value="'.$this-#gta.'"#gt';
	echo '    #ltinput type="hidden" name="type" value="deletecategory2"#gt';
	$this-#gtdisablesecurity = true;
	$this-#gtdisplaymessage($this-#gtlng['moderate']['delete'], $formhtml);
	$this-#gtdisablesecurity = false;
	echo '  #lt/form#gt';
}

function deletecategory2 () {
	global $catnumber, $resultcat;
	$movecats = $this-#gtselect("data/categories.php", $catnumber);
	$list = $movecats[2];
	$destcats = $this-#gtselect("data/categories.php", $resultcat);
	$prev = $destcats[2];
	$success = $this-#gtdelete("data/categories.php", $catnumber);
	$prevcat = $movecats[1];
	$exiscat = $destcats[1];
	$s = ",";
	if (empty($list)) { $s = ""; }
	if (empty($prev)) { $s = ""; }
	$dbforum = $this-#gtselect("data/categories.php", $resultcat);
	$dbforum[2] = $this-#gtinputize($list.$s.$prev);
	$this-#gtupdate("data/categories.php", $resultcat, $dbforum);
	if ($success == 1) {
		$this-#gtdisplaymessage($this-#gtlng['misc']['op_complete'], $this-#gtlng['misc']['op_successs']);
	} else {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['nonsp']);
	}
}

}?#gt";}i:71;a:2:{i:0;s:28:"lib/general.controlpanel.php";i:1;s:13869:"#lt?php

class exclusive extends genesis {

function execute () {
	global $type;
	if ($this-#gtadministrator) {
		$this-#gtheader();
		$this-#gtadminlinks();
		if ($type == "save") {
			$this-#gtsaveoptions();
		} else {
			$this-#gtspecify();
		}
		$this-#gtfooter();
	} else {
		$this-#gtheader();
		$this-#gtaccesslog['description'] = $this-#gtlng['errors']['unauth_action'];
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['no_perm']);
		$this-#gtfooter();
	}
}

function adminlinks () {
	include "lib/admin.links.php";
}

function specify () {
	global $a;
	$unit[0] = " b";
	$unit[1] = " kb";
	$unit[2] = " mb";
?#gt#ltTABLE WIDTH="100%" CELLPADDING="2" CELLSPACING="1" CLASS="bordertable"#gt
#ltFORM ACTION="acp.php" METHOD="post" NAME="acpgen"#gt
    #ltINPUT TYPE="hidden" NAME="a" VALUE="#lt?=$a?#gt"#gt
        #ltINPUT TYPE="hidden" NAME="type" VALUE="save"#gt
    #ltTR#gt
      #ltTD COLSPAN="2" ALIGN="center" CLASS="ctable2"#gt#lt?=$this-#gtbutton($this-#gtlng['misc']['ok'])?#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['bdn']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT TYPE="TEXT" NAME="edgebrd_name" VALUE="#lt?=$this-#gtsettings[edgebrd_name]?#gt" SIZE="20"#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['wbs']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT TYPE="TEXT" VALUE="#lt?=$this-#gtsettings[board_locatn]?#gt" NAME="board_locatn" SIZE="20"#gt#lt/TD#gt
    #lt/TR#gt
    #lt/tr#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['sta']?#gt #lt?=$this-#gthelpbutton('board_status')?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="board_status"#gt
					#ltOPTION #lt? if ($this-#gtsettings[board_status]=="0") { ?#gtSELECTED #lt? } ?#gtVALUE="0"#gt#lt?=$this-#gtlng['acp']['st1']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[board_status]=="1") { ?#gtSELECTED #lt? } ?#gtVALUE="1"#gt#lt?=$this-#gtlng['acp']['st2']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[board_status]=="2") { ?#gtSELECTED #lt? } ?#gtVALUE="2"#gt#lt?=$this-#gtlng['acp']['st3']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[board_status]=="3") { ?#gtSELECTED #lt? } ?#gtVALUE="3"#gt#lt?=$this-#gtlng['acp']['st4']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['mas']?#gt #lt?=$this-#gthelpbutton('maxup')?#gt
      #ltBR#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['acp']['svz']?#gt#lt/SPAN#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="max_upld_sz"#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="0") { ?#gtSELECTED #lt? } ?#gtVALUE="0"#gt0 b#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="5120") { ?#gtSELECTED #lt? } ?#gtVALUE="5120"#gt5 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="10240") { ?#gtSELECTED #lt? } ?#gtVALUE="10240"#gt10 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="15360") { ?#gtSELECTED #lt? } ?#gtVALUE="15360"#gt15 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="20480") { ?#gtSELECTED #lt? } ?#gtVALUE="20480"#gt20 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="25600") { ?#gtSELECTED #lt? } ?#gtVALUE="25600"#gt25 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="30720") { ?#gtSELECTED #lt? } ?#gtVALUE="30720"#gt30 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="35840") { ?#gtSELECTED #lt? } ?#gtVALUE="35840"#gt35 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="40960") { ?#gtSELECTED #lt? } ?#gtVALUE="40960"#gt40 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="46080") { ?#gtSELECTED #lt? } ?#gtVALUE="46080"#gt45 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="51200") { ?#gtSELECTED #lt? } ?#gtVALUE="51200"#gt50 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="56320") { ?#gtSELECTED #lt? } ?#gtVALUE="56320"#gt55 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="61440") { ?#gtSELECTED #lt? } ?#gtVALUE="61440"#gt60 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="66560") { ?#gtSELECTED #lt? } ?#gtVALUE="66560"#gt65 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="71680") { ?#gtSELECTED #lt? } ?#gtVALUE="71680"#gt70 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="76800") { ?#gtSELECTED #lt? } ?#gtVALUE="76800"#gt75 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="81920") { ?#gtSELECTED #lt? } ?#gtVALUE="81920"#gt80 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="87040") { ?#gtSELECTED #lt? } ?#gtVALUE="87040"#gt85 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="92160") { ?#gtSELECTED #lt? } ?#gtVALUE="92160"#gt90 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="97280") { ?#gtSELECTED #lt? } ?#gtVALUE="97280"#gt95 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="102400") { ?#gtSELECTED #lt? } ?#gtVALUE="102400"#gt100 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="153600") { ?#gtSELECTED #lt? } ?#gtVALUE="153600"#gt150 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="204800") { ?#gtSELECTED #lt? } ?#gtVALUE="204800"#gt200 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="256000") { ?#gtSELECTED #lt? } ?#gtVALUE="256000"#gt250 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="307200") { ?#gtSELECTED #lt? } ?#gtVALUE="307200"#gt300 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="358400") { ?#gtSELECTED #lt? } ?#gtVALUE="358400"#gt350 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="409600") { ?#gtSELECTED #lt? } ?#gtVALUE="409600"#gt400 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="460800") { ?#gtSELECTED #lt? } ?#gtVALUE="460800"#gt450 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="512000") { ?#gtSELECTED #lt? } ?#gtVALUE="512000"#gt500 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="563200") { ?#gtSELECTED #lt? } ?#gtVALUE="563200"#gt550 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="614400") { ?#gtSELECTED #lt? } ?#gtVALUE="614400"#gt600 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="665600") { ?#gtSELECTED #lt? } ?#gtVALUE="665600"#gt650 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="716800") { ?#gtSELECTED #lt? } ?#gtVALUE="716800"#gt700 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="768000") { ?#gtSELECTED #lt? } ?#gtVALUE="768000"#gt750 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="819200") { ?#gtSELECTED #lt? } ?#gtVALUE="819200"#gt800 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="870400") { ?#gtSELECTED #lt? } ?#gtVALUE="870400"#gt850 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="921600") { ?#gtSELECTED #lt? } ?#gtVALUE="921600"#gt900 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="972800") { ?#gtSELECTED #lt? } ?#gtVALUE="972800"#gt950 kb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="1048576") { ?#gtSELECTED #lt? } ?#gtVALUE="1048576"#gt1 mb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="2097152") { ?#gtSELECTED #lt? } ?#gtVALUE="2097152"#gt2 mb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="3145728") { ?#gtSELECTED #lt? } ?#gtVALUE="3145728"#gt3 mb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="4194304") { ?#gtSELECTED #lt? } ?#gtVALUE="4194304"#gt4 mb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="5242880") { ?#gtSELECTED #lt? } ?#gtVALUE="5242880"#gt5 mb#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings[max_upld_sz]=="10485760") { ?#gtSELECTED #lt? } ?#gtVALUE="10485760"#gt10 mb#lt/OPTION#gt
#lt/SELECT#gt
#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['mah']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT TYPE="TEXT" VALUE="#lt?=$this-#gtsettings[max_avatr_h]?#gt" NAME="max_avatr_h" SIZE="20"#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['maw']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT TYPE="TEXT" VALUE="#lt?=$this-#gtsettings[max_avatr_w]?#gt" NAME="max_avatr_w" SIZE="20"#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['mts']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT TYPE="TEXT" VALUE="#lt?=$this-#gtsettings[max_topic_l]?#gt" NAME="max_topic_l" SIZE="20"#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['bwf']?#gt #lt?=$this-#gthelpbutton('bwf')?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT TYPE="TEXT" VALUE="#lt?=$this-#gtsettings[badwrd_fltr]?#gt" NAME="badwrd_fltr" SIZE="20" #gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['map']?#gt #lt/FONT#gt#lt?=$this-#gthelpbutton('maxpost')?#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT TYPE="TEXT" VALUE="#lt?=$this-#gtsettings[max_post_sz]?#gt" NAME="max_post_sz" MAXLENGTH="5" SIZE="5" #gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt
      #ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['mws']?#gt #lt/FONT#gt#lt?=$this-#gthelpbutton('maxch')?#gt#lt/font#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT TYPE="TEXT" VALUE="#lt?=$this-#gtsettings[max_word_sz]?#gt" NAME="max_word_sz" MAXLENGTH="5" SIZE="5"#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['tpp']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT TYPE="TEXT" VALUE="#lt?=$this-#gtsettings[topic_perpg]?#gt" NAME="topic_perpg" MAXLENGTH="3" SIZE="3"#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['ppp']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT TYPE="TEXT" VALUE="#lt?=$this-#gtsettings[posts_perpg]?#gt" NAME="posts_perpg" MAXLENGTH="3" SIZE="3"#gt#lt/TD#gt
    #lt/TR#gt#lt?
	if (extension_loaded("gd")) {?#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['gds']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="enable_gdis"#gt
					#ltOPTION #lt? if ($this-#gtsettings[enable_gdis] == true) { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if (($this-#gtsettings[enable_gdis] == false) #12#12 ($this-#gtsettings[enable_gdis] == "")) { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt#lt? } else { ?#gt
    #ltINPUT TYPE="hidden" NAME="enable_gdis" VALUE="false"#gt#lt? } ?#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['mpp']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT TYPE="TEXT" VALUE="#lt?=$this-#gtsettings[membs_perpg]?#gt" NAME="membs_perpg" MAXLENGTH="3" SIZE="3"#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['q01']?#gt#ltBR#gt#lt?=$this-#gtlng['acp']['ret']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="iai_s_forum"#gt
					#ltOPTION #lt? if ($this-#gtsettings[iai_s_forum] == true) { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if (($this-#gtsettings[iai_s_forum] == false) #12#12 ($this-#gtsettings[iai_s_forum] == "")) { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['q02']?#gt#ltBR#gt#lt?=$this-#gtlng['acp']['ret']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="pgl_s_forum"#gt
					#ltOPTION #lt? if ($this-#gtsettings[pgl_s_forum] == true) { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if (($this-#gtsettings[pgl_s_forum] == false) #12#12 ($this-#gtsettings[pgl_s_forum] == "")) { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD COLSPAN="2" ALIGN="center" CLASS="ctable2"#gt#lt?=$this-#gtbutton($this-#gtlng['misc']['ok'])?#gt#lt/TD#gt
    #lt/TR#gt
  #lt/FORM#gt
#lt/TABLE#gt
#lt?
}

}?#gt";}i:72;a:2:{i:0;s:23:"lib/pm.controlpanel.php";i:1;s:4429:"#lt?php

class exclusive extends genesis {

function execute () {
	global $type;
	if ($this-#gtadministrator) {
		$this-#gtheader();
		$this-#gtadminlinks();
		if ($type == "save") {
			$this-#gtsave();
		} else {
			$this-#gtspecify();
		}
		$this-#gtfooter();
	} else {
		$this-#gtheader();
		$this-#gtaccesslog['description'] = $this-#gtlng['errors']['unauth_action'];
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_perm']);
		$this-#gtfooter();
	}
}

function adminlinks () {
	include "lib/admin.links.php";
}

function save () {
	global $mid, $subject, $message, $when;
	if (!empty($mid)) {
		$dbmessage = $this-#gtsettings['spm'][$mid];
		$dbmessage[0] = $this-#gtinputize($mid);
		$dbmessage[1] = $this-#gtinputize($subject);
		$dbmessage[2] = $this-#gtinputize($message);
		$dbmessage[3] = $this-#gtinputize($when);
		$this-#gtsettings['spm'][$mid] = $dbmessage;
	}
	$this-#gtsaveoptions();
}

function specify () {
	global $a;
?#gt
#lttable width="100%" cellpadding="2" cellspacing="1" class="bordertable"#gt
#ltform action="acp.php" method="post" name="acpgen"#gt
    #ltinput type="hidden" name="a" value="#lt?=$a?#gt"#gt
        #ltinput type="hidden" name="type" value="save"#gt
    #lttr#gt
      #lttd colspan="2" align="center" class="ctable2"#gt#lt?=$this-#gtbutton($this-#gtlng['misc']['ok'])?#gt#lt/td#gt
    #lt/tr#gt

    #lttr#gt
      #lttd class="ctable2" width="50%"#gt#ltfont SIZE="2"#gt#lt?=$this-#gtlng['acp']['mpr']?#gt#lt/font#gt#lt/td#gt
      #lttd class="ctable2" valign="top"#gt#ltinput TYPE="TEXT" value="#lt?=$this-#gtsettings[max_pm_dest]?#gt" NAME="max_pm_dest" SIZE="20"#gt#lt/td#gt
    #lt/tr#gt
    #lttr#gt
      #lttd class="ctable2" width="50%"#gt#ltfont SIZE="2"#gt#lt?=$this-#gtlng['acp']['mmi']?#gt#lt/font#gt#lt/td#gt
      #lttd class="ctable2" valign="top"#gt#ltinput TYPE="TEXT" value="#lt?=$this-#gtsettings[max_pm_inbx]?#gt" NAME="max_pm_inbx" SIZE="20"#gt#lt/td#gt
    #lt/tr#gt
    #lttr#gt
      #lttd colspan="2" align="center" class="ctable2"#gt#lt?=$this-#gtbutton($this-#gtlng['misc']['ok'])?#gt#lt/td#gt
    #lt/tr#gt
#lt/table#gt#lt/form#gt
#ltbr#gt
       #lttable width="100%" cellpadding=2 cellspacing=1 class="bordertable"#gt
         #lttr#gt
          #lttd class="ctable1" align="center" width="4%"#gt#lt/td#gt
          #lttd class="ctable1" width="53%"#gt#lt?=$this-#gtlng['acp']['typ']?#gt#lt/td#gt
          #lttd class="ctable1" align="center" width="7%"#gt#lt/td#gt
          #lttd class="ctable1" align="center" width="7%"#gt#lt/td#gt
          #lttd class="ctable1" align="center" width="29%"#gt#lt/td#gt
         #lt/tr#gt
         #lttr#gt
          #lttd colspan=5 class="category"#gt#lt?=$this-#gtboardname?#gt #lt?=$this-#gtlng['acp']['spm']?#gt#lt/td#gt
         #lt/tr#gt
#lt?
	$spms = $this-#gtsettings['spm'];
	$current = 2;
	foreach ($spms as $spm) {
		$id = $spm[0];
?#gt
         #lttr#gt
          #lttd class="ctable#lt?=$current?#gt" align="center" width="4%"#gt#ltimg src="#lt?=$this-#gttp['forum']?#gtimages/forumnew.gif"#gt#lt/td#gt
          #lttd class="ctable#lt?=$current?#gt" colspan="4" width="53%"#gt
              #lttable width="100%" cellpadding="0" cellspacing="0" border="0" class="regular"#gt
	#ltform method="post" action="acp.php"#gt
	#ltinput type="hidden" name="a" value="pm.controlpanel"#gt
	#ltinput type="hidden" name="type" value="save"#gt
	#ltinput type="hidden" name="mid" value="#lt?=$spm[0]?#gt"#gt
                 #lttr#gt
                  #lttd#gt#ltb#gt#lt?=$this-#gtlng['system']['t'][$id]?#gt &raquo;#lt/b#gt #lt?=$this-#gtlng['system']['d'][$id]?#gt#lt/td#gt
                 #lt/tr#gt
		 #lttr#gt
		  #lttd#gt
		  #lt?=$this-#gtlng['forum']['subject']?#gt: #ltinput TYPE="TEXT" value="#lt?=$spm[1]?#gt" NAME="subject" SIZE="40"#gt#lt/td#gt
                 #lt/tr#gt
		 #lttr#gt
		  #lttd#gt#lt?=$this-#gtlng['misc']['mess']?#gt#ltbr#gt
		   #lttextarea name="message" cols=80 rows=8#gt#lt?=$spm[2]?#gt#lt/textarea#gt
		  #lt/td#gt
                 #lt/tr#gt
		 #lttr#gt
                  #lttd#gt#ltcenter#gt#lt?=$this-#gtbutton($this-#gtlng['misc']['ok'])?#gt#lt/center#gt#lt/b#gt
		  #lt/td#gt
	#lt/form#gt
		 #lt/tr#gt
              #lt/table#gt
          #lt/td#gt
         #lt/tr#gt
#lt?
	}
?#gt
       #lt/table#gt#ltbr#gt
#lt?
}

}
?#gt";}i:73;a:2:{i:0;s:27:"lib/safety.controlpanel.php";i:1;s:5359:"#lt?php

class exclusive extends genesis {

function execute () {
	global $type;
	if ($this-#gtadministrator) {
		$this-#gtheader();
		$this-#gtadminlinks();
		if ($type == "safety") {
			$this-#gtsafety();
		} else {
			$this-#gtspecify();
		}
		$this-#gtfooter();
	} else {
		$this-#gtheader();
		$this-#gtaccesslog['description'] = $this-#gtlng['errors']['unauth_action'];
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_perm']);
		$this-#gtfooter();
	}
}

function adminlinks () {
	include "lib/admin.links.php";
}

function safety () {
	global $method, $sel, $op;
	$selection = array();
	array_push($selection, $sel);
	if ($method == "backup") {
		foreach ($selection as $targ) {
			if (!file_exists("backup/")) {
				mkdir("backup/", 0777);
			}
			if (!file_exists("backup/updates")) {
				mkdir("backup/updates", 0777);
			}
			if (!file_exists("backup/data")) {
				mkdir("backup/data", 0777);
			}
			if (!file_exists("backup/html")) {
				mkdir("backup/html", 0777);
			}
			if (!file_exists("backup/".$targ)) {
				mkdir("backup/".$targ, 0777);
			}
			$this-#gtdirectory("B", $targ);
			$this-#gtrunqueued();
			$this-#gtdisplaymessage($this-#gtlng['misc']['op_complete'], $this-#gtlng['misc']['op_successs']);
		}
	} elseif ($method = "restore") {
		foreach ($selection as $targ) {
			if (!file_exists("backup/".$targ)) {
				$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['bar']['aad']);
				$this-#gtfooter();
				die();
			} else {
				$this-#gtdirectory("R", "data/");
				$this-#gtrunqueued();
				$this-#gtdisplaymessage($this-#gtlng['misc']['op_complete'], $this-#gtlng['misc']['op_successs']);
			}
		}
	} else {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['bar']['aab']);
		$this-#gtfooter();
		die();
	}
}

function specify () {
?#gt#ltTABLE WIDTH="100%" CELLPADDING="2" CELLSPACING="1" CLASS="bordertable"#gt
#ltFORM ACTION="acp.php" METHOD="post" NAME="acpgen" ENCTYPE="APPLICATION/X-WWW-FORM-URLENCODED"#gt
    #ltINPUT TYPE="hidden" NAME="a" VALUE="#lt?=$this-#gta?#gt"#gt
        #ltINPUT TYPE="hidden" NAME="type" VALUE="safety"#gt
    #ltTR#gt
      #ltTD COLSPAN="2" ALIGN="center" CLASS="ctable2"#gt#lt?=$this-#gtlng['errors']['bar']['aae']?#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD COLSPAN="1" ALIGN="center" CLASS="ctable2"#gt
	#ltTABLE WIDTH="100%" CELLPADDING="2" CELLSPACING="1" CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD ALIGN="left" CLASS="ctable2"#gt#ltINPUT TYPE="radio" NAME="method" VALUE="backup"#gt #lt?=$this-#gtlng['errors']['bar']['aaf']?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt
      #lt/TD#gt
      #ltTD COLSPAN="1" ALIGN="center" CLASS="ctable2"#gt
	#ltTABLE WIDTH="100%" CELLPADDING="2" CELLSPACING="1" CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD ALIGN="left" CLASS="ctable2"#gt#ltINPUT TYPE="radio" NAME="method" VALUE="restore"#gt #lt?=$this-#gtlng['errors']['bar']['aag']?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt
      #lt/TD#gt
    #lt/TR#gt
	#ltTR#gt
	  #ltTD ALIGN="left" CLASS="ctable2" COLSPAN="100%" ALIGN="CENTER"#gt	#ltSELECT NAME="sel"#gt
				#ltOPTION SELECTED VALUE="data/"#gt#lt?=$this-#gtlng['errors']['bar']['aah']?#gt#lt/OPTION#gt
				#ltOPTION VALUE="html/themes/"#gt#lt?=$this-#gtlng['acp']['themes']?#gt#lt/OPTION#gt
				#ltOPTION VALUE="updates/"#gt#lt?=$this-#gtlng['acp']['acp_jump']['07']?#gt#lt/OPTION#gt	
#lt/SELECT#gt#lt/TD#gt
	#lt/TR#gt

    #ltTR#gt
      #ltTD COLSPAN="2" ALIGN="center" CLASS="ctable2"#gt#lt?=$this-#gtbutton($this-#gtlng['misc']['ok'])?#gt#lt/TD#gt
    #lt/TR#gt
#lt/TABLE#gt#lt/form#gt
#lt?
}

function directory ($t, $dir) {
	$b = "backup/";
	$backupdir = $b.$dir;
	$directory = $dir;
	if ($t == "B") {
		if ($handle = opendir($directory)) {
			while (false !== ($file = readdir($handle))) {
				if (($file != ".") && ($file != "..") && ($file != "...")) {
					if (is_dir($directory.$file)) {
						if (!file_exists($backupdir.$file)) {
							mkdir($backupdir.$file, 0777);
						}
						$this-#gtqueue($t, $directory.$file);
					} elseif (is_file($directory.$file)) {
						if (file_exists($backupdir.$file)) {
							unlink($backupdir.$file);
						}
						copy($directory.$file, $backupdir.$file);
						chmod($backupdir.$file, 0777);
					}
				}
			}
		}
		closedir($handle);
	}

	if ($t == "R") {
		if ($handle = opendir($directory)) {
			while (false !== ($file = readdir($handle))) {
				if (is_dir($backupdir.$file)) {
					if (!file_exists($directory.$file)) {
						mkdir($directory.$file, 0777);
					}
					$this-#gtqueue($t, $directory.$file);
				} elseif (is_file($backupdir.$file)) {
					if (file_exists($directory.$file)) {
						unlink($directory.$file);
					}
					copy($backupdir.$file, $directory.$file);
					chmod($directory.$file, 0777);
				}
			}
		}
		closedir($handle);
	}
}

function queue ($t, $dir) {
	if (!isset($this-#gtqueued)) {
		$this-#gtqueued = array();
	}
	if (substr($dir, -1) != "/") {
		$dir = $dir."/";
	}
	array_push($this-#gtqueued, array($t, $dir));
}

function runqueued () {
	if (isset($this-#gtqueued)) {
		foreach ($this-#gtqueued as $queued) {
			$this-#gtdirectory($queued[0], $queued[1]);
		}
	}
}

}?#gt";}i:74;a:2:{i:0;s:36:"lib/time-automation.controlpanel.php";i:1;s:3286:"#lt?php

class exclusive extends genesis {

function execute () {
	global $type;
	if ($this-#gtadministrator) {
		$this-#gtheader();
		$this-#gtadminlinks();
		if ($type == "save") {
			$this-#gtsaveoptions();
		} else {
			$this-#gtspecify();
		}
		$this-#gtfooter();
	} else {
		$this-#gtheader();
		$this-#gtaccesslog['description'] = $this-#gtlng['errors']['unauth_action'];
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_perm']);
		$this-#gtfooter();
	}
}

function adminlinks () {
	include "lib/admin.links.php";
}

function specify () {
	global $a;
?#gt#ltTABLE WIDTH="100%" CELLPADDING="2" CELLSPACING="1" CLASS="bordertable"#gt
#ltFORM ACTION="acp.php" METHOD="post" NAME="acpgen"#gt
    #ltINPUT TYPE="hidden" NAME="a" VALUE="#lt?=$a?#gt"#gt
        #ltINPUT TYPE="hidden" NAME="type" VALUE="save"#gt
    #ltTR#gt
      #ltTD COLSPAN="2" ALIGN="center" CLASS="ctable2"#gt#lt?=$this-#gtbutton($this-#gtlng['misc']['ok'])?#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt
      #ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['btf']?#gt #lt?=$this-#gthelpbutton('time_format')?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT TYPE="TEXT" VALUE="#lt?=$this-#gtsettings['time_format']?#gt" NAME="time_format" SIZE="20"#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt
      #ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['stf']?#gt #lt?=$this-#gthelpbutton('time_format')?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT TYPE="TEXT" VALUE="#lt?=$this-#gtsettings['stimeformat']?#gt" NAME="stimeformat" SIZE="20"#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt
      #ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['ltf']?#gt #lt?=$this-#gthelpbutton('time_format')?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT TYPE="TEXT" VALUE="#lt?=$this-#gtsettings['ltimeformat']?#gt" NAME="ltimeformat" SIZE="20"#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['otl']?#gt #lt?=$this-#gthelpbutton('olt')?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="online_limit"#gt#lt?
					for ($i=5;$i#lt=60;$i++) {?#gt
					#ltOPTION #lt? if($this-#gtsettings['online_limit'] == ($i*60)) { ?#gtSELECTED #lt? } ?#gtVALUE="#lt? echo ($i*60); ?#gt"#gt#lt?=$i?#gt#lt/OPTION#gt
#lt?					} ?#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt
      #ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['pot']?#gt: #lt/FONT#gt#lt/b#gt#lt?=$this-#gthelpbutton('posttime')?#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="posting_dly"#gt
#lt?
					for ($i=0;$i#lt=180;$i++) {
?#gt					#ltOPTION #lt? if($this-#gtsettings['posting_dly'] == $i) { ?#gtSELECTED #lt? } ?#gtVALUE="#lt?=$i?#gt"#gt#lt?=$i?#gt#lt/OPTION#gt
#lt?					}?#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD COLSPAN="2" ALIGN="center" CLASS="ctable2"#gt#lt?=$this-#gtbutton($this-#gtlng['misc']['ok'])?#gt#lt/TD#gt
    #lt/TR#gt
#lt/TABLE#gt#lt/form#gt
#lt?
}

}?#gt";}i:75;a:2:{i:0;s:32:"lib/titles-pips.controlpanel.php";i:1;s:6481:"#lt?php

class exclusive extends genesis {

function execute () {
	global $type;
	if ($this-#gtadministrator) {
		$this-#gtheader();
		$this-#gtadminlinks();
		if ($type == "title") {
			$this-#gtpip();
		} elseif ($type == "title2") {
			$this-#gtpip2();
		} elseif ($type == "title3") {
			$this-#gtpip3();
		} elseif ($type == "title4") {
			$this-#gtpip4();
		} elseif ($type == "title5") {
			$this-#gtpip5();
		} elseif ($type == "pip") {
			$this-#gtpip6();
		} elseif ($type == "pip2") {
			$this-#gtpip7();
		} else {
			$this-#gtpip();
		}
		$this-#gtfooter();
	} else {
		$this-#gtheader();
		$this-#gtaccesslog['description'] = $this-#gtlng['errors']['unauth_action'];
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_perm']);
		$this-#gtfooter();
	}
}

function adminlinks () {
	include "lib/admin.links.php";
}

function pip () {
	global $title, $titleid, $posts, $pips;
	$setting = 1;
	global $titleid, $move, $direction;
	if ($setting == 1) {
		$this-#gtaccesslog['description'] = "User accessed the ACP user title controls.";
		$titles = $this-#gtselectsort($this-#gtdb['titles'], 1);
?#gt
       #ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
         #ltTR#gt
          #ltTD CLASS="ctable1" ALIGN="center" WIDTH="4%"#gt#lt/TD#gt
          #ltTD CLASS="ctable1" WIDTH="53%"#gt#lt?=$this-#gtlng['acp']['tit']?#gt#lt/TD#gt
          #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#lt/TD#gt
          #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#lt/TD#gt
          #ltTD CLASS="ctable1" ALIGN="center" WIDTH="29%"#gt#lt/TD#gt
         #lt/TR#gt
         #ltTR#gt
          #ltTD COLSPAN=5 CLASS="category"#gt#lt?=$this-#gtlng['acp']['tit']?#gt [ #ltA CLASS="catlink" HREF="acp.php#lt?=$this-#gts?#gta=#lt?=$this-#gta?#gt&type=title3" class="catlink"#gt#lt?=$this-#gtlng['misc']['add']?#gt#lt/a#gt ]#lt/TD#gt
         #lt/TR#gt
#lt?
		$save = $this-#gtbt.$this-#gtlng['misc']['ok'].$this-#gtbe;
		$rename = $this-#gtbt.$this-#gtlng['moderate']['rename'].$this-#gtbe;
		$current = 1;
		$hb1 = $this-#gthelpbutton('titlerename');
		foreach ($titles as $title) {
			if ($title[0] != 1) {
				$remove = "#lta href='acp.php".$this-#gts."a=".$this-#gta."&type=title5&titleid=$title[0]'#gt".$this-#gtlng['moderate']['delete']."#lt/a#gt";
?#gt
	 #ltFORM METHOD="post" ACTION="acp.php"#gt
	 #ltINPUT TYPE="hidden" NAME="a" VALUE="#lt?=$this-#gta?#gt"#gt
	 #ltINPUT TYPE="hidden" NAME="type" VALUE="title4"#gt
	 #ltINPUT TYPE="hidden" NAME="titleid" VALUE="#lt?=$title[0]?#gt"#gt
         #ltTR#gt
          #ltTD CLASS="ctable#lt?=$current?#gt" ALIGN="center" WIDTH="4%"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/forumnew.gif"#gt#lt/TD#gt
          #ltTD CLASS="ctable#lt?=$current?#gt" COLSPAN="4" WIDTH="53%"#gt
              #ltTABLE WIDTH="100%" CELLPADDING="0" CELLSPACING="0" BORDER="0" CLASS="regular"#gt
                 #ltTR#gt#ltA NAME="#lt?=$title[0]?#gt"#gt
                  #ltTD#gt [ #ltINPUT TYPE="text" SIZE="20" NAME="title" VALUE="#lt?=$title[2]?#gt"#gt #lt?=$hb1?#gt #lt?=$rename?#gt ]#lt/TD#gt
	 #lt/FORM#gt
	 #ltFORM METHOD="post" ACTION="acp.php"#gt
	 #ltINPUT TYPE="hidden" NAME="a" VALUE="#lt?=$this-#gta?#gt"#gt
	 #ltINPUT TYPE="hidden" NAME="type" VALUE="title2"#gt
	 #ltINPUT TYPE="hidden" NAME="titleid" VALUE="#lt?=$title[0]?#gt"#gt
                  #ltTD ALIGN="right"#gt[ #lt?=$this-#gtlng['acp']['rnp']?#gt: #ltINPUT TYPE="text" NAME="posts" SIZE="5" VALUE="#lt?=$title[1]?#gt"#gt #12 #lt?=$this-#gtlng['acp']['nop']?#gt: #ltINPUT TYPE="text" NAME="pips" SIZE="2" VALUE="#lt?=$title[3]?#gt"#gt #lt?=$save?#gt ]#lt/TD#gt
                 #lt/tr#gt
		 #ltTR COLSPAN=2#gt
		  #ltTD#gt
	#ltSPAN CLASS="small"#gt[ #lt?=$remove?#gt ]#lt/SPAN#gt
		  #lt/TD#gt
		 #lt/TR#gt
              #lt/TABLE#gt
          #lt/td#gt
	 #lt/tr#gt
	 #lt/form#gt
#lt?
				if ($current == 1) {
					$current = 2;
				} else {
					$current = 1;
				}
			}
		}
	}
?#gt
#lt/table#gt
#lt?
}

function pip2 () {
	global $title, $titleid, $posts, $pips;
	$titledb = $this-#gtselect($this-#gtdb['titles'], $titleid);
	$titledb[1] = $this-#gtinputize($posts);
	$titledb[3] = $this-#gtinputize($pips);
	$this-#gtreplace($this-#gtdb['titles'], $titledb);
	$this-#gtdisplaymessage($this-#gtlng['iai']['edit'], $this-#gtlng['misc']['op_successs']);
}

function pip3 () {
	global $title, $titleid, $posts, $pips, $state;
	if ($state == 1) {
		$newtitle = array($this-#gtinputize($posts), $this-#gtinputize($title), $this-#gtinputize($pips));
		$this-#gtinserti($this-#gtdb['titles'], $newtitle);
		$this-#gtdisplaymessage($this-#gtlng['acp']['trb'], $this-#gtemerald($this-#gtlng['acp']['trc'], "%e", $title));
		$this-#gtaccesslog['description'] = "User created a new title.";
	} else {
	        $form =        "#ltform action=\"acp.php\" method=\"post\"#gt\n";
        	$form = $form . "#ltinput type=\"hidden\" name=\"a\" value=\"#lt?=$this-#gta?#gt\"#gt\n";
	        $form = $form . "#ltINPUT TYPE=\"hidden\" NAME=\"type\" VALUE=\"title3\"#gt\n";
        	$form = $form . "#ltINPUT TYPE=\"hidden\" NAME=\"state\" VALUE=\"1\"#gt\n";
	        $form = $form . $this-#gtlng['acp']['tit'] . ": #ltINPUT NAME=\"title\" SIZE=\"25\"#gt#ltBR#gt\n";
        	$form = $form . $this-#gtlng['acp']['rnp'] . ": #ltINPUT NAME=\"posts\" SIZE=\"25\" VALUE=\"0\"#gt#ltBR#gt\n";
        	$form = $form . $this-#gtlng['acp']['nop'] . ": #ltINPUT NAME=\"pips\" SIZE=\"25\" VALUE=\"0\"#gt#ltBR#gt\n";
        	$form = $form . "#lt@=$this-#gtbutton(".$this-#gtbutton($this-#gtlng['misc']['ok']).")@#gt#lt/form#gt\n";
	        $this-#gtdisplaymessage($this-#gtlng['acp']['tit'], $form);
	}
}

function pip4 () {
	global $title, $titleid, $posts, $pips;
	$titledb = $this-#gtselect($this-#gtdb['titles'], $titleid);
	if (strtoupper($title) == ":USERSET:") { $title = ":UserSet:"; }
	if (strtoupper($title) == ":PREVIOUS:") { $title = ":Previous:"; }
	$titledb[2] = $this-#gtinputize($title);
	$this-#gtreplace($this-#gtdb['titles'], $titledb);
	$this-#gtdisplaymessage($this-#gtlng['moderate']['rename'], $this-#gtlng['misc']['op_successs']);
}

function pip5 () {
	global $title, $titleid, $posts, $pips;
	$this-#gtdelete($this-#gtdb['titles'], $titleid);
	$this-#gtdisplaymessage($this-#gtlng['moderate']['delete'], $this-#gtlng['misc']['op_successs']);
}

}
?#gt";}i:76;a:2:{i:0;s:28:"lib/updates.controlpanel.php";i:1;s:5024:"#lt?php

class exclusive extends genesis {

function execute () {
	global $type;
	$this-#gtdirectory['copy/'] = "updates/";
	if ($this-#gtadministrator) {
		$this-#gtheader();
		$this-#gtadminlinks();
		if ($type == "updateboard") {
			$this-#gtupdateboard();
		} else {
			$this-#gtspecify();
		}
		$this-#gtfooter();
	} else {
		$this-#gtheader();
		$this-#gtaccesslog['description'] = $this-#gtlng['errors']['unauth_action'];
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_perm']);
		$this-#gtfooter();
	}
}

function getname ($file) {
	$name = str_replace(".exboard", "", $file);
	$name = str_replace("_", " ", $name);
	$name = ucwords($name);
	return $name;
}

function adminlinks () {
	include "lib/admin.links.php";
}

function exe ($command) {

	$execute = explode (":", $command);

	$source = $execute[1];
	$destin = $execute[2];
	$permis = $execute[3];

	if (strstr($command,"#lt%MOVE%#gt")) {
		if (@copy ($source, $destin)) { } else {
			array_push ($this-#gterrors['on_copy'], $source."#12".$destin);
		}
		if (@unlink ($source)) { }  else {
			array_push ($this-#gterrors['on_unlk'], $source);
		}
		if (@chmod ($destin, $permis)) { }  else {
			array_push ($this-#gterrors['on_cmod'], $destin."#12".$permis);
		}
	} else
	if (strstr($command,"#lt%COPY%#gt")) {
		if (@copy ($source, $destin)) { } else {
			array_push ($this-#gterrors['on_copy'], $source."#12".$destin);
		}
		if (@chmod ($destin, $permis)) { }  else {
			array_push ($this-#gterrors['on_cmod'], $destin."#12".$permis);
		}
	} else
	if (strstr($command,"#lt%DELETE%#gt")) {
		if (@unlink ($source)) { }  else {
			array_push ($this-#gterrors['on_unlk'], $source);
		}
	} else
	if (strstr($command,"#lt%MAKEDIR%#gt")) {
		@mkdir ($source, $destin);
	} else
	if (strstr($command,"#lt%MESSAGE%#gt")) {
		$this-#gtmessage = $source;
	}
}

function updateboard () {
	global $update, $HTTP_SERVER_VARS;
	$directory = $this-#gtdirectory['copy/'];

	$this-#gterrors['on_copy'] = array();
	$this-#gterrors['on_cmod'] = array();
	$this-#gterrors['on_unlk'] = array();

	$install = file ($directory.$update);
	
	foreach ($install as $command) {
		$command = chop ($command);
		$this-#gtexe($command);
	}
	
	if (count($this-#gterrors['on_cmod']) != 0) {
		foreach ($this-#gterrors['on_cmod'] as $report) {
			//$report = explode("#12", $report);
			//$message .= $this-#gtemerald($this-#gtemerald($this-#gtlng['errors']['utm'], "%e1", $report[1]), "%e0", $report[0])."#ltbr#gt\n";
		}
	}
	if (count($this-#gterrors['on_unlk']) != 0) {
		foreach ($this-#gterrors['on_unlk'] as $report) {
			$message .= $this-#gtemerald($this-#gtlng['errors']['utd'], "%e", $report[0])."#ltbr#gt\n";
		}
	}
	if (count($this-#gterrors['on_copy']) != 0) {
		foreach ($this-#gterrors['on_copy'] as $report) {
			$report = explode("#12", $report);
			$message .= $this-#gtemerald($this-#gtemerald($this-#gtlng['errors']['utc'], "%e1", $report[1]), "%e0", $report[0])."#ltbr#gt\n";
			$message .= $this-#gtemerald($this-#gtemerald($this-#gtlng['errors']['utm'], "%e1", $report[2]), "%e0", $report[0])."#ltbr#gt\n";
		}
	}
	if (isset($this-#gtmessage)) {
		$break = "#ltbr#gt\n";
	}
	if (isset($message)) {
		$break2 = "#ltbr#gt\n";
	}
	$this-#gtdisplaymessage("edgeBoard", $this-#gtlng['misc']['op_successs'].$break.$this-#gtmessage.$break2.$message);
}

function specify () {
	$install = array();
	$directory = $this-#gtdirectory['copy/'];
	if ($handle = opendir($directory)) {
		while ((false !== ($file = readdir($handle))) && ($end != 1)) {
			if (strstr($file,".exboard")) {	
				array_push($install, $file);
			}
		}
		closedir($handle);
	}
	if (count($install) == 0) {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['nuf']);
	} else {
?#gt
       #ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
         #ltTR#gt
          #ltTD CLASS="ctable1" ALIGN="center" WIDTH="4%"#gt#lt/TD#gt
          #ltTD CLASS="ctable1" WIDTH="53%"#gt#lt?=$this-#gtlng['acp']['upf']?#gt#lt/TD#gt
          #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#lt/TD#gt
          #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#lt/TD#gt
          #ltTD CLASS="ctable1" ALIGN="center" WIDTH="29%"#gt#lt/TD#gt
         #lt/TR#gt
         #ltTR#gt
          #ltTD COLSPAN=5 CLASS="category"#gt#lt?=$this-#gtlng['acp']['sui']?#gt#lt/TD#gt
         #lt/TR#gt
#lt?
		foreach ($install as $file) {
			$name = $this-#gtgetname($file);
?#gt
         #ltTR#gt
          #ltTD CLASS="ctable1" ALIGN="center" WIDTH="4%"#gt#ltIMG SRC="images/forumnew.gif"#gt#lt/TD#gt
          #ltTD CLASS="ctable1" COLSPAN="4" WIDTH="53%"#gt
	   #ltA HREF="acp.php#lt?=$this-#gts?#gta=updates.controlpanel&type=updateboard&update=#lt?=$file?#gt"#gt#lt?=$name?#gt#lt/A#gt
          #lt/TD#gt
         #lt/TR#gt
#lt?
		}
	}
?#gt
        #lt/TABLE#gt
#lt?
}

}?#gt";}i:77;a:2:{i:0;s:35:"lib/customizations.controlpanel.php";i:1;s:9702:"#lt?php

class exclusive extends genesis {

function execute () {
	global $type;
	if ($this-#gtadministrator) {
		$this-#gtheader();
		$this-#gtadminlinks();
		if ($type == "save") {
			$this-#gtsaveoptions();
		} else {
			$this-#gtspecify();
		}
		$this-#gtfooter();
	} else {
		$this-#gtheader();
		$this-#gtaccesslog['description'] = $this-#gtlng['errors']['unauth_action'];
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_perm']);
		$this-#gtfooter();
	}
}

function adminlinks () {
	include "lib/admin.links.php";
}

function specify () {
	global $a;
	$themes = array();
	if ($handle = opendir("html/")) {
		while ((false !== ($file = readdir($handle))) && ($end != 1)) {
			if (is_dir("html/".$file)) {	
				if (!strstr($file, ".") && ($file != "system"))	
				array_push($themes, $file);
			}
		}
		closedir($handle);
	}
	$languages = array();
	if ($handle = opendir("language/")) {
		while ((false !== ($file = readdir($handle))) && ($end != 1)) {
			if (is_dir("language/".$file)) {
				if (!strstr($file, "."))	
				array_push($languages, $file);
			}
		}
		closedir($handle);
	}
	if (file_exists("html/".$this-#gtsettings['eboard_theme']."/style.php")) {
		$styles = file("html/".$this-#gtsettings['eboard_theme']."/style.php");
	} else {
		$styles = array();
	}
?#gt#ltTABLE WIDTH="100%" CELLPADDING="2" CELLSPACING="1" CLASS="bordertable"#gt
#ltFORM ACTION="acp.php" METHOD="post" NAME="acpgen"#gt
    #ltINPUT TYPE="hidden" NAME="a" VALUE="#lt?=$a?#gt"#gt
    #ltINPUT TYPE="hidden" NAME="type" VALUE="save"#gt
    #ltINPUT TYPE="hidden" NAME="direct" VALUE="cust"#gt
    #ltTR#gt
      #ltTD COLSPAN="2" ALIGN="center" CLASS="ctable2"#gt#lt?=$this-#gtbutton($this-#gtlng['misc']['ok'])?#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt
#ltSPAN CLASS="regular"#gt#lt?=$this-#gtlng['acp']['heading']?#gt:#ltBR#gt
#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['acp']['hnote']?#gt#lt/SPAN#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt
	#lt?
	for ($i=0;($i#lt8);$i++) {
?#gt
#ltSELECT NAME="mt#lt?=$i?#gt"#gt
	#ltOPTION #lt? if ($this-#gtsettings['member_links'][$i] == "&userc!") { ?#gtSELECTED #lt? } ?#gt VALUE="&userc!"#gt#lt?=$this-#gtlng['toplinks']['usercp']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($this-#gtsettings['member_links'][$i] == "&logou!") { ?#gtSELECTED #lt? } ?#gt VALUE="&logou!"#gt#lt?=$this-#gtlng['toplinks']['logout']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($this-#gtsettings['member_links'][$i] == "&searc!") { ?#gtSELECTED #lt? } ?#gt VALUE="&searc!"#gt#lt?=$this-#gtlng['toplinks']['search']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($this-#gtsettings['member_links'][$i] == "&membe!") { ?#gtSELECTED #lt? } ?#gt VALUE="&membe!"#gt#lt?=$this-#gtlng['toplinks']['memberlist']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($this-#gtsettings['member_links'][$i] == "&profi!") { ?#gtSELECTED #lt? } ?#gt VALUE="&profi!"#gt#lt?=$this-#gtlng['toplinks']['profile']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($this-#gtsettings['member_links'][$i] == "&homel!") { ?#gtSELECTED #lt? } ?#gt VALUE="&homel!"#gt#lt?=$this-#gtlng['toplinks']['home']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($this-#gtsettings['nonmem_links'][$i] == "&whool!") { ?#gtSELECTED #lt? } ?#gt VALUE="&whool!"#gt#lt?=$this-#gtlng['toplinks']['whosonline']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($this-#gtsettings['member_links'][$i] == "&ebhom!") { ?#gtSELECTED #lt? } ?#gt VALUE="&ebhom!"#gtwww.edgeBoard.net#lt/OPTION#gt
	#ltOPTION #lt? if ($this-#gtsettings['member_links'][$i] == "&!") {      ?#gtSELECTED #lt? } ?#gt VALUE="&!"#gt#lt?=$this-#gtlng['toplinks']['empty_slot']?#gt#lt/OPTION#gt
#lt/SELECT#gt
#lt?	
	} ?#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltSPAN CLASS="regular"#gt#lt?=$this-#gtlng['acp']['heading_g']?#gt:
      #ltTD CLASS="ctable2" VALIGN="top"#gt
	#lt?
	for ($i=0;($i#lt8);$i++) {
?#gt
#ltSELECT NAME="gt#lt?=$i?#gt"#gt
	#ltOPTION #lt? if ($this-#gtsettings['nonmem_links'][$i] == "&login!") { ?#gtSELECTED #lt? } ?#gt VALUE="&login!"#gt#lt?=$this-#gtlng['toplinks']['login']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($this-#gtsettings['nonmem_links'][$i] == "&searc!") { ?#gtSELECTED #lt? } ?#gt VALUE="&searc!"#gt#lt?=$this-#gtlng['toplinks']['search']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($this-#gtsettings['nonmem_links'][$i] == "&membe!") { ?#gtSELECTED #lt? } ?#gt VALUE="&membe!"#gt#lt?=$this-#gtlng['toplinks']['memberlist']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($this-#gtsettings['nonmem_links'][$i] == "&regis!") { ?#gtSELECTED #lt? } ?#gt VALUE="&regis!"#gt#lt?=$this-#gtlng['toplinks']['register']?#gt#lt/OPTION
	#gt#ltOPTION #lt? if ($this-#gtsettings['nonmem_links'][$i] == "&homel!") { ?#gtSELECTED #lt? } ?#gt VALUE="&homel!"#gt#lt?=$this-#gtlng['toplinks']['home']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($this-#gtsettings['nonmem_links'][$i] == "&whool!") { ?#gtSELECTED #lt? } ?#gt VALUE="&whool!"#gt#lt?=$this-#gtlng['toplinks']['whosonline']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($this-#gtsettings['nonmem_links'][$i] == "&ebhom!") { ?#gtSELECTED #lt? } ?#gt VALUE="&ebhom!"#gtwww.edgeBoard.net#lt/OPTION#gt
	#ltOPTION #lt? if ($this-#gtsettings['nonmem_links'][$i] == "&!") {      ?#gtSELECTED #lt? } ?#gt VALUE="&!"#gt#lt?=$this-#gtlng['toplinks']['empty_slot']?#gt#lt/OPTION#gt
#lt/SELECT#gt
#lt?	
	} ?#gt
#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt
      #ltSPAN CLASS="regular"#gt#lt?=$this-#gtemerald($this-#gtlng['acp']['ss'], "%e", $this-#gtsettings['eboard_theme'])?#gt:#lt/SPAN#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltTEXTAREA COLS="80" ROWS="10" NAME="style"#gt#lt?
	foreach ($styles as $style) {
		echo $style;
	}
      ?#gt#lt/TEXTAREA#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#lt?=$this-#gtlng['acp']['language']?#gt:#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="brd_language"#gt
#lt? foreach ($languages as $language) { 
	$name = ucwords($language);
?#gt
		#ltOPTION #lt? if ($this-#gtsettings['brd_language'] == $language) { ?#gtSELECTED #lt? } ?#gt VALUE="#lt?=$language?#gt"#gt#lt?=$name?#gt#lt/OPTION#gt
#lt? } ?#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#lt?=$this-#gtlng['acp']['theme']?#gt:#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="eboard_theme"#gt
#lt? foreach ($themes as $theme) { ?#gt
					#ltOPTION #lt? if ($this-#gtsettings['eboard_theme'] == $theme) { ?#gtSELECTED #lt? } ?#gt VALUE="#lt?=$theme?#gt"#gt#lt?=$theme?#gt#lt/OPTION#gt
#lt? } ?#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#lt?=$this-#gtlng['acp']['theme']?#gt Skin:#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT DISABLED NAME="eboard_templ"#gt
					#ltOPTION SELECTED VALUE="default"#gtDefault#lt/OPTION#gt	  
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#lt?=$this-#gtlng['acp']['abb']?#gt #lt?=$this-#gthelpbutton('bbcode')?#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="enable_bbcd"#gt
					#ltOPTION #lt? if ($this-#gtsettings['enable_bbcd'] == "true") { ?#gtSELECTED #lt? } ?#gtVALUE="true" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings['enable_bbcd'] == "false") { ?#gtSELECTED #lt? } ?#gtVALUE="false" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#lt?=$this-#gtlng['acp']['aei']?#gt #lt?=$this-#gthelpbutton('emoticons')?#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="enable_emot"#gt
					#ltOPTION #lt? if ($this-#gtsettings['enable_emot'] == "true") { ?#gtSELECTED #lt? } ?#gtVALUE="true" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings['enable_emot'] == "false") { ?#gtSELECTED #lt? } ?#gtVALUE="false" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#lt?=$this-#gtlng['acp']['agp']?#gt #lt?=$this-#gthelpbutton('guestposting')?#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="enable_gpos"#gt
					#ltOPTION #lt? if ($this-#gtsettings['enable_gpos'] == "true") { ?#gtSELECTED #lt? } ?#gtVALUE="true" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings['enable_gpos'] == "false") { ?#gtSELECTED #lt? } ?#gtVALUE="false" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt
      #lt?=$this-#gtlng['acp']['aht']?#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="enable_html"#gt
					#ltOPTION #lt? if ($this-#gtsettings['enable_html'] == "true") { ?#gtSELECTED #lt? } ?#gtVALUE="true" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($this-#gtsettings['enable_html'] == "false") { ?#gtSELECTED #lt? } ?#gtVALUE="false" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD COLSPAN="2" ALIGN="center" CLASS="ctable2"#gt#lt?=$this-#gtbutton($this-#gtlng['misc']['ok'])?#gt#lt/TD#gt
    #lt/TR#gt
#lt/TABLE#gt#lt/form#gt
#lt?
}

}?#gt";}i:78;a:2:{i:0;s:33:"lib/users-groups.controlpanel.php";i:1;s:31482:"#lt?php 

class exclusive extends genesis {

function execute () {
	global $type, $delete, $eliminate;
	if ($this-#gtadministrator) {
		$this-#gtheader();
		$this-#gtadminlinks();
		if ($type == "user") {
			if (!empty($delete)) {
				$this-#gtdeleteuser();
			} elseif (!empty($eliminate)) {
				$this-#gteliminateuser();
			} else {
				$this-#gtusermanagement();
			}
		} elseif ($type == "group") {
			$this-#gtgroup();
		} elseif ($type == "newgroup") {
			$this-#gtaccesslog['nullify'] = true;
			$this-#gtnewgroup();
		} elseif ($type == "viewusers") {
			$this-#gtviewusers();
		} elseif ($type == "banuser") {
			$this-#gtbanuser();
		} elseif ($type == "newgroup2") {
			$this-#gtnewgroup2();
		} elseif ($type == "deletegroup") {
			$this-#gtdeletegroup();
		} elseif ($type == "deletegroup2") {
			$this-#gtdeletegroup2();
		} elseif ($type == "group2") {
			$this-#gtaccesslog['nullify'] = true;
			$this-#gtgroup2();
		} elseif ($type == "group3") {
			$this-#gtgroup3();
		} else {
			$this-#gtspecify();
		}
		$this-#gtfooter();
	} else {
		$this-#gtheader();
		$this-#gtaccesslog['description'] = $this-#gtlng['errors']['unauth_action'];
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_perm']);
		$this-#gtfooter();
	}
}

function adminlinks () {
	include "lib/admin.links.php";
}

function specify () {
	global $a;
?#gt#ltCENTER#gt#ltu#gt#ltB#gt#ltSPAN CLASS="regular"#gt#lt?=$this-#gtlng['acp']['acp_jump']['10']?#gt#lt/B#gt#lt/u#gt#lt/CENTER#gt#ltBR#gt
	#ltTABLE ALIGN="center" CLASS="bordertable" WIDTH="90%" CELLSPACING=1 CELLPADDING=3#gt
	 #ltTR CLASS="ctable1"#gt
	  #ltTD#gt#ltA HREF="acp.php#lt?=$this-#gts?#gta=users-groups.controlpanel&type=group"#gt#lt?=$this-#gtlng['acp']['gpm']?#gt#lt/A#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR CLASS="ctable2"#gt
	  #ltTD#gt#ltA HREF="acp.php#lt?=$this-#gts?#gta=users-groups.controlpanel&type=user"#gt#lt?=$this-#gtlng['acp']['usm']?#gt#lt/A#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt#ltBR#gt#ltBR#gt
#lt?
}


function newgroup () {
	$groupnumber = "";
	$this-#gtgroup2();
}

function newgroup2 () {
	global $line, $agroups, $agroup, $a, $groupnumber, $dbgroup;
	global $g1, $g2, $g3, $g4, $g5, $g6, $g7, $g8, $g9, $g10;
	global $g11, $g12, $g13, $g14, $g15, $g16, $g17, $g18, $g28, $g29, $g30;

	$d = $this-#gtinputize($g1);
	$e = $this-#gtinputize($g2);
	$f = $this-#gtinputize($g3);
	$g = $this-#gtinputize($g4);
	$h = $this-#gtinputize($g5);
	$i = $this-#gtinputize($g6);
	$j = $this-#gtinputize($g7);
	$k = $this-#gtinputize($g8);
	$l = $this-#gtinputize($g9);
	$m = $this-#gtinputize($g10);
	$n = $this-#gtinputize($g11);
	$o = $this-#gtinputize($g12);
	$p = $this-#gtinputize($g13);
	$q = $this-#gtinputize($g14);
	$r = $this-#gtinputize($g15);
	$s = "0";
	$t = $this-#gtinputize($g17);
	$u = $this-#gtinputize($g18);
	$v = $this-#gtinputize($g19);
	$w = $this-#gtinputize($g20);
	$x = $this-#gtinputize($g21);
	$y = $this-#gtinputize($g22);
	$z = $this-#gtinputize($g23);
	$z1 = $this-#gtinputize($g24);
	$z2 = $this-#gtinputize($g25);
	$z3 = $this-#gtinputize($g26);
	$z4 = $this-#gtinputize($g27);
	$z5 = $g28;
	$z6 = $g29;
	$z7 = $this-#gtinputize($g30);
	$save = array($d, $e, $f, $g, $h, $i, $j, $k, $l, $m, $n, $o,  $p, $q, $r, $s, $t, $u, $v,
			  $w, $x, $y, $z, $z1, $z2, $z3, $z4, $z5, $z6, $z7);
	$this-#gtinsert($this-#gtdb['groups'], $save);
	$this-#gtdisplaymessage($this-#gtlng['misc']['op_complete'], $this-#gtlng['misc']['op_successs']);
}

function group () {
	$agroups = $this-#gtselectsort($this-#gtdb['groups'], 0);
?#gt
       #ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="4%"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" WIDTH="53%"#gt#lt?=$this-#gtlng['misc']['name']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="29%"#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD COLSPAN=5 CLASS="category"#gt#lt?=$this-#gtboardname?#gt #lt?=$this-#gtlng['misc']['groups']?#gt [ #ltA CLASS="catlink" HREF="acp.php#lt?=$this-#gts?#gta=#lt?=$this-#gta?#gt&type=newgroup" class="catlink"#gt#lt?=$this-#gtlng['misc']['add']?#gt#lt/a#gt ]#lt/TD#gt
	 #lt/TR#gt
#lt?
	$current = 1;
	foreach ($agroups as $agroup) {
		if ($agroup[0] != 0) {
?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable#lt?=$current?#gt" ALIGN="center" WIDTH="4%"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/forumnew.gif"#gt#lt/TD#gt
	  #ltTD CLASS="ctable#lt?=$current?#gt" COLSPAN="4" WIDTH="53%"#gt
	      #ltTABLE WIDTH="100%" CELLPADDING="0" CELLSPACING="0" BORDER="0" CLASS="regular"#gt
		 #ltTR#gt
		  #ltTD#gt#lt?=$agroup[1]?#gt#lt/TD#gt
		  #ltTD ALIGN="right"#gt[ #ltA HREF="acp.php#lt?=$this-#gts?#gta=#lt?=$this-#gta?#gt&type=viewusers&groupnumber=#lt?=$agroup[0]?#gt"#gt#lt?=$this-#gtlng['acp']['viu']?#gt#lt/A#gt #12 #ltA HREF="acp.php#lt?=$this-#gts?#gta=#lt?=$this-#gta?#gt&type=group2&groupnumber=#lt?=$agroup[0]?#gt"#gt#lt?=$this-#gtlng['iai']['edit']?#gt#lt/A#gt #12 #ltA HREF="acp.php#lt?=$this-#gts?#gta=#lt?=$this-#gta?#gt&type=deletegroup&groupnumber=#lt?=$agroup[0]?#gt"#gt#lt?=$this-#gtlng['iai']['delete']?#gt#lt/A#gt ]#lt/TD#gt
		 #lt/TR#gt
	      #lt/TABLE#gt
	  #lt/TD#gt
	 #lt/TR#gt
#lt?
	if ($current == 1) {
		$current = 2;
	} else {
		$current = 1;
	}

	}
	}
?#gt
#lt/TABLE#gt
#lt?
}

function group2 () {
	global $groupnumber;
?#gt
#ltTABLE WIDTH="100%" CELLPADDING="2" CELLSPACING="1" CLASS="bordertable"#gt
        #ltFORM ACTION="acp.php" METHOD="post" NAME="edgroup"#gt
        #ltINPUT TYPE="hidden" NAME="a" VALUE="users-groups.controlpanel"#gt
#lt?
	if ($groupnumber == "") {
		$sg = array("", "New Group", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "black", "0", "0");
?#gt
        #ltINPUT TYPE="hidden" NAME="type" VALUE="group3"#gt
#lt?
	} else {
	       	$sg = $this-#gtselect($this-#gtdb['groups'], $groupnumber);
?#gt
        #ltINPUT TYPE="hidden" NAME="type" VALUE="group3"#gt
        #ltINPUT TYPE="hidden" NAME="groupnumber" VALUE="#lt?=$groupnumber?#gt"#gt
	#ltINPUT TYPE="hidden" NAME="g" VALUE="#lt?=$groupnumber?#gt"#gt
#lt?
	}
?#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['gpn']?#gt:#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT NAME="g1" VALUE="#lt?=$sg[1]?#gt" SIZE="20"#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['sap']?#gt:#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="g14"#gt
					#ltOPTION #lt? if ($sg[14] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['admin']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($sg[14] == "2") { ?#gtSELECTED #lt? } ?#gtVALUE="2" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['mod']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($sg[14] == "0") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['main']['none']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['zap']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="g2"#gt
					#ltOPTION #lt? if ($sg[2] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($sg[2] == "0") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['zar']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="g3"#gt
					#ltOPTION #lt? if ($sg[3] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($sg[3] == "0") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['zae']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="g4"#gt
					#ltOPTION #lt? if ($sg[4] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($sg[4] == "0") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['zea']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="g5"#gt
					#ltOPTION #lt? if ($sg[5] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($sg[5] == "0") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['zdo']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="g6"#gt
					#ltOPTION #lt? if ($sg[6] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($sg[6] == "0") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['zda']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="g7"#gt
					#ltOPTION #lt? if ($sg[7] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($sg[7] == "0") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['zot']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="g8"#gt
					#ltOPTION #lt? if ($sg[8] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($sg[8] == "0") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['zat']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="g9"#gt
					#ltOPTION #lt? if ($sg[9] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($sg[9] == "0") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['zct']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="g10"#gt
					#ltOPTION #lt? if ($sg[10] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($sg[10] == "0") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['zca']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="g11"#gt
					#ltOPTION #lt? if ($sg[11] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($sg[11] == "0") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['zmo']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="g12"#gt
					#ltOPTION #lt? if ($sg[12] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($sg[12] == "0") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['zma']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="g13"#gt
					#ltOPTION #lt? if ($sg[13] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($sg[13] == "0") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['zsm']?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltSELECT NAME="g15"#gt
					#ltOPTION #lt? if ($sg[15] == "1") { ?#gtSELECTED #lt? } ?#gtVALUE="1" STYLE="color: green;"#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
					#ltOPTION #lt? if ($sg[15] == "0") { ?#gtSELECTED #lt? } ?#gtVALUE="0" STYLE="color: red;"#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
#lt/SELECT#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt
	  #ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['zlp']?#gt: #ltBR#gt
	  #lt? if (empty($sg[17])) { ?#gt
	  #ltIMG SRC="images/spacer.gif" NAME="largepip"#gt
	  #lt? } else { ?#gt
	  #ltIMG SRC="images/pips/large/#lt?=$sg[17]?#gt.gif" NAME="largepip"#gt
	  #lt? } ?#gt
	  #ltINPUT STYLE="display:none" SIZE=30 MAXSIZE=90 NAME="g17" VALUE="#lt?=$sg[17]?#gt"#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt
			#ltDIV HEIGHT="60" WIDTH="350" STYLE="overflow: scroll; width: 350px;"#gt
			 #ltCENTER#gt[ #ltA HREF="javascript:void(0);" onClick="edgroup.g17.value=''; edgroup.largepip.src='images/spacer.gif';"#gtNone#lt/A#gt ]#ltBR#gt
	#lt?
		$forumdir = "images/pips/large";
		if ($handle = opendir($forumdir)) {
			while (false !== ($file = readdir($handle))) {
				if (strstr($file,"gif")) {
				if (($file != ".") && ($file != "..") && ($file != "...")) {
					$file = explode(".", $file);
					$fc = count($file) - 1;
					$ext = $file[$fc];
					$file[$fc] = "";
					$file = implode(".", $file);
					$file = substr($file, 0, -1);
	?#gt
		  #ltIMG BORDER=1 SRC="images/pips/large/#lt?=$file?#gt.#lt?=$ext?#gt" onClick="edgroup.g17.value='#lt?=$file?#gt'; edgroup.largepip.src='images/pips/large/#lt?=$file?#gt.#lt?=$ext?#gt';"#gt#lt?
				}
				}
			}
			closedir($handle); 
		}
	?#gt		  
			 #lt/CENTER#gt
			#lt/DIV#gt
	  #lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['zsp']?#gt: #ltBR#gt
	  #lt? if (empty($sg[18])) { ?#gt
	  #ltIMG SRC="images/spacer.gif" NAME="smallpip"#gt
	  #lt? } else { ?#gt
	  #ltIMG SRC="images/pips/small/#lt?=$sg[18]?#gt.gif" NAME="smallpip"#gt
	  #lt? } ?#gt
	  #ltINPUT STYLE="display:none" SIZE=30 MAXSIZE=90 NAME="g18" VALUE="#lt?=$sg[18]?#gt"#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt
			#ltDIV HEIGHT="60" WIDTH="350" STYLE="overflow: scroll; width: 350px;"#gt
			 #ltCENTER#gt[ #ltA HREF="javascript:void(0);" onClick="edgroup.g18.value=''; edgroup.smallpip.src='images/spacer.gif';"#gtNone#lt/A#gt ]#ltBR#gt
	#lt?
		$forumdir = "images/pips/small";
		if ($handle = opendir($forumdir)) {
			while (false !== ($file = readdir($handle))) {
				if (strstr($file,"gif") #12#12 strstr($file,"p") #12#12 strstr($file,"raw") #12#12 strstr($file,"tif") #12#12 strstr($file,"sct")) {
				if (($file != ".") && ($file != "..") && ($file != "...")) {
					$exact = $forumdir."/".$file;
					$file = explode(".", $file);
					$fc = count($file) - 1;
					$ext = $file[$fc];
					$file[$fc] = "";
					$file = implode(".", $file);
					$file = substr($file, 0, -1);
	?#gt
		  #ltIMG BORDER=1 SRC="images/pips/small/#lt?=$file?#gt.#lt?=$ext?#gt" onClick="edgroup.g18.value='#lt?=$file?#gt'; edgroup.smallpip.src='images/pips/small/#lt?=$file?#gt.#lt?=$ext?#gt';"#gt#lt?
				}
				}
			}
			closedir($handle); 
		}
	?#gt		  
			 #lt/CENTER#gt
			#lt/DIV#gt
	  #lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['zcl']?#gt: #lt?=$this-#gthelpbutton('color');?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT NAME="g28" VALUE="#lt?=$sg[28]?#gt" SIZE="20"#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD CLASS="ctable2" WIDTH="50%"#gt#ltFONT SIZE="2"#gt#lt?=$this-#gtlng['acp']['zcs']?#gt: #lt?=$this-#gthelpbutton('color');?#gt#lt/FONT#gt#lt/TD#gt
      #ltTD CLASS="ctable2" VALIGN="top"#gt#ltINPUT NAME="g29" VALUE="#lt?=$sg[29]?#gt" SIZE="20"#gt#lt/TD#gt
    #lt/TR#gt
    #ltTR#gt
      #ltTD COLSPAN="2" ALIGN="center" CLASS="ctable2"#gt#lt?=$this-#gtbutton($this-#gtlng['misc']['ok'])?#gt#lt/TD#gt
    #lt/TR#gt
  #lt/FORM#gt
#lt/TABLE#gt#lt?
}

function group3 () {
	global $groupnumber, $g1, $g2, $g3, $g4, $g5, $g6, $g7, $g8, $g9, $g10;
	global $g11, $g12, $g13, $g14, $g15, $g16, $g17, $g18, $g28, $g29, $g30;
	if (!empty($groupnumber)) {
		$dbgroup = array();
		array_push($dbgroup, $this-#gtinputize($groupnumber));
	} else {
		$allgroups = $this-#gtselectall($this-#gtdb['groups']);
		$i = 1;
		foreach ($allgroups as $group) {
			if ($i #lt= $group[0]) {
				$i = ($group[0] + 1);
			}
		}
		$dbgroup = array();
		array_push($dbgroup, $this-#gtinputize($i));
	}
	array_push($dbgroup, $this-#gtinputize($g1));
	array_push($dbgroup, $this-#gtinputize($g2));
	array_push($dbgroup, $this-#gtinputize($g3));
	array_push($dbgroup, $this-#gtinputize($g4));
	array_push($dbgroup, $this-#gtinputize($g5));
	array_push($dbgroup, $this-#gtinputize($g6));
	array_push($dbgroup, $this-#gtinputize($g7));
	array_push($dbgroup, $this-#gtinputize($g8));
	array_push($dbgroup, $this-#gtinputize($g9));
	array_push($dbgroup, $this-#gtinputize($g10));
	array_push($dbgroup, $this-#gtinputize($g11));
	array_push($dbgroup, $this-#gtinputize($g12));
	array_push($dbgroup, $this-#gtinputize($g13));
	array_push($dbgroup, $this-#gtinputize($g14));
	array_push($dbgroup, $this-#gtinputize($g15));
	array_push($dbgroup, "0");
	array_push($dbgroup, $this-#gtinputize($g17));
	array_push($dbgroup, $this-#gtinputize($g18));
	array_push($dbgroup, $this-#gtinputize($g19));
	array_push($dbgroup, $this-#gtinputize($g20));
	array_push($dbgroup, $this-#gtinputize($g21));
	array_push($dbgroup, $this-#gtinputize($g22));
	array_push($dbgroup, $this-#gtinputize($g23));
	array_push($dbgroup, $this-#gtinputize($g24));
	array_push($dbgroup, $this-#gtinputize($g25));
	array_push($dbgroup, $this-#gtinputize($g26));
	array_push($dbgroup, $this-#gtinputize($g27));
	array_push($dbgroup, $g28);
	array_push($dbgroup, $g29);
	array_push($dbgroup, $this-#gtinputize($g30));
	if (!empty($groupnumber)) {
		$this-#gtreplace($this-#gtdb['groups'], $dbgroup);
	} else {
		$this-#gtinserti($this-#gtdb['groups'], $dbgroup);
	}
	$this-#gtdisplaymessage($this-#gtlng['misc']['op_complete'], $this-#gtlng['misc']['op_successs']);
}

function viewusers () {
	global $groupnumber;
	$ausers = file($this-#gtdb['users']);
	foreach ($ausers as $auser) {
		$auser = explode("#12", $auser);
		$num = 0;
		if ($auser[3] == $groupnumber) {
			if ($num == 0) {
				$no = "";
			} else {
				$no = "\n";
			}
			if ($auser[10] == "disabled") {
				$link2 = "#lta href=\"index.php".$this-#gts."a=iai&type=enableuser&userid=".$auser[0]."\"#gt".$this-#gtlng['acp']['qac']."#lt/a#gt";
				$link1 = "#ltb#gt".$this-#gtlng['acp']['qaa']."#lt/b#gt";
			} else {
				$link1 = "#ltb#gt".$this-#gtlng['acp']['qab']."#lt/b#gt";
				$link2 = "#lta href=\"index.php".$this-#gts."a=iai&type=disableuser&userid=".$auser[0]."\"#gt".$this-#gtlng['acp']['qad']."#lt/a#gt";
			}
				$link3 = '#ltA HREF="acp.php'.$this-#gts.'a=users-groups.controlpanel&type=banuser&username='.$auser[1].'"#gt'.$this-#gtlng['moderate']['ban'].'#lt/A#gt';
			$userlist .= '#lttable width="100%" cellpadding="0" cellspacing="0" border="0" class="regular"#gt#lttr#gt#lttd#gt#lta href="index.php'.$this-#gts.'a=member&type=viewprofile&user='.$auser[1].'"#gt'.$auser[1].'#lt/a#gt#lt/td#gt';
			$userlist .= '#lttd align="right"#gt[ '.$link1.' #12 '.$link2.' #12 '.$link3.' ]#lt/td#gt';
			$userlist .= '#lt/tr#gt';
	    		$userlist .= '#lt/table#gt'.$no;
			$num = $num + 1;
		}
	}
	$tg = $this-#gtselect($this-#gtdb['groups'], $groupnumber);
?#gt
       #ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="4%"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" WIDTH="53%"#gt#lt?=$this-#gtlng['acp']['viu']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="7%"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="29%"#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD COLSPAN=5 CLASS="category"#gt#lt?=$tg[1]?#gt [ #ltA CLASS="catlink" HREF="acp.php#lt?=$this-#gts?#gta=#lt?=$this-#gta?#gt&type=viewusers&groupnumber=#lt?=$tg[0]?#gt"#gt#lt?=$this-#gtlng['acp']['viu']?#gt#lt/A#gt ] [ #ltA CLASS="catlink" HREF="acp.php#lt?=$this-#gts?#gta=#lt?=$this-#gta?#gt&type=group2&groupnumber=#lt?=$tg[0]?#gt"#gt#lt?=$this-#gtlng['iai']['edit']?#gt#lt/A#gt ] [ #ltA CLASS="catlink" HREF="acp.php#lt?=$this-#gts?#gta=#lt?=$this-#gta?#gt&type=deletegroup&groupnumber=#lt?=$tg[0]?#gt"#gt#lt?=$this-#gtlng['iai']['delete']?#gt#lt/A#gt ]#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" VALIGN="top" ALIGN="center" WIDTH="4%"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/forumnew.gif"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" COLSPAN="4" WIDTH="53%"#gt
	      #ltTABLE WIDTH="100%" CELLPADDING="0" CELLSPACING="0" BORDER="0" CLASS="regular"#gt
		 #ltTR#gt
		  #ltTD#gt#ltSPAN CLASS="regular"#gt#lt?=$userlist?#gt#lt/SPAN#gt#lt/TD#gt
		 #lt/TR#gt
	      #lt/TABLE#gt
	  #lt/TD#gt
	 #lt/TR#gt
#lt/TABLE#gt
#lt?
}

function deletegroup () {
	global $groupnumber;
	if ($groupnumber #lt= 7) {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['aaj']);
		$this-#gtfooter();
		die();
	}
	$agroups = $this-#gtselectall($this-#gtdb['groups']);
	foreach ($agroups as $agroup) {
		if ($agroup[0] != $groupnumber) {
			if ($agroup[0] != 0) {
				$grouptxt = $grouptxt . "#ltoption value=\"" . $agroup[0] . "\"#gt" . $agroup[1] . "#lt/option#gt\n";
			}
	      }
	}
	$cgroup = $this-#gtselect($this-#gtdb['groups'], $groupnumber);
	$form = #lt#lt#ltHTML
#ltform action="index.php" method="post"#gt
    #ltinput type="hidden" name="a" value="{$this-#gta}"#gt
	#ltinput type="hidden" name="type" value="deletegroup2"#gt
	#ltinput type="hidden" name="groupnumber" value="{$groupnumbe}"#gt
	Select the group you want the users in group {$cgroup[1]} to go:#ltbr#gt
        #ltcenter#gt#ltselect name="resultgroup"#gt{$grouptxt}#lt/select#gt#ltbr#gt
	{$this-#gtbt}Continue...{$this-#gtbe}#lt/center#gt  
HTML;
	$this-#gtdisablesecurity = true;
	$this-#gtdisplaymessage($this-#gtlng['moderate']['delete'], $form);
	$this-#gtdisablesecurity = false;
?#gt  #lt/form#gt #lt?
}

function deletegroup2 () {
	global $groupnumber, $resultgroup;
	$ausers = $this-#gtselectall($this-#gtdb['users']);
	foreach ($ausers as $auser) {
		if ($auser[3] == $groupnumber) {
			   $dbuser = $this-#gtselect($this-#gtdb['users'], $auser[0]);
			   $dbuser[3] = $resultgroup;
			   $this-#gtupdate($this-#gtdb['users'], $auser[0], $duser);
		}
	}
	$cgroup = $this-#gtselect($this-#gtdb['groups'], $groupnumber);
	$this-#gtdelete($this-#gtdb['groups'], $groupnumber);
	$rgroup = $this-#gtselect($this-#gtdb['groups'], $resultgroup);
	$this-#gtdisplaymessage("Success", "The group ".$cgroup[1]." has been deleted, and all users have been moved to group ".$rgroup[1].".");
}

function deleteuser () {
	global $delete, $eliminate;
	$delete = $this-#gtselect($this-#gtdb['users'], $delete);
	$message = "Are you sure that you want to delete the user, $delete[1]?  This action cannot be undone.";
	$message .= "#ltbr#gt\n ( #lta href='acp.php".$this-#gts."a=".$this-#gta."&type=user&act=eliminate&eliminate=".$delete[0]."'#gt".$this-#gtlng['misc']['yes']."#lt/a#gt #12 #ltA HREF='acp.php".$this-#gts."a=admin&type=use&page=$page'#gt".$this-#gtlng['misc']['no']."#lt/A#gt )";
	$this-#gtdisplaymessage($this-#gtlng['iai']['delete'], $message);
	$this-#gtfooter();
	die();
}

function eliminateuser () {
	global $delete, $eliminate;
	if ($this-#gtdelete($this-#gtdb['users'], $eliminate) == 1) {
		$message = $this-#gtlng['misc']['op_successs'];
	} else {
		$message = $this-#gtlng['errors']['nonsp'];
	}
	$this-#gtdisplaymessage($this-#gtlng['iai']['delete'], $message);
}

function banuser () {
	global $ip, $sid, $username, $userid;
	if (strtoupper($username) == "GUEST") {
		$this-#gtdisplaymessage($this-#gtlng['moderate']['ban'], "You may not ban the 'Guest' username!");
	} else {
		$success = $this-#gtban($sid, $username, $ip, $userid);
		if ($success) {
			$this-#gtdisplaymessage($this-#gtlng['moderate']['ban'], $this-#gtlng['moderate']['ban_success']);
		} else {
			$this-#gtdisplaymessage($this-#gtlng['moderate']['ban'], $this-#gtlng['moderate']['ban_fail']);
		}
	}
}

function usermanagement () {
	global $delete, $eliminate;
	@set_time_limit(120);
	global $page, $sort, $letter;
	if ($page == "") {
		$page = 1;
	}
	$memcount = count( $this-#gtselectall( $this-#gtdb['users'] ) );
	list($criteria, $key) = explode(":", $sort);
	if (!empty($letter) && empty($sort)) {
		$sort = "letter";
		$criteria = "letter";
		$key = $letter;
	}
	$users = $this-#gtextenders['member']-#gtget_members_by($criteria, $key);
	for ($i=1;count($users)#gt=$i*$this-#gtsettings['membs_perpg']-$this-#gtsettings['membs_perpg']+1;$i++) {
		if ($i == $page) {
			$linko = "#ltB#gt";
			$linkc = "#lt/B#gt";
		} else {
			$linko = "#ltA HREF=\"index.php".$this-#gts."a=member&type=list&sort=".$sort."&page=".$i." \"#gt";
			$linkc = "#lt/A#gt";
		}
		$pagelinks = $pagelinks . " ".$linko.$i.$linkc." ";
	}
	$users = $this-#gtlimit($users, ($page-1)*$this-#gtsettings['membs_perpg'], $this-#gtsettings['membs_perpg']-1);
	$desc = $this-#gtlng['member']['memberl'];
	$desc = $this-#gtemerald($desc, "%e", $page);
	$desc = $this-#gtemerald($desc, "%m", $this-#gtsettings['membs_perpg']);
	$desc = $this-#gtemerald($desc, "%c", $memcount);
	?#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1#gt
	 #ltTR#gt#ltFORM ACTION="acp.php"#gt
	  #ltTD ALIGN="left"#gt
	   #ltINPUT TYPE="hidden" NAME="a" VALUE="#lt?=$this-#gta?#gt"#gt
	   #ltINPUT TYPE="hidden" NAME="type" VALUE="user"#gt
	   #ltSPAN CLASS="regular"#gtSort By: 
	   #ltSELECT NAME="sort"#gt
	   	#ltOPTION#gt...#lt/OPTION#gt
	   	#ltOPTION #lt? if ($sort == "" #12#12 $sort == "userid" ) {?#gtSELECTED #lt? } ?#gtVALUE="userid"#gt#lt?=$this-#gtlng['misc']['userno']?#gt#lt/OPTION#gt
	   	#ltOPTION #lt? if ($sort == "username") {?#gtSELECTED #lt? } ?#gtVALUE="username"#gt#lt?=$this-#gtlng['misc']['username']?#gt#lt/OPTION#gt
		 #ltOPTION #lt? if ($sort == "posts") {?#gtSELECTED #lt? } ?#gtVALUE="posts"#gt#lt?=$this-#gtlng['misc']['post_ct']?#gt#lt/OPTION#gt
#lt? 
		$groups = $this-#gtselectall($this-#gtdb['groups']);
		foreach ($groups as $group) {
?#gt		#ltOPTION #lt? if ($sort == "group:".$group[0]) {?#gtSELECTED #lt? } ?#gtVALUE="group:#lt?=$group[0]?#gt"#gt -#gt #lt?=$group[1]?#gt#lt/OPTION#gt
#lt?
		}
?#gt		
	   #lt/SELECT#gt #lt?=$this-#gtbutton($this-#gtlng['misc']['sort'])?#gt#ltBR#gt
	   #lt?=$this-#gtlng['misc']['sbl']?#gt: #ltINPUT TYPE="text" NAME="letter" VALUE="#lt?=$letter?#gt" MAXLENGTH="1" SIZE="1"#gt
	   #lt?=$this-#gtbutton($this-#gtlng['misc']['sort'])?#gt#lt/SPAN#gt#lt/TD#gt#lt/FORM#gt 
	  #ltTD ALIGN="right"#gt#ltSPAN CLASS="regular"#gt[ #lt?=$pagelinks?#gt ]#ltBR#gt#lt?=$desc?#gt#lt/SPAN#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
     #ltTR#gt
	  #ltTD CLASS="category" COLSPAN="7" class="category" align="center"#gt#lt?=$this-#gtlng['toplinks']['memberlist']?#gt#lt/td#gt
 	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" ALIGN="center"#gtUsername#lt/TD#gt
	  #ltTD CLASS="ctable2" ALIGN="center"#gtPosts#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center"#gtEmail#lt/TD#gt
	  #ltTD CLASS="ctable2" ALIGN="center"#gtView Profile#lt/TD#gt
	  #ltTD CLASS="ctable2" ALIGN="center"#gtControls#lt/TD#gt
	 #lt/TR#gt
	#lt?
	foreach ($users as $user) {
		if ($user[10] == "disabled") {
			$link2 = "#lta href=\"index.php".$this-#gts."a=iai&type=enableuser&userid=".$user[0]."\"#gt".$this-#gtlng['acp']['qac']."#lt/a#gt";
			$link1 = "#ltb#gt".$this-#gtlng['acp']['qaa']."#lt/b#gt";
		} else {
			$link1 = "#ltb#gt".$this-#gtlng['acp']['qab']."#lt/b#gt";
			$link2 = "#lta href=\"index.php".$this-#gts."a=iai&type=disableuser&userid=".$user[0]."\"#gt".$this-#gtlng['acp']['qad']."#lt/a#gt";
		}
		if ($user[10] == "disabled") {
			$profilelink = "No Profile";
		} else {
			$profilelink = '#ltA HREF="index.php'.$this-#gts.'a=member&type=viewprofile&userid='.$user[0].'"#gtView Profile#lt/A#gt';
		}
		?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1"#gt#ltB#gt#lt?=$user[1]?#gt#lt/B#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" ALIGN="center"#gt#lt?=$user[11]?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center"#gt#lt? if (empty($user[4])) { 
		?#gtNo Email Provided#lt? } else {
		?#gt#ltA HREF="mailto:#lt?=$user[4]?#gt"#gtSend Email#lt/A#gt#lt? } ?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" ALIGN="center"#gt#lt?=$profilelink?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" ALIGN="center"#gt[ 
	  				#ltA HREF="acp.php#lt?=$this-#gts?#gta=#lt?=$this-#gta?#gt&type=user&delete=#lt?=$user[0]?#gt"#gt#lt?=$this-#gtlng['iai']['delete']?#gt#lt/A#gt #12 
					#ltA HREF="acp.php#lt?=$this-#gts?#gta=#lt?=$this-#gta?#gt&type=banuser&username=#lt?=$user[1]?#gt"#gt#lt?=$this-#gtlng['moderate']['ban']?#gt#lt/A#gt #12
					#lt?=$link1?#gt #12
					#lt?=$link2?#gt ]
	 #lt/TR#gt
		#lt?
	}
	?#gt
	#lt/TABLE#gt
	#lt?
}

}
?#gt";}i:79;a:2:{i:0;s:20:"lib/controlpanel.php";i:1;s:654:"#lt?php

class exclusive extends genesis {

function execute () {
	global $type;
	$this-#gtheader();
	if ($this-#gtadministrator) {
		$this-#gtquery($this-#gtlng['misc']['cp'], $this-#gtlng['misc']['cp_query'], "acp.php".$this-#gts, "index.php".$this-#gts."a=user.controlpanel", null, null);
	} else {
		if ($this-#gtuser[1] != "Guest") {
			$this-#gtdisplaymessage($this-#gtlng['misc']['wait'], $this-#gtlng['misc']['being_redirected'], "index.php".$this-#gts."a=user.controlpanel");
		} else {
			$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_guest_perm']);
		}
	}
	$this-#gtfooter();
}

}
?#gt";}i:80;a:2:{i:0;s:12:"lib/poll.php";i:1;s:10359:"#lt?

class exclusive EXTENDS genesis {

var $forum, $poll, $replylink, $votes, $page, $pagelinks, $listpoll;

function execute () {
	global $forum, $topic, $type, $page, $poll;
	$this-#gtforum = $forum;
	$this-#gttopic = $topic;
	$this-#gtpoll = $poll;
	$this-#gtselectforum($this-#gtforum);
	if (!empty($topic)) {
		$id = $topic;
	} elseif (!empty($poll)) {
		$id = $poll;
	}
	if (file_exists("data/".$this-#gtforum."/".$id.".php")) {
		$this-#gtheader();
		$this-#gtpolli = $this-#gtselect("data/".$this-#gtforum."/".$this-#gtpoll.".php", 1);
		$this-#gtsetlistpoll();
		if ($page == "") {
			$this-#gtpage = 1;
		} elseif ($page == "last") {
			$this-#gtsetlastpage();
		} else {
			$this-#gtpage = $page;
		}
		$this-#gtcheckforumpermission(5, true, $this-#gtforum);
		if ((!file_exists("data/".$this-#gtforum."/pollinfo-".$this-#gttopic.".php")) && (!empty($this-#gttopic))) {
			$this-#gtdisplaymessage($this-#gtlng['misc']['wait'], $this-#gtlng['misc']['being_redirected'], "index.php".$this-#gts."a=topic&forum=".$this-#gtforum."&topic=".$this-#gttopic);
		} elseif ((!file_exists("data/".$this-#gtforum."/pollinfo-".$this-#gtpoll.".php")) && (empty($this-#gtpoll))) {
			$this-#gtdisplaymessage($this-#gtlng['misc']['wait'], $this-#gtlng['misc']['being_redirected'], "index.php".$this-#gts."a=topic&forum=".$this-#gtforum."&topic=".$this-#gtpoll);
		} else {
			$this-#gtallpoll = $this-#gtselectall("data/".$this-#gtforum."/pollinfo-".$this-#gtpoll.".php");
			$this-#gtdisplaypollinfotop();
			if ($type == "vote2") {
				$this-#gtvote2();
			} else {
				$this-#gtdetermine();
			}
			$this-#gtdisplaypollinfobottom();
		}
	} else {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['noe'], "", "1", "1");
	}
	$this-#gtfooter();
}

function setlistpoll () {
	$this-#gtlistpoll = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gtpoll);
	$this-#gtlistpoll[9]++;
	$this-#gtupdate("data/".$this-#gtforum."/list.php", $this-#gttopic, $this-#gtpoll);
	$this-#gtupdate_alt("data/".$this-#gtforum."/".$listpoll[0]."backup.php", $this-#gtlistpoll);
}

function displaypollinfotop () {
	if ($this-#gtlistpoll[7] == "1") {
		$topicname = $this-#gtlng['forum']['closed'].": " . $topicname;
	} ?#gt
	#ltTABLE WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD CLASS="category" ALIGN="center" COLSPAN="2"#gtPoll#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH="100%"#gt#ltSPAN CLASS="regular"#gt#lt?=$this-#gtlng['forum']['viewing_poll']?#gt: #lt?=$this-#gtlistpoll[1]?#gt#lt/SPAN#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" NOWRAP ROWSPAN="2"#gt#ltSPAN CLASS="regular"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=post&forum=#lt?=$this-#gtforum?#gt&type=newtopic"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/topic_new.gif" BORDER="0"#gt#lt/A#gt #lt?=$this-#gtreplylink?#gt #ltA HREF="index.php#lt?=$this-#gts?#gta=post&type=poll&forum=#lt?=$this-#gtforum?#gt"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/poll_new.gif" BORDER="0"#gt#lt/A#gt#lt/SPAN#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1"#gt#lt?=$this-#gtlistpoll[12]?#gt?#lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt
	#ltBR#gt
	#lt?
}

function determine () {
	$allvoters = array();
	foreach ($this-#gtallpoll as $partpoll) {
		$voters = explode(",", $partpoll[3]);
		foreach ($voters as $voter) {
			array_push($allvoters, $voter);
		}
	}
	$voted = false;
	foreach ($allvoters as $singlevoter) {
		if ($singlevoter == $this-#gtuser[0]) {
			$voted = true;
		}
	}
	if ($this-#gtuser[0] == "0") {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['no_guest_perm']);
	} elseif ($voted == true) {
		$this-#gtdisplaypoll();
	} elseif ($voted == false) {
		$this-#gtdisplayvote();
	}
}

function displaypoll () {
	$totalvotes = 0;
	foreach ($this-#gtallpoll as $partpoll) {
		$totalvotes = $totalvotes + $partpoll[2];
	}
	$this-#gtallpoll = array_reverse($this-#gtselectsort("data/".$this-#gtforum."/pollinfo-".$this-#gtpoll.".php", 2));
?#gt
	#ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD COLSPAN="100%" CLASS="category"#gt#ltB#gt#lt?=$this-#gtlistpoll[12]?#gt?#lt/B#gt (#lt?=$this-#gtemerald($this-#gtlng['forum']['tv'], "%e", $totalvotes)?#gt)#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="5%" ROWSPAN="100%"#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" WIDTH="40%"#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['forum']['ch']?#gt#lt/SPAN#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="10%"#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['forum']['vt']?#gt#lt/SPAN#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" WIDTH="40%"#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['forum']['gp']?#gt#lt/SPAN#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" ROWSPAN="100%"#gt#lt/TD#gt
	 #lt/TR#gt
#lt?
	foreach ($this-#gtallpoll as $partpoll) { 
		if ($totalvotes #gt 0) {
			$percentage = round((($partpoll[2]/$totalvotes)*100), 0);
		} else {
			$percentage = "0";
		}
		$width = ($percentage+1)."%";
		$height = "15";
?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH="40%"#gt#ltB#gt#lt?=$partpoll[1]?#gt#lt/B#gt (#lt?=$percentage?#gt%)#lt/TD#gt
	  #ltTD CLASS="ctable1" ALIGN="center" WIDTH="10%"#gt#lt?=$partpoll[2]?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1" WIDTH="40%"#gt#ltTABLE WIDTH="#lt?=$width?#gt" CLASS="bordertable"#gt#ltTR BORDER=0#gt#ltTD BORDER=0 CLASS="category"#gt#ltIMG SRC="images/spacer.gif" HEIGHT="#lt?=$height?#gt" WIDTH="100%"#gt#lt/TD#gt#lt/TR#gt#lt/TABLE#gt#lt/TD#gt
	 #lt/TR#gt
#lt?	}
?#gt	#lt/TABLE#gt#lt?
}

function displayvote () {
	foreach ($this-#gtallpoll as $option) {
		$options .= "#ltoption value='$option[0]'#gt$option[1]#lt/option#gt\n";
	}
	$form .= "#ltform method='post' action='index.php'#gt\n";
	$form .= "#ltinput type='hidden' name='a' value='poll'#gt\n";
	$form .= "#ltinput type='hidden' name='type' value='vote2'#gt\n";
	$form .= "#ltinput type='hidden' name='forum' value='".$this-#gtforum."'#gt\n";
	$form .= "#ltinput type='hidden' name='poll' value='".$this-#gtpoll."'#gt\n";
	$form .= "#ltcenter#gt#ltb#gt".$this-#gtlistpoll[12]."?#lt/b#gt#ltbr#gt\n";
	$form .= "#ltspan class='small'#gt(".$this-#gtlng['forum']['vf'].")#ltbr#gt\n";
	$form .= "#ltselect name='choice'#gt\n";
	$form .= $options;
	$form .= "#lt/select#gt#ltbr#gt\n";
	$form .= $this-#gtbt.$this-#gtlng['forum']['vo'].$this-#gtbe;
	$form .= "#lt/form#gt";
	$this-#gtdisablesecurity = true;
	$this-#gtdisplaymessage($this-#gtlng['forum']['vo'], $form);
	$this-#gtdisablesecurity = false;
}

function vote2 () {
	$allvoters = array();
	foreach ($this-#gtallpoll as $partpoll) {
		$voters = explode(",", $partpoll[3]);
		foreach ($voters as $voter) {
			array_push($allvoters, $voter);
		}
	}
	$voted = false;
	foreach ($allvoters as $singlevoter) {
		if ($singlevoter == $this-#gtuser[0]) {
			$voted = true;
		}
	}
	if ($voted == false) {
		global $choice;
		$choice--;
		$this-#gtallpoll[$choice][2]++;
		$voters = explode(",", $this-#gtallpoll[$choice][3]);
		array_push($voters, $this-#gtuser[0]);
		$this-#gtallpoll[$choice][3] = implode(",", $voters);
		$this-#gtlistpoll[6] = time();
		$this-#gtupdate("data/".$this-#gtforum."/list.php", $this-#gtlistpoll[0], $this-#gtlistpoll);
		$this-#gtupdate_alt("data/".$this-#gtforum."/".$this-#gtlistpoll[0]."backup.php", $this-#gtlistpoll);
		$this-#gtupdate("data/".$this-#gtforum."/pollinfo-".$this-#gtpoll.".php", $this-#gtallpoll[$choice][0], $this-#gtallpoll[$choice]);
		$message = $this-#gtlng['forum']['vr']."#ltbr#gt#lta href='index.php".$this-#gts."a=poll&forum=".$this-#gtforum."&poll=".$this-#gtpoll."'#gt".$this-#gtlng['forum']['rs']."#lt/a#gt.";
	} else {
		$message = $this-#gtlng['forum']['av'];
	}
	$this-#gtdisplaymessage($this-#gtlng['forum']['vo'], $message);
}

function displaypollinfobottom () {
	$forum = $this-#gtselect("data/forums.php", $this-#gtforum);
	$poll = $this-#gtselect("data/".$this-#gtforum."/list.php", $this-#gtpoll);
	?#gt
	#lt/table#gt
	#ltBR#gt
	#ltTABLE WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1"#gt#lt?=$this-#gtlistpoll[12]?#gt?#lt/TD#gt
	   #ltTD CLASS="ctable2" NOWRAP ROWSPAN="2"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=post&forum=#lt?=$this-#gtforum?#gt"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/topic_new.gif" BORDER="0"#gt#lt/A#gt #lt?=$this-#gtreplylink?#gt #ltA HREF="index.php#lt?=$this-#gts?#gta=post&type=poll&forum=#lt?=$this-#gtforum?#gt"#gt#ltIMG SRC="#lt?=$this-#gttp['forum']?#gtimages/poll_new.gif" BORDER="0"#gt#lt/A#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH="100%"#gt
#lt? if (($this-#gtadministrator) #12#12 ($this-#gtmoderator)) { ?#gt#lt?=$this-#gtlng['moderate']['topic']?#gt ( 
	#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=close&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$this-#gtpoll?#gt"#gt#lt? if ($topic[7] == 1) { ?#gt#lt?=$this-#gtlng['moderate']['open']?#gt#lt? } else { ?#gt#lt?=$this-#gtlng['moderate']['close']?#gt#lt? } ?#gt#lt/A#gt #12 
	#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=topicdelete&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$this-#gtpoll?#gt"#gtDelete#lt/A#gt #12 
	#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=move&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$this-#gtpoll?#gt"#gtMove#lt/A#gt #12 
	#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=pin&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$this-#gtpoll?#gt"#gt#lt? if ($poll[10] == 1) { ?#gt#lt?=$this-#gtlng['moderate']['unpin']?#gt#lt? } else { ?#gt#lt?=$this-#gtlng['moderate']['pin']?#gt#lt? } ?#gt#lt/A#gt #12 
	#ltA HREF="index.php#lt?=$this-#gts?#gta=moderate&type=rename&forum=#lt?=$this-#gtforum?#gt&topic=#lt?=$this-#gtpoll?#gt"#gt#lt?=$this-#gtlng['moderate']['rename']?#gt#lt/A#gt )
#lt? } else { ?#gt#ltA HREF="index.php#lt?=$this-#gts?#gt"#gt#lt?=$this-#gtsettings[edgebrd_name]?#gt#lt/A#gt#lt? } ?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" COLSPAN="2" WIDTH="100%"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=forum&forum=#lt?=$forum[0]?#gt"#gt#lt?=$forum[1]?#gt#lt/A#gt#lt/span#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt
	#lt?
}

}

?#gt";}i:81;a:2:{i:0;s:13:"lib/moved.php";i:1;s:1063:"#lt?php 

class exclusive extends genesis {
var $forum, $moved;

function execute () {
	global $forum, $moved;
	$this-#gtforum = $forum;

	$dbtopic = $this-#gtselect("data/".$this-#gtforum."/list.php", $moved);
	$indate = false;
	if ($dbtopic[15] #gt time()) {
		$indate = true;
	}
	list ($newforum, $newtopic) = explode(":", $dbtopic[14]);

	if (file_exists("data/".$newforum."/".$newtopic.".php") && ($indate)) {
		$this-#gtheader();
		if ((file_exists("data/".$newforum."/pollinfo-".$newtopic.".php")) && (!empty($newtopic))) {
			$this-#gtdisplaymessage($this-#gtlng['misc']['wait'], $this-#gtlng['misc']['being_redirected'], "index.php".$this-#gts."a=poll&forum=".$newforum."&poll=".$newtopic);
		} else {
			$this-#gtdisplaymessage($this-#gtlng['misc']['wait'], $this-#gtlng['misc']['being_redirected'], "index.php".$this-#gts."a=topic&forum=".$newforum."&topic=".$newtopic);
		}
	} else {
		$this-#gtdisplaymessage($this-#gtlng['errors']['error'], $this-#gtlng['errors']['noe'], "", "1", "1");
	}
	$this-#gtfooter();
}
}

?#gt";}i:82;a:2:{i:0;s:18:"lib/whosonline.php";i:1;s:4088:"#lt?

class exclusive EXTENDS genesis {

	function execute () {
		$this-#gtheader();
		$this-#gttableHEAD();
		$this-#gtdisplayonline();
		$this-#gttableFOOT();
		$this-#gtfooter();
	}

	function tableHEAD () {
		$groups = $this-#gtselectall($this-#gtdb['groups']);
		$glist .= "#ltB#gt".$this-#gtlng['main']['legend']."#lt/B#gt: ";
		foreach ($groups as $group) {
			$glist .= "[ #lta href=\"index.php".$this-#gts."a=member&type=list&sort=group:".$group[0]."\"#gt".$group[28].$group[1].$group[29]."#lt/a#gt ] ";
		}
?#gt
	#ltTABLE WIDTH="100%" BORDER="0" CLASS="bordertable" CELLPADDING="2" CELLSPACING="1"#gt
	 #ltTR#gt
	  #ltTD CLASS="category" COLSPAN="3"#gt#lt?=$this-#gtlng['main']['whos_online']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" COLSPAN="3"#gt#lt?=$glist?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH="33.3%"#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['misc']['username']?#gt#lt/SPAN#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" WIDTH="33.3%" ALIGN="CENTER"#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['main']['lastclick']?#gt#lt/SPAN#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" WIDTH="33.3%"#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['main']['follow']?#gt#lt/SPAN#gt#lt/TD#gt
	 #lt/TR#gt
#lt?
	}

	function tableFOOT () {
?#gt
	#lt/TABLE#gt
#lt?
	}

	function displayonline () {
		$groups = $this-#gtselectall($this-#gtdb['groups']);
		foreach ($groups as $group) {
			$fgrup[$group[0]] = $group;
		}
		$whosonline = $this-#gtselectall($this-#gtdb['online']);
		foreach ($whosonline as $user) {
			$location = $user[7];
			for ( $i=0; ( $i #lt= (strlen($location)) ); $i++ ) {
				$j = $i + 1; $k = $i + 2; $l = $i + 3;
				$m = $i - 1; $e = $i + 37; $chr = $location{$m};
				$string = $location{$i} . $location{$j} . $location{$k} . $location{$l};
				if (($string == "SID=") && strstr($location,"SID=")) {
					$newlocation = substr($location, 0, $i) . substr($location, $e);
					$url = substr($location, 0, $i) . "SID=" . $this-#gtses_id . "&" . substr($location, $e);
					$location = $newlocation;
					if (!empty($ltext)) {
						$ltext = "(" . $this-#gtrestrictstr($location, 35) . ")";
					}
					break;
				} elseif (!strstr($location,"SID=")) {
					$url = "index.php?" . "SID=" . $this-#gtses_id;
					$ltext = "(index.php)";
					break;
				}
			}
			if ($user[1] == 0) {
				?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH="33.3%"#gt#ltI#gt#lt?=$this-#gtlng['misc']['guest']?#gt#lt/I#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" WIDTH="33.3%" ALIGN="CENTER"#gt#lt?=$this-#gtzonetime("###", $user[2])?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" WIDTH="33.3%"#gt#ltA HREF="#lt?=$url?#gt"#gt#lt?=$this-#gtlng['main']['follow']?#gt#lt/A#gt #ltSPAN CLASS="small"#gt#lt?=$ltext?#gt#lt/SPAN#gt#lt/TD#gt
	 #lt/TR#gt
				#lt?
			} elseif ($user[4] == "1") {
				?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH="33.3%"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=member&type=viewprofile&user=#lt?=$user[5]?#gt"#gt#lt?=($fgrup[$user[6]][28].$user[5].$fgrup[$user[6]][29])?#gt#lt/A#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" WIDTH="33.3%" ALIGN="CENTER"#gt#lt?=$this-#gtzonetime("###", $user[2])?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" WIDTH="33.3%"#gt#ltA HREF="#lt?=$url?#gt"#gt#lt?=$this-#gtlng['main']['follow']?#gt#lt/A#gt #ltSPAN CLASS="small"#gt#lt?=$ltext?#gt#lt/SPAN#gt#lt/TD#gt
	 #lt/TR#gt
				#lt?
			} elseif (($user[4] == "0") #12#12 ($user[4] == "2")) {
				if ($this-#gtadministrator) {
				?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH="33.3%"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=member&type=viewprofile&user=#lt?=$user[5]?#gt"#gt#lt?=($fgrup[$user[6]][28].$user[5].$fgrup[$user[6]][29])?#gt#lt/A#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" WIDTH="33.3%" ALIGN="CENTER"#gt#lt?=$this-#gtzonetime("###", $user[2])?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2" WIDTH="33.3%"#gt#ltA HREF="#lt?=$url?#gt"#gt#lt?=$this-#gtlng['main']['follow']?#gt#lt/A#gt #ltSPAN CLASS="small"#gt#lt?=$ltext?#gt#lt/SPAN#gt#lt/TD#gt
	 #lt/TR#gt
				#lt?
				}
			}
		}
	}

}

?#gt";}i:83;a:2:{i:0;s:25:"lib/user.controlpanel.php";i:1;s:282:"#lt?php

class exclusive extends genesis {

function execute () {
	global $search, $adv, $cs, $ss;
	$this-#gtheader();
	$this-#gtdisplaymessage($this-#gtlng['misc']['wait'], $this-#gtlng['misc']['being_redirected'], "ucp.php".$this-#gts);
	$this-#gtfooter();
}

}

?#gt";}i:84;a:2:{i:0;s:14:"lib/index.html";i:1;s:0:"";}i:85;a:2:{i:0;s:13:"lib/blank.php";i:1;s:0:"";}i:86;a:2:{i:0;s:26:"lib/admin.controlpanel.php";i:1;s:282:"#lt?php

class exclusive extends genesis {

function execute () {
	global $search, $adv, $cs, $ss;
	$this-#gtheader();
	$this-#gtdisplaymessage($this-#gtlng['misc']['wait'], $this-#gtlng['misc']['being_redirected'], "acp.php".$this-#gts);
	$this-#gtfooter();
}

}

?#gt";}i:87;a:2:{i:0;s:25:"lib/sublib/upload.ext.php";i:1;s:1570:"#lt?

class upload {
	var $userfile, $userfile_size, $maxsize, $restrictedtypes, $rndstr, $userid;

	function execute () {
		global $HTTP_COOKIE_VARS;
		if ($this-#gtrndstr == 0) {
			$this-#gtrndstr = $HTTP_COOKIE_VARS['sessionid'];
		}
		if ($this-#gtuserid == 0) {
			$this-#gtuserid = time();
		}
		$this-#gtcontinue = true;
		$this-#gtcheckdir();
		$this-#gtsetrtypes();
		$this-#gtcontinue = $this-#gtcheckfile();
		if ($this-#gtcontinue) {
			$this-#gtcontinue = $this-#gtdoupload();
		}
		return $this-#gtcontinue;
	}

	function checkdir () {
		if (!file_exists("data/uploads/")) {
			mkdir("data/uploads/", 0777);
		}
	}

	function setrtypes () {
		$defrfiles = array("cgi", "php", "jsp", "asp", "phtml", "dhtml", "pl", "xml");
		if (is_array($restrictedtypes)) {
			foreach ($restrictedtypes as $r_file) {
				array_push($defrfiles, $r_file);
			}
		}
		$this-#gtr_files = $defrfiles;
	}

	function checkfile () {
		$type = explode(".", $this-#gtuserfile_name);
		$i = (count($type)-1);
		$this-#gtfiletype = $type[$i];
		if (in_array($this-#gtfiletype, $this-#gtr_files)) {
			$this-#gtcontinue = false;
			return 2;
		}
	}

	function doupload () {
		$destfile = "data/uploads/".$this-#gtuserid."_".$this-#gtrndstr.".".$filetype;
		if (is_uploaded_file($destfile)) {
			copy($userfile, $destfile);
			chmod($destfile, 0777);
			if (is_file($destfile)) {
				return $destfile;
			} else {
				return 3;
			}
		} else {
			return 0;
		}
	}

}

	$this-#gtextenders['upload'] = new upload;

?#gt";}i:88;a:2:{i:0;s:22:"lib/sublib/sub.ext.php";i:1;s:73:"#lt?

class sub {

}

	$this-#gtextenders['sub'] = new sub;

?#gt";}i:89;a:2:{i:0;s:22:"lib/sublib/acp.ext.php";i:1;s:6416:"#lt?

class acp {

	function saveoptions ($settings) {
		global $a;
		$a = str_replace(".controlpanel", "", $a);
		if ($a == "all") {
			$a = "-customizations-pm-email-time-automation-general-";
		} else {
			$a = "-".$a."-";
		}
		if (strstr($a,"-customizations-")) {
			global $style, $brd_language, $eboard_theme, $enable_bbcd, $enable_gpos, $enable_html, $enable_emot;
			global $mt0, $mt1, $mt2, $mt3, $mt4, $mt5, $mt6, $mt7;
			global $gt0, $gt1, $gt2, $gt3, $gt4, $gt5, $gt6, $gt7;
			$settings['member_links'] = array($mt0, $mt1, $mt2, $mt3, $mt4, $mt5, $mt6, $mt7);
			$settings['nonmem_links'] = array($gt0, $gt1, $gt2, $gt3, $gt4, $gt5, $gt6, $gt7);
			if (file_exists("html/themes/".$settings['eboard_theme']."/style.php")) {
				ini_set("display_errors", "0");
				chmod("html/themes/".$settings['eboard_theme']."/style.php", 0777);
				$save = fopen("html/themes/".$settings['eboard_theme']."/style.php", "w");
				fputs($save, stripslashes($style));
				fclose($save);
				ini_restore("display_errors");
			}
			$settings['brd_language'] = $brd_language;
			$settings['eboard_theme'] = $eboard_theme;
			$settings['enable_bbcd'] = $enable_bbcd;
			$settings['enable_gpos'] = $enable_gpos;
			$settings['enable_html'] = $enable_html;
			$settings['enable_emot'] = $enable_emot;
		} elseif (strstr($a,"-secret-")) {
			global $admin_mem_id;
			$settings['admin_mem_id'] = $admin_mem_id;
		} elseif (strstr($a,"-main-")) {
			global $most_mem_onl, $most_mem_tim;
			$settings['most_mem_onl'] = $most_mem_onl;
			$settings['most_mem_tim'] = $most_mem_tim;
		} elseif (strstr($a,"-pm-")) {
			global $max_pm_dest, $max_pm_inbx;
			$settings['max_pm_dest'] = $max_pm_dest;
			$settings['max_pm_inbx'] = $max_pm_inbx;
		} elseif (strstr($a,"-email-")) {
			global $enable_mail, $eboard_email, $edgeboardurl, $reqir_email, $CHreqirmail, $enablefemal;
			if (substr($edgeboardurl,-1) == "/") {
				$edgeboardurl = substr($edgeboardurl,0,-1);
			}
			if (empty($edgeboardurl) #12#12empty($eboard_email)) {
				$edgeboardurl = "";
				$eboard_email = "";
				$enable_mail = 0;
				$reqir_email = 0;
				$enablefemal = 0;
				$CHreqirmail = 0;
			}
			if ($enable_mail == "0") {
				$reqir_email = 0;
				$enablefemal = 0;
				$CHreqirmail = 0;
			}
			if (substr($edgeboardurl, -1) == "/") {
				$edgeboardurl = substr($edgeboardurl, -1);
			}
			$settings['enable_mail'] = $enable_mail;
			$settings['eboard_email'] = $eboard_email;
			$settings['edgeboardurl'] = $edgeboardurl;
			$settings['reqir_email'] = $reqir_email;
			$settings['CHreqirmail'] = $CHreqirmail;
			$settings['enablefemal'] = $enablefemal;
		} elseif (strstr($a,"-time-automation-")) {
			global $posting_dly, $online_limit, $time_format, $stimeformat, $ltimeformat;
			$settings['online_limit'] = $online_limit;
			$settings['posting_dly'] = $posting_dly;
			$settings['time_format'] = $time_format;
			$settings['stimeformat'] = $stimeformat;
			$settings['ltimeformat'] = $ltimeformat;
		} elseif (strstr($a,"-general-")) {
			global $edgebrd_name, $board_locatn, $membs_perpg, $posts_perpg, $topic_perpg, $max_word_sz, $max_post_sz;
			global $max_avatr_w, $max_upld_sz, $badwrd_fltr, $max_topic_l, $board_status, $max_avatr_h;
			global $pgl_s_forum, $iai_s_forum, $enable_gdis;
			$settings['edgebrd_name'] = $edgebrd_name;
			$settings['board_locatn'] = $board_locatn;
			$settings['board_status'] = $board_status;
			$settings['membs_perpg'] = $membs_perpg;
			$settings['posts_perpg'] = $posts_perpg;
			$settings['topic_perpg'] = $topic_perpg;
			$settings['max_word_sz'] = $max_word_sz;
			$settings['max_post_sz'] = $max_post_sz;
			$settings['max_avatr_w'] = $max_avatr_w;
			$settings['max_upld_sz'] = $max_upld_sz;
			$settings['badwrd_fltr'] = $badwrd_fltr;
			$settings['max_topic_l'] = $max_topic_l;
			$settings['max_avatr_h'] = $max_avatr_h;
			$settings['pgl_s_forum'] = $pgl_s_forum;
			$settings['iai_s_forum'] = $iai_s_forum;
			$settings['enable_gdis'] = $enable_gdis;
		}
		return serialize($settings);
	}

	function adminjump ($a, $lng, $gobutton) {
?#gt
       #ltTABLE WIDTH="100%" CELLPADDING=2 CELLSPACING=0#gt
	 #ltTR#gt
	  #ltTD#gt#ltSPAN CLASS="regular"#gt#ltCENTER#gt
#ltFORM ACTION="acp.php"#gt
#lt?=$lng['acp']['qak']?#gt: #ltSELECT NAME="a"#gt
	#ltOPTION #lt? if ($a == "general.controlpanel") { ?#gtSELECTED #lt? } ?#gtVALUE="general.controlpanel"#gt#lt?=$lng['acp']['acp_jump']['02']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($a == "safety.controlpanel") { ?#gtSELECTED #lt? } ?#gtVALUE="safety.controlpanel"#gt#lt?=$lng['acp']['acp_jump']['09']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($a == "email.controlpanel") { ?#gtSELECTED #lt? } ?#gtVALUE="email.controlpanel"#gt#lt?=$lng['acp']['acp_jump']['05']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($a == "forums-categories.controlpanel") { ?#gtSELECTED #lt? } ?#gtVALUE="forums-categories.controlpanel"#gt#lt?=$lng['acp']['acp_jump']['06']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($a == "users-groups.controlpanel") { ?#gtSELECTED #lt? } ?#gtVALUE="users-groups.controlpanel"#gt#lt?=$lng['acp']['acp_jump']['10']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($a == "time-automation.controlpanel") { ?#gtSELECTED #lt? } ?#gtVALUE="time-automation.controlpanel"#gt#lt?=$lng['acp']['acp_jump']['01']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($a == "pm.controlpanel") { ?#gtSELECTED #lt? } ?#gtVALUE="pm.controlpanel"#gt#lt?=$lng['acp']['acp_jump']['03']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($a == "titles-pips.controlpanel") { ?#gtSELECTED #lt? } ?#gtVALUE="titles-pips.controlpanel"#gt#lt?=$lng['acp']['acp_jump']['08']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($a == "updates.controlpanel") { ?#gtSELECTED #lt? } ?#gtVALUE="updates.controlpanel"#gt#lt?=$lng['acp']['acp_jump']['07']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($a == "customizations.controlpanel") { ?#gtSELECTED #lt? } ?#gtVALUE="customizations.controlpanel"#gt#lt?=$lng['acp']['acp_jump']['04']?#gt#lt/OPTION#gt
	#ltOPTION #lt? if ($a == "admin.controlpanel") { ?#gtSELECTED #lt? } ?#gtVALUE="admin.controlpanel"#gt#lt?=$lng['misc']['acp_main']?#gt#lt/OPTION#gt
	#ltOPTION VALUE="main"#gt#lt?=$lng['misc']['forum_main']?#gt#lt/OPTION#gt
#lt/SELECT#gt
#lt?=$gobutton?#gt
#lt/FORM#gt#lt/CENTER#gt#lt/SPAN#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/TABLE#gt
#lt?
	}

}

	$this-#gtextenders['acp'] = new acp;

?#gt";}i:90;a:2:{i:0;s:25:"lib/sublib/member.ext.php";i:1;s:14410:"#lt?

class member extends flatfile {

	function member () {
		$this-#gtsetdb();
	}

	function quicklogin ($lng) {
		$this-#gtlng = $lng;
		$loggedn = false;
		global $username, $password;
		$user = $this-#gtfindselect($this-#gtdb['users'], $username);
		if ($user == 0) {
			$message = $this-#gtlng['member']['iu'];
		} elseif ($user[23] == "PENDING") {
			$message = $this-#gtlng['member']['ad'];
		} elseif ($user[2] != md5($password)) {
			$message = $this-#gtlng['member']['ip'];
		} elseif ($user[10] == "disabled") {
			$message = $this-#gtlng['member']['ad'];
		} else {
			setcookie("cuser", $username, time()+172800);
			setcookie("cpass", md5($password), time()+172800);
			$where = $this-#gtselectwhere($this-#gtdb['online'], 3, $GLOBALS['REMOTE_ADDR']);
			$this-#gtdelete($this-#gtdb['online'], $where[0][0]);
			$message = $this-#gtlng['member']['li'];
			$loggedn = true;
			$this-#gtwritefiles($this-#gtdb['online']);
		}
		return array($loggedn, $message);
	}

	function get_members_by ($criteria, $key) {
		list($a_users, $p_users) = $this-#gtselectwhereNOT("data/users.php", 23, "PENDING", true);
		if (count($p_users) #gt 0) {
			foreach ($p_users as $p_user) {
				if (($p_user[22] #lt (time()-1209600)) && $p_user[23] == "PENDING") {
					$this-#gtdelete("data/users.php", $p_user[0]);
				}
			}
		}
		if ($criteria == "letter") {
			$users = $this-#gtselectwhere_byletter("data/users.php", 1, $key);
		} elseif ($criteria == "posts") {
			$users = $this-#gtselectsort("data/users.php", 11);
			$users = array_reverse($users);
		} elseif ($criteria == "username") {
			$users = $this-#gtselectsort("data/users.php", 1);
		} elseif ($criteria == "group") {
			$users = $this-#gtselectwhere("data/users.php", 3, $key);
		} else {
			$users = $this-#gtselectall("data/users.php");
		}
		if ($users == 0) {
			$users = array();
		} elseif (count($users) == 0) {
			$users = array();
		}
		return $users;
	}

	function perms ($group, $lng, $administra=false) {
		$this-#gtlng = $lng;
		$group = $this-#gtselect("data/groups.php", $group);
		$i = 0;
		$permissions = array();
		foreach ($group as $permission) {
			$p = false;
			if ($permission == 1) { $p = true; }
			if ($permission == 2) { $p = true; }
			if ($administra == true) { $p = true; }
			if (($i #gt 1) && $p) {
				if ($i == 2) {
					$permissions[0] = $this-#gtlng['member']['ablity_post'];
				} elseif ($i == 3) {
					$permissions[1] = $this-#gtlng['member']['ablity_repl'];
				} elseif ($i == 4) {
					$permissions[3] = $this-#gtlng['member']['ablity_edit'];
				} elseif ($i == 5) {
					$permissions[3] = $this-#gtlng['member']['ablity_edia'];
				} elseif ($i == 6) {
					$permissions[4] = $this-#gtlng['member']['ablity_dele'];
				} elseif ($i == 7) {
					$permissions[4] = $this-#gtlng['member']['ablity_dela'];
				} elseif ($i == 8) {
					$permissions[5] = $this-#gtlng['member']['ablity_delt'];
				} elseif ($i == 9) {
					$permissions[5] = $this-#gtlng['member']['ablity_deta'];
				} elseif ($i == 10) {
					$permissions[6] = $this-#gtlng['member']['ablity_clos'];
				} elseif ($i == 11) {
					$permissions[6] = $this-#gtlng['member']['ablity_cloa'];
				} elseif ($i == 12) {
					$permissions[7] = $this-#gtlng['member']['ablity_move'];
				} elseif ($i == 13) {
					$permissions[7] = $this-#gtlng['member']['ablity_mova'];
				} elseif (($i == 14) && ($permission == 1 #12#12 $administra)) {
					$permissions[8] = $this-#gtlng['member']['ablity_aacp'];
				} elseif (($i == 14) && ($permission == 2)) {
					$permissions[8] = $this-#gtlng['member']['ablity_modf'];
				} elseif ($i == 15) {
					$permissions[9] = $this-#gtlng['member']['ablity_sndp'];
				}
			}
			$i++;
		}
		return $permissions;
	}
	
	function activate2 ($user, $button, $lng) {
		$this-#gtlng = $lng;
		global $password, $password2;
		if ($password == $password2) {
			$user[2] = md5($password);
			$this-#gtupdate("data/users.php", $user[0], $user);
			$this-#gtwritefiles();
			$this-#gtsaveinfo1($user, $button, $lng);
		} else {
			$this-#gtmessage = #lt#lt#ltTXT
	 #ltTR#gt
	  #ltTD COLSPAN=2 CLASS="ctable2"#gt{$this-#gtlng['member']['asd']}#lt/TD#gt
	 #lt/TR#gt

TXT;
			$this-#gtactivate($user, $button, $lng);
		}
	}
	
	function editprofile ($user, $button, $lng, $uset) {
		$this-#gtuser = $user;
		$this-#gtlng = $lng;
		?#gt
		#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
		#ltFORM ACTION="ucp.php" METHOD="post" NAME='profile'#gt
		#ltINPUT TYPE="hidden" NAME="type" VALUE="profile2"#gt
		 #ltTR#gt
		  #ltTD COLSPAN=2 CLASS="category" ALIGN="center"#gt#lt?=$this-#gtlng['nav']['edt']?#gt#lt/TD#gt
		 #lt/TR#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable2" WIDTH=150#gt#lt?=$this-#gtlng['member']['logged']?#gt#lt/TD#gt
		  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtuser[1]?#gt#lt/TD#gt
		 #lt/TR#gt
	#lt?
			if ($uset == true) {
				if (empty($this-#gtuser[15])) {
					$title = "Member";
				} else {
					$title = $this-#gtuser[15];
				}
	?#gt	 #ltTR#gt
		  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['misc']['yct']?#gt:#lt/TD#gt
		  #ltTD CLASS="ctable1" VALIGN="top"#gt#ltSPAN CLASS="small"#gt#lt?=$this-#gtlng['misc']['aut']?#gt#lt/SPAN#gt#ltBR#gt
		#ltINPUT SIZE=30 MAXSIZE=60 NAME="title" VALUE="#lt?=$title?#gt"#gt#lt/TD#gt
		 #lt/TR#gt#lt?
			}
	?#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['member']['new_pw']?#gt#lt/TD#gt
		  #ltTD CLASS="ctable1"#gt#ltA HREF="index.php#lt?=$this-#gts?#gta=member&type=changepass1" TARGET="_blank"#gtChange Password#lt/A#gt#lt/TD#gt
		 #lt/TR#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['member']['location']?#gt#lt/TD#gt
		  #ltTD CLASS="ctable1"#gt#ltINPUT SIZE=30 MAXSIZE=60 NAME="location" VALUE="#lt?=$this-#gtuser[5]?#gt"#gt#lt/TD#gt
		 #lt/TR#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable2" WIDTH=150#gt#lt?=$this-#gtlng['member']['web_page']?#gt#lt/TD#gt
		  #ltTD CLASS="ctable2"#gt#ltINPUT SIZE=30 MAXSIZE=80 NAME="webpage" VALUE="#lt?=$this-#gtuser[13]?#gt"#gt#lt/TD#gt
		 #lt/TR#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable1" WIDTH=150#gtAIM:#lt/TD#gt
		  #ltTD CLASS="ctable1"#gt#ltINPUT NAME="aim" MAXSIZE=35 VALUE="#lt?=$this-#gtuser[6]?#gt"#gt#lt/TD#gt
		 #lt/TR#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable2" WIDTH=150#gtMSN:#lt/TD#gt
		  #ltTD CLASS="ctable2"#gt#ltINPUT NAME="msn" MAXSIZE=60 VALUE="#lt?=$this-#gtuser[7]?#gt"#gt#lt/TD#gt
		 #lt/TR#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable1" WIDTH=150#gtYIM:#lt/TD#gt
		  #ltTD CLASS="ctable1"#gt#ltINPUT NAME="yim" MAXSIZE=35 VALUE="#lt?=$this-#gtuser[8]?#gt"#gt#lt/TD#gt
		 #lt/TR#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable2" WIDTH=150#gtICQ:#lt/TD#gt
		  #ltTD CLASS="ctable2"#gt#ltINPUT NAME="icq" MAXSIZE=35 VALUE="#lt?=$this-#gtuser[9]?#gt"#gt#lt/TD#gt
		 #lt/TR#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable2" WIDTH=150#gt#lt?=$this-#gtlng['member']['hidemail']?#gt#lt/TD#gt
		  #ltTD CLASS="ctable2"#gt#ltSELECT NAME="hidemail"#gt
		    #ltOPTION VALUE="1" STYLE="color: green;" #lt? if ($this-#gtuser[16] == "1") {echo "SELECTED";} ?#gt#gt#lt?=$this-#gtlng['misc']['yes']?#gt#lt/OPTION#gt
		    #ltOPTION VALUE="0" STYLE="color: red;" #lt? if ($this-#gtuser[16] == "0") {echo "SELECTED";} ?#gt#gt#lt?=$this-#gtlng['misc']['no']?#gt#lt/OPTION#gt
		   #lt/SELECT#gt#lt/TD#gt
		 #lt/TR#gt
		 #ltTR#gt
		  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['ucp']['006']?#gt:#ltBR#gt#lt? if ($this-#gtuser[14] == "") { ?#gt#ltB#gt#lt?=$this-#gtlng['ucp']['007']?#gt#lt/B#gt#lt? } else { ?#gt#ltIMG NAME="avatarimg" SRC="#lt?=$this-#gtuser[14]?#gt"#gt#lt? } ?#gt#lt/TD#gt
		  #ltTD CLASS="ctable1"#gtURL:#ltINPUT SIZE=30 MAXSIZE=90 NAME="avatar" VALUE="#lt?=$this-#gtuser[14]?#gt"#gt#ltBR#gt
		  Select: 
			#ltDIV HEIGHT="80" WIDTH="100%" STYLE="overflow: scroll; height: 120; width: 100%;"#gt
			 #ltCENTER#gt
	#lt?
		$forumdir = "images/avatars/";
		if ($handle = opendir($forumdir)) {
			while (false !== ($file = readdir($handle))) {
				if (strstr($file,"gif") #12#12 strstr($file,"p") #12#12 strstr($file,"raw") #12#12 strstr($file,"tif") #12#12 strstr($file,"sct")) {
				if (($file != ".") && ($file != "..") && ($file != "...")) {
	?#gt		  #ltIMG SRC="images/avatars/#lt?=$file?#gt" onClick="profile.avatar.value='images/avatars/#lt?=$file?#gt'; profile.avatarimg.src='images/avatars/#lt?=$file?#gt';"#gt#lt?
				}
				}
			}
			closedir($handle); 
		}
	?#gt		  #ltIMG SRC="images/noavatar.gif" onClick="profile.avatar.value=''; profile.avatarimg.src='images/spacer.gif';"#gt
			 #lt/CENTER#gt
			#lt/DIV#gt
		  #lt/TD#gt
		 #lt/TR#gt
		 #ltTR#gt
		  #ltTD COLSPAN=2 ALIGN=center CLASS="ctable1"#gt#lt?=$button?#gt#lt/TD#gt
		 #lt/TR#gt
		#lt/FORM#gt
		#lt/TABLE#gt
		#lt?
	}
	
	function activate ($user, $button, $lng) {
		$this-#gtlng = $lng;
?#gt
	#ltTABLE ALIGN=center WIDTH=400 CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	#ltFORM ACTION="index.php" METHOD="post"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="member"#gt
	#ltINPUT TYPE="hidden" NAME="type" VALUE="activate2"#gt
	 #ltTR#gt
	  #ltTD CLASS="category" COLSPAN="2" ALIGN="center"#gt#lt?=$this-#gtlng['toplinks']['register']?#gt#lt/TD#gt
	 #lt/TR#gt#lt?=$this-#gtmessage?#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2"#gt#lt?=$this-#gtlng['member']['pw']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#ltINPUT SIZE=30 NAME="password" TYPE="password"#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1"#gt#lt?=$this-#gtlng['member']['pag']?#gt:#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#ltINPUT SIZE=30 NAME="password2" TYPE="password"#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD COLSPAN=2 ALIGN=center CLASS="ctable1"#gt#lt?=$button?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/FORM#gt
	#lt/TABLE#gt
#lt?
	}

	function saveinfo2 ($user, $lng) {
		$this-#gtlng = $lng;
		global $timezone, $location, $webpage, $aim, $signature, $about;
		$user[5] = $this-#gtinputize($location, 60);
		$user[6] = $this-#gtinputize($aim, 35);
		$user[12] = $this-#gtinputize($signature, 450);
		$user[13] = $this-#gtinputize($webpage, 80);
		$user[21] = $this-#gtinputize($about, 1000);
		$user[17] = $this-#gtinputize($timezone*3600, 60);
		$user[23] = 1;
		$this-#gtupdate("data/users.php", $user[0], $user);
		$this-#gtwritefiles();
	}

	function saveinfo1 ($user, $button, $lng) {
		$this-#gtlng = $lng;
?#gt
	#ltTABLE ALIGN=center WIDTH=100% CELLPADDING=2 CELLSPACING=1 CLASS="bordertable"#gt
	#ltFORM ACTION="index.php" METHOD="post"#gt
	#ltINPUT TYPE="hidden" NAME="a" VALUE="member"#gt
	#ltINPUT TYPE="hidden" NAME="type" VALUE="saveinfo2"#gt
     #ltTR#gt
	  #ltTD COLSPAN=2 CLASS="category" ALIGN="center"#gt#lt?=$this-#gtlng['member']['your_info']?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['member']['logged']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#lt?=$user[1]?#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['member']['tz']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt
		#ltSELECT NAME="timezone"#gt
		#ltOPTION VALUE="-12"#gt(GMT -12) Eniwetok#lt/OPTION#gt
		#ltOPTION VALUE="-11"#gt(GMT -11) Midway, Samoa#lt/OPTION#gt
		#ltOPTION VALUE="-10"#gt(GMT -10) Hawaii#lt/OPTION#gt
		#ltOPTION VALUE="-9"#gt(GMT -9) Alaska#lt/OPTION#gt
		#ltOPTION VALUE="-8"#gt(GMT -8) Pacific (US/Canada)#lt/OPTION#gt
		#ltOPTION VALUE="-7"#gt(GMT -7) Mountain (US/Canada)#lt/OPTION#gt
		#ltOPTION VALUE="-6"#gt(GMT -6) Central (US/Canada), Mexico City#lt/OPTION#gt
		#ltOPTION VALUE="-5"#gt(GMT -5) Eastern Standard (US/Canada), Bogota, Lima, Quito#lt/OPTION#gt
		#ltOPTION VALUE="-4"#gt(GMT -4) Atlantic Time (Canada), Caracas, La Paz#lt/OPTION#gt
		#ltOPTION VALUE="-3.5"#gt(GMT -3:30) Newfoundland#lt/OPTION#gt
		#ltOPTION VALUE="-3"#gt(GMT -3) Newfoundland#lt/OPTION#gt
		#ltOPTION VALUE="-2"#gt(GMT -2) Brazil, Buenos Aires, Georgetown#lt/OPTION#gt
		#ltOPTION VALUE="-1"#gt(GMT -1) Azores, Cape Verde Islands#lt/OPTION#gt
		#ltOPTION VALUE="+0"SELECTED#gt(GMT) London, Lisbon, Casablanca, Monrovia#lt/OPTION#gt
		#ltOPTION VALUE="+1"#gt(GMT +1) CET Brussels, Copenhagen, Madrid, Paris#lt/OPTION#gt
		#ltOPTION VALUE="+2"#gt(GMT +2) EET Kaliningrad, South Africa#lt/OPTION#gt
		#ltOPTION VALUE="+3"#gt(GMT +3) Baghdad, Kuwait, Riyadh, Moscow, St. Petersburg, Volgograd, Nairobi#lt/OPTION#gt
		#ltOPTION VALUE="+3.5"#gt(GMT +3:30) Tehran#lt/OPTION#gt
		#ltOPTION VALUE="+4"#gt(GMT +4) Abu Dhabi, Muscat, Baku, Tbilisi#lt/OPTION#gt
		#ltOPTION VALUE="+4.5"#gt(GMT +4:30) Kabul#lt/OPTION#gt
		#ltOPTION VALUE="+5"#gt(GMT +5) Ekaterinburg, Islamabad, Karachi, Tashkent#lt/OPTION#gt
		#ltOPTION VALUE="+5.5"#gt(GMT +5:30) Bombay, Calcutta, Madras, New Delhi#lt/OPTION#gt
		#ltOPTION VALUE="+6"#gt(GMT +6) Almaty, Dhaka, Colombo#lt/OPTION#gt
		#ltOPTION VALUE="+7"#gt(GMT +7) Bangkok, Hanoi, Jakarta#lt/OPTION#gt
		#ltOPTION VALUE="+8"#gt(GMT +8) Beijing, Perth, Singapore, Hong Kong, Chongqing, Urumqi, Taipei#lt/OPTION#gt
		#ltOPTION VALUE="+9"#gt(GMT +9) Tokyo, Seoul, Osaka, Sapporo, Yakutsk#lt/OPTION#gt
		#ltOPTION VALUE="+9.5"#gt(GMT +9:30) Tokyo, Seoul, Osaka, Sapporo, Yakutsk#lt/OPTION#gt
		#ltOPTION VALUE="+10"#gt(GMT +10) Adelaide, Darwin#lt/OPTION#gt
		#ltOPTION VALUE="+11"#gt(GMT +11) EAST (East Australian Standard), Guam, Papua New Guinea, Vladivostok#lt/OPTION#gt
		#ltOPTION VALUE="+12"#gt(GMT +12) Auckland, Wellington, Fiji, Kamchatka, Marshall Island#lt/OPTION#gt
		#lt/SELECT#gt
	  #lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH=150#gt#lt?=$this-#gtlng['member']['location']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#ltINPUT SIZE=30 MAXSIZE=60 NAME="location" VALUE=""#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable1" WIDTH=150#gt#lt?=$this-#gtlng['member']['web_page']?#gt#lt/TD#gt
	  #ltTD CLASS="ctable1"#gt#ltINPUT SIZE=30 MAXSIZE=80 NAME="webpage" VALUE=""#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD CLASS="ctable2" WIDTH=150#gtAIM:#lt/TD#gt
	  #ltTD CLASS="ctable2"#gt#ltINPUT NAME="aim" MAXSIZE=35 VALUE=""#gt#lt/TD#gt
	 #lt/TR#gt
	 #ltTR#gt
	  #ltTD COLSPAN=2 ALIGN=center CLASS="ctable1"#gt#lt?=$button?#gt#lt/TD#gt
	 #lt/TR#gt
	#lt/FORM#gt
	#lt/TABLE#gt
#lt?
	}
}

	$this-#gtextenders['member'] = new member;

?#gt";}i:91;a:2:{i:0;s:27:"lib/sublib/register.ext.php";i:1;s:7212:"#lt?

class register extends flatfile {

	function register () {
		$this-#gtsetdb();
	}

	function register_session ($user) {
		global $HTTP_SERVER_VARS;
		$this-#gtuser = $user;
		if (phpversion() #lt 4.2) {
			$uris = explode("/", $_SERVER['REQUEST_URI']);
			foreach($uris as $ui) {
				$this-#gturi = $ui;
			}
			$session = $this-#gtrsold();
		} else {
			$uris = explode("/", $HTTP_SERVER_VARS['REQUEST_URI']);
			foreach($uris as $ui) {
				$this-#gturi = $ui;
			}
			$session = $this-#gtrsnew();
		}
		$this-#gtSID = $session;
		$this-#gtarchive_old_session($this-#gtuser[1]);

		$this-#gtwritefiles($this-#gtdb['sessions']);
		return $session;
	}
	
	
	function rsnew () {
		if (isset($_COOKIE['SID']) && !empty($_COOKIE['SID'])) {
			$user_SID = $_COOKIE['SID'];
			$sessiondb = $this-#gtfindselect($this-#gtdb['sessions'], $user_SID);
			if ($this-#gtfindselect($this-#gtdb['sessions'], $user_SID, true) == 0) {
				$user_SID = $this-#gtset_new_session();
			} elseif ($GLOBALS['REMOTE_ADDR'] != $_COOKIE['session_ip']) {
				$user_SID = $this-#gtset_new_session();
			}
			$sessiondb = $this-#gtfindselect($this-#gtdb['sessions'], $user_SID);
		} else {
			$user_SID = $this-#gtset_new_session();
			$sessiondb = $this-#gtfindselect($this-#gtdb['sessions'], $user_SID);
		}

		$session_id = $user_SID;
		$session_us = $this-#gtuser[1];
		$session_ip = $GLOBALS['REMOTE_ADDR'];
		$session_st = $sessiondb[4];
		$session_en = time();
		$session_rh = $GLOBALS['REMOTE_HOST'];

		$sessiondb[2] = $this-#gtuser[1];
		$sessiondb[5] = time();
		if (count($sessiondb) #lt 8) {
			for ($i=0;( $i #lt= 10 );$i++) {
				array_push($sessiondb, NULL);
			}
		}
		$sessiondb[6] = $this-#gturi;
		$this-#gtupdate($this-#gtdb['sessions'], $sessiondb[0], $sessiondb);
		
		if (empty($_COOKIE['SID'])) {
			setcookie('SID', $session_id, time()+2592000);
		}
		if (empty($_COOKIE['session_us'])) {
			setcookie('session_us', $session_us, time()+2592000);
		}
		if (empty($_COOKIE['session_ip'])) {
			setcookie('session_ip', $session_ip, time()+2592000);
		}
		
		return $user_SID;
	}
	
	
	function rsold () {
		global $HTTP_COOKIE_VARS;
		if (isset($HTTP_COOKIE_VARS['SID']) && !empty($HTTP_COOKIE_VARS['SID'])) {
			$user_SID = $HTTP_COOKIE_VARS['SID'];
			$sessiondb = $this-#gtfindselect($this-#gtdb['sessions'], $user_SID);
			if ($this-#gtfindselect($this-#gtdb['sessions'], $user_SID, true) == 0) {
				$user_SID = $this-#gtset_new_session();
			} elseif ($GLOBALS['REMOTE_ADDR'] != $HTTP_COOKIE_VARS['session_ip']) {
				$user_SID = $this-#gtset_new_session();
			}
			$sessiondb = $this-#gtfindselect($this-#gtdb['sessions'], $user_SID);
		} else {
			$user_SID = $this-#gtset_new_session();
			$sessiondb = $this-#gtfindselect($this-#gtdb['sessions'], $user_SID);
		}

		$session_id = $user_SID;
		$session_us = $this-#gtuser[1];
		$session_ip = $GLOBALS['REMOTE_ADDR'];
		$session_st = $sessiondb[4];
		$session_en = time();
		$session_rh = $GLOBALS['REMOTE_HOST'];

		$sessiondb[2] = $this-#gtuser[1];
		$sessiondb[5] = time();
		if (count($sessiondb) #lt 8) {
			for ($i=0;( $i #lt= 10 );$i++) {
				array_push($sessiondb, NULL);
			}
		}
		$sessiondb[6] = $this-#gturi;
		$this-#gtupdate($this-#gtdb['sessions'], $sessiondb[0], $sessiondb);
		
		if (empty($HTTP_COOKIE_VARS['SID'])) {
			setcookie('SID', $session_id, time()+2592000);
		}
		if (empty($HTTP_COOKIE_VARS['session_us'])) {
			setcookie('session_us', $session_us, time()+2592000);
		}
		if (empty($HTTP_COOKIE_VARS['session_ip'])) {
			setcookie('session_ip', $session_ip, time()+2592000);
		}
		
		return $user_SID;
	}
	
	
	function set_new_session () {
		$where = $this-#gtselectwhere($this-#gtdb['sessions'], 2, $GLOBALS['REMOTE_ADDR']);
		if (count($where) #gt 0) {
			return $where[0][1];
		}
		for ($increment=0;($increment#lt5 && $found==0);$increment++) {
			$found = 0;
			$i = array();
			$dir = "data/sessions/";
			if ($handle = opendir($dir)) {
				while (false !== ($file = readdir($handle))) {
					if (($file != ".") && ($file != "..") && ($file != "...")) {
						array_push($i, $file);
					}
				}
				closedir($handle); 
			}
			@krsort($i);
			@reset($i);
			$file = "data/sessions/" . $i[$increment];
			if (file_exists($file)) {
				$where = $this-#gtselectwhere($file, 2, $GLOBALS['REMOTE_ADDR']);
				if (count($where) #gt 0) {
					return $where[0][1];
				}
			}	
		}
		$start = time();
		$end = time();

		$session_id = md5($this-#gtgenstr(32));
		$session_us = $this-#gtuser[1];
		$session_ip = $GLOBALS['REMOTE_ADDR'];
		$session_st = $start;
		$session_en = $end;
		$session_rh = $GLOBALS['REMOTE_HOST'];
		
		setcookie('SID', $session_id, time()+2592000);
		setcookie('session_us', $session_us, time()+2592000);
		setcookie('session_ip', $session_ip, time()+2592000);
		setcookie('session_st', $session_st, time()+2592000);
		setcookie('session_en', $session_en, time()+2592000);
		setcookie('session_rh', $session_rh, time()+2592000);
		
		$session = array($session_id, $session_us, $session_ip, $session_st, $session_en, $session_rh, $this-#gturi);
		$this-#gtinsert($this-#gtdb['sessions'], $session);
		return $session_id;
	}
	
	
	function archive_old_session ($username) {
		global $HTTP_COOKIE_VARS, $HTTP_GET_VARS, $HTTP_POST_VARS;
		$this-#gtis_called['archive_old_session'] = true;
		$where = $this-#gtselectwhere($this-#gtdb['online'], 5, $username);
		if ($where[0][0] != 0) {
			foreach ($where as $at) {
				$this-#gtdelete($this-#gtdb['online'], $at[0]);
			}
		}
		$active_sessions = $this-#gtselectwhere($this-#gtdb['sessions'], 2, $username);
		$archived_ip = $this-#gtselectwhere($this-#gtdb['session_archive'], 3, $GLOBALS['REMOTE_ADDR']);
		if ($active_sessions[0][0] != 0) {
			foreach ($active_sessions as $session) {
				if ($session[1] != $this-#gtSID) {
					$this-#gtdelete($this-#gtdb['sessions'], $session[0]);
					array_shift($session);
					if ($archived_ip[0][0] != 0) {
						$session = array($session[0], "SYS/REDIR ".$archived_ip[0][0]);
					}
					$this-#gtinsert($this-#gtdb['session_archive'], $session);
				}
			}
		}
		$arc_sessions = $this-#gtselectall($this-#gtdb['session_archive']);
		$this-#gtwritefiles($this-#gtdb['sessions']);
		if (count($arc_sessions) #gt 50) {
			if (!file_exists("data/sessions/")) { mkdir("data/sessions/", 0777); }
			$newarchive = "data/sessions/archive_".time().".php";
			copy ("data/sessions/blank_archive.php", $newarchive);
			chmod ($newarchive, 0777);
			$this-#gtclear($this-#gtdb['session_archive']);
			$this-#gtupdatefile($newarchive, $arc_sessions);
			$this-#gtwritefiles($newarchive);
		}
		$this-#gtwritefiles($this-#gtdb['session_archive']);
		$this-#gtwritefiles($this-#gtdb['online']);
	}

	function get_pin ($settings, $sid) {
		return false;
	}
}

	$this-#gtextenders['register'] = new register;
	$this-#gtses_id = $this-#gtextenders['register']-#gtregister_session($this-#gtuser);
	//$this-#gtadministrator = $this-#gtextenders['register']-#gtget_pin($this-#gtsettings, $this-#gtses_id);

?#gt";}i:92;a:2:{i:0;s:22:"lib/sublib/ban.ext.php";i:1;s:4353:"#lt?

class ban EXTENDS flatfile {

	function ban () {
		$this-#gtsetdb();
	}
	
	function is_banned ($user, $settings) {
		global $HTTP_COOKIE_VARS;
		$this-#gtuser = $user;
		$this-#gtsettings = $settings;
		$banned = 0;
		$usernames = $this-#gtselectwhere($this-#gtdb['banned'], 2, "un");
		$ipaddresses = $this-#gtselectwhere($this-#gtdb['banned'], 2, "ip");
		$sessionids = $this-#gtselectwhere($this-#gtdb['banned'], 2, "id");
		if ($usernames != 0) {
			foreach ($usernames as $user) {
				if ($this-#gtuser[1] == $user[1] && $user[1] != "Guest") {
					$banned = 1;
				}
			}
		}
		if ($ipaddresses != 0) {
			foreach ($ipaddresses as $ip) {
				if ($GLOBALS['REMOTE_ADDR'] == $ip[1]) {
					$banned = 1;
				}
			}
		}
		if ($sessionids != 0) {
			foreach ($sessionids as $id) {
				if ($HTTP_COOKIE_VARS['SID'] == $id[1]) {
					$banned = 1;
				}
			}
		}
		if (($banned == 1) && ($this-#gtuser[0] != $this-#gtsettings['admin_mem_id'])) {
			return 1;
		}
		return 0;
	}
	
	function ban_session ($sessionarray) {
		$session = $sessionarray;
		$banipaddrs = array($session[3], "ip");
		$banusernam = array($session[2], "un");
		$bansession = array($session[1], "id");
		$this-#gtinsert($this-#gtdb['banned'], $banipaddrs);
		$this-#gtinsert($this-#gtdb['banned'], $banusernam);
		$this-#gtinsert($this-#gtdb['banned'], $bansession);
		$this-#gtwritefiles();
		return $session[2];
	}

	function do_ban ($sessionid="", $username="", $ip="", $userid="") {
		$found = 0;
		$file = $this-#gtdb['sessions'];
		if (!empty($userid)) {
			$user = $this-#gtselect($this-#gtdb['users'], $userid);
			$session = $this-#gtselectwhere($file, 2, $user[1]);
			$session_a = $this-#gtselectwhere($this-#gtdb['session_archive'], 2, $user[1]);
		} elseif (!empty($ip)) {
			$session = $this-#gtselectwhere($file, 3, $ip);
			$session_a = $this-#gtselectwhere($this-#gtdb['session_archive'], 3, $ip);
			if (($session_a == 0) && ($session == 0)) {
				$found = 1;
				$banipaddrs = array($ip, "ip");
				$this-#gtinsert($this-#gtdb['banned'], $banipaddrs);
			}
		} elseif (!empty($sessionid)) {
			$session = $this-#gtselectwhere($file, 1, $sessionid);
			$session_a = $this-#gtselectwhere($this-#gtdb['session_archive'], 1, $sessionid);
		} elseif (!empty($username)) {
			$session = $this-#gtselectwhere($file, 2, $username);
			$session_a = $this-#gtselectwhere($this-#gtdb['session_archive'], 2, $username);
		}
		if ($session != 0) {
			$found = 1;
			foreach ($session as $session) {
				$this-#gtban_session($session);
			}
		}
		if ($session_a != 0) {
			$found = 1;
			foreach ($session_a as $session) {
				$this-#gtban_session($session);
			}
		}
		$this-#gtwritefiles();
		if (!found) {
			$i = 0;
			do {
				$found = $this-#gtsuper_ban($sessionid, $username, $ip, $userid, $i);
				$i++;
			} while ( (!$found) && ($i#lt5) );
		} else {
			return $found;
		}
	}

	function super_ban ($sessionid="", $username="", $ip="", $userid="", $increment) {
		$found = 0;
		$i = array();
		$dir = "data/sessions/";
		if ($handle = opendir($dir)) {
			while (false !== ($file = readdir($handle))) {
				if (($file != ".") && ($file != "..") && ($file != "...")) {
					array_push($i, $file);
				}
			}
			closedir($handle); 
		}

		@krsort($i);
		@reset($i);

		$file = "data/sessions/" . $i[$increment];

		if (!empty($userid)) {
			$user = $this-#gtselect($this-#gtdb['users'], $userid);
			$session = $this-#gtselectwhere($file, 2, $user[1]);
		} elseif (!empty($ip)) {
			$session = $this-#gtselectwhere($file, 3, $ip);
			if (($session_a == 0) && ($session == 0)) {
				$found = 1;
				$banipaddrs = array($ip, "ip");
				$this-#gtinsert($this-#gtdb['banned'], $banipaddrs);
			}
		} elseif (!empty($sessionid)) {
			$session = $this-#gtselectwhere($file, 1, $sessionid);
		} elseif (!empty($username)) {
			$session = $this-#gtselectwhere($file, 2, $username);
		}
		if ($session != 0) {
			$found = 1;
			foreach ($session as $session) {
				$this-#gtban_session($session);
			}
		}
		if ($session_a != 0) {
			$found = 1;
			foreach ($session_a as $session) {
				$this-#gtban_session($session);
			}
		}
		$this-#gtwritefiles();
		return $found;
	}

}

	$this-#gtextenders['ban'] = new ban;

?#gt";}i:93;a:2:{i:0;s:25:"lib/sublib/image.tool.php";i:1;s:553:"#lt?

header("Content-type: image/jpeg");

class image {

	function image () {
		global $random_num;
		$datekey = date("F j");
		$rcode = hexdec(md5($_SERVER[HTTP_USER_AGENT] . $sitekey . $random_num . $datekey));
		$code = substr($rcode, 2, 6);
		$image = ImageCreateFromJPEG("code_bg.jpg");
		$text_color = ImageColorAllocate($image, rand(0, 50), rand(50, 100), rand(100, 200));
		ImageString ($image, 5, 12, 2, $code, $text_color);
		ImageJPEG($image, '', 75);
		ImageDestroy($image);
		die();
	}

}

	$image = new image;

?#gt";}i:94;a:2:{i:0;s:24:"lib/sublib/chmod_777.php";i:1;s:1066:"#lt?

class chmod {

function directory ($dir="") {
	$y = 0;
	if (substr($dir, -1) != "/") {
		$dir = $dir."/";
	}
	ini_set("display_errors", 0);
	chmod ($dir, 0777);
	if ($handle = opendir($dir)) {
		while (false !== ($file = readdir($handle))) {
			if (($file != ".") && ($file != "..") && ($file != "...")) {
				if (is_dir($dir.$file)) {
					chmod($dir.$file, 0777);
					$this-#gtqueue($dir.$file);
				} elseif (is_file($dir.$file)) {
					chmod($dir.$file, 0777);
				}
			}
		}
		closedir($handle);
		$y = 1;
	}
	$this-#gtrunqueued();
	return $y;
}

function queue ($dir) {
	if (!isset($this-#gtqueued)) {
		$this-#gtqueued = array();
	}
	if (substr($dir, -1) != "/") {
		$dir = $dir."/";
	}
	array_push($this-#gtqueued, array($dir));
}

function runqueued () {
	if (isset($this-#gtqueued)) {
		foreach ($this-#gtqueued as $queued) {
			$this-#gtdirectory($queued[0]);
		}
	}
}

}

global $d;

$chmod = new chmod;

if ($chmod-#gtdirectory($d)) {
	echo "Success!";
} else {
	echo "Failure!";
}

?#gt";}i:95;a:2:{i:0;s:21:"lib/sublib/index.html";i:1;s:0:"";}i:96;a:2:{i:0;s:18:"updates/index.html";i:1;s:0:"";}}